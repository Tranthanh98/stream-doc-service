(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{k2fN:function(t,e,n){"use strict";n.r(e),n.d(e,"AdminModule",(function(){return Ni}));var i=n("SVse"),o=n("IheW"),a=n("iInd"),s=n("3vOV"),r=n("s7LF"),c=n("BNhx"),l=n("8Y7J"),d=n("VRyK"),p=n("xgIS"),h=n("IzEk"),g=function(t){return t[t.NOT_SELECT=0]="NOT_SELECT",t[t.SET_START=1]="SET_START",t[t.SET_END=2]="SET_END",t}({}),b=function(t){return t.ALL="ALL",t.DAY="DATE_FILTER_DAY",t.WEEK="DATE_FILTER_WEEK",t.MONTH="DATE_FILTER_MONTH",t.YEAR="DATE_FILTER_YEAR",t.CUSTOM="custom",t}({}),u=function(t){return t.PURPOSE_ALL="ALL",t.ADMIN_ACCOUNT="ADMIN",t.SYSTEM_ACCOUNT="REGISTERED",t}({});const f={type:"date",setDayEnd:t=>(t.setHours(23,59,59,999),t),bindConst(t,e){const n={startDate:new Date,endDate:new Date};switch(n.startDate.setHours(0,0,0,0),this.setDayEnd(n.endDate),e){case b.DAY:t[this.type].data=n;break;case b.MONTH:n.startDate.setMonth(n.startDate.getMonth()-1),t[this.type].data=n;break;case b.WEEK:n.startDate.setDate(n.startDate.getDate()-7),t[this.type].data=n;break;case b.YEAR:n.startDate.setFullYear(n.startDate.getFullYear()-1),t[this.type].data=n}return t}};function m(t,e){if(1&t){const t=l.Tb();l.Sb(0,"button",2),l.Zb("click",(function(){return l.uc(t),l.dc().popupChange()})),l.Sb(1,"i",3),l.Zb("click",(function(e){return l.uc(t),l.dc().refresh(e)})),l.Rb(),l.Sb(2,"span"),l.Fc(3),l.ec(4,"translate"),l.Rb(),l.Rb()}if(2&t){const t=l.dc();l.Ab("color",t.isSelected||t.isExistFilter?"primary":"white")("size",t.btSize),l.zb(1),l.jc("ngClass",t.iconStyle),l.zb(2),l.Gc(l.fc(4,4,t.isExistFilter?"FILTERED":"FILTER"))}}function C(t,e){if(1&t&&(l.Sb(0,"label"),l.Fc(1),l.Rb()),2&t){const t=l.dc().$implicit;l.zb(1),l.Gc(t.label)}}function x(t,e){if(1&t){const t=l.Tb();l.Sb(0,"sd-date-dropdown",13),l.Zb("dateChange",(function(e){l.uc(t);const n=l.dc().$implicit;return l.dc(2).customDate(e,n.item[0].value)})),l.Rb()}if(2&t){const t=l.dc().$implicit,e=l.dc(2);l.Db("label-box ",t.type," ",e.formSize,""),l.Eb("selected",e.isActiveFilter("date",t.item[0].value)),l.jc("activeFilter",e.activeFilter)("datePickerDirection",e.datePickerDirection)("startDate",null==e.activeFilter||null==e.activeFilter.date||null==e.activeFilter.date.data?null:e.activeFilter.date.data.startDate)("endDate",null==e.activeFilter||null==e.activeFilter.date||null==e.activeFilter.date.data?null:e.activeFilter.date.data.endDate)("disableNext",!0)("dateFormat",(null==t.options?null:t.options.dateFormat)||"yyyy.MM.dd")}}function O(t,e){1&t&&l.Nb(0,"div")}function M(t,e){if(1&t){const t=l.Tb();l.Sb(0,"pu-dropdown",14),l.Zb("ngModelChange",(function(e){l.uc(t);const n=l.dc().$implicit;return l.dc(2).selectDropdown(n,e)})),l.Rb()}if(2&t){const t=l.dc().$implicit,e=l.dc(2);l.jc("size",e.formSize)("options",t.item)("ngModel",e.currentDropdown(t))("ngStyle",null==t.options?null:t.options.style)}}function _(t,e){if(1&t){const t=l.Tb();l.Sb(0,"button",16),l.Zb("click",(function(){l.uc(t);const n=e.$implicit,i=l.dc(2).$implicit;return l.dc(2).active(i.type,n.value)})),l.Fc(1),l.ec(2,"translate"),l.Rb()}if(2&t){const t=e.$implicit,n=l.dc(2).$implicit,i=l.dc(2);l.Cb("ep-button ",t.value,""),l.Ab("color",i.isActiveFilter(n.type,t.value)?"primary":i.btColor)("size",i.formSize),l.zb(1),l.Gc(l.fc(2,6,t.label))}}function P(t,e){if(1&t&&(l.Sb(0,"div"),l.Dc(1,_,3,8,"button",15),l.Rb()),2&t){const t=l.dc().$implicit;l.Cb("selectable-list ",t.type,""),l.zb(1),l.jc("ngForOf",t.item)}}function y(t,e){if(1&t&&(l.Sb(0,"div",7),l.Dc(1,C,2,1,"label",8),l.Dc(2,x,1,12,"sd-date-dropdown",9),l.Dc(3,O,1,0,"div",10),l.Dc(4,M,1,4,"pu-dropdown",11),l.Dc(5,P,2,4,"div",12),l.Rb()),2&t){const t=e.$implicit,n=l.dc(2);l.Cb("field ",t.type,""),l.jc("ngSwitch",t.type),l.zb(1),l.jc("ngIf",!n.elClassList.contains("no-label")&&!!t.label),l.zb(1),l.jc("ngSwitchCase","custom-date"),l.zb(1),l.jc("ngSwitchCase","vr"),l.zb(1),l.jc("ngSwitchCase","dropdown")}}function v(t,e){if(1&t){const t=l.Tb();l.Sb(0,"button",17),l.Zb("click",(function(){return l.uc(t),l.dc(2).popupChange()})),l.Fc(1),l.ec(2,"translate"),l.Rb()}if(2&t){const t=l.dc(2);l.Ab("size",t.btSize||"tiny"),l.zb(1),l.Gc(l.fc(2,2,"CLOSE"))}}function S(t,e){if(1&t&&(l.Sb(0,"div",4),l.Dc(1,y,6,8,"div",5),l.Dc(2,v,3,4,"button",6),l.Rb()),2&t){const t=l.dc();l.zb(1),l.jc("ngForOf",t.filterMenus),l.zb(1),l.jc("ngIf",!t.dock)}}let D=(()=>{class t{constructor(t,e,n,i){this.ngControl=t,this.changeDetectorRef=e,this.elRef=n,this.fb=i,this.filterMenus=[],this.deactive=!0,this.activeFilter={},this.datePickerDirection="left",this.activeFilterChange=new l.n,this.isSelected=!1,this.menuSubs=[],this.btColor="grey",this.dock=!1,this.btSize="small",this.formSize="small",this.visibleYearSelector=!1,this.yearDesc="",this.avcChanger=t=>t,this.ngControl&&(this.ngControl.valueAccessor=this)}get isExistFilter(){return 0!==Object.keys(this.activeFilter).length}get iconStyle(){return{"papycon-funnel":!this.isExistFilter,"papycon-cross":this.isExistFilter}}get yearPeriodFc(){return this._yearPeriodFc||(this._yearPeriodFc=this.fb.group({from:[this.yearOptions[this.yearOptions.length-1]],to:[this.yearOptions[this.yearOptions.length-1]]})),this._yearPeriodFc}get yearOptions(){return this._yearOptions}hostMouseDown(t){t.stopImmediatePropagation(),t.stopPropagation()}ngOnInit(){const{classList:t}=this.elRef.nativeElement;this.elClassList=t,this.dock=t.contains("dock"),this.isSelected=this.dock;const e=this.filterMenus.filter(t=>t.defaultValues);e.length>0&&e.forEach(t=>{t.defaultValues.forEach(e=>{this.active(t.type,e)})}),t.contains("button-color-dflt")&&(this.btColor="white"),t.contains("small")&&(this.btSize="small"),t.contains("form-small")&&(this.formSize="small")}ngOnChanges(t){var e,n;(null===(e=t.activeFilter)||void 0===e?void 0:e.currentValue.date)?this.buildConstDateFilter(t.activeFilter.currentValue.date.value[0]):(null===(n=t.activeFilter)||void 0===n?void 0:n.currentValue.status)&&this.emit()}refresh(t){return!this.isExistFilter||(this.activeFilter={},this.emit(),Boolean(t)&&t.stopPropagation(),!1)}customDate(t,e){t.status===g.SET_START&&(this.activeFilter.date={value:[b.CUSTOM]}),this.activeFilter.date.data={startDate:new Date(t.startDate),endDate:new Date(t.endDate)},f.setDayEnd(this.activeFilter.date.data.endDate),t.status===g.SET_END&&this.emit()}active(t,e){var n;this.toggleYearSelector(!0);const i=this.filterMenus.find(e=>e.type===t);void 0!==i&&(this.deactive&&(null===(n=this.activeFilter[t])||void 0===n?void 0:n.value.find(t=>t===e))?this.activeFilter[t].value=this.activeFilter[t].value.filter(t=>t!==e):this.activeFilter[t]=i.isMulti&&this.activeFilter[t]?{value:[...this.activeFilter[t].value,e]}:{value:[e]},this.isAllValue(e)||0===this.activeFilter[t].value.length?delete this.activeFilter[t]:this.buildConstDateFilter(e),this.emit())}isActiveFilter(t,e){var n;return Boolean(null===(n=this.activeFilter[t])||void 0===n?void 0:n.value.find(t=>t===e))||this.isAllValue(e)&&!this.activeFilter[t]}popupChange(){this.isSelected=!this.isSelected,this.isSelected?this.menuSubs.push(d.a(p.a(window,"mousedown"),p.a(window,"touchstart")).pipe(h.a(1)).subscribe({next:t=>{this.popupChange()}})):(this.menuSubs.forEach(t=>t.unsubscribe()),this.menuSubs=[]),this.changeDetectorRef.markForCheck()}toggleYearSelector(t=!1){this.visibleYearSelector=!t&&!this.visibleYearSelector}activeYear(){this.toggleYearSelector(!0);let{from:{value:t},to:{value:e}}=this.yearPeriodFc.value;e<t&&([t,e]=[e,t]),this.yearDesc=`${t} - ${e}`,this.emit()}deactiveYear(t){t.stopPropagation(),this.active("date",this.filterMenus[0].item[0].value)}currentDropdown(t){var e;const n=null===(e=this.activeFilter[t.key||t.type])||void 0===e?void 0:e.value;return n&&void 0!==n[0]&&t.item.find(t=>t.value===n[0].value)||t.item[0]}selectDropdown(t,e){const n=t.key||t.type,i=this.activeFilter[n];null==e.value?delete this.activeFilter[n]:this.activeFilter[n]={value:[e]};const o=this.activeFilter[n];i!==o&&(null==i?void 0:i.value[0].value)!==(null==o?void 0:o.value[0].value)&&this.emit()}writeValue(t){this.changeDetectorRef.markForCheck(),this.activeFilter=t||{}}registerOnChange(t){this.avcChanger=t}registerOnTouched(t){}isAllValue(e){return t.ALL_VALUES.has(e.toLowerCase())}buildConstDateFilter(t){f.bindConst(this.activeFilter,t)}emit(){this.activeFilterChange.emit(this.activeFilter),this.avcChanger(this.activeFilter)}}return t.ALL_VALUES=new Set(["all","not-selected"]),t.\u0275fac=function(e){return new(e||t)(l.Mb(r.q,10),l.Mb(l.h),l.Mb(l.l),l.Mb(r.g))},t.\u0275cmp=l.Gb({type:t,selectors:[["sd-filter-pop-up"]],hostBindings:function(t,e){1&t&&l.Zb("mousedown",(function(t){return e.hostMouseDown(t)}))("touchstart",(function(t){return e.hostMouseDown(t)}))},inputs:{filterMenus:"filterMenus",deactive:"deactive",activeFilter:"activeFilter",datePickerDirection:"datePickerDirection"},outputs:{activeFilterChange:"activeFilterChange"},features:[l.yb([s.G]),l.xb],decls:2,vars:2,consts:[["class","ep-button dock-button",3,"click",4,"ngIf"],["class","filters",4,"ngIf"],[1,"ep-button","dock-button",3,"click"],[1,"papycon",3,"ngClass","click"],[1,"filters"],[3,"class","ngSwitch",4,"ngFor","ngForOf"],["class","ep-button","color","white",3,"click",4,"ngIf"],[3,"ngSwitch"],[4,"ngIf"],[3,"class","activeFilter","datePickerDirection","selected","startDate","endDate","disableNext","dateFormat","dateChange",4,"ngSwitchCase"],[4,"ngSwitchCase"],[3,"size","options","ngModel","ngStyle","ngModelChange",4,"ngSwitchCase"],[3,"class",4,"ngSwitchDefault"],[3,"activeFilter","datePickerDirection","startDate","endDate","disableNext","dateFormat","dateChange"],[3,"size","options","ngModel","ngStyle","ngModelChange"],[3,"class","click",4,"ngFor","ngForOf"],[3,"click"],["color","white",1,"ep-button",3,"click"]],template:function(t,e){1&t&&(l.Dc(0,m,5,6,"button",0),l.Dc(1,S,3,2,"div",1)),2&t&&(l.jc("ngIf",!e.dock),l.zb(1),l.jc("ngIf",e.isSelected))},styles:["[_nghost-%COMP%]{position:relative}[_nghost-%COMP%]:not(.dock)   .filters[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #dadada;border-radius:6px;-webkit-box-shadow:0 4px 32px 0 hsla(0,0%,42.4%,.12);box-shadow:0 4px 32px 0 hsla(0,0%,42.4%,.12);padding:24px 20px;-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:999;-webkit-transform:translateY(4px);transform:translateY(4px);left:0}.dock[_nghost-%COMP%]   .field.custom-date[_ngcontent-%COMP%], .dock[_nghost-%COMP%]   .field[_ngcontent-%COMP%]   .selectable-list[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:20px}[_nghost-%COMP%]:not(.inline)   .filters[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]:not(:first-child){margin-top:12px}.inline[_nghost-%COMP%]   .filters[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.inline[_nghost-%COMP%]   .filters[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:12px}.inline[_nghost-%COMP%]   .vr[_ngcontent-%COMP%]{width:1px;background:#dadada;line-height:30px;height:30px}.dock-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:19px}.filters[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:100%;margin-top:20px}.filters[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;line-height:22px;color:#6c6c6c;font-family:NotoSans-Medium,sans-serif;display:inline-block;height:28px}.filters[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .selectable-list[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.filters[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .selectable-list[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:12px}.filters[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .selectable-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:5px;margin-right:10px;border:1px solid #363636;border-radius:5px;cursor:pointer}.filters[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .selectable-list[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{background-color:#f79f1a;color:#fff}.filters[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   sd-date-dropdown[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.filters[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   sd-date-dropdown[_ngcontent-%COMP%]  .calendar-container{z-index:999;position:absolute}.right[_nghost-%COMP%]   .filters[_ngcontent-%COMP%]{right:0}.inline-date[_nghost-%COMP%]   .custom-date[_ngcontent-%COMP%], .inline-date[_nghost-%COMP%]   .date[_ngcontent-%COMP%]{display:inline-block}.inline-date[_nghost-%COMP%]:not(.date-only)   .field.custom-date[_ngcontent-%COMP%]{float:right}.inline-date.date-only[_nghost-%COMP%]   .field.custom-date[_ngcontent-%COMP%]{margin-top:0}.year-period[_ngcontent-%COMP%]   .dialog-container[_ngcontent-%COMP%]{position:relative}.year-period[_ngcontent-%COMP%]   .dialog[_ngcontent-%COMP%]{top:4px;position:absolute;width:228px;height:147px;-webkit-box-sizing:border-box;background-color:#fff;border:1px solid #dadada;border-radius:2px;-webkit-box-shadow:0 4px 8px 0 hsla(0,0%,42.4%,.12);box-shadow:0 4px 8px 0 hsla(0,0%,42.4%,.12);padding:24px 20px 20px;box-sizing:border-box;z-index:1}.year-period[_ngcontent-%COMP%]   .dialog[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:0 0 15px;padding:0;list-style:none;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end}.year-period[_ngcontent-%COMP%]   .dialog[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Medium,sans-serif;color:#6c6c6c}.year-period[_ngcontent-%COMP%]   .dialog[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block}.year-period[_ngcontent-%COMP%]   .dialog[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{width:30px;line-height:30px;text-align:center}.year-period[_ngcontent-%COMP%]   .dialog[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   pu-dropdown[_ngcontent-%COMP%]{margin-top:6px;width:80px}.field.dropdown[_ngcontent-%COMP%]   pu-dropdown[_ngcontent-%COMP%]{display:block}button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:6px}"],changeDetection:0}),t})();var k=n("vbd7"),w=n("Vbab"),E=n("e0KV"),T=n("gNdQ");let I=(()=>{class t{}return t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({factory:function(e){return new(e||t)},imports:[[i.c,s.l,r.n,r.B,k.a,w.b]]}),t})();l.xc(D,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,s.k,r.H,r.w,r.G,r.d,r.x,r.A,r.b,r.D,r.E,r.z,r.r,r.s,r.C,r.p,r.o,r.y,r.c,r.e,r.u,r.v,r.t,r.i,r.l,r.j,r.m,r.f,E.a,D],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,T.a]);var R=n("OwfK"),N=n("2NAA"),A=n("N8+f"),z=n("yqQy"),L=n("pLZG"),F=n("nYR2"),G=n("lJxs"),U=n("0lfv");let j=(()=>{class t{constructor(t,e){this.baseHref=t,this.httpClient=e,this.gzipHeaders=new o.e({"Content-Encoding":"gzip","Accept-Language":"utf-8"})}get userUrl(){return this.baseHref+"v4/user"}getUserList(t){return this.httpClient.get(""+this.userUrl,{headers:this.gzipHeaders,params:this.makeHttpParams(t)})}deleteUsers(t){return this.httpClient.request("delete",""+this.userUrl,{body:t})}postRegisterUser(t,e,n,i){return this.httpClient.post(""+this.userUrl,{userId:e,password:n,name:t,type:i})}patchUser(t,e){return this.httpClient.patch(`${this.baseHref}v4/user/${t}`,e)}makeHttpParams(t){let e=new o.f;return Object.keys(t).filter(e=>void 0!==t[e]).forEach(n=>{e=e.set(n,String(t[n]))}),e}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(i.a),l.Wb(o.b))},t.\u0275prov=l.Ib({token:t,factory:t.\u0275fac}),t})();var $=n("Ads2"),H=n("tqRt"),V=n("eZmz"),B=n("Ttf1"),W=n("8hHe");function Y(t,e){if(1&t){const t=l.Tb();l.Sb(0,"button",3),l.Zb("click",(function(){return l.uc(t),l.dc().movePage(1)})),l.Fc(1,"\u2026"),l.Rb()}}function K(t,e){if(1&t){const t=l.Tb();l.Sb(0,"button",4),l.Zb("click",(function(){l.uc(t);const n=e.$implicit;return l.dc().movePage(n)})),l.Fc(1),l.Rb()}if(2&t){const t=e.$implicit,n=l.dc();l.Ab("color",n.getIndexClass(t)?"primary-70":"dark"),l.zb(1),l.Gc(t)}}function Z(t,e){if(1&t){const t=l.Tb();l.Sb(0,"button",3),l.Zb("click",(function(){l.uc(t);const e=l.dc();return e.movePage(e.last)})),l.Fc(1,"\u2026"),l.Rb()}}let q=(()=>{class t{constructor(t,e){this.ngControl=t,this.cdr=e,this.prevLabel="",this.nextLabel="",this.pageChange=new l.n,this.indexList=[1],this._first=1,this._last=1,this._page=1,this._sideButtonCount=0,this.avcChanger=t=>t,this.ngControl&&(this.ngControl.valueAccessor=this)}get first(){return this._first}set first(t){if(this.first!==t){if(this.last<t)throw new Error(`'first' value out of range. Expect last(${this.last}) < first(${t})`);this._first=t,this.page<this.first?this.page=this.first:this.computeSideList()}}get last(){return this._last}set last(t){if(this.last!==t){if(t<this.first)throw new Error(`'last' value out of range. Expect last(${t}) < first(${this.first})`);this._last=t,this.last<this.page?this.page=this.last:this.computeSideList()}}get page(){return this._page}set page(t){if(this.page!==t){if(this.last<t)throw new Error(`page value out of range. Expect page(${t}) < last(${this.last})`);if(t<this.first)throw new Error(`page value out of range. Expect first(${this.first}) < page(${t})`);this._page=t,this.computeSideList()}}get sideButtonCount(){return this._sideButtonCount}set sideButtonCount(t){this.sideButtonCount!==t&&(this._sideButtonCount=t,this.computeSideList())}ngOnChanges(t){this.computeSideList()}ngOnInit(){this.computeSideList()}getIndexClass(t){return t===this.page}movePage(t){this.page!==t&&(this.writeValue(t),this.emit())}writeValue(t){this.cdr.markForCheck(),this.page=t}registerOnChange(t){this.avcChanger=t}registerOnTouched(t){}emit(){this.avcChanger(this.page),this.pageChange.emit(this.page)}computeSideList(){this.indexList=Array.from({length:2*this.sideButtonCount+4}).map((t,e)=>e-this.sideButtonCount-1).map(t=>this.page-this.first-1<this.sideButtonCount?this.first+this.sideButtonCount+t+1:this.last-this.page-1<this.sideButtonCount?this.last-this.sideButtonCount+t-1:t+this.page),this.indexList[0]!==this.first&&this.indexList.splice(0,1),this.indexList[this.indexList.length-1]!==this.last&&this.indexList.splice(this.indexList.length-1,1),this.indexList=this.indexList.filter(t=>this.first<=t&&t<=this.last)}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(r.q,10),l.Mb(l.h))},t.\u0275cmp=l.Gb({type:t,selectors:[["sd-pagination"]],inputs:{first:"first",last:"last",page:"page",sideButtonCount:"sideButtonCount",prevLabel:"prevLabel",nextLabel:"nextLabel"},outputs:{pageChange:"pageChange"},features:[l.xb],decls:7,vars:7,consts:[["color","dark",1,"ep-text-button",3,"disabled","click"],["class","ep-text-button","color","dark",3,"click",4,"ngIf"],["class","ep-text-button",3,"click",4,"ngFor","ngForOf"],["color","dark",1,"ep-text-button",3,"click"],[1,"ep-text-button",3,"click"]],template:function(t,e){1&t&&(l.Sb(0,"button",0),l.Zb("click",(function(){return e.movePage(e.page-1)})),l.Fc(1),l.Rb(),l.Dc(2,Y,2,0,"button",1),l.Dc(3,K,2,2,"button",2),l.Dc(4,Z,2,0,"button",1),l.Sb(5,"button",0),l.Zb("click",(function(){return e.movePage(e.page+1)})),l.Fc(6),l.Rb()),2&t&&(l.jc("disabled",e.first===e.page),l.zb(1),l.Gc(e.prevLabel),l.zb(1),l.jc("ngIf",e.first+1<e.indexList[0]),l.zb(1),l.jc("ngForOf",e.indexList),l.zb(1),l.jc("ngIf",e.indexList[e.indexList.length-1]<e.last-1),l.zb(1),l.jc("disabled",e.page===e.last),l.zb(1),l.Gc(e.nextLabel))},directives:[i.t,i.s],styles:["[_nghost-%COMP%]{width:100%;text-align:center}button[_ngcontent-%COMP%]{min-width:40px;height:40px;margin:0 6px}"],changeDetection:0}),t})();function J(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.Rb()),2&t){const t=e.$implicit;l.zb(1),l.Gc(t.name)}}function Q(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.Rb()),2&t){const t=e.$implicit;l.zb(1),l.Gc(t.userId)}}function X(t,e){if(1&t&&(l.Sb(0,"div"),l.Nb(1,"pu-dropdown",15),l.Rb()),2&t){const t=e.$implicit,n=l.dc();l.zb(1),l.jc("formControlName",t.id)("options",n.accountOptions)}}function tt(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.ec(2,"date"),l.Rb()),2&t){const t=e.$implicit;l.zb(1),l.Gc(l.gc(2,1,t.createdAt,"yyyy-MM-dd"))}}function et(t,e){1&t&&(l.Sb(0,"div",16),l.Sb(1,"div",17),l.Nb(2,"span",18),l.Sb(3,"p",19),l.Fc(4),l.ec(5,"translate"),l.Rb(),l.Nb(6,"div",20),l.Sb(7,"p",21),l.Fc(8),l.ec(9,"translate"),l.Rb(),l.Rb(),l.Rb()),2&t&&(l.zb(4),l.Gc(l.fc(5,2,"NO_ADMIN")),l.zb(4),l.Gc(l.fc(9,4,"PLEASE_ADD_ADMIN")))}let nt=(()=>{class t{constructor(t,e,n,i,o,a,s,c,l){this.formBuilder=t,this.changeDetectorRef=e,this.accountDataService=n,this.toastService=i,this.authService=o,this.translatePipe=a,this.adminDialogService=s,this.store$=c,this.subs=l,this.filterMenus=[{label:this.translatePipe.transform("DATE"),type:"date",item:Object.values(b).filter(t=>t!==b.CUSTOM).map(t=>({label:t,value:t})),isMulti:!1},{label:this.translatePipe.transform("MANUAL_SELECT"),type:"custom-date",item:[{label:"",value:b.CUSTOM}],isMulti:!1},{label:this.translatePipe.transform("USER_PURPOSE_LABEL"),type:"purpose",item:Object.values(u).map(t=>({label:t,value:t})),isMulti:!1}],this.accountOptions=[{label:this.translatePipe.transform(z.e.USER),value:z.e.USER},{label:this.translatePipe.transform(z.e.ADMIN),value:z.e.ADMIN}],this.displayedColumns=[{key:"name",title:this.translatePipe.transform("NAME"),sortable:!0},{key:"userId",title:this.translatePipe.transform("EMAIL"),sortable:!0},{key:"type",title:this.translatePipe.transform("ACCOUNT_PURPOSE"),sortable:!0},{key:"createdAt",title:this.translatePipe.transform("CREATED_AT"),sortable:!0}],this.formGroup=this.formBuilder.group({purpose:this.formBuilder.group({}),name:"",checkedIds:""}),this.userInfoFormGroup=this.formBuilder.group({id:"",name:["",r.F.required],email:[{value:"",disabled:!0},r.F.required],password:["",[U.A.passwordValidators,()=>{this.userInfoFormGroup&&this.userInfoFormGroup.controls.passwordCheck.updateValueAndValidity()}]],passwordCheck:["",[t=>this.userInfoFormGroup?t.value===this.userInfoFormGroup.get("password").value?null:{message:this.translatePipe.transform("INVALID_PASSWORD")}:null]],purpose:R.a[0]}),this.isLoading=!1,this.table=new N.a,this.NUM_PER_PAGE="13"}get purposeFilterValue(){var t,e;return(null===(t=this.table.filterGroup.controls.filter.value.purpose)||void 0===t?void 0:t.value[0])===u.PURPOSE_ALL||null===(e=this.table.filterGroup.controls.filter.value.purpose)||void 0===e?void 0:e.value[0]}get currentPageIndex(){return this.table.getPageInfo().currentIndex}ngOnInit(){this.getUsers(),this.subs.push(this.store$.pipe(Object(z.f)()).subscribe({next:t=>{this.user=t,this.table.reset(),this.getUsers(),this.changeDetectorRef.markForCheck()}}),this.table.filterChanges.subscribe({next:()=>{this.table.reset(),this.getUsers()}}),this.table.filterGroup.get("keyword").valueChanges.pipe(L.a(t=>!t)).subscribe({next:()=>{this.searchKeyword()}}),this.adminDialogService.dialogEvent$.pipe(L.a(t=>"confirm"===t.action&&t.dialogType===c.c.DELETE_ITEMS)).subscribe({next:()=>{this.adminDialogService.closeCurrentActiveDialog(),this.deleteUser()}}),this.adminDialogService.dialogEvent$.pipe(L.a(t=>"confirm"===t.action&&t.dialogType===c.c.MODIFY_USER)).subscribe({next:()=>{this.adminDialogService.closeCurrentActiveDialog();const t=this.userInfoFormGroup.controls.purpose.value.value;this.userInfoFormGroup.controls.id.value!==this.user.id||t!==z.e.USER||this.isLastAdmin(this.user.id)&&t===z.e.USER?this.updateUser({id:this.userInfoFormGroup.controls.id.value,purpose:this.userInfoFormGroup.controls.purpose.value.value,password:this.userInfoFormGroup.controls.password.value,name:this.userInfoFormGroup.controls.name.value,userId:this.userInfoFormGroup.controls.email.value}):this.adminDialogService.toggleDialogVisibility(c.c.WARNING,!0,{title:this.translatePipe.transform("CHANGE_PURPOSE_WARNING_TITLE"),description:this.translatePipe.transform("CHANGE_PURPOSE_WARNING_MESSAGE"),size:{width:388,height:280},data:{from:"modify_modal",formGroup:this.userInfoFormGroup}})}}),this.adminDialogService.dialogEvent$.pipe(L.a(t=>"confirm"===t.action&&t.dialogType===c.c.CREATE_USER)).subscribe({next:()=>{this.registerUser()}}),this.adminDialogService.dialogEvent$.pipe(L.a(t=>t.dialogType===c.c.WARNING)).subscribe({next:t=>{"confirm"===t.action&&(this.adminDialogService.closeCurrentActiveDialog(),this.updateUser("table"===t.data.from?{id:t.data.control.id,purpose:t.data.control.control.value}:{id:this.userInfoFormGroup.controls.id.value,purpose:this.userInfoFormGroup.controls.purpose.value.value,password:this.userInfoFormGroup.controls.password.value,name:this.userInfoFormGroup.controls.name.value,userId:this.userInfoFormGroup.controls.email.value}),this.authService.logout().subscribe()),"close"===t.action&&this.getUsers()}}))}ngAfterContentInit(){this.getUsers()}searchKeyword(){this.table.reset(),this.getUsers()}onCreateClick(){this.userInfoFormGroup.reset({purpose:R.a[0]}),this.userInfoFormGroup.get("email").enable(),this.adminDialogService.toggleDialogVisibility(c.c.CREATE_USER,!0,{title:this.translatePipe.transform("NEW_ADMIN"),size:{width:452,height:595},formGroup:this.userInfoFormGroup})}onDeleteClick(){const t=this.formGroup.controls.checkedIds.value.map(t=>this.table.getData().find(e=>e.id===t));t.some(t=>t.id===this.user.id)?this.toastService.showToast({icon:"failed",text:this.translatePipe.transform("CANNOT_DELETE_SELF_ACCOUNT")}):this.adminDialogService.toggleDialogVisibility(c.c.DELETE_ITEMS,!0,{description:"",size:{width:336,height:280},data:t,caller:c.d.ACCOUNT})}onItemDblClick(t){this.userInfoFormGroup.setValue({id:t.id,name:t.name,email:t.userId,password:"",passwordCheck:"",purpose:R.a.find(e=>e.value===t.type)}),this.adminDialogService.toggleDialogVisibility(c.c.MODIFY_USER,!0,{title:this.translatePipe.transform("MODIFY_USER_INFO"),size:{width:452,height:595},formGroup:this.userInfoFormGroup})}checkedStatusChange(t){this.formGroup.controls.checkedIds.setValue(t)}deleteUser(){this.isLoading=!0,this.subs.set("deleteUser",this.accountDataService.deleteUsers(this.formGroup.controls.checkedIds.value).pipe(F.a(()=>{this.table.reset(),this.getUsers()})).subscribe({next:()=>{this.toastService.showToast({icon:"success",text:this.translatePipe.transform("DELETE_COMPLETE")})},error:t=>{t.status===A.b.NOT_ACCEPTABLE&&this.toastService.showToast({icon:"failed",text:this.translatePipe.transform("REJECTED_TO_DELETE_ACCOUNT")})}}))}updateUser(t){var e;if(this.isLastAdmin(t.id)&&t.purpose===z.e.USER)return this.toastService.showToast({icon:"failed",text:this.translatePipe.transform("CHANGE_LAST_ADMIN_USAGE_EXCEPTION")}),void this.getUsers();this.isLoading=!0,this.subs.set("updateUser",this.accountDataService.patchUser(t.id,{email:t.userId,name:t.name,password:""===(null===(e=t.password)||void 0===e?void 0:e.trim())?void 0:t.password,type:t.purpose}).pipe(F.a(()=>{this.table.reset(),this.userInfoFormGroup.reset(""),this.getUsers()})).subscribe({next:()=>{this.toastService.showToast({icon:"success",text:this.translatePipe.transform("SUCCEED_PATCHING")})},error:()=>{this.isLoading=!1}}))}registerUser(){this.subs.set("registerUser",this.accountDataService.postRegisterUser(this.userInfoFormGroup.controls.name.value,this.userInfoFormGroup.controls.email.value,this.userInfoFormGroup.controls.password.value,this.userInfoFormGroup.controls.purpose.value.value).subscribe({next:()=>{this.table.reset(),this.userInfoFormGroup.reset(""),this.getUsers(),this.toastService.showToast({icon:"success",text:this.translatePipe.transform("CREATE_USER")}),this.adminDialogService.closeCurrentActiveDialog()},error:t=>{t.status===A.b.BAD_REQUEST&&this.toastService.showToast({icon:"failed",text:this.translatePipe.transform("DUPLICATED_EMAIL")})}}))}getUsers(){const t=this.table.getPeriodValue();this.isLoading=!0,this.subs.push(this.accountDataService.getUserList({pageIndex:this.table.getPageInfo().currentIndex,listingCount:parseInt(this.NUM_PER_PAGE),search:this.table.getKeyword(),from:t?Object(U.H)(t.startDate):void 0,to:t?Object(U.H)(t.endDate):void 0,orderBy:this.orderedBy,ascending:this.asc,type:this.purposeFilterValue}).pipe(F.a(()=>this.table.isLoading=!1)).subscribe({next:t=>{this.formGroup.controls.purpose=this.formBuilder.group({}),this.table.setData(t.resources),this.table.setPageInfo(t.pageInfo.totalCount,this.NUM_PER_PAGE),this.table.getData().forEach(t=>{this.formGroup.controls.purpose.addControl(t.id,new r.h(t.type===z.e.ADMIN?this.accountOptions[1]:this.accountOptions[0]))}),this.table.getSelectedData()&&this.table.selectData(this.table.getData().find(t=>t.id===this.table.getSelectedData().id)),this.isLoading=!1,this.subs.set("dropdownChange",d.a(...this.table.getData().map(t=>this.formGroup.controls.purpose.controls[t.id].valueChanges.pipe(G.a(e=>({id:t.id,control:e}))))).subscribe({next:t=>{const e=t.control.value;t.id!==this.user.id||this.isLastAdmin(this.user.id)&&e===z.e.USER?this.updateUser({id:t.id,purpose:t.control.value}):this.adminDialogService.toggleDialogVisibility(c.c.WARNING,!0,{title:this.translatePipe.transform("CHANGE_PURPOSE_WARNING_TITLE"),description:this.translatePipe.transform("CHANGE_PURPOSE_WARNING_MESSAGE"),size:{width:388,height:280},data:{from:"table",control:t}})}})),this.changeDetectorRef.markForCheck()}}))}sortingChanges(t){this.orderedBy=0===t.value?void 0:t.name,this.asc=0===t.value?void 0:1===t.value,this.getUsers()}onPageChanging(t){this.table.setPageCurrentIndex(t-1),this.getUsers()}isLastAdmin(t){return this.table.getData().find(e=>e.id===t).type===z.e.ADMIN&&this.table.getData().filter(t=>t.type===z.e.ADMIN).length<=1}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(r.g),l.Mb(l.h),l.Mb(j),l.Mb($.c),l.Mb(z.c),l.Mb(w.d),l.Mb(c.b),l.Mb(H.h),l.Mb(s.G))},t.\u0275cmp=l.Gb({type:t,selectors:[["sd-document-list"]],features:[l.yb([s.G,s.y])],decls:30,vars:35,consts:[[3,"isLoading"],[1,"form-list-header",3,"formGroup"],[1,"tools"],["size","small","color","primary",1,"ep-button",3,"click"],[1,"papycon","papycon-plus3"],["size","small","color","grey",1,"ep-button",3,"disabled","click"],[1,"papycon","papycon-minus2"],[1,"right-side"],["formControlName","filter",1,"small",3,"filterMenus"],["size","small","useClearButton","true","formControlName","keyword",1,"custom",3,"placeholder","keydown.enter","focusout"],[3,"formGroup"],[3,"data","displayedColumns","formGroupName","currentPageIndex","emptyEl","checkedStatusChange","itemDblClick","sortingChange"],[4,"eTableCell","eTableCellFor"],[3,"last","sideButtonCount","page","prevLabel","nextLabel","pageChange"],["emptyEl",""],["size","small",3,"formControlName","options"],[1,"empty"],[1,"notifier"],[1,"papycon","papycon-profile2"],[1,"title"],[1,"dashed"],[1,"message"]],template:function(t,e){if(1&t&&(l.Sb(0,"h1"),l.Fc(1),l.ec(2,"translate"),l.Rb(),l.Sb(3,"sd-card",0),l.Sb(4,"header",1),l.Sb(5,"div",2),l.Sb(6,"button",3),l.Zb("click",(function(){return e.onCreateClick()})),l.Nb(7,"i",4),l.Fc(8),l.ec(9,"translate"),l.Rb(),l.Sb(10,"button",5),l.Zb("click",(function(){return e.onDeleteClick()})),l.Nb(11,"i",6),l.Fc(12),l.ec(13,"translate"),l.Rb(),l.Rb(),l.Sb(14,"div",7),l.Nb(15,"sd-filter-pop-up",8),l.Sb(16,"pu-input",9),l.Zb("keydown.enter",(function(){return e.searchKeyword()}))("focusout",(function(){return e.searchKeyword()})),l.ec(17,"translate"),l.Rb(),l.Rb(),l.Rb(),l.Qb(18,10),l.Sb(19,"e-table",11),l.Zb("checkedStatusChange",(function(t){return e.checkedStatusChange(t)}))("itemDblClick",(function(t){return e.onItemDblClick(t)}))("sortingChange",(function(t){return e.sortingChanges(t)})),l.Dc(20,J,2,1,"div",12),l.Dc(21,Q,2,1,"div",12),l.Dc(22,X,2,2,"div",12),l.Dc(23,tt,3,4,"div",12),l.Rb(),l.Pb(),l.Sb(24,"footer"),l.Sb(25,"sd-pagination",13),l.Zb("pageChange",(function(t){return e.onPageChanging(t)})),l.ec(26,"translate"),l.ec(27,"translate"),l.Rb(),l.Rb(),l.Rb(),l.Dc(28,et,10,6,"ng-template",null,14,l.Ec)),2&t){const t=l.tc(29);l.zb(1),l.Gc(l.fc(2,23,"ADMIN_ACCOUNT_MANAGEMENT")),l.zb(2),l.jc("isLoading",e.isLoading),l.zb(1),l.jc("formGroup",e.table.filterGroup),l.zb(4),l.Gc(l.fc(9,25,"ADD_USER")),l.zb(2),l.jc("disabled",!(null!=e.formGroup.controls.checkedIds.value&&e.formGroup.controls.checkedIds.value.length)),l.zb(2),l.Gc(l.fc(13,27,"DELETE")),l.zb(3),l.jc("filterMenus",e.filterMenus),l.zb(1),l.jc("placeholder",l.fc(17,29,"ADMIN_ACCOUNT_SEARCH_PLACEHOLDER")),l.zb(2),l.jc("formGroup",e.formGroup),l.zb(1),l.jc("data",e.table.getData())("displayedColumns",e.displayedColumns)("formGroupName","purpose")("currentPageIndex",e.currentPageIndex)("emptyEl",t),l.zb(1),l.jc("eTableCellFor","name"),l.zb(1),l.jc("eTableCellFor","userId"),l.zb(1),l.jc("eTableCellFor","type"),l.zb(1),l.jc("eTableCellFor","createdAt"),l.zb(2),l.jc("last",e.table.getPageInfo().allPageCount)("sideButtonCount",1)("page",e.table.getPageInfo().currentIndex+1)("prevLabel",l.fc(26,31,"PREVIOUS"))("nextLabel",l.fc(27,33,"NEXT"))}},directives:[V.a,r.s,r.l,D,r.r,r.j,s.s,B.a,r.m,W.a,q,s.k],pipes:[T.a,i.f],styles:[".split[_ngcontent-%COMP%]{width:1px;height:20px;background:#c8c8c8}span.basic[_ngcontent-%COMP%]{background-color:#035668}span.basic[_ngcontent-%COMP%], span.premium[_ngcontent-%COMP%]{border-radius:4px;padding:2px 16px;color:#fff}span.premium[_ngcontent-%COMP%]{background-color:#0cbc82}span.undefined[_ngcontent-%COMP%]{border-radius:4px;background-color:#6c6c6c;padding:2px 16px;color:#fff}sd-loading-toast[_ngcontent-%COMP%]{position:unset;top:0;left:0}header.dialog[_ngcontent-%COMP%]{margin:40px 0 0;font-size:16px;line-height:26px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e}header.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif;font-weight:400;margin:0}h1.regular[_ngcontent-%COMP%], h2.regular[_ngcontent-%COMP%], h3.regular[_ngcontent-%COMP%], h4.regular[_ngcontent-%COMP%], h5.regular[_ngcontent-%COMP%]{font-family:inherit}h1.light[_ngcontent-%COMP%], h2.light[_ngcontent-%COMP%], h3.light[_ngcontent-%COMP%], h4.light[_ngcontent-%COMP%], h5.light[_ngcontent-%COMP%]{color:#6c6c6c}.ellipsis[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}h1[_ngcontent-%COMP%]{font-size:20px;line-height:28px}h2[_ngcontent-%COMP%]{font-size:16px;line-height:26px}h3[_ngcontent-%COMP%]{font-size:14px;line-height:24px}h4[_ngcontent-%COMP%]{font-size:13px;line-height:22px}h5[_ngcontent-%COMP%]{font-size:12px;line-height:20px}.papycon[_ngcontent-%COMP%], pu-icon[_ngcontent-%COMP%]{text-align:center}.papycon.bt[_ngcontent-%COMP%], pu-icon.bt[_ngcontent-%COMP%]{cursor:pointer}.dialog__header[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%], .dialog__header[_ngcontent-%COMP%]   pu-icon[_ngcontent-%COMP%]{-ms-flex-item-align:start;align-self:flex-start}textarea[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Regular,sans-serif;border:1px solid #dadada;border-radius:2px;height:62px;resize:none;-webkit-box-sizing:border-box;box-sizing:border-box;padding:3px}textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#f79f1a}textarea[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#6c6c6c;opacity:.7}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:#6c6c6c;opacity:.7}textarea[_ngcontent-%COMP%]:-ms-input-placeholder{color:#6c6c6c;opacity:.7}textarea[_ngcontent-%COMP%]::-ms-input-placeholder{color:#6c6c6c;opacity:.7}textarea[_ngcontent-%COMP%]::placeholder{color:#6c6c6c;opacity:.7}textarea.fit[_ngcontent-%COMP%]{width:100%}pu-checkbox.custom[_ngcontent-%COMP%]{line-height:1!important;padding:3px 10px}pu-checkbox.box[_ngcontent-%COMP%]{font-size:20px;border:1px solid #dadada;background-color:#fff;border-radius:2px}pu-checkbox[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{vertical-align:initial}pu-toggle-button[_ngcontent-%COMP%]  input[type]{border:unset}.table[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .center[_ngcontent-%COMP%]{text-align:center}.table[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{text-align:right}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .thead[_ngcontent-%COMP%]{font-size:13px;line-height:22px;color:#6c6c6c;font-family:NotoSans-Medium,sans-serif;min-height:44px;border-bottom:1px solid #dadada;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.table[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .tbody[_ngcontent-%COMP%]{margin:0;padding:0}.table[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{height:40px;background:#fff;border-radius:6px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.table[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:hover, .table[_nghost-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:hover{background-color:hsla(0,0%,85.5%,.1)}.table[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr.selected[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr.selected[_ngcontent-%COMP%]{border-color:#f79f1a;background-color:rgba(255,248,237,.9)}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]{margin:auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;color:#6c6c6c}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   .head.papycon[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]   .head.papycon[_ngcontent-%COMP%]{margin:0 auto 12px;font-size:40px;line-height:40px;width:40px}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]:not(.papycon), .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]:not(.papycon){font-size:16px;line-height:26px;color:#1e1e1e}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   .medium[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]   .medium[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   .dashed-hr[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]   .dashed-hr[_ngcontent-%COMP%]{height:2px;width:170px;margin:11px auto;background:linear-gradient(90deg,#979797,#979797 4px,transparent 0,transparent 6px) 0/6px}.empty[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1;flex:1;height:100%;flex-direction:column}.empty[_ngcontent-%COMP%], .empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]{flex-direction:column;width:170px;height:160px}.empty[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{color:#6c6c6c;font-size:22px;margin:0 auto 12px}.empty[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-family:NotoSans-Regular}.empty[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:14px;font-weight:400;text-align:center;font-family:NotoSans-Regular;padding-top:12px}.empty[_ngcontent-%COMP%]   .dashed[_ngcontent-%COMP%]{width:170px;height:2px;border-bottom:2px dashed #979797}.notifier[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}[_nghost-%COMP%]:not(.loading){position:relative;width:100%;min-width:1120px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column;flex-flow:column}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]{background:#f2f2f2}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .light[_ngcontent-%COMP%]{color:#6c6c6c}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]{margin-top:14px;display:-webkit-box;display:-ms-flexbox;display:flex}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:12px}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]   .push[_ngcontent-%COMP%]{margin-left:auto}sd-card[_ngcontent-%COMP%]{padding:30px 24px 37px}.form-list-header[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.form-list-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:6px;font-size:18px}.form-list-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:12px}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   pu-input[_ngcontent-%COMP%]{width:307px}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   pu-input.custom[_ngcontent-%COMP%]{margin-left:12px}.form-list-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;line-height:20px;font-family:NotoSans-Medium,sans-serif;color:#6c6c6c;border-radius:12px;border:1.2px solid #c8c8c8;padding:3px 12px;margin-left:8px}e-table[_ngcontent-%COMP%]{margin-top:20px;-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;overflow:visible}e-table[_ngcontent-%COMP%]     td.name, e-table[_ngcontent-%COMP%]     th.name{-webkit-box-flex:0;-ms-flex:0 1 245px;flex:0 1 245px;font-size:14px}e-table[_ngcontent-%COMP%]     .userId{-webkit-box-flex:1;-ms-flex:1;flex:1;font-size:14px}e-table[_ngcontent-%COMP%]     .createdAt{-webkit-box-flex:0;-ms-flex:0 1 152px;flex:0 1 152px;font-size:14px}e-table[_ngcontent-%COMP%]     .type{-webkit-box-flex:0;-ms-flex:0 1 250px;flex:0 1 250px;font-size:14px;display:-webkit-box;display:-ms-flexbox;display:flex}e-table[_ngcontent-%COMP%]     .type:hover pu-dropdown[size]  div.select-box{background-color:#fff;border-radius:2px;border:1px solid #dadada}e-table[_ngcontent-%COMP%]     .type pu-dropdown[size]  div.select-box{width:100px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;height:33px;border:none;background-color:transparent}e-table[_ngcontent-%COMP%]     .type pu-dropdown[size]  div.select-box div.expand-button{background-color:transparent;border-left:none}footer[_ngcontent-%COMP%]{height:95px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}footer[_ngcontent-%COMP%]   sd-pagination[_ngcontent-%COMP%]{margin-top:38px}span.primary[_ngcontent-%COMP%]{color:#ff6100;text-decoration:underline}"]}),t})();var it=n("Ow6G");let ot=(()=>{class t{}return t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({factory:function(e){return new(e||t)},imports:[[i.c]]}),t})();var at=n("wknF");let st=(()=>{class t{}return t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({factory:function(e){return new(e||t)},providers:[j],imports:[[i.c,it.a,r.B,I,s.t,s.f,r.n,at.b,ot,s.j,s.l,N.b,w.b]]}),t})();var rt=n("93Dz"),ct=n("ey9i"),lt=n("mgza");const dt=["*"];let pt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Gb({type:t,selectors:[["sd-main-contents"]],ngContentSelectors:dt,decls:1,vars:0,template:function(t,e){1&t&&(l.ic(),l.hc(0))},styles:["[_nghost-%COMP%]{background-color:#f2f2f2;width:100%;height:calc(100% - 70px);display:-webkit-box;display:-ms-flexbox;display:flex}[_nghost-%COMP%]     .admin-content-container>:last-child:not(e-login){display:block;padding:40px 30px 50px;-webkit-box-sizing:border-box;box-sizing:border-box}[_nghost-%COMP%]     .admin-content-container>:last-child:not(e-login)>h1{margin-bottom:30px;font-size:28px;font-family:NotoSans-Medium,sans-serif}"]}),t})();var ht=n("VCX3"),gt=n("eIep"),bt=n("vkgz"),ut=n("cYj5");let ft=(()=>{class t{constructor(t,e,n,i,o,a,s,c,d){this.changeDetectorRef=t,this.authService=e,this.subs=n,this.translatePipe=i,this.adminDialogService=o,this.toastService=a,this.formBuilder=s,this.store$=c,this.productService=d,this.menus=[],this.logoToggle=new l.n,this.passwordFormGroup=this.formBuilder.group({password:""}),this.userFormGroup=this.formBuilder.group({name:"",email:[{value:"",disabled:!0},r.F.required],password:["",[U.A.passwordValidators,()=>{this.userFormGroup&&this.userFormGroup.controls.passwordCheck.updateValueAndValidity()}]],passwordCheck:["",[t=>this.userFormGroup?t.value===this.userFormGroup.get("password").value?null:{message:this.translatePipe.transform("INVALID_PASSWORD")}:null]],purpose:R.a[0]})}get logoUrl(){return this.productService.getAdminLogo()}ngOnInit(){this.subs.push(this.store$.pipe(Object(z.f)()).subscribe({next:t=>{this.user=t,this.userFormGroup.reset({name:this.user.name,email:this.user.userId}),this.changeDetectorRef.markForCheck()}}),this.adminDialogService.dialogEvent$.pipe(L.a(t=>"confirm"===t.action&&t.dialogType===c.c.MODIFY_MY_INFO),gt.a(()=>this.store$.pipe(Object(z.g)()))).subscribe({next:t=>{this.subs.set("patchMyInfo",this.authService.patchMyInfo(t.id,this.userFormGroup.value).pipe(gt.a(()=>this.authService.sharedGetSession)).subscribe({next:t=>{this.store$.dispatch(z.a.setUser({payload:t})),this.adminDialogService.closeCurrentActiveDialog(),this.toastService.showToast({icon:"success",text:this.translatePipe.transform("CHANGES_SAVED")}),this.changeDetectorRef.markForCheck()},error:()=>{this.passwordFormGroup.reset(""),this.userFormGroup.reset(""),this.toastService.showToast({icon:"failed",text:this.translatePipe.transform("FAILED")})}}))}})),this.buildMenu()}logout(){this.authService.logout().subscribe()}showModifyUserInfoDialog(){this.passwordFormGroup.reset(""),this.adminDialogService.toggleDialogVisibility(c.c.CHECK_USER,!0,{title:this.translatePipe.transform("MODIFY_USER_INFO"),size:{width:452,height:282},formGroup:this.passwordFormGroup}),this.subs.set("checkUser",this.adminDialogService.dialogEvent$.pipe(L.a(t=>"confirm"===t.action&&t.dialogType===c.c.CHECK_USER),h.a(1),bt.a(()=>this.adminDialogService.closeCurrentActiveDialog()),gt.a(()=>this.authService.postCheckPassword(this.passwordFormGroup.controls.password.value))).subscribe({next:()=>{this.userFormGroup.reset({name:this.user.name,email:this.user.userId}),this.adminDialogService.toggleDialogVisibility(c.c.MODIFY_MY_INFO,!0,{title:this.translatePipe.transform("MODIFY_USER_INFO"),size:{width:452,height:484},formGroup:this.userFormGroup})},error:()=>{this.passwordFormGroup.reset(""),this.userFormGroup.reset({name:this.user.name,email:this.user.userId}),this.toastService.showToast({icon:"failed",text:this.translatePipe.transform("INVALID_PASSWORD")})}}))}getUser(){this.authService.sharedGetSession.pipe(h.a(1)).subscribe({next:t=>{this.user=t,this.userFormGroup.reset({name:this.user.name,email:this.user.userId}),this.changeDetectorRef.markForCheck()}})}buildMenu(){this.menus=[{items:[{label:this.translatePipe.transform("USER_INFO"),command:()=>this.showModifyUserInfoDialog()},{label:this.translatePipe.transform("LOGOUT"),command:()=>this.logout()}]}],this.getUser(),this.changeDetectorRef.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(l.h),l.Mb(z.c),l.Mb(s.G),l.Mb(w.d),l.Mb(c.b),l.Mb($.c),l.Mb(r.g),l.Mb(H.h),l.Mb(ut.b))},t.\u0275cmp=l.Gb({type:t,selectors:[["sd-main-toolbar"]],outputs:{logoToggle:"logoToggle"},features:[l.yb([s.G])],decls:11,vars:3,consts:[[1,"toolbar-container"],[1,"left-container"],[1,"papycon","papycon-more-symbol5",3,"click"],[3,"src"],[1,"right-container"],[3,"click"],[1,"papycon","papycon-chevron3-down","arrow"],[3,"menus"],["menuRef",""]],template:function(t,e){if(1&t){const t=l.Tb();l.Sb(0,"div",0),l.Sb(1,"div",1),l.Sb(2,"i",2),l.Zb("click",(function(){return e.logoToggle.emit()})),l.Rb(),l.Nb(3,"img",3),l.Rb(),l.Sb(4,"div",4),l.Sb(5,"div",5),l.Zb("click",(function(){return l.uc(t),l.tc(10).toggleMenu()})),l.Sb(6,"span"),l.Fc(7),l.Rb(),l.Nb(8,"i",6),l.Nb(9,"pu-menu",7,8),l.Rb(),l.Rb(),l.Rb()}2&t&&(l.zb(3),l.jc("src",e.logoUrl,l.wc),l.zb(4),l.Gc(null==e.user?null:e.user.name),l.zb(2),l.jc("menus",e.menus))},directives:[s.w],styles:[".toolbar-container[_ngcontent-%COMP%]{background-color:#363636;width:100%;height:70px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.toolbar-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]{height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.toolbar-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:34px;font-size:20px;color:#fff}.toolbar-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{cursor:pointer}.toolbar-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:37px;height:18px}.toolbar-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]{width:100px;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#fff;margin-right:15px}.toolbar-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;margin-right:6px}.toolbar-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.toolbar-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer}.toolbar-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   pu-menu[_ngcontent-%COMP%]{top:30px;right:0;z-index:9999}"]}),t})();var mt=n("GS7A");const Ct={root:{label:"",route:"",data:"",expanded:!0,parent:null,children:[{label:"DASHBOARD",route:"dashboard",data:"thumbnail",expanded:!1,parent:null,children:[]},{label:"DOCUMENT_LIST",route:"document-list",data:"list2",expanded:!1,parent:null,children:[{label:"DOCUMENT_LIST",route:"document-list",data:null,expanded:!1,parent:null,children:[]},{label:"REMOVED_DOCUMENT_LIST",route:"removed-document-list",data:null,expanded:!1,parent:null,children:[]}]},{label:"STATISTIC",route:"statistic-period",data:"not-used",expanded:!1,parent:null,children:[{label:"STATISTIC_BY_PERIOD",route:"statistic-period",data:null,expanded:!1,parent:null,children:[]},{label:"STATISTIC_BY_DOCUMENT",route:"statistic-document",data:null,expanded:!1,parent:null,children:[]}]},{label:"SERVER_MANAGEMENT",route:"server-monitoring",data:"switch",expanded:!1,parent:null,children:[{label:"SERVER_MONITORING",route:"server-monitoring",data:null,expanded:!1,parent:null,children:[]},{label:"LOG_MANAGEMENT",route:"server-log",data:null,expanded:!1,parent:null,children:[]},{label:"DOCUMENT_HISTORY",route:"document-log",data:null,expanded:!1,parent:null,children:[]},{label:"DELETE_TEMP_FILE",route:"system-management",data:null,expanded:!1,parent:null,children:[]}]},{label:"VIEW_SETTINGS",route:"settings/view",data:"settings",expanded:!1,parent:null,children:[{label:"VIEW_SETTINGS_UI",route:"settings/view",data:null,expanded:!1,parent:null,children:[]},{label:"WATERMARK",route:"settings/watermark",data:null,expanded:!1,parent:null,children:[]}]},{label:"ACCOUNT_MANAGEMENT",route:"account",data:"profile2",expanded:!1,parent:null,children:[]},{label:"LICENSE_MANAGEMENT",route:"license",data:"security",expanded:!1,parent:null,children:[]}]}},xt={root:{label:"",route:"",data:"",expanded:!0,parent:null,children:[{label:"DASHBOARD",route:"dashboard",data:"thumbnail",expanded:!1,parent:null,children:[]},{label:"DOCUMENT_LIST",route:"document-list",data:"list2",expanded:!1,parent:null,children:[]},{label:"STATISTIC",route:"statistic-period",data:"not-used",expanded:!1,parent:null,children:[{label:"STATISTIC_BY_PERIOD",route:"statistic-period",data:null,expanded:!1,parent:null,children:[]},{label:"STATISTIC_BY_DOCUMENT",route:"statistic-document",data:null,expanded:!1,parent:null,children:[]}]}]}};var Ot=n("jRDe");function Mt(t,e){if(1&t&&l.Nb(0,"i",9),2&t){const t=l.dc(3).$implicit;l.jc("@chevron",t.expanded)}}function _t(t,e){if(1&t&&(l.Qb(0),l.Sb(1,"span",7),l.Fc(2),l.ec(3,"translate"),l.Rb(),l.Dc(4,Mt,1,1,"i",8),l.Pb()),2&t){const t=l.dc(2).$implicit,e=l.dc();l.zb(1),l.jc("@label",e.setDuration(t)),l.zb(1),l.Gc(l.fc(3,3,t.label)),l.zb(2),l.jc("ngIf",t.children)}}function Pt(t,e){if(1&t){const t=l.Tb();l.Qb(0),l.Sb(1,"div",3),l.Zb("click",(function(){l.uc(t);const e=l.dc().$implicit;return l.dc().onNestedMenuClick(e)})),l.Sb(2,"div",4),l.Nb(3,"i",5),l.Rb(),l.Dc(4,_t,5,5,"ng-container",6),l.Rb(),l.Pb()}if(2&t){const t=l.dc().$implicit,e=l.dc();l.zb(1),l.Eb("expanded",t.expanded),l.jc("routerLink",e.tinySidebar?e.createRouterLink(t):null)("routerLinkActive",e.tinySidebar?"active":""),l.zb(2),l.jc("ngClass","papycon-"+t.data),l.zb(1),l.jc("ngIf",!e.tinySidebar)}}function yt(t,e){if(1&t&&(l.Sb(0,"div",4),l.Nb(1,"i",5),l.Rb()),2&t){const t=l.dc(3).$implicit;l.zb(1),l.jc("ngClass","papycon-"+t.data)}}function vt(t,e){if(1&t&&(l.Sb(0,"span",7),l.Fc(1),l.ec(2,"translate"),l.Rb()),2&t){const t=l.dc(3).$implicit,e=l.dc();l.Eb("topNode",!t.parent),l.jc("@label",e.setDuration(t)),l.zb(1),l.Gc(l.fc(2,4,t.label))}}function St(t,e){if(1&t){const t=l.Tb();l.Sb(0,"div",11),l.Zb("click",(function(){l.uc(t);const e=l.dc(2).$implicit;return l.dc().onLeafMenuClick(e)})),l.Dc(1,yt,2,1,"div",12),l.Sb(2,"a",13),l.Dc(3,vt,3,6,"span",14),l.Rb(),l.Rb()}if(2&t){const t=l.dc(2).$implicit,e=l.dc();l.Eb("leaf",t.parent),l.jc("@leaf",e.setDuration(t))("ngClass",e.getLeafSequence(t))("routerLink",e.createRouterLink(t))("routerLinkActive","active"),l.zb(1),l.jc("ngIf",t.data),l.zb(2),l.jc("ngIf",!e.tinySidebar)}}function Dt(t,e){if(1&t&&l.Dc(0,St,4,8,"div",10),2&t){const t=l.dc().$implicit,e=l.dc();l.jc("ngIf",!t.parent||t.parent&&!e.tinySidebar)}}function kt(t,e){if(1&t&&(l.Qb(0),l.Dc(1,Pt,5,6,"ng-container",1),l.Dc(2,Dt,1,1,"ng-template",null,2,l.Ec),l.Pb()),2&t){const t=e.$implicit,n=l.tc(3);l.zb(1),l.jc("ngIf",t.children.length)("ngIfElse",n)}}let wt=(()=>{class t{constructor(t,e,n,i,o){this.activatedRoute=t,this.router=e,this.authService=n,this.subs=i,this.changeDetectorRef=o,this.tinySidebar=!1,this.menuTree={root:{data:"",parent:null,children:[],depth:null,expanded:!1,route:null,label:""}}}get slide(){return this.tinySidebar?"tiny":"long"}setDuration(t){return{value:"",params:{duration:t.depth?400:0}}}ngOnInit(){this.setMenuTree()}ngOnChanges(t){t.tinySidebar&&this.menuTree.root.children.map(t=>{t.expanded=!1})}setMenuTree(){this.subs.set("fetchUserInfo",this.authService.sharedGetSession.subscribe({next:t=>{t.type===z.e.ADMIN?this.menuTree=U.g.deepClone(Ct):t.type===z.e.USER&&(this.menuTree=U.g.deepClone(xt)),this.assignDepth(this.menuTree),this.changeDetectorRef.markForCheck()}}))}onNestedMenuClick(t){this.tinySidebar?this.router.navigateByUrl("view/admin/"+t.route):t.expanded=!t.expanded}onLeafMenuClick(t){this.menuTree.root.children.filter(e=>e!==t.parent)}getLeafSequence(t){return t.parent?0===t.index?"first":t.parent.children.length-1===t.index?"last":null:null}createRouterLink(t){return this.router.createUrlTree([t.route],{relativeTo:this.activatedRoute}).toString()}assignDepth(t){let e=0;const n=(t,i)=>{t.map((t,o)=>{var a,s;return t.parent=i,t.index=o,e=t.parent?(null===(a=t.parent)||void 0===a?void 0:a.depth)+1:0,t.depth=e,t.children.length&&n(t.children,t),t.route===(null===(s=this.activatedRoute.firstChild)||void 0===s?void 0:s.routeConfig.path)&&(t.expanded=!0,t.parent&&(t.parent.expanded=!0)),t})};return n(t.root.children,null),t}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(a.a),l.Mb(a.c),l.Mb(z.c),l.Mb(s.G),l.Mb(l.h))},t.\u0275cmp=l.Gb({type:t,selectors:[["sd-sidebar"]],hostVars:1,hostBindings:function(t,e){2&t&&l.Cc("@slide",e.slide)},inputs:{tinySidebar:"tinySidebar"},features:[l.yb([s.G]),l.xb],decls:1,vars:1,consts:[[4,"eTree","eTreeFrom"],[4,"ngIf","ngIfElse"],["leafNodeTemplate",""],[1,"container",3,"routerLink","routerLinkActive","click"],[1,"icon-box"],[1,"papycon",3,"ngClass"],[4,"ngIf"],[1,"label"],["class","papycon papycon-chevron3-right chevron",4,"ngIf"],[1,"papycon","papycon-chevron3-right","chevron"],["class","container",3,"leaf","ngClass","routerLink","routerLinkActive","click",4,"ngIf"],[1,"container",3,"ngClass","routerLink","routerLinkActive","click"],["class","icon-box",4,"ngIf"],[1,"node"],["class","label",3,"topNode",4,"ngIf"]],template:function(t,e){1&t&&l.Dc(0,kt,4,2,"ng-container",0),2&t&&l.jc("eTreeFrom",e.menuTree.root)},directives:[Ot.a,i.t,a.d,a.e,i.q],pipes:[T.a],styles:["[_nghost-%COMP%]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;padding:30px 0;display:-webkit-box;display:-ms-flexbox;display:flex;min-height:calc(100vh - 70px);-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:258px;border-right:1px solid #dadada;-webkit-box-sizing:border-box;box-sizing:border-box;background:#fff;position:-webkit-sticky;position:sticky;top:0;left:0;z-index:1;overflow-y:auto}.tinySidebar[_nghost-%COMP%]{width:84px;padding:0}.icon-box[_ngcontent-%COMP%]{width:24px;height:24px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:10px}.container[_ngcontent-%COMP%], .node[_ngcontent-%COMP%] > .label.topNode[_ngcontent-%COMP%]{font-family:NotoSans-Regular;font-size:16px;letter-spacing:-.5px;color:#1e1e1e}.container[_ngcontent-%COMP%]{width:257px;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;padding:16px 24px 16px 29px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;outline:none}.container.active[_ngcontent-%COMP%]{background-color:#f4f4f4}.container.active[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .container.expanded[_ngcontent-%COMP%]{font-family:NotoSans-Medium}.container.expanded[_ngcontent-%COMP%], .container.leaf[_ngcontent-%COMP%]{background-color:#f4f4f4}.container.leaf[_ngcontent-%COMP%]{font-size:14px;color:#6c6c6c;padding:14px 24px 14px 64px}.container.leaf.first[_ngcontent-%COMP%]{padding-top:20px}.container.leaf.last[_ngcontent-%COMP%]{padding-bottom:24px}.container.leaf[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{line-height:14px}.container.leaf.active[_ngcontent-%COMP%]{color:#ff6100}i[_ngcontent-%COMP%]{font-color:#363636}.papycon-thumbnail[_ngcontent-%COMP%]{font-size:17px}.papycon-list2[_ngcontent-%COMP%]{font-size:18px}.papycon-not-used[_ngcontent-%COMP%]{font-size:24px}.papycon-profile2[_ngcontent-%COMP%]{font-size:20px}.chevron[_ngcontent-%COMP%]{font-size:10px;margin-left:auto}a[_ngcontent-%COMP%]{text-decoration:none;color:inherit}"],data:{animation:[U.a.rotate("chevron","90"),Object(mt.m)("leaf",[Object(mt.l)(":enter",[Object(mt.k)({height:"0",marginTop:"0",paddingTop:"0",paddingBottom:"0",overflow:"hidden"}),Object(mt.e)("{{ duration }}ms cubic-bezier(0.86, 0, 0.07, 1)",Object(mt.k)({height:"*",marginTop:"*",paddingTop:"*",paddingBottom:"*",overflow:"hidden"}))]),Object(mt.l)(":leave",[Object(mt.k)({height:"*",marginTop:"*",paddingTop:"*",paddingBottom:"*",overflow:"hidden"}),Object(mt.e)("{{ duration }}ms cubic-bezier(0.86, 0, 0.07, 1)",Object(mt.k)({height:"0",marginTop:"0",paddingTop:"0",paddingBottom:"0",overflow:"hidden"}))])]),Object(mt.m)("slide",[Object(mt.j)("long",Object(mt.k)({width:"258px",padding:"30px 0"})),Object(mt.j)("tiny",Object(mt.k)({padding:"0",width:"84px"})),Object(mt.l)("tiny => long",[Object(mt.e)("400ms ease-in")]),Object(mt.l)("long => tiny",[Object(mt.e)("400ms ease-out")])]),Object(mt.m)("label",[Object(mt.l)(":enter",[Object(mt.k)({opacity:0}),Object(mt.e)("{{ duration }}ms",Object(mt.k)({opacity:1}))]),Object(mt.l)(":leave",[Object(mt.k)({opacity:1}),Object(mt.e)("{{ duration }}ms",Object(mt.k)({opacity:0}))])])]},changeDetection:0}),t})();var Et=n("bR9K");const Tt=["contentContainer"],It=["sdModalOutlet"];function Rt(t,e){if(1&t){const t=l.Tb();l.Sb(0,"sd-main-toolbar",8),l.Zb("logoToggle",(function(){return l.uc(t),l.dc().toggleSidebar()})),l.Rb()}}function Nt(t,e){if(1&t&&l.Nb(0,"sd-sidebar",9),2&t){const t=l.dc();l.Eb("tinySidebar",!t.sidebarToggle),l.jc("tinySidebar",!t.sidebarToggle)}}const At=function(t,e){return{top:t,left:e}};function zt(t,e){if(1&t&&(l.Sb(0,"div",10),l.Nb(1,"sd-date-picker",11),l.Rb()),2&t){const t=l.dc();l.zb(1),l.jc("disablePast",!0)("initialDate",t.datePickerService.status.initialDate)("title",t.datePickerService.status.title)("ngStyle",l.oc(4,At,null==t.datePickerService.status.position?null:t.datePickerService.status.position.top,null==t.datePickerService.status.position?null:t.datePickerService.status.position.left))}}let Lt=(()=>{class t{constructor(t,e,n,i){this.datePickerService=t,this.activateRoute=e,this.contentService=n,this.modalService=i,this.sidebarToggle=!0}get isLoginPage(){var t;return"login"===(null===(t=this.activateRoute.snapshot.firstChild)||void 0===t?void 0:t.routeConfig.path)}ngOnInit(){this.contentService.togglePageLoader(!1)}ngAfterViewInit(){this.modalService.registerOutlet(this.sdModalOutlet)}toggleSidebar(){this.sidebarToggle=!this.sidebarToggle}onActivate(){this.contentContainerEl&&(this.contentContainerEl.nativeElement.scrollTop=0)}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(rt.b),l.Mb(a.a),l.Mb(ct.f),l.Mb(lt.c))},t.\u0275cmp=l.Gb({type:t,selectors:[["sd-root"]],viewQuery:function(t,e){var n;1&t&&(l.Lc(Tt,!0),l.zc(It,!0,l.Q)),2&t&&(l.sc(n=l.ac())&&(e.contentContainerEl=n.first),l.sc(n=l.ac())&&(e.sdModalOutlet=n.first))},features:[l.yb([s.G])],decls:11,vars:3,consts:[[3,"logoToggle",4,"ngIf"],[3,"tinySidebar",4,"ngIf"],[1,"admin-content-container"],["contentContainer",""],[3,"activate"],["class","overlay",4,"ngIf"],[1,"sd-modal-container"],["sdModalOutlet",""],[3,"logoToggle"],[3,"tinySidebar"],[1,"overlay"],[3,"disablePast","initialDate","title","ngStyle"]],template:function(t,e){1&t&&(l.Dc(0,Rt,1,0,"sd-main-toolbar",0),l.Sb(1,"sd-main-contents"),l.Dc(2,Nt,1,3,"sd-sidebar",1),l.Sb(3,"div",2,3),l.Sb(5,"router-outlet",4),l.Zb("activate",(function(){return e.onActivate()})),l.Rb(),l.Rb(),l.Rb(),l.Nb(6,"sd-toast"),l.Dc(7,zt,2,7,"div",5),l.Sb(8,"div",6),l.Ob(9,null,7),l.Rb()),2&t&&(l.jc("ngIf",!e.isLoginPage),l.zb(2),l.jc("ngIf",!e.isLoginPage),l.zb(5),l.jc("ngIf",e.datePickerService.status.isVisible))},directives:[i.t,pt,a.h,ht.a,ft,wt,Et.a,i.w],styles:[".admin-content-container[_ngcontent-%COMP%]{height:100%;width:100%;overflow:auto}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(30,30,30,.3);z-index:999}"],changeDetection:0}),t})();var Ft=n("l5mm"),Gt=n("cp0P"),Ut=n("JX91"),jt=function(t){return t.PRINT="PRINT",t.DOWNLOAD="DOWNLOAD",t.VIEW="VIEW",t}({}),$t=function(t){return t.HOURLY="HOURLY",t.DAILY="DAILY",t.MONTHLY="MONTHLY",t.YEARLY="YEARLY",t}({}),Ht=function(t){return t.MOST_VIEWED_DOCUMENTS="MOST_VIEWED_DOCUMENTS",t.MOST_DOWNLOADED_DOCUMENTS="MOST_DOWNLOADED_DOCUMENTS",t.MOST_PRINTED_DOCUMENTS="MOST_PRINTED_DOCUMENTS",t}({});const Vt="downCount",Bt="printCount",Wt="openCount";let Yt=(()=>{class t{constructor(t,e){this.baseHref=t,this.httpClient=e;const n=Object.assign(Object.assign({},{"Accept-Language":"utf-8","Content-Encoding":"gzip","Cache-Control":"max-age=0"}),{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"});this.noCacheHeaders=new o.e(n),this.gzipHeaders=new o.e({"Content-Encoding":"gzip","Accept-Language":"utf-8"})}get statisticUrl(){return this.baseHref+"v4/statistic"}get capacityUrl(){return this.baseHref+"v4/monitor"}getTopCountByPropertyName(t,e){const n=this.baseHref+"v4/statistic/documents/top",i=(new o.f).append("type",t).append("listingCount",String(e));return this.httpClient.get(n,{headers:this.gzipHeaders,params:i})}getDocumentIncrement(){return this.httpClient.get(this.statisticUrl+"/documents/register/increment")}getServerSummaryList(){return this.httpClient.get(this.capacityUrl+"/summary",{headers:this.noCacheHeaders})}getTimezoneStatistic(t){let e="/statistic/timezone";t.documentId&&(e=e.concat("/documents/"+t.documentId)),t.isAccumulated&&(e=e.concat("/accumulated"));const n=`${this.baseHref}v4${e}`,i=(new o.f).append("startDate",t.startDate.toString()).append("endDate",t.endDate.toString()).append("periodUnit",t.periodUnit);return this.httpClient.get(n,{headers:this.noCacheHeaders,params:i})}getSystemUsage(t,e,n){const i=this.statisticUrl+"/system-usage",a=(new o.f).append("startDate",t.toString()).append("endDate",e.toString()).append("periodUnit",n);return this.httpClient.get(i,{headers:this.gzipHeaders,params:a})}saveAllDateStatistic(t,e,n,i,o,a){return this.httpClient.get(this.statisticUrl+"/makeExcel"+`?monthYearZone=${t}&dateYearZone=${e}&dateMonthZone=${n}&hourYearZone=${i}&hourMonthZone=${o}&hourDateZone=${a}`,{headers:this.gzipHeaders,responseType:"blob"})}getTotalCountByPropertyName(t){return this.httpClient.get(this.statisticUrl+"/documents/total",{headers:this.gzipHeaders,params:(new o.f).set("propertyName",t)})}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(i.a),l.Wb(o.b))},t.\u0275prov=l.Ib({token:t,factory:t.\u0275fac}),t})();var Kt=n("suZY");function Zt(t,e){if(1&t&&(l.Sb(0,"div"),l.Sb(1,"span"),l.Fc(2),l.ec(3,"number"),l.Rb(),l.Sb(4,"p"),l.Fc(5),l.ec(6,"translate"),l.Rb(),l.Rb()),2&t){const t=e.$implicit;l.zb(2),l.Gc(l.fc(3,2,t.value)),l.zb(3),l.Gc(l.fc(6,4,t.label))}}let qt=(()=>{class t{constructor(t,e,n){this.subs=t,this.statisticDataService=e,this.changeDetectorRef=n,this.statistic=[{value:0,label:"OPEN_COUNT_TODAY"},{value:0,label:"TOTAL_OPEN_COUNT"},{value:0,label:"DOWNLOAD_COUNT_TODAY"},{value:0,label:"PRINT_COUNT_TODAY"}],this.todayStart=(new Date).setHours(0,0,0,0),this.todayEnd=(new Date).setHours(23,59,59,999)}ngOnInit(){this.getStatistic()}getStatistic(){this.subs.set("getStatistic",Ft.a(15e3).pipe(Ut.a(0)).subscribe({next:()=>{Gt.a([this.statisticDataService.getTimezoneStatistic({startDate:this.todayStart,endDate:this.todayEnd,periodUnit:$t.DAILY}),this.statisticDataService.getTotalCountByPropertyName("openCount")]).subscribe({next:([t,e])=>{this.statistic[0].value=parseInt(t[0].openCount),this.statistic[1].value=parseInt(e),this.statistic[2].value=parseInt(t[0].downCount),this.statistic[3].value=parseInt(t[0].printCount),this.changeDetectorRef.markForCheck()},error:t=>{this.statistic[0].value=-1,this.statistic[1].value=-1,this.statistic[2].value=-1,this.statistic[3].value=-1,this.changeDetectorRef.markForCheck()}})}}))}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(s.G),l.Mb(Yt),l.Mb(l.h))},t.\u0275cmp=l.Gb({type:t,selectors:[["sd-statistic-board"]],features:[l.yb([s.G])],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(l.Sb(0,"article"),l.Dc(1,Zt,7,6,"div",0),l.Rb()),2&t&&(l.zb(1),l.jc("ngForOf",e.statistic))},directives:[i.s],pipes:[Kt.a,T.a],styles:["article[_ngcontent-%COMP%]{height:110px;border-radius:4px;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:#fff}article[_ngcontent-%COMP%], article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%]{color:#ff6100}article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:not(:last-child){border-right:1px solid #dadada}article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:NotoSans-Bold;font-size:24px;height:20px;line-height:20px;letter-spacing:-.6px;margin-bottom:12px;color:#1e1e1e}article[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:14px;height:14px;font-size:14px;font-family:NotoSans-Regular;letter-spacing:-.5px;color:#1e1e1e;margin:0}"],changeDetection:0}),t})();var Jt=n("C8p/");const Qt=(t,e,n,i)=>`${i||e.datasets[t.datasetIndex].label}: ${e.datasets[t.datasetIndex].data[t.index]} ${n}`;let Xt=(()=>{class t{constructor(t,e,n,i){this.changeDetectorRef=t,this.statisticDataService=e,this.subs=n,this.translatePipe=i,this.chartResponsive=!0,this.chartMaintainAspectRatio=!1,this.chartElements={line:{tension:0,fill:!1}},this.chartLegend={daily:{display:!1},monthly:{display:!1}},this.chartScales={yAxes:[{ticks:{beginAtZero:!1,min:0,stepSize:20,callback:t=>0===t?`${t}${this.translatePipe.transform("NUMBER_OF_CASES")}`:t}}]},this.chartColor={daily:[{borderColor:"#ff6600",backgroundColor:"#ffffff"}],monthly:[{borderColor:"#f79f1a",backgroundColor:"#f79f1a"}]},this.defaultChartTooltip={mode:"index",intersect:!1,xPadding:16,yPadding:14,bodySpacing:8,callbacks:{label:(t,e)=>{const n=this.translatePipe.transform("NUMBER_OF_CASES"),i=this.translatePipe.transform("OPEN_COUNT");return Qt(t,e,n,i)},labelColor:()=>({borderColor:"#f79f1a",backgroundColor:"#f79f1a"}),title:()=>null}},this.chartTooltips={daily:Object.assign(Object.assign({},this.defaultChartTooltip),{callbacks:Object.assign(Object.assign({},this.defaultChartTooltip.callbacks),{labelColor:()=>({borderColor:"#ffffff",backgroundColor:"#ff6600"})})}),monthly:Object.assign(Object.assign({},this.defaultChartTooltip),{callbacks:Object.assign(Object.assign({},this.defaultChartTooltip.callbacks),{labelColor:()=>({borderColor:"#ffffff",backgroundColor:"#f79f1a"})})})},this.chartType={daily:"line",monthly:"bar"},this.dailyOpenChartDataSets=[{data:[],label:""}],this.dailyOpenChartLabels=[],this.monthlyOpenChartDataSets=[{data:[],label:"",barThickness:10}],this.monthlyOpenChartLabels=[]}ngOnInit(){this.getCharts(),this.initFields(this.dailyOpenChartDataSets[0]),this.initFields(this.monthlyOpenChartDataSets[0])}makeTwoDigits(t){return("0"+t).slice(-2)}initFields(t){t.label=this.translatePipe.transform("OPEN_COUNT_COLUMN"),this.changeDetectorRef.markForCheck()}getCharts(){const t=Object(U.I)(U.j.WEEK,new Date),e=Object(U.I)(U.j.MONTH,new Date);e.startDate.setMonth(e.startDate.getMonth()-4),this.subs.set("getChart",Ft.a(15e3).pipe(Ut.a(0)).subscribe({next:()=>{Gt.a([this.statisticDataService.getTimezoneStatistic({startDate:t.startDate.getTime(),endDate:t.endDate.getTime(),periodUnit:$t.DAILY}),this.statisticDataService.getTimezoneStatistic({startDate:e.startDate.getTime(),endDate:e.endDate.getTime(),periodUnit:$t.MONTHLY})]).subscribe({next:([t,e])=>{this.dailyOpenChartLabels=[],this.monthlyOpenChartLabels=[];const n=[],i=[];t.forEach(t=>{const e=`${this.makeTwoDigits(t.date)}${this.translatePipe.transform("DAYS")}`;this.dailyOpenChartLabels.push(e),i.push(parseInt(t.openCount))}),e.forEach(t=>{const e=`${this.makeTwoDigits(t.month)}${this.translatePipe.transform("MONTH")}`;this.monthlyOpenChartLabels.push(e),n.push(parseInt(t.openCount))}),this.dailyOpenChartDataSets[0].data=i,this.monthlyOpenChartDataSets[0].data=n,this.chartComponents.forEach(t=>{t.update()}),this.changeDetectorRef.markForCheck()}})}}))}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(l.h),l.Mb(Yt),l.Mb(s.G),l.Mb(w.d))},t.\u0275cmp=l.Gb({type:t,selectors:[["sd-statistic-chart"]],viewQuery:function(t,e){var n;1&t&&l.Lc(Jt.a,!0),2&t&&l.sc(n=l.ac())&&(e.chartComponents=n)},features:[l.yb([s.G])],decls:8,vars:28,consts:[[1,"chart-container"],[1,"line-chart",3,"title"],[3,"dataSets","labels","responsive","maintainAspectRatio","elements","legend","scales","type","color","tooltips","visibleLegend"],[1,"bar-chart",3,"title"]],template:function(t,e){1&t&&(l.Nb(0,"sd-server-capacity"),l.Sb(1,"div",0),l.Sb(2,"sd-card",1),l.ec(3,"translate"),l.Nb(4,"sd-chart",2),l.Rb(),l.Sb(5,"sd-card",3),l.ec(6,"translate"),l.Nb(7,"sd-chart",2),l.Rb(),l.Rb()),2&t&&(l.zb(2),l.jc("title",l.fc(3,24,"DAILY_OPEN_COUNT")),l.zb(2),l.jc("dataSets",e.dailyOpenChartDataSets)("labels",e.dailyOpenChartLabels)("responsive",e.chartResponsive)("maintainAspectRatio",e.chartMaintainAspectRatio)("elements",e.chartElements)("legend",e.chartLegend.daily)("scales",e.chartScales)("type",e.chartType.daily)("color",e.chartColor.daily)("tooltips",e.chartTooltips.daily)("visibleLegend",!0),l.zb(1),l.jc("title",l.fc(6,26,"MONTHLY_OPEN_COUNT")),l.zb(2),l.jc("dataSets",e.monthlyOpenChartDataSets)("labels",e.monthlyOpenChartLabels)("responsive",e.chartResponsive)("maintainAspectRatio",e.chartMaintainAspectRatio)("elements",e.chartElements)("legend",e.chartLegend.monthly)("scales",e.chartScales)("type",e.chartType.monthly)("color",e.chartColor.monthly)("tooltips",e.chartTooltips.monthly)("visibleLegend",!0))},styles:["[_nghost-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}sd-server-capacity[_ngcontent-%COMP%]{margin-bottom:20px}.chart-container[_ngcontent-%COMP%]{-webkit-box-sizing:border-box;box-sizing:border-box}.chart-container[_ngcontent-%COMP%], .chart-container[_ngcontent-%COMP%]   sd-card[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.chart-container[_ngcontent-%COMP%]   sd-card[_ngcontent-%COMP%]{width:calc(50% - 10px)}.chart-container[_ngcontent-%COMP%]   sd-card.bar-chart[_ngcontent-%COMP%], .chart-container[_ngcontent-%COMP%]   sd-card.line-chart[_ngcontent-%COMP%]{max-height:387px;margin:0;-webkit-box-sizing:border-box;box-sizing:border-box}.chart-container[_ngcontent-%COMP%]   sd-card[_ngcontent-%COMP%]:first-child{margin-right:10px}.chart-container[_ngcontent-%COMP%]   sd-card[_ngcontent-%COMP%]:last-child{margin-left:10px}.chart-container[_ngcontent-%COMP%]   sd-card[_ngcontent-%COMP%]   sd-chart[_ngcontent-%COMP%]     .chart-container{max-height:262px;height:100%}table[_ngcontent-%COMP%]{padding:20px 30px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:280px;font-size:13px;line-height:22px}table[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;overflow:hidden}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{padding:0;border-bottom:1px solid #dadada}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1;flex:1}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{width:25%;-webkit-box-flex:0;-ms-flex:0 0 25%;flex:0 0 25%}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:400;color:#6c6c6c}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-overflow:ellipsis;word-wrap:break-word;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;margin:14px 0}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;-webkit-box-flex:1;-ms-flex:1;flex:1}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding:0}.flex-end[_ngcontent-%COMP%]{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}@media screen and (max-width:1300px){sd-card[_ngcontent-%COMP%]:not(.capacity){max-width:unset;-ms-flex-preferred-size:unset;flex-basis:unset}}"],changeDetection:0}),t})(),te=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Gb({type:t,selectors:[["sd-dashboard"]],features:[l.yb([])],decls:2,vars:0,template:function(t,e){1&t&&(l.Nb(0,"sd-statistic-board"),l.Nb(1,"sd-statistic-chart"))},directives:[qt,Xt],styles:["[_nghost-%COMP%]{min-width:1120px}sd-statistic-chart[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex:auto;flex:auto;margin-top:20px}"]}),t})();var ee=n("9Nmd"),ne=n("akkN"),ie=function(t){return t[t.DISALLOW_SAVE=0]="DISALLOW_SAVE",t[t.DISALLOW_DOWNLOAD=1]="DISALLOW_DOWNLOAD",t[t.DISALLOW_PRINTING=2]="DISALLOW_PRINTING",t[t.DISALLOW_ANNOTS=3]="DISALLOW_ANNOTS",t[t.DISALLOW_FORM=4]="DISALLOW_FORM",t}({});const oe=(t,e)=>{if(!t)return"";const n=new Date;switch(t){case ee.a.ONE_DAY:n.setDate(n.getDate()+1);break;case ee.a.ONE_WEEK:n.setDate(n.getDate()+7);break;case ee.a.ONE_MONTH:n.setMonth(n.getMonth()+1);break;case ee.a.ONE_YEAR:n.setFullYear(n.getFullYear()+1);break;case ee.a.TWO_HUNDRED_YEAR:n.setFullYear(n.getFullYear()+200)}t instanceof Date&&n.setTime(t.getTime());const i=new Date,o=Math.round((n.getTime()-i.getTime())/864e5);if(o>36525)return e.transform("NO_EXPIRATION");const a=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0");return`${n.getFullYear()}-${a}-${s}(${o}${e.transform("DAYS_LEFT")})`};var ae=n("Ya2p"),se=n("GyhO");let re=(()=>{class t{constructor(t,e,n){this.baseHref=t,this.httpClient=e,this.productService=n}get documentsUrl(){return this.baseHref+"v4/documents"}fetchPdf(t){return this.httpClient.get(this.baseHref+"v4/documents/admin",{headers:ae.e,params:this.makeHttpParams(t)}).pipe(bt.a(t=>{t.resources.map(t=>{t.id=t.pdf.secureId?t.pdf.secureId:String(t.pdf.streamdocsId),t.pdf.fileSize=parseInt(t.pdf.fileSize),t.pdf.createdAt=parseInt(t.pdf.createdAt),t.pdf.updatedAt=parseInt(t.pdf.updatedAt),t.statistic.downCount=parseInt(t.statistic.downCount),t.statistic.openCount=parseInt(t.statistic.openCount),t.statistic.printCount=parseInt(t.statistic.printCount)})}))}postPdf(t){const e=new FormData,n=this.toMilliseconds(t.accessRestrictions.days,t.accessRestrictions.hours,t.accessRestrictions.minutes);return e.append("pdf",t.file,t.file.name),e.append("docName",t.docName),e.append("save",String(t.functions.save)),e.append("download",String(t.functions.download)),e.append("print",String(t.functions.printing)),e.append("annots",String(t.functions.annots)),e.append("form",String(t.functions.form)),e.append("description",String(t.description)),t.accessRestrictions.maxCount&&e.append("maxCount",String(t.accessRestrictions.maxCount)),n&&e.append("openedLifespan",String(n)),t.lifeSpan&&e.append("lifespan",t.lifeSpan),t.expiredAt&&e.append("expiredAt",String(t.expiredAt)),this.httpClient.post(this.documentsUrl,e,{reportProgress:!0,observe:"events"})}toMilliseconds(t=0,e=0,n=0){return 1e3*(24*t*60*60+60*e*60+60*n)}patchPdfName(t,e){return this.httpClient.patch(`${this.baseHref}v4/documents/${t}/docname`,{docName:e})}patchExpiryDate(t,e){return this.httpClient.patch(`${this.baseHref}v4/documents/${t}/lifespan`,e)}deletePdf(t){return this.httpClient.delete(`${this.documentsUrl}/${t}`)}getOriginalDownloadUrl(t){return`${this.baseHref}v4/documents/${encodeURIComponent(t)}/source`}makeHttpParams(t){let e=new o.f;return Object.keys(t).filter(e=>void 0!==t[e]).forEach(n=>{e=e.set(n,String(t[n]))}),e}addDoc(t,e){var n,i,o;const a=e.get("expiryDate"),r="number"==typeof a.value.value.type,c=e.get("functions").controls,l=e.get("accessRestrictions").controls,d=l.maxCount,p=l.openedLifespan;return this.postPdf({file:t,docName:null!==(n=e.get("docName").value)&&void 0!==n?n:t.name,lifeSpan:r?null:a.value.value.type,expiredAt:r?a.value.value.type:null,accessRestrictions:{maxCount:null!==(o=null===(i=d.value)||void 0===i?void 0:i.value)&&void 0!==o?o:null,days:p.value?p.value[s.R.DAYS]:null,hours:p.value?p.value[s.R.HOURS]:null,minutes:p.value?p.value[s.R.MINUTES]:null},functions:{save:!this.productService.isStreamdocs()||c[ie.DISALLOW_SAVE].value,download:!this.productService.isStreamdocs()||c[ie.DISALLOW_DOWNLOAD].value,printing:!this.productService.isStreamdocs()||c[ie.DISALLOW_PRINTING].value,annots:!this.productService.isStreamdocs()||c[ie.DISALLOW_ANNOTS].value,form:!this.productService.isStreamdocs()||c[ie.DISALLOW_FORM].value},description:e.get("description").value})}uploadFiles(t,e){const n=[];return t.forEach(t=>{n.push(this.addDoc(t.file,e))}),se.a(...n)}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(i.a),l.Wb(o.b),l.Wb(ut.b))},t.\u0275prov=l.Ib({token:t,factory:t.\u0275fac}),t})();var ce=n("xEdf"),le=n("L5DI");function de(t,e){if(1&t){const t=l.Tb();l.Sb(0,"button",7),l.Zb("click",(function(){return l.uc(t),l.dc().downloadOriginalFile()})),l.Nb(1,"i",9),l.Fc(2),l.ec(3,"translate"),l.Rb()}if(2&t){const t=l.dc();l.jc("disabled",1!==(null==t.formGroup.controls.checkedIds.value?null:t.formGroup.controls.checkedIds.value.length)||!t.hasOriginalFileInChecked||t.hasDeleted()),l.zb(2),l.Gc(l.fc(3,2,"ORIGINAL_DOWNLOAD"))}}const pe=function(){return["papycon-settings"]};function he(t,e){if(1&t){const t=l.Tb();l.Sb(0,"div"),l.Sb(1,"sd-editable-label",20),l.Zb("inputValueChange",(function(n){l.uc(t);const i=e.$implicit;return l.dc().editDocName(n,i.id)}))("iconButtonClick",(function(n){l.uc(t);const i=e.$implicit,o=l.dc();return"papycon-settings"===n&&o.openDetailDialog(i)}))("dblclick",(function(n){l.uc(t);const i=e.$implicit;return l.dc().onDoubleClick(n,i.pdf.deleted)})),l.Rb(),l.Rb()}if(2&t){const t=e.$implicit;l.zb(1),l.jc("readonly",t.pdf.deleted)("label",t.pdf.docName)("iconButtons",l.mc(3,pe))}}function ge(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.Rb()),2&t){const t=e.$implicit,n=l.dc();l.zb(1),l.Gc(n.fileStatus(t.pdf.deleted))}}function be(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.Rb()),2&t){const t=e.$implicit;l.zb(1),l.Gc((null==t.owner?null:t.owner.name)||"(unknown)")}}function ue(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.ec(2,"date"),l.Rb()),2&t){const t=e.$implicit;l.zb(1),l.Gc(l.gc(2,1,t.pdf.createdAt,"yyyy-MM-dd"))}}function fe(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.Rb()),2&t){const t=e.$implicit,n=l.dc();l.Eb("deleted",t.pdf.deleted),l.zb(1),l.Gc(n.fileSize(t.pdf.fileSize))}}function me(t,e){if(1&t){const t=l.Tb();l.Sb(0,"admin-dropdown",23),l.Zb("click",(function(){l.uc(t);const e=l.dc().$implicit;return l.dc().onExpirationButtonClick(e)}))("dblclick",(function(e){return l.uc(t),e.stopPropagation()})),l.Rb()}if(2&t){const t=l.dc().$implicit,e=l.dc();l.jc("formControlName",t.id)("options",e.rangeOptions)("labelFunc",e.getLabelFunction())}}function Ce(t,e){1&t&&(l.Sb(0,"span",24),l.Fc(1,"-"),l.Rb())}function xe(t,e){if(1&t&&(l.Sb(0,"div"),l.Qb(1,14),l.Dc(2,me,1,3,"admin-dropdown",21),l.Dc(3,Ce,2,0,"span",22),l.Pb(),l.Rb()),2&t){const t=e.$implicit,n=l.dc();l.zb(1),l.jc("formGroup",n.expiryDateFormGroup),l.zb(1),l.jc("ngIf",!t.pdf.deleted),l.zb(1),l.jc("ngIf",t.pdf.deleted)}}function Oe(t,e){if(1&t){const t=l.Tb();l.Sb(0,"div"),l.Sb(1,"button",25),l.Zb("click",(function(){l.uc(t);const n=e.$implicit;return l.dc().copyLink(n)}))("dblclick",(function(e){return l.uc(t),e.stopPropagation()})),l.Nb(2,"i",26),l.Rb(),l.Rb()}if(2&t){const t=e.$implicit;l.zb(1),l.jc("disabled",t.pdf.deleted)}}function Me(t,e){1&t&&(l.Sb(0,"div",27),l.Sb(1,"div",28),l.Nb(2,"span",29),l.Sb(3,"p",30),l.Fc(4),l.ec(5,"translate"),l.Rb(),l.Nb(6,"div",31),l.Sb(7,"p",32),l.Fc(8),l.ec(9,"translate"),l.Rb(),l.Rb(),l.Rb()),2&t&&(l.zb(4),l.Gc(l.fc(5,2,"NO_DOCUMENT")),l.zb(4),l.Gc(l.fc(9,4,"PLEASE_ADD_DOCUMENT")))}let _e=(()=>{class t{constructor(t,e,n,i,o,a,s,c,l,d,p,h,g,u,f){this.changeDetectorRef=t,this.documentListDataService=e,this.toastService=n,this.subs=i,this.translatePipe=o,this.adminDialogService=a,this.datePickerService=s,this.pdfDataService=c,this.bytesPipe=l,this.resourceService=d,this.router=p,this.formBuilder=h,this.productService=g,this.downloadService=u,this.baseHref=f,this.filterMenus=[{label:this.translatePipe.transform("REGISTRATION_DATE"),type:"date",item:Object.values(b).filter(t=>t!==b.CUSTOM).map(t=>({label:t,value:t})),isMulti:!1},{label:this.translatePipe.transform("MANUAL_SELECT"),type:"custom-date",item:[{label:"",value:b.CUSTOM}],isMulti:!1}],this.formGroup=this.formBuilder.group({expiryDate:this.formBuilder.array([]),checkedIds:[]}),this.countOfCompletedUpload=0,this.addDocFormGroup=this.formBuilder.group({docName:["",r.F.required],description:"",expiryDate:{label:this.translatePipe.transform("BASIC_EXPIRY_DATE_OPTION"),value:{type:ee.a.ONE_MONTH}},accessRestrictions:this.formBuilder.group({maxCount:{value:null,disabled:!0},openedLifespan:{value:null,disabled:!0}}),functions:this.formBuilder.group({[ie.DISALLOW_SAVE]:!0,[ie.DISALLOW_DOWNLOAD]:!0,[ie.DISALLOW_PRINTING]:!0,[ie.DISALLOW_ANNOTS]:!0,[ie.DISALLOW_FORM]:!0}),files:[],uploadProgress:this.formBuilder.group({})}),this.initialAddDocFormGroupValues=this.addDocFormGroup.value,this.expiryDateFormGroup=this.formBuilder.group({}),this.rangeOptions=[{label:this.translatePipe.transform("ONE_DAY"),value:{type:ee.a.ONE_DAY}},{label:this.translatePipe.transform("ONE_WEEK"),value:{type:ee.a.ONE_WEEK}},{label:this.translatePipe.transform("ONE_MONTH"),value:{type:ee.a.ONE_MONTH}},{label:this.translatePipe.transform("ONE_YEAR"),value:{type:ee.a.ONE_YEAR}},{label:this.translatePipe.transform("NO_EXPIRATION"),value:{type:ee.a.TWO_HUNDRED_YEAR}},{label:this.translatePipe.transform("DATE_INPUT"),value:{type:()=>(this.datePickerService.statusSrc.next({position:{top:`calc(50% - ${rt.b.DATE_PICKER_HEIGHT/2}px)`,left:`calc(50% - ${rt.b.DATE_PICKER_WIDTH/2}px)`},title:this.translatePipe.transform("DATE_INPUT"),isVisible:!0,initialDate:Number(this.template.validity.expirationDate)}),this.datePickerService.dateChange$)}}],this.displayedColumns=[{key:"docName",title:this.translatePipe.transform("DOCUMENT_NAME"),sortable:!0},{key:"status",title:this.translatePipe.transform("STATUS"),sortable:!1},{key:"userName",title:this.translatePipe.transform("AUTHOR"),sortable:!0},{key:"createdAt",title:this.translatePipe.transform("REGISTRATION_DATE"),sortable:!0},{key:"size",title:this.translatePipe.transform("FILE_SIZE"),sortable:!1},{key:"expiredAt",title:this.translatePipe.transform("EXPIRY_DATE"),sortable:!1},{key:"copy",title:"",sortable:!1}],this.isLoading=!0,this.checkedTemplates=[],this.table=new N.a}get currentPageIndex(){return this.table.getPageInfo().currentIndex}get acceptableExtensions(){return this.productService.getAcceptableExtensions().join(", ")}get isVu(){return"StreamDocs Vu!"===this.productService.getProductType()}get hasOriginalFileInChecked(){var t;return null===(t=this.formGroup.controls.checkedIds.value)||void 0===t?void 0:t.every(t=>this.table.getData().find(e=>e.id===t).pdf.originExists)}ngOnInit(){this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc),this.subs.push(this.table.filterChanges.subscribe({next:()=>{this.table.reset(),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}}),this.adminDialogService.dialogEvent$.pipe(L.a(t=>t.dialogType===c.c.DOCUMENT_DETAIL&&"confirm"===t.action)).subscribe({next:()=>{this.subs.set("patchDoc",Gt.a([this.documentListDataService.patchPdfName(this.selectedItem.id,this.addDocFormGroup.get("docName").value),this.resourceService.patchPdfDescription({id:this.selectedItem.id,description:this.addDocFormGroup.get("description").value}),this.resourceService.patchPdfAuthority({id:this.selectedItem.id,authority:{save:this.addDocFormGroup.get("functions").controls[ie.DISALLOW_SAVE].value,annots:this.addDocFormGroup.get("functions").controls[ie.DISALLOW_ANNOTS].value,download:this.addDocFormGroup.get("functions").controls[ie.DISALLOW_DOWNLOAD].value,print:this.addDocFormGroup.get("functions").controls[ie.DISALLOW_PRINTING].value,form:this.addDocFormGroup.get("functions").controls[ie.DISALLOW_FORM].value}})]).subscribe({next:()=>{this.toastService.showToast({icon:"success",text:this.translatePipe.transform("SUCCESS_PATCH_DOCUMENT")}),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}}))}}),this.adminDialogService.dialogEvent$.pipe(L.a(t=>t.dialogType===c.c.DELETE_ITEMS)).subscribe({next:t=>{"confirm"===t.action&&this.deleteDoc()}}),this.adminDialogService.dialogEvent$.pipe(L.a(t=>t.dialogType===c.c.ADD_DOCUMENT)).subscribe({next:t=>{if("confirm"===t.action){const e=t.data.files,n=[],i=e.length;let a=0;this.countOfCompletedUpload=0,e.forEach(t=>{n.push(this.addDocFormGroup.controls.uploadProgress.controls[t.id])}),this.documentListDataService.uploadFiles(e,this.addDocFormGroup).subscribe({next:t=>{t.type===o.d.UploadProgress&&n[a].setValue(t.loaded/t.total*100),t.type===o.d.Response&&201===t.status&&(a++,this.toastService.showToast({icon:"success",text:this.translatePipe.transform("SUCCESS_ADD_DOCUMENT")}),++this.countOfCompletedUpload===i&&(this.adminDialogService.closeCurrentActiveDialog(),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)))},error:()=>{this.toastService.showToast({icon:"failed",text:this.translatePipe.transform("FAILED_TO_ADD_DOCUMENT")})}})}"open"===t.action&&this.initAddDocDialog(),"error"===t.action&&this.toastService.showToast({icon:"failed",text:t.message})}}),this.datePickerService.dateChange$.subscribe({next:t=>{this.lastDatePickerData=t}}),this.table.filterGroup.get("keyword").valueChanges.pipe(L.a(t=>!t)).subscribe({next:()=>{this.searchKeyword()}}),this.table.filterGroup.get("filter").valueChanges.subscribe({next:()=>{}}))}fileStatus(t){return this.translatePipe.transform(t?"DELETE":"NORMAL")}fileSize(t){return 0===t?"-":this.bytesPipe.transform(t)}checkedStatusChange(t){this.formGroup.controls.checkedIds.setValue(t),this.checkedTemplates=this.getCheckedTemplates(t)}searchKeyword(){this.table.reset(),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}onExpirationButtonClick(t){this.template=t}editDocName(t,e){this.documentListDataService.patchPdfName(e,t).subscribe({next:()=>{this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc),this.toastService.showToast({icon:"success",text:this.translatePipe.transform("SUCCEED_PATCHING")})}})}onCreateClick(){this.adminDialogService.toggleDialogVisibility(c.c.ADD_DOCUMENT,!0,{title:this.translatePipe.transform("REGISTER_DOCUMENT"),size:{width:873,height:592},formGroup:this.addDocFormGroup,data:{files:[],acceptable:this.acceptableExtensions}})}onDeleteClick(){this.adminDialogService.toggleDialogVisibility(c.c.DELETE_ITEMS,!0,{description:"",size:{width:336,height:280},data:this.formGroup.controls.checkedIds.value.map(t=>this.table.getData().find(e=>e.id===t)),caller:c.d.DOCUMENT_LIST})}openDetailDialog(t){var e,n,i,o,a,s,r,l,d,p;t.pdf.deleted?this.toastService.showToast({icon:"failed",text:this.translatePipe.transform("DELETED_DOCUMENT_TOAST_MESSAGE")}):(this.selectedItem=t,this.addDocFormGroup.get("functions").controls[ie.DISALLOW_SAVE].setValue(null!==(n=null===(e=this.selectedItem.auth)||void 0===e?void 0:e.save)&&void 0!==n&&n),this.addDocFormGroup.get("functions").controls[ie.DISALLOW_FORM].setValue(null!==(o=null===(i=this.selectedItem.auth)||void 0===i?void 0:i.form)&&void 0!==o&&o),this.addDocFormGroup.get("functions").controls[ie.DISALLOW_PRINTING].setValue(null!==(s=null===(a=this.selectedItem.auth)||void 0===a?void 0:a.print)&&void 0!==s&&s),this.addDocFormGroup.get("functions").controls[ie.DISALLOW_DOWNLOAD].setValue(null!==(l=null===(r=this.selectedItem.auth)||void 0===r?void 0:r.download)&&void 0!==l&&l),this.addDocFormGroup.get("functions").controls[ie.DISALLOW_ANNOTS].setValue(null!==(p=null===(d=this.selectedItem.auth)||void 0===d?void 0:d.annots)&&void 0!==p&&p),this.addDocFormGroup.get("description").setValue(this.selectedItem.pdf.description),this.addDocFormGroup.get("docName").setValue(this.selectedItem.pdf.docName),this.adminDialogService.toggleDialogVisibility(c.c.DOCUMENT_DETAIL,!0,{title:t.pdf.docName,size:{width:700,height:this.productService.isStreamdocs()?528:655},formGroup:this.addDocFormGroup,data:this.selectedItem}))}getTemplates(t,e,n,i){this.isLoading=!0,this.subs.push(this.documentListDataService.fetchPdf({pageIndex:this.table.getPageInfo().currentIndex,listingCount:15,search:t,from:e?Object(U.H)(e.startDate):void 0,to:e?Object(U.H)(e.endDate):void 0,orderBy:n,ascending:i,deleted:!1,includeStatistics:!1}).subscribe({next:t=>{if(this.expiryDateFormGroup=this.formBuilder.group({}),this.isLoading=!1,"0"===t.pageInfo.totalCount)return this.table.reset(),this.table.setData([]),void this.changeDetectorRef.markForCheck();t.resources.forEach(t=>{this.expiryDateFormGroup.addControl(t.id,new r.h({label:"",value:{type:new Date(parseInt(t.validity.expirationDate))}}))}),this.table.setData(t.resources),this.table.setPageInfo(t.pageInfo.totalCount,t.pageInfo.listingCount),this.subs.set("dropdownChange",d.a(...this.table.getData().map(t=>this.expiryDateFormGroup.controls[t.id].valueChanges.pipe(G.a(e=>({id:t.id,control:e}))))).subscribe({next:t=>{const e={};"function"==typeof t.control.value.type?e.expiredAt=String(new Date(this.lastDatePickerData).getTime()):e.lifeSpan=t.control.value.type,this.subs.set("patchExpiryDate",this.documentListDataService.patchExpiryDate(t.id,e).subscribe({next:()=>{this.toastService.showToast({icon:"success",text:this.translatePipe.transform("SUCCEED_PATCHING")})},error:()=>{this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}}))}})),this.changeDetectorRef.markForCheck()}}))}deleteDoc(){this.checkedTemplates.forEach(t=>{this.documentListDataService.deletePdf(t.id).subscribe({next:()=>{this.toastService.showToast({icon:"success",text:"DOCUMENT_DELETED"}),this.table.reset(),this.adminDialogService.closeCurrentActiveDialog(),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)},error:()=>{this.toastService.showToast({icon:"failed",text:this.translatePipe.transform("ERROR_DELETE_DELETED_DOCUMENT")})}})})}openDoc(t){t.pdf.deleted?this.toastService.showToast({icon:"failed",text:this.translatePipe.transform("REMOVED_DOCUMENT_ITEM_TOOLTIP")}):(sessionStorage.setItem(ne.c.fromAdminStorage,"true"),window.open(this.makeStreamdocUrl(t.id),"_blank"),sessionStorage.removeItem(ne.c.fromAdminStorage))}download(){var t;const e=this.pdfDataService.getDownloadUrl({docId:null===(t=this.checkedTemplates[0])||void 0===t?void 0:t.id});this.downloadService.executeFileDownloader(e)}downloadOriginalFile(){const t=this.documentListDataService.getOriginalDownloadUrl(this.checkedTemplates[0].pdf.secureId||this.checkedTemplates[0].pdf.streamdocsId);this.downloadService.executeFileDownloader(t)}getLabelFunction(){return t=>oe(t,this.translatePipe)}sortingChanges(t){this.orderBy=0===t.value?void 0:t.name,this.asc=0===t.value?void 0:1===t.value,this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}onPageChanging(t){this.table.setPageCurrentIndex(t-1),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}copyLink(t){U.F.copyToClipboard(window.location.origin+this.makeStreamdocUrl(t.id)),this.toastService.showToast({icon:"success",text:`"${t.pdf.docName}" ${this.translatePipe.transform("COPY_LINK")}`})}hasDeleted(){return this.checkedTemplates.some(t=>t.pdf.deleted)}onDoubleClick(t,e){e&&t.stopPropagation()}initAddDocDialog(){this.addDocFormGroup.reset(this.initialAddDocFormGroupValues)}getCheckedTemplates(t){return this.table.getData().filter(e=>t.some(t=>t===e.id))}makeStreamdocUrl(t){return`${this.router.serializeUrl(this.router.createUrlTree([this.baseHref,"view","sd"]))};streamdocsId=${t}`}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(l.h),l.Mb(re),l.Mb($.c),l.Mb(s.G),l.Mb(w.d),l.Mb(c.b),l.Mb(rt.b),l.Mb(ce.b),l.Mb(at.a),l.Mb(le.b),l.Mb(a.c),l.Mb(r.g),l.Mb(ut.b),l.Mb(ct.l),l.Mb(i.a))},t.\u0275cmp=l.Gb({type:t,selectors:[["sd-document-list"]],features:[l.yb([at.a,s.G,s.y,{provide:i.a,useFactory:t=>t.getBaseHrefFromDOM(),deps:[i.D]}])],decls:42,vars:47,consts:[[3,"isLoading"],[1,"form-list-header",3,"formGroup"],[1,"tools"],["size","small","color","primary",1,"ep-button",3,"click"],[1,"papycon","papycon-plus3"],["size","small","color","grey",1,"ep-button",3,"disabled","click"],[1,"papycon","papycon-minus2"],["size","small","color","white",1,"ep-button",3,"disabled","click"],[1,"papycon","papycon-pen"],[1,"papycon","papycon-download"],["class","ep-button","size","small","color","white",3,"disabled","click",4,"ngIf"],[1,"right-side"],["formControlName","filter",1,"small",3,"filterMenus"],["size","small","useClearButton","true","formControlName","keyword",1,"custom",3,"placeholder","keydown.enter","focusout"],[3,"formGroup"],[3,"data","displayedColumns","formArrayName","currentPageIndex","emptyEl","checkedStatusChange","itemDblClick","sortingChange"],[4,"eTableCell","eTableCellFor"],[3,"deleted",4,"eTableCell","eTableCellFor"],[3,"last","sideButtonCount","page","prevLabel","nextLabel","pageChange"],["emptyEl",""],[3,"readonly","label","iconButtons","inputValueChange","iconButtonClick","dblclick"],["color","none",3,"formControlName","options","labelFunc","click","dblclick",4,"ngIf"],["class","deleted-file-expiryDate",4,"ngIf"],["color","none",3,"formControlName","options","labelFunc","click","dblclick"],[1,"deleted-file-expiryDate"],["size","tiny","color","white",1,"ep-button",3,"disabled","click","dblclick"],[1,"papycon","papycon-link"],[1,"empty"],[1,"notifier"],[1,"papycon","papycon-list2"],[1,"title"],[1,"dashed"],[1,"message"]],template:function(t,e){if(1&t&&(l.Sb(0,"h1"),l.Fc(1),l.ec(2,"translate"),l.Rb(),l.Sb(3,"sd-card",0),l.Sb(4,"header",1),l.Sb(5,"div",2),l.Sb(6,"button",3),l.Zb("click",(function(){return e.onCreateClick()})),l.Nb(7,"i",4),l.Fc(8),l.ec(9,"translate"),l.Rb(),l.Sb(10,"button",5),l.Zb("click",(function(){return e.onDeleteClick()})),l.Nb(11,"i",6),l.Fc(12),l.ec(13,"translate"),l.Rb(),l.Sb(14,"button",7),l.Zb("click",(function(){return e.openDoc(e.checkedTemplates[0])})),l.Nb(15,"i",8),l.Fc(16),l.ec(17,"translate"),l.Rb(),l.Sb(18,"button",7),l.Zb("click",(function(){return e.download()})),l.Nb(19,"i",9),l.Fc(20),l.ec(21,"translate"),l.Rb(),l.Dc(22,de,4,4,"button",10),l.Rb(),l.Sb(23,"div",11),l.Nb(24,"sd-filter-pop-up",12),l.Sb(25,"pu-input",13),l.Zb("keydown.enter",(function(){return e.searchKeyword()}))("focusout",(function(){return e.searchKeyword()})),l.ec(26,"translate"),l.Rb(),l.Rb(),l.Rb(),l.Qb(27,14),l.Sb(28,"e-table",15),l.Zb("checkedStatusChange",(function(t){return e.checkedStatusChange(t)}))("itemDblClick",(function(t){return e.openDoc(t)}))("sortingChange",(function(t){return e.sortingChanges(t)})),l.Dc(29,he,2,4,"div",16),l.Dc(30,ge,2,1,"div",16),l.Dc(31,be,2,1,"div",16),l.Dc(32,ue,3,4,"div",16),l.Dc(33,fe,2,3,"div",17),l.Dc(34,xe,4,3,"div",16),l.Dc(35,Oe,3,1,"div",16),l.Rb(),l.Pb(),l.Sb(36,"footer"),l.Sb(37,"sd-pagination",18),l.Zb("pageChange",(function(t){return e.onPageChanging(t)})),l.ec(38,"translate"),l.ec(39,"translate"),l.Rb(),l.Rb(),l.Rb(),l.Dc(40,Me,10,6,"ng-template",null,19,l.Ec)),2&t){const t=l.tc(41);l.zb(1),l.Gc(l.fc(2,31,"DOCUMENT_LIST")),l.zb(2),l.jc("isLoading",e.isLoading),l.zb(1),l.jc("formGroup",e.table.filterGroup),l.zb(4),l.Gc(l.fc(9,33,"ADD")),l.zb(2),l.jc("disabled",!(null!=e.formGroup.controls.checkedIds.value&&e.formGroup.controls.checkedIds.value.length)||e.hasDeleted()),l.zb(2),l.Gc(l.fc(13,35,"DELETE")),l.zb(2),l.jc("disabled",1!==(null==e.formGroup.controls.checkedIds.value?null:e.formGroup.controls.checkedIds.value.length)||e.hasDeleted()),l.zb(2),l.Gc(l.fc(17,37,"VIEW")),l.zb(2),l.jc("disabled",1!==(null==e.formGroup.controls.checkedIds.value?null:e.formGroup.controls.checkedIds.value.length)||e.hasDeleted()),l.zb(2),l.Gc(l.fc(21,39,"PDF_DOWNLOAD")),l.zb(2),l.jc("ngIf",e.isVu),l.zb(2),l.jc("filterMenus",e.filterMenus),l.zb(1),l.jc("placeholder",l.fc(26,41,"DOCUMENT_LIST_PAGE_FILTER_PLACEHOLDER")),l.zb(2),l.jc("formGroup",e.formGroup),l.zb(1),l.jc("data",e.table.getData())("displayedColumns",e.displayedColumns)("formArrayName","expiryDate")("currentPageIndex",e.currentPageIndex)("emptyEl",t),l.zb(1),l.jc("eTableCellFor","docName"),l.zb(1),l.jc("eTableCellFor","status"),l.zb(1),l.jc("eTableCellFor","userName"),l.zb(1),l.jc("eTableCellFor","createdAt"),l.zb(1),l.jc("eTableCellFor","size"),l.zb(1),l.jc("eTableCellFor","expiredAt"),l.zb(1),l.jc("eTableCellFor","copy"),l.zb(2),l.jc("last",e.table.getPageInfo().allPageCount)("sideButtonCount",1)("page",e.table.getPageInfo().currentIndex+1)("prevLabel",l.fc(38,43,"PREVIOUS"))("nextLabel",l.fc(39,45,"NEXT"))}},styles:[".split[_ngcontent-%COMP%]{width:1px;height:20px;background:#c8c8c8}span.basic[_ngcontent-%COMP%]{background-color:#035668}span.basic[_ngcontent-%COMP%], span.premium[_ngcontent-%COMP%]{border-radius:4px;padding:2px 16px;color:#fff}span.premium[_ngcontent-%COMP%]{background-color:#0cbc82}span.undefined[_ngcontent-%COMP%]{border-radius:4px;background-color:#6c6c6c;padding:2px 16px;color:#fff}sd-loading-toast[_ngcontent-%COMP%]{position:unset;top:0;left:0}header.dialog[_ngcontent-%COMP%]{margin:40px 0 0;font-size:16px;line-height:26px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e}header.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif;font-weight:400;margin:0}h1.regular[_ngcontent-%COMP%], h2.regular[_ngcontent-%COMP%], h3.regular[_ngcontent-%COMP%], h4.regular[_ngcontent-%COMP%], h5.regular[_ngcontent-%COMP%]{font-family:inherit}h1.light[_ngcontent-%COMP%], h2.light[_ngcontent-%COMP%], h3.light[_ngcontent-%COMP%], h4.light[_ngcontent-%COMP%], h5.light[_ngcontent-%COMP%]{color:#6c6c6c}.ellipsis[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}h1[_ngcontent-%COMP%]{font-size:20px;line-height:28px}h2[_ngcontent-%COMP%]{font-size:16px;line-height:26px}h3[_ngcontent-%COMP%]{font-size:14px;line-height:24px}h4[_ngcontent-%COMP%]{font-size:13px;line-height:22px}h5[_ngcontent-%COMP%]{font-size:12px;line-height:20px}.papycon[_ngcontent-%COMP%], pu-icon[_ngcontent-%COMP%]{text-align:center}.papycon.bt[_ngcontent-%COMP%], pu-icon.bt[_ngcontent-%COMP%]{cursor:pointer}.dialog__header[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%], .dialog__header[_ngcontent-%COMP%]   pu-icon[_ngcontent-%COMP%]{-ms-flex-item-align:start;align-self:flex-start}textarea[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Regular,sans-serif;border:1px solid #dadada;border-radius:2px;height:62px;resize:none;-webkit-box-sizing:border-box;box-sizing:border-box;padding:3px}textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#f79f1a}textarea[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#6c6c6c;opacity:.7}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:#6c6c6c;opacity:.7}textarea[_ngcontent-%COMP%]:-ms-input-placeholder{color:#6c6c6c;opacity:.7}textarea[_ngcontent-%COMP%]::-ms-input-placeholder{color:#6c6c6c;opacity:.7}textarea[_ngcontent-%COMP%]::placeholder{color:#6c6c6c;opacity:.7}textarea.fit[_ngcontent-%COMP%]{width:100%}pu-checkbox.custom[_ngcontent-%COMP%]{line-height:1!important;padding:3px 10px}pu-checkbox.box[_ngcontent-%COMP%]{font-size:20px;border:1px solid #dadada;background-color:#fff;border-radius:2px}pu-checkbox[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{vertical-align:initial}pu-toggle-button[_ngcontent-%COMP%]  input[type]{border:unset}.table[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .center[_ngcontent-%COMP%]{text-align:center}.table[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{text-align:right}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .thead[_ngcontent-%COMP%]{font-size:13px;line-height:22px;color:#6c6c6c;font-family:NotoSans-Medium,sans-serif;min-height:44px;border-bottom:1px solid #dadada;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.table[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .tbody[_ngcontent-%COMP%]{margin:0;padding:0}.table[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{height:40px;background:#fff;border-radius:6px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.table[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:hover, .table[_nghost-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:hover{background-color:hsla(0,0%,85.5%,.1)}.table[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr.selected[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr.selected[_ngcontent-%COMP%]{border-color:#f79f1a;background-color:rgba(255,248,237,.9)}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]{margin:auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;color:#6c6c6c}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   .head.papycon[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]   .head.papycon[_ngcontent-%COMP%]{margin:0 auto 12px;font-size:40px;line-height:40px;width:40px}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]:not(.papycon), .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]:not(.papycon){font-size:16px;line-height:26px;color:#1e1e1e}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   .medium[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]   .medium[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   .dashed-hr[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]   .dashed-hr[_ngcontent-%COMP%]{height:2px;width:170px;margin:11px auto;background:linear-gradient(90deg,#979797,#979797 4px,transparent 0,transparent 6px) 0/6px}.empty[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1;flex:1;height:100%;flex-direction:column}.empty[_ngcontent-%COMP%], .empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]{flex-direction:column;width:170px;height:160px}.empty[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{color:#6c6c6c;font-size:22px;margin:0 auto 12px}.empty[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-family:NotoSans-Regular}.empty[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:14px;font-weight:400;text-align:center;font-family:NotoSans-Regular;padding-top:12px}.empty[_ngcontent-%COMP%]   .dashed[_ngcontent-%COMP%]{width:170px;height:2px;border-bottom:2px dashed #979797}.notifier[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}[_nghost-%COMP%]:not(.loading){position:relative;width:100%;min-width:1120px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column;flex-flow:column;font-family:NotoSans-Regular,sans-serif}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]{background:#f2f2f2}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .light[_ngcontent-%COMP%]{color:#6c6c6c}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]{margin-top:14px;display:-webkit-box;display:-ms-flexbox;display:flex}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:12px}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]   .push[_ngcontent-%COMP%]{margin-left:auto}sd-card[_ngcontent-%COMP%]{padding:30px 24px 37px}.form-list-header[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.form-list-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:6px;font-size:18px}.form-list-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:12px}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   pu-input[_ngcontent-%COMP%]{width:307px}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   pu-input.custom[_ngcontent-%COMP%]{margin-left:12px}.form-list-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;line-height:20px;font-family:NotoSans-Medium,sans-serif;color:#6c6c6c;border-radius:12px;border:1.2px solid #c8c8c8;padding:3px 12px;margin-left:8px}e-table[_ngcontent-%COMP%]{margin-top:20px;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;overflow:visible}e-table[_ngcontent-%COMP%], e-table[_ngcontent-%COMP%]     .docName{display:-webkit-box;display:-ms-flexbox;display:flex}e-table[_ngcontent-%COMP%]     .docName{-webkit-box-flex:1;-ms-flex:1;flex:1;font-size:14px;white-space:nowrap;overflow:hidden;margin-right:20px}e-table[_ngcontent-%COMP%]     .docName>div{width:100%}e-table[_ngcontent-%COMP%]     .status{-webkit-box-flex:0;-ms-flex:0 1 65px;flex:0 1 65px;font-size:14px}e-table[_ngcontent-%COMP%]     .userName{-webkit-box-flex:0;-ms-flex:0 1 125px;flex:0 1 125px;font-size:14px}e-table[_ngcontent-%COMP%]     .createdAt{-webkit-box-flex:0;-ms-flex:0 1 140px;flex:0 1 140px;font-size:14px}e-table[_ngcontent-%COMP%]     .size{-webkit-box-flex:0;-ms-flex:0 1 86px;flex:0 1 86px;font-size:14px}e-table[_ngcontent-%COMP%]     .size .deleted{padding-left:10px}e-table[_ngcontent-%COMP%]     .expiredAt{-webkit-box-flex:0;-ms-flex:0 1 170px;flex:0 1 170px;display:-webkit-box;display:-ms-flexbox;display:flex}e-table[_ngcontent-%COMP%]     .expiredAt admin-dropdown{width:156px}e-table[_ngcontent-%COMP%]     .expiredAt:hover pu-dropdown[size]  div.select-box{background-color:#fff;border-radius:2px;border:1px solid #dadada}e-table[_ngcontent-%COMP%]     .expiredAt pu-dropdown[size]  div.select-box{width:100px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;height:33px;border:none;background-color:transparent}e-table[_ngcontent-%COMP%]     .expiredAt pu-dropdown[size]  div.select-box div.expand-button{background-color:unset;border-left:unset}e-table[_ngcontent-%COMP%]     .expiredAt .deleted-file-expiryDate{font-size:14px;padding-left:10px}e-table[_ngcontent-%COMP%]     .copy{-webkit-box-flex:0;-ms-flex:0 1 63px;flex:0 1 63px;font-size:14px}e-table[_ngcontent-%COMP%]     .copy button{padding-left:10px;padding-right:10px}footer[_ngcontent-%COMP%]{height:95px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}footer[_ngcontent-%COMP%]   sd-pagination[_ngcontent-%COMP%]{margin-top:38px}span.primary[_ngcontent-%COMP%]{color:#ff6100;text-decoration:underline}"]}),t})();function Pe(t,e){if(1&t){const t=l.Tb();l.Sb(0,"i",3),l.Zb("click",(function(){return l.uc(t),l.dc(2).startEdit()})),l.Rb()}if(2&t){const t=l.dc(2);l.Eb("visible",t.isHovered)}}function ye(t,e){if(1&t){const t=l.Tb();l.Sb(0,"i",4),l.Zb("click",(function(){l.uc(t);const n=e.$implicit;return l.dc(2).iconButtonClick.emit(n)})),l.Rb()}if(2&t){const t=e.$implicit,n=l.dc(2);l.Eb("visible",n.isHovered),l.jc("ngClass",t)}}function ve(t,e){if(1&t&&(l.Qb(0),l.Sb(1,"span"),l.Fc(2),l.Rb(),l.Dc(3,Pe,1,2,"i",1),l.Dc(4,ye,1,3,"i",2),l.Pb()),2&t){const t=l.dc();l.zb(2),l.Gc(t.label),l.zb(1),l.jc("ngIf",!t.readonly),l.zb(1),l.jc("ngForOf",t.iconButtons)}}function Se(t,e){if(1&t){const t=l.Tb();l.Qb(0),l.Sb(1,"pu-input",5),l.Zb("blur",(function(){return l.uc(t),l.dc().closeEdit()}))("keydown.enter",(function(){return l.uc(t),l.dc().closeEdit()}))("dblclick",(function(e){return l.uc(t),l.dc().onDoubleClick(e)})),l.Rb(),l.Pb()}if(2&t){const t=l.dc();l.zb(1),l.jc("formControl",t.formControl)}}let De=(()=>{class t{constructor(){this.readonly=!1,this.isEditMode=!1,this.label="",this.iconButtons=[],this.inputValueChange=new l.n,this.iconButtonClick=new l.n,this.formControl=new r.h(""),this.isHovered=!1}onHover(){this.isHovered=!0}onMouseLeave(){this.isHovered=!1}ngOnChanges(t){this.formControl.setValue(this.label)}startEdit(){this.isEditMode=!0,setTimeout(()=>this.inputComponent.focus())}closeEdit(){this.isEditMode=!1,this.label!==this.formControl.value&&this.inputValueChange.emit(this.formControl.value)}onDoubleClick(t){this.isEditMode&&t.stopPropagation()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Gb({type:t,selectors:[["sd-editable-label"]],viewQuery:function(t,e){var n;1&t&&l.Lc(s.s,!0),2&t&&l.sc(n=l.ac())&&(e.inputComponent=n.first)},hostBindings:function(t,e){1&t&&l.Zb("mouseenter",(function(t){return e.onHover(t)}))("mouseleave",(function(t){return e.onMouseLeave(t)}))},inputs:{readonly:"readonly",isEditMode:"isEditMode",label:"label",iconButtons:"iconButtons"},outputs:{inputValueChange:"inputValueChange",iconButtonClick:"iconButtonClick"},features:[l.xb],decls:2,vars:2,consts:[[4,"ngIf"],["class","papycon papycon-pen",3,"visible","click",4,"ngIf"],["class","papycon",3,"ngClass","visible","click",4,"ngFor","ngForOf"],[1,"papycon","papycon-pen",3,"click"],[1,"papycon",3,"ngClass","click"],[3,"formControl","blur","keydown.enter","dblclick"]],template:function(t,e){1&t&&(l.Dc(0,ve,5,3,"ng-container",0),l.Dc(1,Se,2,1,"ng-container",0)),2&t&&(l.jc("ngIf",!e.isEditMode),l.zb(1),l.jc("ngIf",e.isEditMode))},directives:[i.t,i.s,i.q,s.s,r.r,r.i],styles:["[_nghost-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}[_nghost-%COMP%], span[_ngcontent-%COMP%]{overflow:hidden}span[_ngcontent-%COMP%]{-webkit-box-flex:0;-ms-flex:0 1 auto;flex:0 1 auto;padding-right:.1em;text-overflow:ellipsis;white-space:nowrap}i[_ngcontent-%COMP%]{font-size:16px;margin-left:8px;margin-right:8px;margin-top:3px;cursor:pointer;visibility:hidden}i.visible[_ngcontent-%COMP%]{visibility:visible}pu-input[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1;flex:1}"],changeDetection:0}),t})(),ke=(()=>{class t{}return t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({factory:function(e){return new(e||t)},imports:[[i.c,r.B,s.t]]}),t})();var we=n("B93E");function Ee(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.Rb()),2&t){const t=e.$implicit;l.zb(1),l.Gc(t.pdf.docName)}}function Te(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.Rb()),2&t){const t=e.$implicit;l.zb(1),l.Gc((null==t.owner?null:t.owner.name)||"(unknown)")}}function Ie(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.ec(2,"date"),l.Rb()),2&t){const t=e.$implicit;l.zb(1),l.Gc(l.gc(2,1,t.validity.expirationDate,"yyyy-MM-dd"))}}function Re(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.Rb()),2&t){const t=e.$implicit,n=l.dc();l.zb(1),l.Gc(n.fileSize(t.pdf.fileSize))}}function Ne(t,e){1&t&&(l.Sb(0,"div"),l.Nb(1,"i",10),l.ec(2,"translate"),l.Rb()),2&t&&(l.zb(1),l.jc("sdTooltip",l.fc(2,1,"REMOVED_DOCUMENT_ITEM_TOOLTIP")))}function Ae(t,e){if(1&t&&(l.Sb(0,"div",11),l.Fc(1),l.Rb()),2&t){const t=e.$implicit,n=e.rect;l.Bc("top",n.bottom+5,"px")("left",n.left-190,"px"),l.zb(1),l.Gc(t)}}function ze(t,e){1&t&&(l.Sb(0,"div",12),l.Sb(1,"div",13),l.Nb(2,"span",14),l.Sb(3,"p",15),l.Fc(4),l.ec(5,"translate"),l.Rb(),l.Nb(6,"div",16),l.Sb(7,"p",17),l.Fc(8),l.ec(9,"translate"),l.Rb(),l.Rb(),l.Rb()),2&t&&(l.zb(4),l.Gc(l.fc(5,2,"NO_REMOVED_DOCUMENT")),l.zb(4),l.Gc(l.fc(9,4,"MESSAGE_NO_REMOVED_DOCUMENT")))}let Le=(()=>{class t{constructor(t,e,n,i,o,a,s){this.changeDetectorRef=t,this.documentListDataService=e,this.tooltipService=n,this.subs=i,this.translatePipe=o,this.bytesPipe=a,this.formBuilder=s,this.filterMenus=[{label:this.translatePipe.transform("REGISTRATION_DATE"),type:"date",item:Object.values(b).filter(t=>t!==b.CUSTOM).map(t=>({label:t,value:t})),isMulti:!1},{label:this.translatePipe.transform("MANUAL_SELECT"),type:"custom-date",item:[{label:"",value:b.CUSTOM}],isMulti:!1}],this.formGroup=this.formBuilder.group({expiryDate:this.formBuilder.array([])}),this.displayedColumns=[{key:"docName",title:this.translatePipe.transform("DOCUMENT_NAME"),sortable:!0},{key:"userName",title:this.translatePipe.transform("AUTHOR"),sortable:!0},{key:"expiredAt",title:this.translatePipe.transform("EXPIRY_DATE"),sortable:!1},{key:"size",title:this.translatePipe.transform("FILE_SIZE"),sortable:!1},{key:"expired",title:"",sortable:!1}],this.isLoading=!0,this.table=new N.a}get currentPageIndex(){return this.table.getPageInfo().currentIndex}ngOnInit(){this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc),this.subs.push(this.table.filterChanges.subscribe({next:()=>{this.table.reset(),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}}),this.table.filterGroup.get("keyword").valueChanges.pipe(L.a(t=>!t)).subscribe({next:()=>{this.searchKeyword()}}))}ngAfterViewInit(){this.tooltipService.registerContainer(this.tooltipContainerDirective)}fileSize(t){return 0===t?"-":this.bytesPipe.transform(t)}searchKeyword(){this.table.reset(),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}getTemplates(t,e,n,i){this.isLoading=!0,this.subs.push(this.documentListDataService.fetchPdf({pageIndex:this.table.getPageInfo().currentIndex,listingCount:15,search:t,from:e?Object(U.H)(e.startDate):void 0,to:e?Object(U.H)(e.endDate):void 0,orderBy:n,ascending:i,deleted:!0,includeStatistics:!1}).subscribe({next:t=>{if(this.isLoading=!1,"0"===t.pageInfo.totalCount)return this.table.reset(),this.table.setData([]),void this.changeDetectorRef.markForCheck();this.table.setData(t.resources),this.table.setPageInfo(t.pageInfo.totalCount,t.pageInfo.listingCount),this.changeDetectorRef.markForCheck()}}))}onPageChanging(t){this.table.setPageCurrentIndex(t-1),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}sortingChanges(t){this.orderBy=0===t.value?void 0:t.name,this.asc=0===t.value?void 0:1===t.value,this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(l.h),l.Mb(re),l.Mb(we.d),l.Mb(s.G),l.Mb(w.d),l.Mb(at.a),l.Mb(r.g))},t.\u0275cmp=l.Gb({type:t,selectors:[["sd-removed-document-list"]],viewQuery:function(t,e){var n;1&t&&l.Lc(we.b,!0),2&t&&l.sc(n=l.ac())&&(e.tooltipContainerDirective=n.first)},features:[l.yb([{provide:we.a,useValue:0}])],decls:22,vars:29,consts:[[3,"isLoading"],[1,"form-list-header",3,"formGroup"],[1,"right-side"],["size","small","useClearButton","true","formControlName","keyword",1,"custom",3,"placeholder","keydown.enter","focusout"],[3,"formGroup"],[3,"data","displayedColumns","formArrayName","currentPageIndex","checkEnable","emptyEl","sortingChange"],[4,"eTableCell","eTableCellFor"],[3,"last","sideButtonCount","page","prevLabel","nextLabel","pageChange"],["class","tooltip",3,"top","left",4,"sdTooltipContainer"],["emptyEl",""],[1,"papycon","papycon-questionmark",3,"sdTooltip"],[1,"tooltip"],[1,"empty"],[1,"notifier"],[1,"papycon","papycon-list2"],[1,"title"],[1,"dashed"],[1,"message"]],template:function(t,e){if(1&t&&(l.Sb(0,"h1"),l.Fc(1),l.ec(2,"translate"),l.Rb(),l.Sb(3,"sd-card",0),l.Sb(4,"header",1),l.Sb(5,"div",2),l.Sb(6,"pu-input",3),l.Zb("keydown.enter",(function(){return e.searchKeyword()}))("focusout",(function(){return e.searchKeyword()})),l.ec(7,"translate"),l.Rb(),l.Rb(),l.Rb(),l.Qb(8,4),l.Sb(9,"e-table",5),l.Zb("sortingChange",(function(t){return e.sortingChanges(t)})),l.Dc(10,Ee,2,1,"div",6),l.Dc(11,Te,2,1,"div",6),l.Dc(12,Ie,3,4,"div",6),l.Dc(13,Re,2,1,"div",6),l.Dc(14,Ne,3,3,"div",6),l.Rb(),l.Pb(),l.Sb(15,"footer"),l.Sb(16,"sd-pagination",7),l.Zb("pageChange",(function(t){return e.onPageChanging(t)})),l.ec(17,"translate"),l.ec(18,"translate"),l.Rb(),l.Rb(),l.Rb(),l.Dc(19,Ae,2,5,"div",8),l.Dc(20,ze,10,6,"ng-template",null,9,l.Ec)),2&t){const t=l.tc(21);l.zb(1),l.Gc(l.fc(2,21,"REMOVED_DOCUMENT_LIST")),l.zb(2),l.jc("isLoading",e.isLoading),l.zb(1),l.jc("formGroup",e.table.filterGroup),l.zb(2),l.jc("placeholder",l.fc(7,23,"DOCUMENT_LIST_PAGE_FILTER_PLACEHOLDER")),l.zb(2),l.jc("formGroup",e.formGroup),l.zb(1),l.jc("data",e.table.getData())("displayedColumns",e.displayedColumns)("formArrayName","expiryDate")("currentPageIndex",e.currentPageIndex)("checkEnable",!1)("emptyEl",t),l.zb(1),l.jc("eTableCellFor","docName"),l.zb(1),l.jc("eTableCellFor","userName"),l.zb(1),l.jc("eTableCellFor","expiredAt"),l.zb(1),l.jc("eTableCellFor","size"),l.zb(1),l.jc("eTableCellFor","expired"),l.zb(2),l.jc("last",e.table.getPageInfo().allPageCount)("sideButtonCount",1)("page",e.table.getPageInfo().currentIndex+1)("prevLabel",l.fc(17,25,"PREVIOUS"))("nextLabel",l.fc(18,27,"NEXT"))}},styles:[".split[_ngcontent-%COMP%]{width:1px;height:20px;background:#c8c8c8}span.basic[_ngcontent-%COMP%]{background-color:#035668}span.basic[_ngcontent-%COMP%], span.premium[_ngcontent-%COMP%]{border-radius:4px;padding:2px 16px;color:#fff}span.premium[_ngcontent-%COMP%]{background-color:#0cbc82}span.undefined[_ngcontent-%COMP%]{border-radius:4px;background-color:#6c6c6c;padding:2px 16px;color:#fff}sd-loading-toast[_ngcontent-%COMP%]{position:unset;top:0;left:0}header.dialog[_ngcontent-%COMP%]{margin:40px 0 0;font-size:16px;line-height:26px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e}header.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif;font-weight:400;margin:0}h1.regular[_ngcontent-%COMP%], h2.regular[_ngcontent-%COMP%], h3.regular[_ngcontent-%COMP%], h4.regular[_ngcontent-%COMP%], h5.regular[_ngcontent-%COMP%]{font-family:inherit}h1.light[_ngcontent-%COMP%], h2.light[_ngcontent-%COMP%], h3.light[_ngcontent-%COMP%], h4.light[_ngcontent-%COMP%], h5.light[_ngcontent-%COMP%]{color:#6c6c6c}.ellipsis[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}h1[_ngcontent-%COMP%]{font-size:20px;line-height:28px}h2[_ngcontent-%COMP%]{font-size:16px;line-height:26px}h3[_ngcontent-%COMP%]{font-size:14px;line-height:24px}h4[_ngcontent-%COMP%]{font-size:13px;line-height:22px}h5[_ngcontent-%COMP%]{font-size:12px;line-height:20px}.papycon[_ngcontent-%COMP%], pu-icon[_ngcontent-%COMP%]{text-align:center}.papycon.bt[_ngcontent-%COMP%], pu-icon.bt[_ngcontent-%COMP%]{cursor:pointer}.dialog__header[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%], .dialog__header[_ngcontent-%COMP%]   pu-icon[_ngcontent-%COMP%]{-ms-flex-item-align:start;align-self:flex-start}textarea[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Regular,sans-serif;border:1px solid #dadada;border-radius:2px;height:62px;resize:none;-webkit-box-sizing:border-box;box-sizing:border-box;padding:3px}textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#f79f1a}textarea[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#6c6c6c;opacity:.7}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:#6c6c6c;opacity:.7}textarea[_ngcontent-%COMP%]:-ms-input-placeholder{color:#6c6c6c;opacity:.7}textarea[_ngcontent-%COMP%]::-ms-input-placeholder{color:#6c6c6c;opacity:.7}textarea[_ngcontent-%COMP%]::placeholder{color:#6c6c6c;opacity:.7}textarea.fit[_ngcontent-%COMP%]{width:100%}pu-checkbox.custom[_ngcontent-%COMP%]{line-height:1!important;padding:3px 10px}pu-checkbox.box[_ngcontent-%COMP%]{font-size:20px;border:1px solid #dadada;background-color:#fff;border-radius:2px}pu-checkbox[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{vertical-align:initial}pu-toggle-button[_ngcontent-%COMP%]  input[type]{border:unset}.table[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .center[_ngcontent-%COMP%]{text-align:center}.table[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{text-align:right}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .thead[_ngcontent-%COMP%]{font-size:13px;line-height:22px;color:#6c6c6c;font-family:NotoSans-Medium,sans-serif;min-height:44px;border-bottom:1px solid #dadada;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.table[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .tbody[_ngcontent-%COMP%]{margin:0;padding:0}.table[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{height:40px;background:#fff;border-radius:6px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.table[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:hover, .table[_nghost-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:hover{background-color:hsla(0,0%,85.5%,.1)}.table[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr.selected[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr.selected[_ngcontent-%COMP%]{border-color:#f79f1a;background-color:rgba(255,248,237,.9)}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]{margin:auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;color:#6c6c6c}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   .head.papycon[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]   .head.papycon[_ngcontent-%COMP%]{margin:0 auto 12px;font-size:40px;line-height:40px;width:40px}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]:not(.papycon), .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]:not(.papycon){font-size:16px;line-height:26px;color:#1e1e1e}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   .medium[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]   .medium[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   .dashed-hr[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]   .dashed-hr[_ngcontent-%COMP%]{height:2px;width:170px;margin:11px auto;background:linear-gradient(90deg,#979797,#979797 4px,transparent 0,transparent 6px) 0/6px}.empty[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1;flex:1;height:100%;flex-direction:column}.empty[_ngcontent-%COMP%], .empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]{flex-direction:column;width:170px;height:160px}.empty[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{color:#6c6c6c;font-size:22px;margin:0 auto 12px}.empty[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-family:NotoSans-Regular}.empty[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:14px;font-weight:400;text-align:center;font-family:NotoSans-Regular;padding-top:12px}.empty[_ngcontent-%COMP%]   .dashed[_ngcontent-%COMP%]{width:170px;height:2px;border-bottom:2px dashed #979797}.notifier[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}[_nghost-%COMP%]:not(.loading){position:relative;width:100%;min-width:1120px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column;flex-flow:column;font-family:NotoSans-Regular,sans-serif}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]{background:#f2f2f2}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .light[_ngcontent-%COMP%]{color:#6c6c6c}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]{margin-top:14px;display:-webkit-box;display:-ms-flexbox;display:flex}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:12px}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]   .push[_ngcontent-%COMP%]{margin-left:auto}sd-card[_ngcontent-%COMP%]{padding:30px 24px 37px}.form-list-header[_ngcontent-%COMP%]{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.form-list-header[_ngcontent-%COMP%], .form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   pu-input[_ngcontent-%COMP%]{width:307px}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   pu-input.custom[_ngcontent-%COMP%]{margin-left:12px}e-table[_ngcontent-%COMP%]{margin-top:20px;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;overflow:visible}e-table[_ngcontent-%COMP%], e-table[_ngcontent-%COMP%]     .docName{display:-webkit-box;display:-ms-flexbox;display:flex}e-table[_ngcontent-%COMP%]     .docName{-webkit-box-flex:1;-ms-flex:1;flex:1;font-size:14px;white-space:nowrap;overflow:hidden;margin-right:20px}e-table[_ngcontent-%COMP%]     .userName{-webkit-box-flex:0;-ms-flex:0 1 125px;flex:0 1 125px;font-size:14px}e-table[_ngcontent-%COMP%]     .size{-webkit-box-flex:0;-ms-flex:0 1 86px;flex:0 1 86px;font-size:14px}e-table[_ngcontent-%COMP%]     .expiredAt{-webkit-box-flex:0;-ms-flex:0 1 170px;flex:0 1 170px;font-size:14px}e-table[_ngcontent-%COMP%]     .expired{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-flex:0;-ms-flex:0 1 100px;flex:0 1 100px;font-size:14px;font-weight:500}e-table[_ngcontent-%COMP%]     .expired i{font-size:20px;margin-left:5px;cursor:pointer}footer[_ngcontent-%COMP%]{height:95px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}footer[_ngcontent-%COMP%]   sd-pagination[_ngcontent-%COMP%]{margin-top:38px}.tooltip[_ngcontent-%COMP%]{background-color:#363636;color:#fff;position:fixed;font-size:12px;font-family:NotoSans-Regular;z-index:1;padding:14px 20px;border-radius:5px;white-space:pre}"],changeDetection:0}),t})();var Fe=n("tV9x"),Ge=n("KQA2"),Ue=n("lXBU"),je=n("SKHy"),$e=n("V2Em"),He=n("vUdp"),Ve=n("TeXk"),Be=n("3N/c"),We=n("rV57"),Ye=n("v9uc");let Ke=(()=>{class t{}return t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({factory:function(e){return new(e||t)},providers:[re],imports:[[i.c,r.B,s.t,r.n,s.j,a.g,it.a,I,ot,s.f,at.b,s.l,N.b,ee.b,ke,c.a,w.b,we.c]]}),t})();function Ze(t,e){if(1&t&&(l.Sb(0,"li"),l.Sb(1,"p"),l.Fc(2),l.ec(3,"translate"),l.Rb(),l.Sb(4,"span"),l.Fc(5),l.Rb(),l.Rb()),2&t){const t=e.$implicit;l.zb(2),l.Gc(l.fc(3,2,t.label)),l.zb(3),l.Gc(t.value)}}function qe(t,e){1&t&&l.Ob(0)}function Je(t,e){if(1&t&&(l.Sb(0,"div",17),l.Sb(1,"span",18),l.Fc(2),l.Rb(),l.Sb(3,"span",19),l.Fc(4),l.Rb(),l.Rb()),2&t){const t=e.$implicit,n=l.dc().statistic,i=l.dc(2);l.zb(2),l.Gc(t.docName),l.zb(2),l.Gc(i.dataCount(n,t))}}function Qe(t,e){1&t&&l.Dc(0,Je,5,2,"div",16),2&t&&l.jc("ngForOf",e.statistic.data)}l.xc(_e,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,r.H,r.w,r.G,r.d,r.x,r.A,r.b,r.D,r.E,r.z,r.r,r.s,r.C,r.p,r.o,r.y,r.c,r.e,r.i,r.l,r.j,r.m,r.f,s.s,r.u,r.v,r.t,s.i,a.h,a.d,a.f,a.e,a.i,V.a,Fe.a,D,q,s.e,s.k,B.a,W.a,Ge.a,De,Ue.a,je.a,$e.b,He.a,_e,Le],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,Ve.a,Be.a,We.a,Ye.a,Kt.a,T.a]),l.xc(Le,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,r.H,r.w,r.G,r.d,r.x,r.A,r.b,r.D,r.E,r.z,r.r,r.s,r.C,r.p,r.o,r.y,r.c,r.e,r.i,r.l,r.j,r.m,r.f,s.s,r.u,r.v,r.t,s.i,a.h,a.d,a.f,a.e,a.i,V.a,Fe.a,D,q,s.e,s.k,B.a,W.a,Ge.a,De,Ue.a,je.a,$e.b,He.a,_e,Le],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,Ve.a,Be.a,We.a,Ye.a,Kt.a,T.a]);const Xe=function(t){return{statistic:t}};function tn(t,e){if(1&t){const t=l.Tb();l.Sb(0,"div",12),l.Zb("click",(function(){l.uc(t);const n=e.$implicit;return l.dc().onClickStatisticCard(n)})),l.Sb(1,"header"),l.Sb(2,"label"),l.Fc(3),l.ec(4,"translate"),l.Rb(),l.Nb(5,"i",4),l.Rb(),l.Sb(6,"div",13),l.Dc(7,qe,1,0,"ng-container",14),l.Dc(8,Qe,1,1,"ng-template",null,15,l.Ec),l.Rb(),l.Rb()}if(2&t){const t=e.$implicit,n=l.tc(9),i=l.dc(),o=l.tc(36);l.zb(3),l.Gc(l.fc(4,4,t.label)),l.zb(2),l.jc("ngClass",i.getTableHeaderIconClass(t.icon)),l.zb(2),l.jc("ngTemplateOutlet",t.data.length?n:o)("ngTemplateOutletContext",l.nc(6,Xe,t))}}function en(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.Rb()),2&t){const t=e.$implicit,n=l.dc();l.zb(1),l.Gc(n.fileStatus(t.pdf.deleted))}}function nn(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.Rb()),2&t){const t=e.$implicit;l.zb(1),l.Gc(t.pdf.docName)}}function on(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.ec(2,"number"),l.ec(3,"translate"),l.Rb()),2&t){const t=e.$implicit,n=l.dc();l.zb(1),l.Ic("",l.fc(2,2,n.getDynamicData(t))," ",l.fc(3,4,"NUMBER_OF_OCCURRENCES"),"")}}function an(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.ec(2,"date"),l.Rb()),2&t){const t=e.$implicit;l.zb(1),l.Gc(l.gc(2,1,t.pdf.createdAt,"yyyy-MM-dd"))}}function sn(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.Rb()),2&t){const t=e.$implicit,n=l.dc();l.Eb("deleted",t.pdf.deleted),l.zb(1),l.Gc(n.fileSize(t.pdf.fileSize))}}function rn(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.Rb()),2&t){const t=e.$implicit,n=l.dc();l.Eb("deleted",t.pdf.deleted),l.zb(1),l.Gc(n.getExpiryDate(t))}}function cn(t,e){if(1&t){const t=l.Tb();l.Sb(0,"div"),l.Sb(1,"i",20),l.Zb("click",(function(){l.uc(t);const n=e.$implicit;return l.dc().toggleTableIcon(n)})),l.Rb(),l.Rb()}if(2&t){const t=e.$implicit,n=l.dc();l.zb(1),l.jc("ngClass",n.papyconClass(t))}}function ln(t,e){if(1&t){const t=l.Tb();l.Sb(0,"sd-statistic-card",21),l.Zb("dateTypeChange",(function(e){return l.uc(t),l.dc().changeDateType(e)}))("customDateChange",(function(e){return l.uc(t),l.dc().changeDate(e)})),l.Rb()}if(2&t){const t=l.dc();l.jc("chartStyle",t.chartStyle)("chartDataSets",t.chartDataSets)("chartLabels",t.chartLabels)("chartResponsive",t.chartResponsive)("chartMaintainAspectRatio",t.chartMaintainAspectRatio)("chartElements",t.chartElements)("chartLegend",t.chartLegend)("chartScales",t.chartScales)("chartTooltips",t.chartTooltips)("chartColor",t.chartColor)("chartType",t.chartType)("legendDate",t.dateInfo)}}function dn(t,e){if(1&t&&(l.Sb(0,"div",22),l.Sb(1,"div",23),l.Nb(2,"i",24),l.Sb(3,"p",25),l.Fc(4),l.Rb(),l.Rb(),l.Rb()),2&t){const t=l.dc();l.zb(4),l.Gc(t.emptyMessage)}}function pn(t,e){if(1&t&&(l.Sb(0,"div",22),l.Sb(1,"div",23),l.Nb(2,"i",24),l.Sb(3,"p",25),l.Fc(4),l.Rb(),l.Rb(),l.Rb()),2&t){const t=e.statistic,n=l.dc();l.zb(4),l.Gc(n.emptyStatisticMessage(t))}}let hn=(()=>{class t{constructor(t,e,n,i,o,a,s){this.documentListDataService=t,this.subs=e,this.statisticDataService=n,this.changeDetectorRef=i,this.tableService=o,this.translatePipe=a,this.bytesPipe=s,this.isLoading=!0,this.statistic=[{type:jt.VIEW,data:[],label:Ht.MOST_VIEWED_DOCUMENTS,icon:"document"},{type:jt.DOWNLOAD,data:[],label:Ht.MOST_DOWNLOADED_DOCUMENTS,icon:"download"},{type:jt.PRINT,data:[],label:Ht.MOST_PRINTED_DOCUMENTS,icon:"print"}],this.table=new N.a,this.tableIcon="analytics",this.displayedColumns=[{key:"docName",title:this.translatePipe.transform("DOCUMENT_NAME"),sortable:!0},{key:"status",title:this.translatePipe.transform("STATUS"),sortable:!1},{key:"data",title:this.translatePipe.transform("OPEN_COUNT_COLUMN"),sortable:!0},{key:"createdAt",title:this.translatePipe.transform("DATE"),sortable:!0},{key:"size",title:this.translatePipe.transform("FILE_SIZE"),sortable:!1},{key:"expiredAt",title:this.translatePipe.transform("EXPIRY_DATE"),sortable:!1},{key:"icon",title:"",sortable:!1}],this.chartStyle={height:"300px"},this.chartDataSets=[{data:[],label:""}],this.chartLabels=[],this.chartResponsive=!0,this.chartMaintainAspectRatio=!1,this.chartElements={line:{tension:0,fill:!1}},this.chartLegend={display:!1},this.chartScales={xAxes:[{ticks:{callback:(t,e,n)=>{let i;const[o,a,s]=t.split(" "),r=0===e||e===n.length-1;return i=this.chartStatus.dateType===U.j.YEAR?`${r?o:""} ${a}`:`${r?a:""} ${s}`,i}}}],yAxes:[{ticks:{min:0,stepSize:20}}]},this.chartTooltips={mode:"index",intersect:!1,xPadding:16,yPadding:14,bodySpacing:8,callbacks:{label:(t,e)=>{const n=this.translatePipe.transform("NUMBER_OF_OCCURRENCES");return Qt(t,e,n)},labelColor:t=>({backgroundColor:this.chartDataSets[t.datasetIndex].borderColor}),title:()=>null}},this.chartColor=[{borderColor:"#ff6600",backgroundColor:"#ffffff"}],this.chartType="line",this.chartStatus={dateType:U.j.WEEK,startDate:new Date,endDate:new Date},this.tableIconFormGroup=new r.k({})}get totalStatistic(){var t,e,n,i,o,a,s,r;return[{label:"TOTAL_COUNT_REGISTERED_DOCUMENTS",value:null!==(e=null===(t=this._totalStatistic)||void 0===t?void 0:t.totalUploadCount)&&void 0!==e?e:"-"},{label:"TOTAL_COUNT_DELETED_DOCUMENTS",value:null!==(i=null===(n=this._totalStatistic)||void 0===n?void 0:n.totalDeleteCount)&&void 0!==i?i:"-"},{label:"COUNT_CURRENT_READABLE_DOCUMENTS",value:null!==(a=null===(o=this._totalStatistic)||void 0===o?void 0:o.avaliableOpenCount)&&void 0!==a?a:"-"},{label:"RECENT_30_COUNT_REGISTERED_DOCUMENTS",value:null!==(r=null===(s=this._totalStatistic)||void 0===s?void 0:s.monthUploadCount)&&void 0!==r?r:"-"}]}get emptyMessage(){switch(this.selectedStatistic.type){case jt.VIEW:return this.translatePipe.transform("NO_OPEN_DOCUMENT");case jt.DOWNLOAD:return this.translatePipe.transform("NO_DOWN_DOCUMENT");case jt.PRINT:return this.translatePipe.transform("NO_PRINT_DOCUMENT");default:return""}}get dynamicColumnTitle(){return this._dynamicColumnTitle}set dynamicColumnTitle(t){switch(t){case Ht.MOST_DOWNLOADED_DOCUMENTS:this._dynamicColumnTitle=this.translatePipe.transform("DOWN_COUNT_COLUMN");break;case Ht.MOST_VIEWED_DOCUMENTS:this._dynamicColumnTitle=this.translatePipe.transform("OPEN_COUNT_COLUMN");break;case Ht.MOST_PRINTED_DOCUMENTS:this._dynamicColumnTitle=this.translatePipe.transform("PRINT_COUNT_COLUMN");break;default:this._dynamicColumnTitle=""}}ngOnInit(){this.init(),this.getStatistic(),this.getTemplates(this.dynamicColumnName(this.selectedStatistic.type),!1)}init(){this.selectedStatistic=this.statistic[0],this.dynamicColumnTitle=this.selectedStatistic.label}fileStatus(t){return this.translatePipe.transform(t?"DELETE":"NORMAL")}fileSize(t){return 0===t?"-":this.bytesPipe.transform(t)}onClickStatisticCard(t){this.selectedStatistic=t,this.dynamicColumnTitle=t.label,this.displayedColumns.find(t=>"data"===t.key).title=this.dynamicColumnTitle,this.displayedColumns=[...this.displayedColumns],this.getTemplates(this.dynamicColumnName(this.selectedStatistic.type),!1)}toggleTableIcon(t){const e="analytics"===this.tableIconFormGroup.controls[t.id].value?"cross":"analytics";this.initTableIconFormGroup(),this.tableIconFormGroup.controls[t.id].setValue(e)}dataCount(t,e){switch(t.label){case"MOST_VIEWED_DOCUMENTS":return e.openCount;case"MOST_DOWNLOADED_DOCUMENTS":return e.downCount;case"MOST_PRINTED_DOCUMENTS":return e.printCount;default:return""}}trackByFn(t,e){return e.title}getTableHeaderIconClass(t){if(t)return["papycon","papycon-"+t]}papyconClass(t){return this.tableIcon=this.tableIconFormGroup.controls[t.id].value,"papycon-"+this.tableIcon}getExpiryDate(t){return t.pdf.deleted?"-":oe(new Date(parseInt(t.validity.expirationDate)),this.translatePipe)}changeDateType(t){let e,n;this.chartStatus.dateType=t,e=this.chartStatus.startDate,n=this.chartStatus.endDate,this.dateInfo=Object(U.I)(t,e,n),this.getChart(t,this.dateInfo.startDate,this.dateInfo.endDate)}getTemplates(t,e){this.closeAccordion(),this.isLoading=!0,this.subs.push(this.documentListDataService.fetchPdf({pageIndex:this.table.getPageInfo().currentIndex,listingCount:15,search:void 0,from:void 0,to:void 0,orderBy:t,ascending:e,deleted:void 0,includeStatistics:!0}).subscribe({next:t=>{if(this.tableIconFormGroup=new r.k({}),this.isLoading=!1,"0"===t.pageInfo.totalCount)return this.table.reset(),this.table.setData([]),void this.changeDetectorRef.markForCheck();t.resources.forEach(t=>{this.tableIconFormGroup.addControl(t.id,new r.h("analytics"))}),this.table.setData(t.resources),this.table.setPageInfo(t.pageInfo.totalCount,t.pageInfo.listingCount),this.subs.set("tableIconChange",d.a(...this.table.getData().map(t=>this.tableIconFormGroup.controls[t.id].valueChanges.pipe(G.a(e=>({id:t.id,icon:e}))))).subscribe({next:t=>{this.statisticId=t.id;const e={id:t.id,isVisible:"cross"===t.icon};this.tableService.accordionStatusChange(e),e.isVisible&&this.changeDateType(U.j.WEEK)}})),this.changeDetectorRef.markForCheck()}}))}getDynamicData(t){var e;switch(null===(e=this.selectedStatistic)||void 0===e?void 0:e.label){case Ht.MOST_DOWNLOADED_DOCUMENTS:return t.statistic.downCount;case Ht.MOST_VIEWED_DOCUMENTS:return t.statistic.openCount;case Ht.MOST_PRINTED_DOCUMENTS:return t.statistic.printCount;default:return 0}}closeAccordion(){this.statisticId&&this.tableService.accordionStatusChange({id:this.statisticId,isVisible:!1})}dynamicColumnName(t){switch(t){case jt.VIEW:return"openCount";case jt.DOWNLOAD:return"downCount";case jt.PRINT:return"printCount";default:return""}}emptyStatisticMessage(t){switch(t.type){case jt.VIEW:return this.translatePipe.transform("NO_OPEN_DOCUMENT");case jt.DOWNLOAD:return this.translatePipe.transform("NO_DOWN_DOCUMENT");case jt.PRINT:return this.translatePipe.transform("NO_PRINT_DOCUMENT");default:return""}}sortingChanges(t){const e=this.dynamicColumnName(this.selectedStatistic.type);let n;n=0===t.value||"data"===t.name?e:t.name,this.getTemplates(n,0===t.value?void 0:1===t.value)}changeDate(t){this.chartStatus.startDate=t.startDate,this.chartStatus.endDate=t.endDate,this.changeDateType(U.j.CUSTOM)}getChart(t,e,n){let i;this.chartLabels=[],this.chartDataSets[0].data=[],i=t!==U.j.YEAR?$t.DAILY:$t.MONTHLY,this.subs.push(this.statisticDataService.getTimezoneStatistic({startDate:e.getTime(),endDate:n.getTime(),periodUnit:i,isAccumulated:!1,documentId:this.statisticId}).subscribe({next:t=>{this.initChartDate(),t.forEach(t=>{const e=`${this.makeTwoDigits(t.year)}${this.translatePipe.transform("YEAR")}`,n=`${this.makeTwoDigits(t.month)}${this.translatePipe.transform("MONTH")}`,i=`${this.makeTwoDigits(t.date)}${this.translatePipe.transform("DAYS")}`;this.chartLabels.push(`${e} ${n} ${i}`),this.chartDataSets[0].data.push(this.selectedStatistic.type===jt.VIEW?parseInt(t.openCount):this.selectedStatistic.type===jt.PRINT?parseInt(t.printCount):parseInt(t.downCount)),this.changeDetectorRef.markForCheck()})}}))}initChartDate(){this.chartStatus.startDate=new Date,this.chartStatus.endDate=new Date}makeTwoDigits(t){return("0"+t).slice(-2)}getStatistic(){this.subs.push(Gt.a(["total",Wt,Vt,Bt].map(t=>"total"===t?this.statisticDataService.getDocumentIncrement():this.statisticDataService.getTopCountByPropertyName(t,4))).subscribe(([t,e,n,i])=>{this._totalStatistic=t,this.statistic[0].data=e,this.statistic[1].data=n,this.statistic[2].data=i,this.changeDetectorRef.markForCheck()}))}initTableIconFormGroup(){const t=this.table.getData().map(t=>t.id);this.chartDataSets[0].label=this.translatePipe.transform(this.getChartLabel(this.selectedStatistic.type)),this.changeDetectorRef.markForCheck(),t.map(t=>{this.tableIconFormGroup.controls[t].setValue("analytics")})}getChartLabel(t){switch(t){case jt.VIEW:return"OPEN_COUNT_COLUMN";case jt.DOWNLOAD:return"DOWN_COUNT_COLUMN";case jt.PRINT:return"PRINT_COUNT_COLUMN";default:return""}}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(re),l.Mb(s.G),l.Mb(Yt),l.Mb(l.h),l.Mb(N.c),l.Mb(w.d),l.Mb(at.a))},t.\u0275cmp=l.Gb({type:t,selectors:[["sd-statistic-document"]],features:[l.yb([at.a])],decls:37,vars:38,consts:[[1,"total-document-count-container"],[4,"ngFor","ngForOf"],["class","container",3,"click",4,"ngFor","ngForOf"],[3,"isLoading"],[3,"ngClass"],[3,"data","checkEnable","trackByFn","displayedColumns","accordionContentTemplate","emptyEl","sortingChange"],[4,"eTableCell","eTableCellFor"],[3,"deleted",4,"eTableCell","eTableCellFor"],[3,"last","sideButtonCount","page","prevLabel","nextLabel","pageChange"],["tableAccordionContentTemplate",""],["emptyTableEl",""],["emptyStatisticEl",""],[1,"container",3,"click"],[1,"table"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["statisticEl",""],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"docName"],[1,"count"],[1,"papycon",3,"ngClass","click"],[3,"chartStyle","chartDataSets","chartLabels","chartResponsive","chartMaintainAspectRatio","chartElements","chartLegend","chartScales","chartTooltips","chartColor","chartType","legendDate","dateTypeChange","customDateChange"],[1,"empty"],[1,"notifier"],[1,"papycon","papycon-non-progress"],[1,"message"]],template:function(t,e){if(1&t&&(l.Sb(0,"h1"),l.Fc(1),l.ec(2,"translate"),l.Rb(),l.Sb(3,"article"),l.Sb(4,"div",0),l.Sb(5,"header"),l.Sb(6,"label"),l.Fc(7),l.ec(8,"translate"),l.Rb(),l.Rb(),l.Sb(9,"ul"),l.Dc(10,Ze,6,4,"li",1),l.Rb(),l.Rb(),l.Dc(11,tn,10,8,"div",2),l.Rb(),l.Sb(12,"sd-card",3),l.Sb(13,"header"),l.Nb(14,"i",4),l.Sb(15,"label"),l.Fc(16),l.ec(17,"translate"),l.ec(18,"translate"),l.Rb(),l.Rb(),l.Sb(19,"e-table",5),l.Zb("sortingChange",(function(t){return e.sortingChanges(t)})),l.Dc(20,en,2,1,"div",6),l.Dc(21,nn,2,1,"div",6),l.Dc(22,on,4,6,"div",6),l.Dc(23,an,3,4,"div",6),l.Dc(24,sn,2,3,"div",7),l.Dc(25,rn,2,3,"div",7),l.Dc(26,cn,2,1,"div",6),l.Rb(),l.Sb(27,"footer"),l.Sb(28,"sd-pagination",8),l.Zb("pageChange",(function(t){return e.table.setPageCurrentIndex(t-1),e.getTemplates(e.dynamicColumnName(e.selectedStatistic.type))})),l.ec(29,"translate"),l.ec(30,"translate"),l.Rb(),l.Rb(),l.Rb(),l.Dc(31,ln,1,12,"ng-template",null,9,l.Ec),l.Dc(33,dn,5,1,"ng-template",null,10,l.Ec),l.Dc(35,pn,5,1,"ng-template",null,11,l.Ec)),2&t){const t=l.tc(32),n=l.tc(34);l.zb(1),l.Gc(l.fc(2,26,"STATISTIC_BY_DOCUMENT")),l.zb(6),l.Gc(l.fc(8,28,"ALL_DOCUMENTS_STATISTIC")),l.zb(3),l.jc("ngForOf",e.totalStatistic),l.zb(1),l.jc("ngForOf",e.statistic),l.zb(1),l.jc("isLoading",e.isLoading),l.zb(2),l.jc("ngClass",e.getTableHeaderIconClass(null==e.selectedStatistic?null:e.selectedStatistic.icon)),l.zb(2),l.Ic("",l.fc(17,30,null==e.selectedStatistic?null:e.selectedStatistic.label)," ",l.fc(18,32,"LIST"),""),l.zb(3),l.jc("data",e.table.getData())("checkEnable",!1)("trackByFn",e.trackByFn)("displayedColumns",e.displayedColumns)("accordionContentTemplate",t)("emptyEl",n),l.zb(1),l.jc("eTableCellFor","status"),l.zb(1),l.jc("eTableCellFor","docName"),l.zb(1),l.jc("eTableCellFor","data"),l.zb(1),l.jc("eTableCellFor","createdAt"),l.zb(1),l.jc("eTableCellFor","size"),l.zb(1),l.jc("eTableCellFor","expiredAt"),l.zb(1),l.jc("eTableCellFor","icon"),l.zb(2),l.jc("last",e.table.getPageInfo().allPageCount)("sideButtonCount",1)("page",e.table.getPageInfo().currentIndex+1)("prevLabel",l.fc(29,34,"PREVIOUS"))("nextLabel",l.fc(30,36,"NEXT"))}},styles:["[_nghost-%COMP%]{min-width:1120px}article[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;min-height:206px;margin-bottom:20px}article[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{min-width:280px;-webkit-box-flex:1;-ms-flex:1 1 0px;flex:1 1 0;border:1px solid #fff;-webkit-box-sizing:border-box;box-sizing:border-box}article[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]:hover{cursor:pointer;border-radius:4px;border:1px solid #f79f1a;background-color:#fff8ed}article[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#f79f1a}article[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex:1;flex:1}article[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}article[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap}article[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   span.docName[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;-webkit-box-flex:1;-ms-flex:1 1 173px;flex:1 1 173px}article[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   span.count[_ngcontent-%COMP%]{margin-left:15px;text-align:right;-webkit-box-flex:1;-ms-flex:1 1 0px;flex:1 1 0}sd-card[_ngcontent-%COMP%]{padding:30px}header[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start}header[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{font-size:19px;margin-right:6px}label[_ngcontent-%COMP%]{font-family:NotoSans-Medium;display:inline-block;font-size:14px;height:14px;line-height:14px;letter-spacing:-.5px;color:#1e1e1e}.container[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;background-color:#fff;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:30px;border-radius:4px}.container[_ngcontent-%COMP%]:not(:last-child){margin-right:10px}.container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;height:14px}.container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{margin-top:12px}.container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-top:16px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:NotoSans-Regular;font-size:14px;display:inline-block;height:14px;line-height:14px;letter-spacing:-.5px;color:#1e1e1e}.container[_ngcontent-%COMP%]   span.count[_ngcontent-%COMP%]{color:#6c6c6c}.total-document-count-container[_ngcontent-%COMP%]{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-flex:0;-ms-flex:0 0 228px;flex:0 0 228px;display:-webkit-box;display:-ms-flexbox;display:flex;background-color:#fff;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:30px 16px;border-radius:4px;margin-right:10px}.total-document-count-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:NotoSans-Bold;font-size:30px;font-weight:700;line-height:20px;letter-spacing:-.75px;color:#1e1e1e}.total-document-count-container[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:inline-block;margin-bottom:22px}.total-document-count-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-family:NotoSans-Regular,sans-serif;color:#1e1e1e;font-size:14px;line-height:24px;margin:0;padding:0}.total-document-count-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin:0 0 4px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.total-document-count-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.total-document-count-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif;font-size:14px;line-height:24px;color:#ff6100}e-table[_ngcontent-%COMP%]{margin-top:20px;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;overflow:visible}e-table[_ngcontent-%COMP%]     div.table tr.tbody-row{min-height:40px;padding:0 0 0 18px}e-table[_ngcontent-%COMP%]     .column{padding:8px 0}e-table[_ngcontent-%COMP%]     .docName{-webkit-box-flex:1;-ms-flex:1;flex:1;font-size:14px;display:-webkit-box;display:-ms-flexbox;display:flex;white-space:nowrap;overflow:hidden;margin-right:20px}e-table[_ngcontent-%COMP%]     .docName>div{width:100%}e-table[_ngcontent-%COMP%]     .data{-webkit-box-flex:0;-ms-flex:0 1 125px;flex:0 1 125px;font-size:14px}e-table[_ngcontent-%COMP%]     .createdAt{-webkit-box-flex:0;-ms-flex:0 1 140px;flex:0 1 140px;font-size:14px}e-table[_ngcontent-%COMP%]     .status{-webkit-box-flex:0;-ms-flex:0 1 65px;flex:0 1 65px;font-size:14px}e-table[_ngcontent-%COMP%]     .size{-webkit-box-flex:0;-ms-flex:0 1 86px;flex:0 1 86px;font-size:14px}e-table[_ngcontent-%COMP%]     .size .deleted{padding-left:10px}e-table[_ngcontent-%COMP%]     .icon{-webkit-box-flex:0;-ms-flex:0 1 40px;flex:0 1 40px;height:100%}e-table[_ngcontent-%COMP%]     .icon>div{-webkit-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}e-table[_ngcontent-%COMP%]     td.icon{cursor:pointer}e-table[_ngcontent-%COMP%]     td.icon .papycon-analytics{font-size:28px;color:#6c6c6c}e-table[_ngcontent-%COMP%]     td.icon .papycon-cross{font-size:18px;color:#f79f1a}e-table[_ngcontent-%COMP%]     .expiredAt{-webkit-box-flex:0;-ms-flex:0 1 170px;flex:0 1 170px;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:14px}e-table[_ngcontent-%COMP%]     .expiredAt .deleted{padding-left:10px}footer[_ngcontent-%COMP%]{height:95px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto}footer[_ngcontent-%COMP%]   sd-pagination[_ngcontent-%COMP%]{margin-top:38px}sd-statistic-card[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1;flex:1}sd-statistic-card[_ngcontent-%COMP%]  sd-card{margin:0}sd-statistic-card[_ngcontent-%COMP%]  sd-card   article{margin:16px 0 0 20px}sd-statistic-card[_ngcontent-%COMP%]  sd-card   sd-chart{max-height:332px;margin:14px 16px 10px 20px}.empty[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1;flex:1;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.empty[_ngcontent-%COMP%], .empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]{width:130px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin-top:34px}.empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{font-size:29px;color:#6c6c6c}.empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-family:NotoSans-Regular;font-size:14px;letter-spacing:-.5px;color:#6c6c6c}"],changeDetection:0}),t})(),gn=(()=>{class t{constructor(t,e,n,i){this.changeDetectorRef=t,this.subs=e,this.statisticDataService=n,this.translatePipe=i,this.chartStyle={height:"300px"},this.chartDataSets=[{data:[],label:""},{data:[],label:""},{data:[],label:""}],this.chartLabels=[],this.chartResponsive=!0,this.chartMaintainAspectRatio=!1,this.chartElements={line:{tension:0,fill:!1}},this.chartLegend={display:!1},this.chartScales={xAxes:[{ticks:{callback:(t,e,n)=>{let i;const[o,a,s]=t.split(" "),r=0===e||e===n.length-1;return i=this.chartStatus.dateType===U.j.YEAR?`${r?o:""} ${a}`:`${r?a:""} ${s}`,i}}}],yAxes:[{ticks:{min:0,stepSize:20}}]},this.chartTooltips={mode:"index",intersect:!1,xPadding:16,yPadding:14,bodySpacing:8,callbacks:{label:(t,e)=>{const n=this.translatePipe.transform("NUMBER_OF_CASES");return Qt(t,e,n)},labelColor:t=>({backgroundColor:this.chartDataSets[t.datasetIndex].borderColor}),title:()=>null}},this.chartColor=[{borderColor:"#ff6600",backgroundColor:"#ffffff"},{borderColor:"#f79f1a",backgroundColor:"#ffffff"},{borderColor:"#0C7489",backgroundColor:"#ffffff"}],this.chartType="line",this.chartStatus={dateType:U.j.WEEK,startDate:new Date}}ngOnInit(){this.changeDateType(U.j.WEEK),this.changeDateType(U.j.WEEK),this.initFields()}changeDateType(t){this.chartStatus.dateType=t,this.dateInfo=Object(U.I)(t,this.chartStatus.startDate,this.chartStatus.endDate),this.getChart(t,this.dateInfo.startDate,this.dateInfo.endDate)}changeDate(t){this.chartStatus.startDate=t.startDate,this.chartStatus.endDate=t.endDate,this.changeDateType(U.j.CUSTOM)}downloadExcel(){this.subs.push(this.statisticDataService.saveAllDateStatistic(this.chartStatus.startDate.getFullYear(),this.chartStatus.startDate.getFullYear(),this.chartStatus.startDate.getMonth()+1,this.chartStatus.startDate.getFullYear(),this.chartStatus.startDate.getMonth()+1,this.chartStatus.startDate.getDate()).subscribe({next:t=>{Logger.warn("Not implemented")}}))}getChart(t,e,n){let i;this.chartLabels=[],i=t!==U.j.YEAR?$t.DAILY:$t.MONTHLY,this.subs.push(this.statisticDataService.getTimezoneStatistic({startDate:e.getTime(),endDate:n.getTime(),periodUnit:i,isAccumulated:!1}).subscribe({next:t=>{this.initLineChartData(),this.initChartDate(),t.forEach(t=>{const e=`${this.makeTwoDigits(t.year)}${this.translatePipe.transform("YEAR")}`,n=`${this.makeTwoDigits(t.month)}${this.translatePipe.transform("MONTH")}`,i=`${this.makeTwoDigits(t.date)}${this.translatePipe.transform("DAYS")}`;this.chartLabels.push(`${e} ${n} ${i}`),this.chartDataSets[0].data.push(parseInt(t.openCount)),this.chartDataSets[1].data.push(parseInt(t.downCount)),this.chartDataSets[2].data.push(parseInt(t.printCount))}),this.changeDetectorRef.markForCheck()}}))}initChartDate(){this.chartStatus.startDate=new Date,this.chartStatus.endDate=new Date}makeTwoDigits(t){return("0"+t).slice(-2)}initLineChartData(){this.chartLabels=[],this.chartDataSets[0].data=[],this.chartDataSets[1].data=[],this.chartDataSets[2].data=[]}initFields(){this.chartDataSets[0].label=this.translatePipe.transform("OPEN_COUNT_COLUMN"),this.chartDataSets[1].label=this.translatePipe.transform("DOWN_COUNT_COLUMN"),this.chartDataSets[2].label=this.translatePipe.transform("PRINT_COUNT_COLUMN"),this.changeDetectorRef.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(l.h),l.Mb(s.G),l.Mb(Yt),l.Mb(w.d))},t.\u0275cmp=l.Gb({type:t,selectors:[["sd-statistic"]],decls:5,vars:19,consts:[[3,"title","chartStyle","chartDataSets","chartLabels","chartResponsive","chartMaintainAspectRatio","chartElements","chartLegend","chartScales","chartTooltips","chartColor","chartType","legendDate","height","dateTypeChange","customDateChange","downloadClick"]],template:function(t,e){1&t&&(l.Sb(0,"h1"),l.Fc(1),l.ec(2,"translate"),l.Rb(),l.Sb(3,"sd-statistic-card",0),l.Zb("dateTypeChange",(function(t){return e.changeDateType(t)}))("customDateChange",(function(t){return e.changeDate(t)}))("downloadClick",(function(){return e.downloadExcel()})),l.ec(4,"translate"),l.Rb()),2&t&&(l.zb(1),l.Gc(l.fc(2,15,"HISTORICAL_STATISTIC")),l.zb(2),l.jc("title",l.fc(4,17,"HISTORICAL_STATISTIC"))("chartStyle",e.chartStyle)("chartDataSets",e.chartDataSets)("chartLabels",e.chartLabels)("chartResponsive",e.chartResponsive)("chartMaintainAspectRatio",e.chartMaintainAspectRatio)("chartElements",e.chartElements)("chartLegend",e.chartLegend)("chartScales",e.chartScales)("chartTooltips",e.chartTooltips)("chartColor",e.chartColor)("chartType",e.chartType)("legendDate",e.dateInfo)("height",300))},styles:["[_nghost-%COMP%]{min-width:1120px}"],changeDetection:0}),t})();var bn=n("Kj3r"),un=function(t){return t.ALL="ALL",t.UPLOAD="UPLOAD",t.DELETE="DELETE",t.OPEN="OPEN",t.DOWNLOAD="DOWNLOAD",t.PRINT="PRINT",t}({});let fn=(()=>{class t{constructor(t,e){this.baseHref=t,this.httpClient=e,this.gzipHeaders=new o.e({"Content-Encoding":"gzip","Accept-Language":"utf-8"})}get logUrl(){return this.baseHref+"v4/logs"}getLogList(t){return this.httpClient.get(""+this.logUrl,{headers:this.gzipHeaders,params:this.makeHttpParams(t)}).pipe(bt.a(t=>{t.resources.map(t=>{t.id=t.name})}))}deleteLogs(t){return this.httpClient.post(this.logUrl+"/delete",t)}getTemplateHistories(t){return this.httpClient.get(this.baseHref+"v4/statistic/documents/histories",{headers:this.gzipHeaders,params:this.makeHttpParams(t)}).pipe(bt.a(t=>{t.resources.map(t=>{t.size=parseInt(t.size)})}))}makeHttpParams(t){let e=new o.f;return Object.keys(t).filter(e=>void 0!==t[e]).forEach(n=>{Array.isArray(t[n])?t[n].forEach(t=>{e=e.append(n,t)}):e=e.set(n,String(t[n]))}),e}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(i.a),l.Wb(o.b))},t.\u0275prov=l.Ib({token:t,factory:t.\u0275fac}),t})();function mn(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.Rb()),2&t){const t=e.$implicit;l.zb(1),l.Gc(t.docName)}}function Cn(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.Rb()),2&t){const t=e.$implicit;l.zb(1),l.Gc(t.userName||"(unknown)")}}function xn(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.ec(2,"action"),l.Rb()),2&t){const t=e.$implicit;l.zb(1),l.Gc(l.fc(2,1,t.action))}}function On(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.ec(2,"date"),l.Rb()),2&t){const t=e.$implicit;l.zb(1),l.Gc(l.gc(2,1,t.createdAt,"yyyy-MM-dd HH:mm:ss"))}}function Mn(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.ec(2,"bytes"),l.Rb()),2&t){const t=e.$implicit;l.zb(1),l.Gc(l.fc(2,1,t.size))}}function _n(t,e){1&t&&(l.Sb(0,"div",9),l.Sb(1,"div",10),l.Nb(2,"span",11),l.Sb(3,"p",12),l.Fc(4),l.ec(5,"translate"),l.Rb(),l.Rb(),l.Rb()),2&t&&(l.zb(4),l.Gc(l.fc(5,1,"NO_DOCUMENT_LOG")))}let Pn=(()=>{class t{constructor(t,e,n,i){this.changeDetectorRef=t,this.logDataService=e,this.subs=n,this.translatePipe=i,this.isLoading=!0,this.displayedColumns=[{key:"docName",title:this.translatePipe.transform("DOCUMENT_NAME"),sortable:!0},{key:"userName",title:this.translatePipe.transform("USER"),sortable:!0},{key:"action",title:this.translatePipe.transform("ACTION"),sortable:!0},{key:"createdAt",title:this.translatePipe.transform("DATE"),sortable:!0},{key:"size",title:this.translatePipe.transform("FILE_SIZE"),sortable:!1}],this.table=new N.a,this.actionFilterValues=[un.UPLOAD,un.DELETE],this.filterMenus=[{label:"",type:"date",item:Object.values(b).filter(t=>t!==b.CUSTOM).map(t=>({label:t,value:t})),isMulti:!1},{label:"",type:"custom-date",item:[{label:"",value:b.CUSTOM}],isMulti:!1},{isMulti:!0,item:Object.values(un).map(t=>"UPLOAD"===t?{label:"ADD",value:t}:{label:t,value:t}),label:this.translatePipe.transform("ACTION"),type:"action",defaultValues:[un.UPLOAD,un.DELETE]}],this.orderedBy="createdAt",this.asc=!1}ngOnInit(){this.initFields(),this.subs.push(this.table.filterChanges.pipe(bn.a(0)).subscribe({next:()=>{var t,e;this.table.reset(),this.actionFilterValues=null===(e=null===(t=this.table.filterGroup.get("filter").value)||void 0===t?void 0:t.action)||void 0===e?void 0:e.value,this.getHistories(this.table.getKeyword(),this.table.getPeriodValue(),this.orderedBy,this.asc,this.actionFilterValues)}}),this.table.filterGroup.get("keyword").valueChanges.pipe(L.a(t=>!t)).subscribe({next:()=>{this.searchKeyword()}})),this.getHistories(this.table.getKeyword(),this.table.getPeriodValue(),this.orderedBy,this.asc)}searchKeyword(){this.table.reset(),this.getHistories(this.table.getKeyword(),this.table.getPeriodValue(),this.orderedBy,this.asc)}getHistories(t,e,n,i,o){this.isLoading=!0,this.subs.push(this.logDataService.getTemplateHistories({pageIndex:this.table.getPageInfo().currentIndex,listingCount:15,search:t,from:e?Object(U.H)(e.startDate):void 0,to:e?Object(U.H)(e.endDate):void 0,orderBy:n,ascending:i,actions:o}).pipe(F.a(()=>this.table.isLoading=!1)).subscribe({next:t=>{this.isLoading=!1,this.table.setData(t.resources),this.table.setPageInfo(t.pageInfo.totalCount,"15"),this.changeDetectorRef.markForCheck()}}))}sortingChanges(t){this.orderedBy=0===t.value?"createdAt":t.name,this.asc=0!==t.value&&1===t.value,this.getHistories(this.table.getKeyword(),this.table.getPeriodValue(),this.orderedBy,this.asc)}onPageChanging(t){this.table.getPageInfo().currentIndex=t-1,this.getHistories(this.table.getKeyword(),this.table.getPeriodValue(),this.orderedBy,this.asc)}initFields(){this.filterMenus[0].label=this.translatePipe.transform("PERIOD"),this.filterMenus[1].label=this.translatePipe.transform("MANUAL_INPUT"),this.filterMenus[1].item[0].label=this.translatePipe.transform("MANUAL_SELECT"),this.changeDetectorRef.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(l.h),l.Mb(fn),l.Mb(s.G),l.Mb(w.d))},t.\u0275cmp=l.Gb({type:t,selectors:[["sd-document-history"]],features:[l.yb([s.G])],decls:21,vars:28,consts:[[3,"isLoading"],[1,"form-list-header"],[1,"tool",3,"formGroup"],["formControlName","filter",1,"small",3,"datePickerDirection","filterMenus"],["size","small","useClearButton","true","formControlName","keyword",1,"custom",3,"placeholder","keydown.enter","focusout"],[3,"data","checkEnable","displayedColumns","emptyEl","sortingChange"],[4,"eTableCell","eTableCellFor"],[3,"page","last","sideButtonCount","prevLabel","nextLabel","pageChange"],["emptyEl",""],[1,"empty"],[1,"notifier"],[1,"papycon","papycon-preview"],[1,"title"]],template:function(t,e){if(1&t&&(l.Sb(0,"h1"),l.Fc(1),l.ec(2,"translate"),l.Rb(),l.Sb(3,"sd-card",0),l.Sb(4,"header",1),l.Sb(5,"div",2),l.Nb(6,"sd-filter-pop-up",3),l.Sb(7,"pu-input",4),l.Zb("keydown.enter",(function(){return e.searchKeyword()}))("focusout",(function(){return e.searchKeyword()})),l.ec(8,"translate"),l.Rb(),l.Rb(),l.Rb(),l.Sb(9,"e-table",5),l.Zb("sortingChange",(function(t){return e.sortingChanges(t)})),l.Dc(10,mn,2,1,"div",6),l.Dc(11,Cn,2,1,"div",6),l.Dc(12,xn,3,3,"div",6),l.Dc(13,On,3,4,"div",6),l.Dc(14,Mn,3,3,"div",6),l.Rb(),l.Sb(15,"footer"),l.Sb(16,"sd-pagination",7),l.Zb("pageChange",(function(t){return e.onPageChanging(t)})),l.ec(17,"translate"),l.ec(18,"translate"),l.Rb(),l.Rb(),l.Rb(),l.Dc(19,_n,6,3,"ng-template",null,8,l.Ec)),2&t){const t=l.tc(20);l.zb(1),l.Gc(l.fc(2,20,"DOCUMENT_HISTORY")),l.zb(2),l.jc("isLoading",e.isLoading),l.zb(2),l.jc("formGroup",e.table.filterGroup),l.zb(1),l.jc("datePickerDirection","right")("filterMenus",e.filterMenus),l.zb(1),l.jc("placeholder",l.fc(8,22,"DOCUMENT_LOG_KEYWORD_PLACEHOLDER")),l.zb(2),l.jc("data",e.table.getData())("checkEnable",!1)("displayedColumns",e.displayedColumns)("emptyEl",t),l.zb(1),l.jc("eTableCellFor","docName"),l.zb(1),l.jc("eTableCellFor","userName"),l.zb(1),l.jc("eTableCellFor","action"),l.zb(1),l.jc("eTableCellFor","createdAt"),l.zb(1),l.jc("eTableCellFor","size"),l.zb(2),l.jc("page",e.table.getPageInfo().currentIndex+1)("last",e.table.getPageInfo().allPageCount)("sideButtonCount",1)("prevLabel",l.fc(17,24,"PREVIOUS"))("nextLabel",l.fc(18,26,"NEXT"))}},styles:[".table[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .center[_ngcontent-%COMP%]{text-align:center}.table[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{text-align:right}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .thead[_ngcontent-%COMP%]{font-size:13px;line-height:22px;color:#6c6c6c;font-family:NotoSans-Medium,sans-serif;min-height:44px;border-bottom:1px solid #dadada;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.table[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .tbody[_ngcontent-%COMP%]{margin:0;padding:0}.table[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{height:40px;background:#fff;border-radius:6px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.table[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:hover, .table[_nghost-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:hover{background-color:hsla(0,0%,85.5%,.1)}.table[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr.selected[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr.selected[_ngcontent-%COMP%]{border-color:#f79f1a;background-color:rgba(255,248,237,.9)}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]{margin:auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;color:#6c6c6c}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   .head.papycon[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]   .head.papycon[_ngcontent-%COMP%]{margin:0 auto 12px;font-size:40px;line-height:40px;width:40px}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]:not(.papycon), .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]:not(.papycon){font-size:16px;line-height:26px;color:#1e1e1e}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   .medium[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]   .medium[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   .dashed-hr[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]   .dashed-hr[_ngcontent-%COMP%]{height:2px;width:170px;margin:11px auto;background:linear-gradient(90deg,#979797,#979797 4px,transparent 0,transparent 6px) 0/6px}.empty[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1;flex:1;height:100%;flex-direction:column}.empty[_ngcontent-%COMP%], .empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]{flex-direction:column;width:170px;height:160px}.empty[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{color:#6c6c6c;font-size:22px;margin:0 auto 12px}.empty[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-family:NotoSans-Regular}.empty[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:14px;font-weight:400;text-align:center;font-family:NotoSans-Regular;padding-top:12px}.empty[_ngcontent-%COMP%]   .dashed[_ngcontent-%COMP%]{width:170px;height:2px;border-bottom:2px dashed #979797}.notifier[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}[_nghost-%COMP%]:not(.loading){position:relative;width:100%;min-width:1120px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column;flex-flow:column;font-family:NotoSans-Regular,sans-serif}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]{background:#f2f2f2}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .light[_ngcontent-%COMP%]{color:#6c6c6c}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]{margin-top:14px;display:-webkit-box;display:-ms-flexbox;display:flex}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:12px}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]   .push[_ngcontent-%COMP%]{margin-left:auto}sd-card[_ngcontent-%COMP%]{padding:30px 24px 37px}.form-list-header[_ngcontent-%COMP%], .form-list-header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.form-list-header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]{width:400px}.form-list-header[_ngcontent-%COMP%]   sd-filter-pop-up[_ngcontent-%COMP%]{margin-right:12px}.form-list-header[_ngcontent-%COMP%]   pu-input[_ngcontent-%COMP%]{width:307px}.form-list-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;line-height:20px;font-family:NotoSans-Medium,sans-serif;color:#6c6c6c;border-radius:12px;border:1.2px solid #c8c8c8;padding:3px 12px;margin-left:8px}e-table[_ngcontent-%COMP%]{margin-top:20px;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;overflow:auto}e-table[_ngcontent-%COMP%]     .column{padding:8px 0}e-table[_ngcontent-%COMP%]     .SDID{-webkit-box-flex:0;-ms-flex:0 1 114px;flex:0 1 114px;font-size:14px}e-table[_ngcontent-%COMP%]     .docName{-webkit-box-flex:1;-ms-flex:1;flex:1;font-size:14px}e-table[_ngcontent-%COMP%]     .action, e-table[_ngcontent-%COMP%]     .createdAt, e-table[_ngcontent-%COMP%]     .size, e-table[_ngcontent-%COMP%]     .userName{-webkit-box-flex:0;-ms-flex:0 1 15%;flex:0 1 15%;font-size:14px}footer[_ngcontent-%COMP%]{height:95px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}footer[_ngcontent-%COMP%]   sd-pagination[_ngcontent-%COMP%]{margin-top:38px}span.primary[_ngcontent-%COMP%]{color:#ff6100;text-decoration:underline}"],changeDetection:0}),t})();function yn(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.Rb()),2&t){const t=e.$implicit;l.zb(1),l.Gc(t.name)}}function vn(t,e){if(1&t&&(l.Sb(0,"div"),l.Fc(1),l.ec(2,"bytes"),l.Rb()),2&t){const t=e.$implicit;l.zb(1),l.Gc(l.fc(2,1,t.size))}}function Sn(t,e){if(1&t){const t=l.Tb();l.Sb(0,"div"),l.Sb(1,"button",12),l.Zb("click",(function(){l.uc(t);const n=e.$implicit;return l.dc().download(n)})),l.Nb(2,"i",13),l.Fc(3),l.ec(4,"translate"),l.Rb(),l.Rb()}2&t&&(l.zb(3),l.Gc(l.fc(4,1,"DOWNLOAD")))}function Dn(t,e){1&t&&(l.Sb(0,"div",14),l.Sb(1,"div",15),l.Nb(2,"span",16),l.Sb(3,"p",17),l.Fc(4),l.ec(5,"translate"),l.Rb(),l.Rb(),l.Rb()),2&t&&(l.zb(4),l.Gc(l.fc(5,1,"NO_LOG")))}let kn=(()=>{class t{constructor(t,e,n,i,o,a,s,r,c){this.changeDetectorRef=t,this.formBuilder=e,this.subs=n,this.logDataService=i,this.toastService=o,this.translatePipe=a,this.elementRef=s,this.renderer=r,this.adminDialogService=c,this.isLoading=!0,this.displayedColumns=[{key:"name",title:this.translatePipe.transform("LOG_NAME"),sortable:!1},{key:"size",title:this.translatePipe.transform("FILE_SIZE"),sortable:!1},{key:"download",title:"",sortable:!1}],this.formGroup=this.formBuilder.group({checkedIds:null}),this.filterMenus=[{label:"",type:"date",item:Object.values(b).filter(t=>t!==b.CUSTOM).map(t=>({label:t,value:t})),isMulti:!1},{label:this.translatePipe.transform("MANUAL_SELECT"),type:"custom-date",item:[{label:"",value:b.CUSTOM}],isMulti:!1}],this.table=new N.a}get currentPageIndex(){return this.table.getPageInfo().currentIndex}ngOnInit(){this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc),this.initFields(),this.subs.push(this.table.filterChanges.subscribe({next:()=>{this.table.reset(),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}}),this.adminDialogService.dialogEvent$.pipe(L.a(t=>"confirm"===t.action&&t.dialogType===c.c.DELETE_ITEMS)).subscribe({next:()=>{const t={logNames:[]};this.formGroup.controls.checkedIds.value.map(e=>{t.logNames.push({name:e})}),this.subs.set("deleteLogs",this.logDataService.deleteLogs(t).subscribe({next:()=>{this.toastService.showToast({icon:"success",text:this.translatePipe.transform("SUCCESS_DELETE")}),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}})),this.adminDialogService.closeCurrentActiveDialog()}}))}download(t){const e=`v4/logs/download?name=${t.name}&accessToken=${U.o.token.accessToken}`,n=this.elementRef.nativeElement,i=this.renderer.createElement("a");this.toastService.showToast({icon:"download",text:this.translatePipe.transform("DOWNLOADING_LOG_FILE")}),this.renderer.appendChild(n,i),i.href=e,i.click(),this.renderer.removeChild(n,i),i.remove&&i.remove()}checkedStatusChange(t){this.formGroup.controls.checkedIds.setValue(t)}onDeleteButtonClick(){this.adminDialogService.toggleDialogVisibility(c.c.DELETE_ITEMS,!0,{description:"",size:{width:336,height:280},data:this.formGroup.controls.checkedIds.value.map(t=>this.table.getData().find(e=>e.id===t)),caller:c.d.LOG})}getTemplates(t,e,n,i){this.formGroup.reset(),this.isLoading=!0,this.logDataService.getLogList({pageIndex:this.table.getPageInfo().currentIndex,listingCount:15,search:t,startDate:e?Object(U.H)(e.startDate):void 0,endDate:e?Object(U.H)(e.endDate):void 0,orderBy:n,ascending:i}).subscribe({next:t=>{this.isLoading=!1,this.table.setPageInfo(t.pageInfo.totalCount,t.pageInfo.listingCount),this.table.setData(t.resources),this.changeDetectorRef.markForCheck()}})}sortingChanges(t){this.orderBy=0===t.value?void 0:t.name,this.asc=0===t.value?void 0:1===t.value,this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}onPageChanging(t){this.table.setPageCurrentIndex(t-1),this.getTemplates(this.table.getKeyword(),this.table.getPeriodValue(),this.orderBy,this.asc)}initFields(){this.filterMenus[0].label=this.translatePipe.transform("PERIOD"),this.filterMenus[1].label=this.translatePipe.transform("MANUAL_SELECT"),this.filterMenus[1].item[0].label=this.translatePipe.transform("MANUAL_SELECT"),this.changeDetectorRef.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(l.h),l.Mb(r.g),l.Mb(s.G),l.Mb(fn),l.Mb($.c),l.Mb(w.d),l.Mb(l.l),l.Mb(l.E),l.Mb(c.b))},t.\u0275cmp=l.Gb({type:t,selectors:[["sd-document-list"]],features:[l.yb([s.G])],decls:23,vars:28,consts:[[3,"isLoading"],[1,"form-list-header",3,"formGroup"],[1,"tools"],["size","small","color","grey",1,"ep-button",3,"disabled","click"],[1,"papycon","papycon-minus2"],["formControlName","filter",1,"small",3,"filterMenus","datePickerDirection"],[1,"right-side"],[3,"formGroup"],[3,"data","displayedColumns","currentPageIndex","emptyEl","checkedStatusChange","sortingChange"],[4,"eTableCell","eTableCellFor"],[3,"last","sideButtonCount","page","prevLabel","nextLabel","pageChange"],["emptyEl",""],["size","tiny","color","white",1,"ep-button",3,"click"],[1,"papycon","papycon-download"],[1,"empty"],[1,"notifier"],[1,"papycon","papycon-formtools"],[1,"title"]],template:function(t,e){if(1&t&&(l.Sb(0,"h1"),l.Fc(1),l.ec(2,"translate"),l.Rb(),l.Sb(3,"sd-card",0),l.Sb(4,"header",1),l.Sb(5,"div",2),l.Sb(6,"button",3),l.Zb("click",(function(){return e.onDeleteButtonClick()})),l.Nb(7,"i",4),l.Fc(8),l.ec(9,"translate"),l.Rb(),l.Nb(10,"sd-filter-pop-up",5),l.Rb(),l.Nb(11,"div",6),l.Rb(),l.Qb(12,7),l.Sb(13,"e-table",8),l.Zb("checkedStatusChange",(function(t){return e.checkedStatusChange(t)}))("sortingChange",(function(t){return e.sortingChanges(t)})),l.Dc(14,yn,2,1,"div",9),l.Dc(15,vn,3,3,"div",9),l.Dc(16,Sn,5,3,"div",9),l.Rb(),l.Pb(),l.Sb(17,"footer"),l.Sb(18,"sd-pagination",10),l.Zb("pageChange",(function(t){return e.onPageChanging(t)})),l.ec(19,"translate"),l.ec(20,"translate"),l.Rb(),l.Rb(),l.Rb(),l.Dc(21,Dn,6,3,"ng-template",null,11,l.Ec)),2&t){const t=l.tc(22);l.zb(1),l.Gc(l.fc(2,20,"LOG_MANAGEMENT")),l.zb(2),l.jc("isLoading",e.isLoading),l.zb(1),l.jc("formGroup",e.table.filterGroup),l.zb(2),l.jc("disabled",!(null!=e.formGroup.controls.checkedIds.value&&e.formGroup.controls.checkedIds.value.length)),l.zb(2),l.Gc(l.fc(9,22,"DELETE")),l.zb(2),l.jc("filterMenus",e.filterMenus)("datePickerDirection","right"),l.zb(2),l.jc("formGroup",e.formGroup),l.zb(1),l.jc("data",e.table.getData())("displayedColumns",e.displayedColumns)("currentPageIndex",e.currentPageIndex)("emptyEl",t),l.zb(1),l.jc("eTableCellFor","name"),l.zb(1),l.jc("eTableCellFor","size"),l.zb(1),l.jc("eTableCellFor","download"),l.zb(2),l.jc("last",e.table.getPageInfo().allPageCount)("sideButtonCount",1)("page",e.table.getPageInfo().currentIndex+1)("prevLabel",l.fc(19,24,"PREVIOUS"))("nextLabel",l.fc(20,26,"NEXT"))}},styles:[".split[_ngcontent-%COMP%]{width:1px;height:20px;background:#c8c8c8}span.basic[_ngcontent-%COMP%]{background-color:#035668}span.basic[_ngcontent-%COMP%], span.premium[_ngcontent-%COMP%]{border-radius:4px;padding:2px 16px;color:#fff}span.premium[_ngcontent-%COMP%]{background-color:#0cbc82}span.undefined[_ngcontent-%COMP%]{border-radius:4px;background-color:#6c6c6c;padding:2px 16px;color:#fff}sd-loading-toast[_ngcontent-%COMP%]{position:unset;top:0;left:0}header.dialog[_ngcontent-%COMP%]{margin:40px 0 0;font-size:16px;line-height:26px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e}header.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif;font-weight:400;margin:0}h1.regular[_ngcontent-%COMP%], h2.regular[_ngcontent-%COMP%], h3.regular[_ngcontent-%COMP%], h4.regular[_ngcontent-%COMP%], h5.regular[_ngcontent-%COMP%]{font-family:inherit}h1.light[_ngcontent-%COMP%], h2.light[_ngcontent-%COMP%], h3.light[_ngcontent-%COMP%], h4.light[_ngcontent-%COMP%], h5.light[_ngcontent-%COMP%]{color:#6c6c6c}.ellipsis[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}h1[_ngcontent-%COMP%]{font-size:20px;line-height:28px}h2[_ngcontent-%COMP%]{font-size:16px;line-height:26px}h3[_ngcontent-%COMP%]{font-size:14px;line-height:24px}h4[_ngcontent-%COMP%]{font-size:13px;line-height:22px}h5[_ngcontent-%COMP%]{font-size:12px;line-height:20px}.papycon[_ngcontent-%COMP%], pu-icon[_ngcontent-%COMP%]{text-align:center}.papycon.bt[_ngcontent-%COMP%], pu-icon.bt[_ngcontent-%COMP%]{cursor:pointer}.dialog__header[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%], .dialog__header[_ngcontent-%COMP%]   pu-icon[_ngcontent-%COMP%]{-ms-flex-item-align:start;align-self:flex-start}textarea[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Regular,sans-serif;border:1px solid #dadada;border-radius:2px;height:62px;resize:none;-webkit-box-sizing:border-box;box-sizing:border-box;padding:3px}textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#f79f1a}textarea[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#6c6c6c;opacity:.7}textarea[_ngcontent-%COMP%]::-moz-placeholder{color:#6c6c6c;opacity:.7}textarea[_ngcontent-%COMP%]:-ms-input-placeholder{color:#6c6c6c;opacity:.7}textarea[_ngcontent-%COMP%]::-ms-input-placeholder{color:#6c6c6c;opacity:.7}textarea[_ngcontent-%COMP%]::placeholder{color:#6c6c6c;opacity:.7}textarea.fit[_ngcontent-%COMP%]{width:100%}pu-checkbox.custom[_ngcontent-%COMP%]{line-height:1!important;padding:3px 10px}pu-checkbox.box[_ngcontent-%COMP%]{font-size:20px;border:1px solid #dadada;background-color:#fff;border-radius:2px}pu-checkbox[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{vertical-align:initial}pu-toggle-button[_ngcontent-%COMP%]  input[type]{border:unset}.table[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .center[_ngcontent-%COMP%]{text-align:center}.table[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{text-align:right}.table[_ngcontent-%COMP%]   .thead[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .thead[_ngcontent-%COMP%]{font-size:13px;line-height:22px;color:#6c6c6c;font-family:NotoSans-Medium,sans-serif;min-height:44px;border-bottom:1px solid #dadada;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.table[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .tbody[_ngcontent-%COMP%]{margin:0;padding:0}.table[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{height:40px;background:#fff;border-radius:6px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.table[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:hover, .table[_nghost-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:hover{background-color:hsla(0,0%,85.5%,.1)}.table[_ngcontent-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr.selected[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .tbody[_ngcontent-%COMP%]   .tr.selected[_ngcontent-%COMP%]{border-color:#f79f1a;background-color:rgba(255,248,237,.9)}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]{margin:auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;color:#6c6c6c}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   .head.papycon[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]   .head.papycon[_ngcontent-%COMP%]{margin:0 auto 12px;font-size:40px;line-height:40px;width:40px}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]:not(.papycon), .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]:not(.papycon){font-size:16px;line-height:26px;color:#1e1e1e}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   .medium[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]   .medium[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif}.table[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   .dashed-hr[_ngcontent-%COMP%], .table[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]   .dashed-hr[_ngcontent-%COMP%]{height:2px;width:170px;margin:11px auto;background:linear-gradient(90deg,#979797,#979797 4px,transparent 0,transparent 6px) 0/6px}.empty[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1;flex:1;height:100%;flex-direction:column}.empty[_ngcontent-%COMP%], .empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.empty[_ngcontent-%COMP%]   .notifier[_ngcontent-%COMP%]{flex-direction:column;width:170px;height:160px}.empty[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{color:#6c6c6c;font-size:22px;margin:0 auto 12px}.empty[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-family:NotoSans-Regular}.empty[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:14px;font-weight:400;text-align:center;font-family:NotoSans-Regular;padding-top:12px}.empty[_ngcontent-%COMP%]   .dashed[_ngcontent-%COMP%]{width:170px;height:2px;border-bottom:2px dashed #979797}.notifier[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}[_nghost-%COMP%]:not(.loading){position:relative;width:100%;min-width:1120px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column;flex-flow:column;font-family:NotoSans-Regular,sans-serif}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]{background:#f2f2f2}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .light[_ngcontent-%COMP%]{color:#6c6c6c}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]{margin-top:14px;display:-webkit-box;display:-ms-flexbox;display:flex}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:12px}[_nghost-%COMP%]:not(.loading) > header[_ngcontent-%COMP%]   .tool[_ngcontent-%COMP%]   .push[_ngcontent-%COMP%]{margin-left:auto}sd-card[_ngcontent-%COMP%]{padding:30px 24px 37px}.form-list-header[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.form-list-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:6px;font-size:18px}.form-list-header[_ngcontent-%COMP%]   sd-filter-pop-up[_ngcontent-%COMP%]{margin-left:12px}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   pu-input[_ngcontent-%COMP%]{width:307px}.form-list-header[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   pu-input.custom[_ngcontent-%COMP%]{margin-left:12px}.form-list-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;line-height:20px;font-family:NotoSans-Medium,sans-serif;color:#6c6c6c;border-radius:12px;border:1.2px solid #c8c8c8;padding:3px 12px;margin-left:8px}e-table[_ngcontent-%COMP%]{margin-top:20px;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;overflow:auto}e-table[_ngcontent-%COMP%]     .column, e-table[_ngcontent-%COMP%]     td{-webkit-box-flex:1;-ms-flex:1;flex:1}e-table[_ngcontent-%COMP%]     td.download{-webkit-box-flex:0;-ms-flex:0 1 97px;flex:0 1 97px;margin-right:15px}e-table[_ngcontent-%COMP%]     td.name, e-table[_ngcontent-%COMP%]     th.name{font-size:14px;display:-webkit-box;display:-ms-flexbox;display:flex;white-space:nowrap;overflow:hidden}e-table[_ngcontent-%COMP%]     td.name>div, e-table[_ngcontent-%COMP%]     th.name>div{width:100%}e-table[_ngcontent-%COMP%]     .size{font-size:14px}e-table[_ngcontent-%COMP%]     .download{-webkit-box-flex:0;-ms-flex:0 1 97px;flex:0 1 97px;margin-right:15px}e-table[_ngcontent-%COMP%]     .download button i{margin-right:6px}footer[_ngcontent-%COMP%]{height:95px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}footer[_ngcontent-%COMP%]   sd-pagination[_ngcontent-%COMP%]{margin-top:38px}span.primary[_ngcontent-%COMP%]{color:#ff6100;text-decoration:underline}"],changeDetection:0}),t})();class wn{constructor(){this._usage=0,this._total=0}get usage(){return this._usage}set usage(t){this._usage=parseFloat(t.toFixed(2))}get total(){return this._total}set total(t){this._total=parseFloat(t.toFixed(2))}getUsagePercent(){return parseFloat((this.usage/this.total*100).toFixed(2))}getUnusedPercent(){return parseFloat(((this.total-this.usage)/this.total*100).toFixed(2))}}let En=(()=>{class t{constructor(t,e,n,i,o){this.subs=t,this.changeDetectorRef=e,this.statisticDataService=n,this.translatePipe=i,this.bytesPipe=o,this.cpuUsage=new wn,this.memoryUsage=new wn,this.storageUsage=new wn,this.cpuCore="-",this.chartResponsive=!1,this.chartLegend={display:!1},this.chartTooltips={xPadding:16,yPadding:14,bodySpacing:8,callbacks:{label:this.appendPercentageToTooltip}},this.chartType="pie",this.cpuChartLabels=[],this.cpuChartData=[0,0],this.memoryChartData=[0,0],this.memoryChartLabels=[],this.memoryChartColor=[{backgroundColor:["#FF6100","#DADADA"]}],this.memoryChartTooltips={xPadding:16,yPadding:14,bodySpacing:8,callbacks:{label:(t,e)=>this.appendDataToTooltip(t,e,this.memoryUsage)}},this.storageChartLabels=[],this.storageChartData=[0,0],this.storageChartColor=[{backgroundColor:["#0C7489","#DADADA"]}],this.storageChartTooltips={xPadding:16,yPadding:14,bodySpacing:8,callbacks:{label:(t,e)=>this.appendDataToTooltip(t,e,this.storageUsage)}}}ngOnInit(){this.initFields()}ngAfterViewInit(){this.extractCapacityInfoList()}extractCapacityInfoList(){this.subs.set("fetchServerSummary",Ft.a(5e3).pipe(Ut.a(0)).subscribe({next:()=>{this.statisticDataService.getServerSummaryList().subscribe({next:t=>{this.setCpuData(t),this.setMemoryData(t),this.setStorageData(t),this.changeDetectorRef.markForCheck()}})}}))}setCpuData(t){this.cpuUsage.total=100,this.cpuUsage.usage=100*parseFloat(parseFloat(t.cpuUsage).toFixed(2)),this.cpuCore=t.cpuTotalCores,this.cpuChartData[0]=this.cpuUsage.usage,this.cpuChartData[1]=this.cpuUsage.total-this.cpuUsage.usage,this.charts.toArray()[0].update()}setMemoryData(t){this.memoryUsage.total=parseFloat(parseFloat(t.memTotal).toFixed(2)),this.memoryUsage.usage=this.memoryUsage.total*parseFloat(t.memUsage),this.memoryChartData[0]=this.memoryUsage.getUsagePercent(),this.memoryChartData[1]=this.memoryUsage.getUnusedPercent(),this.charts.toArray()[1].update()}setStorageData(t){this.storageUsage.total=1e3*parseFloat(t.diskTotal)*1e3*1e3,this.storageUsage.usage=this.storageUsage.total*parseFloat(t.diskUsage),this.storageChartData[0]=this.storageUsage.getUsagePercent(),this.storageChartData[1]=this.storageUsage.getUnusedPercent(),this.charts.toArray()[2].update()}initFields(){this.cpuChartLabels=[this.translatePipe.transform("USAGE"),this.translatePipe.transform("NOT_USED")],this.memoryChartLabels=[this.translatePipe.transform("USAGE"),this.translatePipe.transform("NOT_USED")],this.storageChartLabels=[this.translatePipe.transform("USAGE"),this.translatePipe.transform("NOT_USED")],this.changeDetectorRef.markForCheck()}appendPercentageToTooltip(t,e){return`${e.labels[t.index]}: ${e.datasets[t.datasetIndex].data[t.index]}%`}appendDataToTooltip(t,e,n){const i=e.labels[t.index],o=e.datasets[t.datasetIndex].data[t.index],a=n.usage,s=n.total-n.usage;return i===this.translatePipe.transform("NOT_USED")?`${i}: ${this.bytesPipe.transform(s)} (${o}%)`:`${i}: ${this.bytesPipe.transform(a)} (${o}%)`}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(s.G),l.Mb(l.h),l.Mb(Yt),l.Mb(w.d),l.Mb(at.a))},t.\u0275cmp=l.Gb({type:t,selectors:[["sd-server-capacity"]],viewQuery:function(t,e){var n;1&t&&l.Lc(Jt.a,!0),2&t&&l.sc(n=l.ac())&&(e.charts=n)},features:[l.yb([s.G,at.a])],decls:59,vars:73,consts:[[1,"card-container"],[3,"title"],[3,"visibleBackground","data","labels","responsive","legend","type","tooltips"],[1,"data"],[1,"highlight"],[1,"split"],[3,"visibleBackground","data","labels","responsive","legend","type","color","tooltips"]],template:function(t,e){1&t&&(l.Sb(0,"div",0),l.Sb(1,"sd-card",1),l.ec(2,"translate"),l.Nb(3,"sd-chart",2),l.Sb(4,"article"),l.Sb(5,"div",3),l.Sb(6,"span",4),l.Fc(7),l.ec(8,"number"),l.Rb(),l.Sb(9,"p"),l.Fc(10),l.ec(11,"translate"),l.ec(12,"number"),l.Rb(),l.Rb(),l.Nb(13,"div",5),l.Sb(14,"div",3),l.Sb(15,"span"),l.Fc(16),l.Rb(),l.Sb(17,"p"),l.Fc(18),l.ec(19,"translate"),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(20,"sd-card",1),l.ec(21,"translate"),l.Nb(22,"sd-chart",6),l.Sb(23,"article"),l.Sb(24,"div",3),l.Sb(25,"span",4),l.Fc(26),l.ec(27,"bytes"),l.Rb(),l.Sb(28,"p"),l.Fc(29),l.ec(30,"translate"),l.ec(31,"number"),l.Rb(),l.Rb(),l.Nb(32,"div",5),l.Sb(33,"div",3),l.Sb(34,"span"),l.Fc(35),l.ec(36,"bytes"),l.Rb(),l.Sb(37,"p"),l.Fc(38),l.ec(39,"translate"),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(40,"sd-card",1),l.ec(41,"translate"),l.Nb(42,"sd-chart",6),l.Sb(43,"article"),l.Sb(44,"div",3),l.Sb(45,"span",4),l.Fc(46),l.ec(47,"bytes"),l.Rb(),l.Sb(48,"p"),l.Fc(49),l.ec(50,"translate"),l.Rb(),l.Rb(),l.Nb(51,"div",5),l.Sb(52,"div",3),l.Sb(53,"span"),l.Fc(54),l.ec(55,"bytes"),l.Rb(),l.Sb(56,"p"),l.Fc(57),l.ec(58,"translate"),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb()),2&t&&(l.zb(1),l.jc("title",l.fc(2,41,"CPU_USAGE")),l.zb(2),l.jc("visibleBackground",!0)("data",e.cpuChartData)("labels",e.cpuChartLabels)("responsive",e.chartResponsive)("legend",e.chartLegend)("type",e.chartType)("tooltips",e.chartTooltips),l.zb(4),l.Hc("",l.fc(8,43,e.cpuUsage.usage),"%"),l.zb(3),l.Ic("",l.fc(11,45,"USAGE")," : ",l.fc(12,47,e.cpuUsage.usage),"%"),l.zb(6),l.Hc("",e.cpuCore," Core"),l.zb(2),l.Gc(l.fc(19,49,"TOTAL_CORE")),l.zb(2),l.jc("title",l.fc(21,51,"MEMORY_USAGE")),l.zb(2),l.jc("visibleBackground",!0)("data",e.memoryChartData)("labels",e.memoryChartLabels)("responsive",e.chartResponsive)("legend",e.chartLegend)("type",e.chartType)("color",e.memoryChartColor)("tooltips",e.memoryChartTooltips),l.zb(4),l.Gc(l.fc(27,53,e.memoryUsage.usage)),l.zb(3),l.Ic("",l.fc(30,55,"USAGE")," : ",l.fc(31,57,e.memoryUsage.getUsagePercent()),"%"),l.zb(6),l.Gc(l.fc(36,59,e.memoryUsage.total)),l.zb(3),l.Gc(l.fc(39,61,"TOTAL_MEMORY")),l.zb(2),l.jc("title",l.fc(41,63,"STORAGE")),l.zb(2),l.jc("visibleBackground",!0)("data",e.storageChartData)("labels",e.storageChartLabels)("responsive",e.chartResponsive)("legend",e.chartLegend)("type",e.chartType)("color",e.storageChartColor)("tooltips",e.storageChartTooltips),l.zb(4),l.Gc(l.fc(47,65,e.storageUsage.usage)),l.zb(3),l.Ic("",l.fc(50,67,"USAGE")," : ",e.storageUsage.getUsagePercent(),"%"),l.zb(5),l.Gc(l.fc(55,69,e.storageUsage.total)),l.zb(3),l.Gc(l.fc(58,71,"TOTAL_DISK")))},styles:[".card-container[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;height:437px}sd-card[_ngcontent-%COMP%]   sd-chart[_ngcontent-%COMP%]{padding:30px 0}article[_ngcontent-%COMP%], sd-card[_ngcontent-%COMP%]   sd-chart[_ngcontent-%COMP%]{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}article[_ngcontent-%COMP%], article[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%], sd-card[_ngcontent-%COMP%]   sd-chart[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}article[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center}article[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:NotoSans-Regular,sans-serif;color:#6c6c6c;font-size:13px;line-height:normal;letter-spacing:-.5px;margin-top:6px}article[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:NotoSans-Bold,sans-serif;color:#6c6c6c;height:20px;font-size:20px;line-height:20px}article[_ngcontent-%COMP%]   span.highlight[_ngcontent-%COMP%]{color:#ff6100}.split[_ngcontent-%COMP%]{width:1px;height:20px;margin:0 35px;background-color:#c8c8c8}"],changeDetection:0}),t})(),Tn=(()=>{class t{constructor(t,e,n,i){this.changeDetectorRef=t,this.subs=e,this.statisticDataService=n,this.translatePipe=i,this.chartDataSets=[{data:[],label:"",fill:"#ffffff"},{data:[],label:"",fill:"#ffffff"},{data:[],label:"",fill:"#ffffff"}],this.chartLabels=[],this.chartMaintainAspectRatio=!1,this.chartResponsive=!0,this.chartElements={line:{tension:0,fill:!1}},this.chartLegend={display:!1},this.chartScales={xAxes:[{ticks:{callback:(t,e,n)=>{let i;const[o,a,s]=t.split(" "),r=0===e||e===n.length-1;return i=this.chartDateType===U.j.YEAR?`${r?o:""} ${a}`:`${r?a:""} ${s}`,i}}}],yAxes:[{ticks:{beginAtZero:!1,min:0,stepSize:20,callback:t=>0===t?t+"\uac74":t}}]},this.chartTooltips={mode:"index",intersect:!1,xPadding:16,yPadding:14,bodySpacing:8,callbacks:{labelColor:t=>({backgroundColor:this.chartColor[t.datasetIndex].borderColor}),title:()=>null}},this.chartColor=[{borderColor:"#f79f1a",backgroundColor:"#ffffff"},{borderColor:"#ff6600",backgroundColor:"#ffffff"},{borderColor:"#0C7489",backgroundColor:"#ffffff"}],this.chartType="line",this.chartDateType=U.j.WEEK,this.chartDate={startDate:new Date,endDate:new Date}}ngOnInit(){this.changeDateType(this.chartDateType),this.initFields()}changeDateType(t){let e;this.chartDateType=t,this.chartDateType===U.j.CUSTOM&&(e=this.chartDate.endDate),this.dateInfo=Object(U.I)(t,this.chartDate.startDate,e),this.getAccessorChart(t,this.dateInfo)}changeDate(t){this.chartDate.startDate=t.startDate,this.chartDate.endDate=t.endDate,this.changeDateType(U.j.CUSTOM)}getAccessorChart(t,e){let n;n=t!==U.j.YEAR?$t.DAILY:$t.MONTHLY,this.subs.push(this.statisticDataService.getSystemUsage(null==e?void 0:e.startDate.getTime(),null==e?void 0:e.endDate.getTime(),n).subscribe({next:t=>{this.initChartDate(),this.chartLabels=[],this.chartDataSets[0].data=[],this.chartDataSets[1].data=[],this.chartDataSets[2].data=[],t.forEach(t=>{const e=`${this.makeTwoDigits(t.year)}${this.translatePipe.transform("YEAR")}`,n=`${this.makeTwoDigits(t.month)}${this.translatePipe.transform("MONTH")}`,i=`${this.makeTwoDigits(t.date)}${this.translatePipe.transform("DAYS")}`;this.chartLabels.push(`${e} ${n} ${i}`),this.chartDataSets[0].data.push(parseInt(t.cpuUsage)),this.chartDataSets[1].data.push(parseInt(t.ramUsage)),this.chartDataSets[2].data.push(parseInt(t.storageUsage))}),this.changeDetectorRef.markForCheck()}}))}initChartDate(){this.chartDate.startDate=new Date,this.chartDate.endDate=new Date}makeTwoDigits(t){return("0"+t).slice(-2)}initFields(){this.chartDataSets[0].label=this.translatePipe.transform("CPU_USAGE"),this.chartDataSets[1].label=this.translatePipe.transform("MEMORY_USAGE"),this.chartDataSets[2].label=this.translatePipe.transform("STORAGE_USAGE"),this.changeDetectorRef.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(l.h),l.Mb(s.G),l.Mb(Yt),l.Mb(w.d))},t.\u0275cmp=l.Gb({type:t,selectors:[["sd-server-monitoring"]],features:[l.yb([s.G])],decls:7,vars:18,consts:[[3,"type","title","chartDataSets","chartLabels","chartMaintainAspectRatio","chartResponsive","chartElements","chartLegend","chartScales","chartTooltips","chartColor","chartType","legendDate","dateTypeChange","customDateChange"]],template:function(t,e){1&t&&(l.Sb(0,"h1"),l.Fc(1),l.ec(2,"translate"),l.Rb(),l.Sb(3,"sd-card"),l.Nb(4,"sd-server-capacity"),l.Sb(5,"sd-statistic-card",0),l.Zb("dateTypeChange",(function(t){return e.changeDateType(t)}))("customDateChange",(function(t){return e.changeDate(t)})),l.ec(6,"translate"),l.Rb(),l.Rb()),2&t&&(l.zb(1),l.Gc(l.fc(2,14,"SERVER_MONITORING")),l.zb(4),l.jc("type","monitor")("title",l.fc(6,16,"HOURLY_USAGE"))("chartDataSets",e.chartDataSets)("chartLabels",e.chartLabels)("chartMaintainAspectRatio",e.chartMaintainAspectRatio)("chartResponsive",e.chartResponsive)("chartElements",e.chartElements)("chartLegend",e.chartLegend)("chartScales",e.chartScales)("chartTooltips",e.chartTooltips)("chartColor",e.chartColor)("chartType",e.chartType)("legendDate",e.dateInfo))},styles:["[_nghost-%COMP%]{min-width:1120px}.card-container[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.split[_ngcontent-%COMP%]{margin:5px 25px 0}sd-card[_ngcontent-%COMP%]{padding:0}sd-card[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]{margin:20px 0 40px;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}sd-card[_ngcontent-%COMP%]   article[_ngcontent-%COMP%], sd-card[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}sd-card[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center}sd-card[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c6c6c;font-size:13px;line-height:22px}sd-card[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;line-height:28px;font-family:NotoSans-Bold,sans-serif;color:#6c6c6c}sd-card[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   span.highlight[_ngcontent-%COMP%]{color:#ff6100}sd-server-capacity[_ngcontent-%COMP%]{margin:20px 0}sd-statistic-card[_ngcontent-%COMP%]    >sd-card{padding:30px 24px}"]}),t})();var In=n("7HRe"),Rn=n("LRne");let Nn=1;const An=(()=>Promise.resolve())(),zn={};function Ln(t){return t in zn&&(delete zn[t],!0)}const Fn={setImmediate(t){const e=Nn++;return zn[e]=!0,An.then(()=>Ln(e)&&t()),e},clearImmediate(t){Ln(t)}};var Gn=n("3N8a");class Un extends Gn.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=Fn.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(Fn.clearImmediate(e),t.scheduled=void 0)}}var jn=n("IjjT");class $n extends jn.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,i=-1,o=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++i<o&&(t=e.shift()));if(this.active=!1,n){for(;++i<o&&(t=e.shift());)t.unsubscribe();throw n}}}const Hn=new $n(Un);var Vn=n("0EUg");let Bn=(()=>{class t{constructor(t,e){this.baseHref=t,this.httpClient=e}getRemovedTempFileStatus(){return this.httpClient.get(this.baseHref+"v4/remove")}deleteTempFileRemove(t,e){return this.httpClient.request("delete",this.baseHref+"v4/remove",{body:e,params:t,observe:"body",responseType:"arraybuffer"})}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(i.a),l.Wb(o.b))},t.\u0275prov=l.Ib({token:t,factory:t.\u0275fac}),t})();function Wn(t,e){if(1&t&&(l.Sb(0,"div",13),l.Sb(1,"div",14),l.Fc(2),l.ec(3,"translate"),l.Rb(),l.Rb()),2&t){const t=l.dc();l.Eb("expanded-content",t.warningPhrase.formGroup.controls.expanded.value),l.jc("@children",t.warningPhrase.formGroup.controls.expanded.value?"expanded":"folded"),l.zb(2),l.Gc(l.fc(3,4,t.warningPhrase.description))}}function Yn(t,e){if(1&t){const t=l.Tb();l.Sb(0,"sd-date-picker",29),l.Zb("dateSelect",(function(e){return l.uc(t),l.dc(4).dateSelect(e)})),l.Rb()}if(2&t){const t=l.dc(4);l.jc("size",t.DatePickerSize.TINY)("autoClosing",!0)}}function Kn(t,e){if(1&t){const t=l.Tb();l.Sb(0,"div",22),l.Nb(1,"pu-checkbox",23),l.ec(2,"translate"),l.Qb(3),l.Sb(4,"div",24),l.Zb("click",(function(){return l.uc(t),l.dc(3).onDateInputClick()})),l.Sb(5,"span",25),l.Fc(6),l.Rb(),l.Rb(),l.Dc(7,Yn,1,2,"sd-date-picker",26),l.Sb(8,"div",27),l.Zb("click",(function(){return l.uc(t),l.dc(3).onDateInputClick()})),l.Nb(9,"i",28),l.Rb(),l.Pb(),l.Rb()}if(2&t){const t=l.dc(2).$implicit,e=l.dc();l.zb(1),l.jc("label",l.fc(2,7,"DELETE_DOCUMENT_BEFORE_SET_DATE")),l.zb(3),l.Eb("disabled",!t.formGroup.value.checked||!t.formGroup.value.isOption),l.zb(2),l.Gc(e.dateInputText),l.zb(1),l.jc("ngIf",e.isDatePickerVisible),l.zb(1),l.Eb("disabled",!t.formGroup.value.checked||!t.formGroup.value.isOption)}}function Zn(t,e){if(1&t&&(l.Sb(0,"div",20),l.Sb(1,"div",14),l.Fc(2),l.ec(3,"translate"),l.Rb(),l.Dc(4,Kn,10,9,"div",21),l.Rb()),2&t){const t=l.dc().$implicit,e=l.dc();l.Eb("expanded-content",t.formGroup.controls.expanded.value),l.jc("@children",t.formGroup.controls.expanded.value?"expanded":"folded"),l.zb(1),l.Eb("content-padding",t.type!==e.TempFileType.DELETED_PDF),l.zb(1),l.Gc(l.fc(3,7,t.description)),l.zb(2),l.jc("ngIf",t.type===e.TempFileType.DELETED_PDF)}}function qn(t,e){if(1&t){const t=l.Tb();l.Sb(0,"article",15),l.Qb(1,2),l.Sb(2,"div",16),l.Nb(3,"pu-checkbox",17),l.Sb(4,"div",18),l.Zb("click",(function(){l.uc(t);const n=e.$implicit;return l.dc().onMenuClick(n)})),l.Sb(5,"span"),l.Fc(6),l.ec(7,"translate"),l.Rb(),l.Nb(8,"i",5),l.Rb(),l.Rb(),l.Dc(9,Zn,5,9,"div",19),l.Pb(),l.Rb()}if(2&t){const t=e.$implicit;l.zb(1),l.jc("formGroup",t.formGroup),l.zb(1),l.Eb("expanded-header",t.formGroup.controls.expanded.value),l.zb(1),l.jc("size","24px"),l.zb(3),l.Gc(l.fc(7,7,t.title)),l.zb(2),l.jc("@chevron",t.formGroup.controls.expanded.value),l.zb(1),l.jc("ngIf",t.formGroup.controls.expanded.value)}}var Jn=function(t){return t.SYSTEM_MANAGEMENT_WARNING_PHRASE="SYSTEM_MANAGEMENT_WARNING_PHRASE",t}({}),Qn=function(t){return t.CACHE="CACHE",t.EXPIRED_PDF="EXPIRED_PDF",t.TEMPORARY="TEMPORARY",t.DELETED_PDF="DELETED_PDF",t.ORPHAN="ORPHAN",t.SIGN_CACHE="SIGN_CACHE",t.UNASSOCIATED="UNASSOCIATED",t}({}),Xn=function(t){return t.NONE="NONE",t.AWAITING="AWAITING",t.PROGRESSING="PROGRESSING",t.SUCCESS="SUCCESS",t.FAILURE="FAILURE",t}({});let ti=(()=>{class t{constructor(t,e,n,i,o,a){this.translatePipe=t,this.datePickerService=e,this.systemManagementService=n,this.changeDetectorRef=i,this.toastService=o,this.subs=a,this.warningPhrase={title:"SYSTEM_MANAGEMENT_WARNING_PHRASE",description:"SYSTEM_MANAGEMENT_WARNING_PHRASE_DESCRIPTION",formGroup:this.buildMenuControls(Jn.SYSTEM_MANAGEMENT_WARNING_PHRASE)},this.tempFileMenus=[{type:Qn.CACHE,title:"CACHE",description:"SYSTEM_MANAGEMENT_CACHE_DESCRIPTION",formGroup:this.buildMenuControls(Qn.CACHE)},{type:Qn.EXPIRED_PDF,title:"EXPIRED_DOCUMENT",description:"SYSTEM_MANAGEMENT_EXPIRED_DOCUMENT_DESCRIPTION",formGroup:this.buildMenuControls(Qn.EXPIRED_PDF)},{type:Qn.TEMPORARY,title:"TEMPORARY_DOCUMENT",description:"SYSTEM_MANAGEMENT_TEMPORARY_DOCUMENT_DESCRIPTION",formGroup:this.buildMenuControls(Qn.TEMPORARY)},{type:Qn.DELETED_PDF,title:"DELETED_DOCUMENT",description:"SYSTEM_MANAGEMENT_DELETED_DOCUMENT_DESCRIPTION",formGroup:this.buildMenuControls(Qn.DELETED_PDF)},{type:Qn.ORPHAN,title:"PREVIOUS_VERSION_FILE",description:"SYSTEM_MANAGEMENT_PREVIOUS_VERSION_FILE_DESCRIPTION",formGroup:this.buildMenuControls(Qn.ORPHAN)},{type:Qn.SIGN_CACHE,title:"SIGN_CACHE",description:"SYSTEM_MANAGEMENT_SIGN_CACHE_DESCRIPTION",formGroup:this.buildMenuControls(Qn.SIGN_CACHE)},{type:Qn.UNASSOCIATED,title:"UNASSOCIATED_FILE",description:"SYSTEM_MANAGEMENT_UNASSOCIATED_FILE_DESCRIPTION",formGroup:this.buildMenuControls(Qn.UNASSOCIATED)}],this.isDatePickerVisible=!1}get TempFileType(){return Qn}get DatePickerSize(){return U.i}get dateInputText(){return Object(U.H)(new Date(this.getControl(Qn.DELETED_PDF,"date").value.value.type))}get hasSelectedMenu(){return this.tempFileMenus.some(t=>t.formGroup.get("checked").value)}get isSelectedAll(){return this.tempFileMenus.every(t=>t.formGroup.get("checked").value)}ngOnInit(){this.subs.push(this.datePickerService.status$.pipe(L.a(t=>!t.isVisible)).subscribe({next:()=>{this.isDatePickerVisible=!1}}),this.systemManagementService.getRemovedTempFileStatus().subscribe({next:t=>this.updateTempFileStatus(t)}),this.getControl(Qn.DELETED_PDF,"checked").valueChanges.subscribe({next:t=>{t?this.getControl(Qn.DELETED_PDF,"isOption").enable():this.getControl(Qn.DELETED_PDF,"isOption").disable()}}),this.getControl(Qn.DELETED_PDF,"isOption").valueChanges.subscribe({next:t=>{t?this.getControl(Qn.DELETED_PDF,"date").enable():this.getControl(Qn.DELETED_PDF,"date").disable()}}))}getControl(t,e){return this.tempFileMenus.find(e=>e.type===t).formGroup.get(e)}selectAll(){this.tempFileMenus.forEach(t=>t.formGroup.get("checked").setValue(!0))}deselectAll(){this.tempFileMenus.forEach(t=>t.formGroup.get("checked").setValue(!1))}removeTempFile(){this.subs.push(In.a([...this.tempFileMenus.map(t=>{if(!t.formGroup.get("checked").value)return Rn.a();const e={type:t.type},n={timestamp:""};if(t.type===Qn.DELETED_PDF&&t.formGroup.get("isOption").value){const t=this.getControl(Qn.DELETED_PDF,"date").value.value.type;return n.timestamp=new Date(t).setHours(0,0,0,0).toString(),this.systemManagementService.deleteTempFileRemove(e,n)}return this.systemManagementService.deleteTempFileRemove(e)}),this.systemManagementService.getRemovedTempFileStatus()],Hn).pipe(Vn.a(),L.a(t=>!(t instanceof ArrayBuffer))).subscribe({next:t=>{this.updateTempFileStatus(t),this.toastService.showToast({icon:"success",text:"DELETE_REQUEST_SEND"})},error:()=>{this.toastService.showToast({icon:"failed",text:this.translatePipe.transform("DELETE_REQUEST_SEND_ERROR")})}}))}onMenuClick(t){const e=t.formGroup.get("expanded");e.setValue(!e.value)}onDateInputClick(){!this.isDatePickerVisible&&this.getControl(Qn.DELETED_PDF,"isOption").value&&(this.isDatePickerVisible=!this.isDatePickerVisible)}dateSelect(t){this.getControl(Qn.DELETED_PDF,"date").setValue({label:this.translatePipe.transform("DATE_INPUT"),value:{type:new Date(t).getTime()}})}updateTempFileStatus(t){this.tempFileMenus.forEach(e=>{Object.keys(t).includes(e.type)&&e.formGroup.get("status").setValue(t[e.type].removeStatus)}),this.changeDetectorRef.markForCheck()}buildMenuControls(t){const e={status:new r.h(Xn.NONE),checked:new r.h(!1),requester:new r.h(null),expanded:new r.h(!1),isOption:new r.h({value:!1,disabled:!0}),date:new r.h({label:this.translatePipe.transform("DATE_INPUT"),value:{type:(new Date).getTime()}})};return t!==Qn.DELETED_PDF&&(delete e.isOption,delete e.date),new r.k(e)}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(w.d),l.Mb(rt.b),l.Mb(Bn),l.Mb(l.h),l.Mb($.c),l.Mb(s.G))},t.\u0275cmp=l.Gb({type:t,selectors:[["sd-system-management"]],features:[l.yb([s.G])],decls:24,vars:19,consts:[[1,"warning-phrase"],[1,"warning-phrase-container"],[3,"formGroup"],[1,"warning-phrase-header-container",3,"click"],[1,"header"],[1,"papycon","papycon-chevron3-right","chevron"],["class","warning-phrase-content-container",3,"expanded-content",4,"ngIf"],[1,"button-container"],["size","small","color","primary",1,"ep-button",3,"click"],["size","small","color","grey",1,"ep-button",3,"disabled","click"],[1,"papycon","papycon-minus2"],[1,"menu"],["class","menu-container",4,"ngFor","ngForOf"],[1,"warning-phrase-content-container"],[1,"content"],[1,"menu-container"],[1,"menu-header-container"],["formControlName","checked",3,"size"],[1,"header",3,"click"],["class","menu-content-container",3,"expanded-content",4,"ngIf"],[1,"menu-content-container"],["class","menu-option",4,"ngIf"],[1,"menu-option"],["formControlName","isOption",3,"label"],[1,"expiry-date-input",3,"click"],[1,"date"],[3,"size","autoClosing","dateSelect",4,"ngIf"],[1,"icon-box",3,"click"],[1,"papycon","papycon-calendar"],[3,"size","autoClosing","dateSelect"]],template:function(t,e){1&t&&(l.Sb(0,"h1"),l.Fc(1),l.ec(2,"translate"),l.Rb(),l.Sb(3,"section",0),l.Sb(4,"article",1),l.Qb(5,2),l.Sb(6,"div",3),l.Zb("click",(function(){return e.onMenuClick(e.warningPhrase)})),l.Sb(7,"div",4),l.Sb(8,"span"),l.Fc(9),l.ec(10,"translate"),l.Rb(),l.Nb(11,"i",5),l.Rb(),l.Rb(),l.Dc(12,Wn,4,6,"div",6),l.Pb(),l.Rb(),l.Rb(),l.Sb(13,"sd-card"),l.Sb(14,"article",7),l.Sb(15,"button",8),l.Zb("click",(function(){return e.isSelectedAll?e.deselectAll():e.selectAll()})),l.Fc(16),l.ec(17,"translate"),l.Rb(),l.Sb(18,"button",9),l.Zb("click",(function(){return e.removeTempFile()})),l.Nb(19,"i",10),l.Fc(20),l.ec(21,"translate"),l.Rb(),l.Rb(),l.Sb(22,"section",11),l.Dc(23,qn,10,9,"article",12),l.Rb(),l.Rb()),2&t&&(l.zb(1),l.Gc(l.fc(2,11,"DELETE_TEMP_FILE")),l.zb(4),l.jc("formGroup",e.warningPhrase.formGroup),l.zb(1),l.Eb("expanded-header",e.warningPhrase.formGroup.controls.expanded.value),l.zb(3),l.Gc(l.fc(10,13,e.warningPhrase.title)),l.zb(2),l.jc("@chevron",e.warningPhrase.formGroup.controls.expanded.value),l.zb(1),l.jc("ngIf",e.warningPhrase.formGroup.controls.expanded.value),l.zb(4),l.Gc(l.fc(17,15,e.isSelectedAll?"DESELECT_ALL":"SELECT_ALL")),l.zb(2),l.jc("disabled",!e.hasSelectedMenu),l.zb(2),l.Gc(l.fc(21,17,"DELETE")),l.zb(3),l.jc("ngForOf",e.tempFileMenus))},styles:["[_nghost-%COMP%]{min-width:1180px}.warning-phrase[_ngcontent-%COMP%]{border-radius:4px;background-color:#fff8ed}.warning-phrase-header-container[_ngcontent-%COMP%]{height:68px;-webkit-box-sizing:border-box;box-sizing:border-box;padding:26px 54px 26px 24px;cursor:pointer}.warning-phrase-header-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;color:#ff6100;width:100%;height:100%;font-size:16px;font-family:SourceHanSansKR}.warning-phrase-header-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:10px}.warning-phrase-content-container[_ngcontent-%COMP%]{font-size:16px;-webkit-box-sizing:border-box;box-sizing:border-box;color:#ff6100;padding:0 24px 26px}.warning-phrase[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:5px;white-space:pre-wrap;font-family:NotoSansCJKkr}sd-card[_ngcontent-%COMP%]{margin-top:20px;padding:30px 24px;line-height:1;font-family:SourceHanSansKR}article.button-container[_ngcontent-%COMP%]{margin-bottom:17px}article.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:6px;font-size:18px}article.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:12px}.menu-container[_ngcontent-%COMP%]{margin:0}.menu-header-container[_ngcontent-%COMP%]{height:60px;-webkit-box-sizing:border-box;box-sizing:border-box;padding:2px 24px 0}.menu-header-container[_ngcontent-%COMP%], .menu-header-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.menu-header-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;color:#1e1e1e;margin-left:32px;width:100%;height:100%;cursor:pointer;font-size:16px}.menu-header-container[_ngcontent-%COMP%]   pu-checkbox[_ngcontent-%COMP%]{width:24px;height:24px}.menu-header-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:10px;margin-right:8px}.menu-content-container[_ngcontent-%COMP%]{font-size:14px;padding-left:80px;-webkit-box-sizing:border-box;box-sizing:border-box}.menu-content-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-top:8px;color:#6c6c6c}.menu-content-container[_ngcontent-%COMP%]   .menu-option[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:50px;padding:10px 0;margin:8px 0;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative}.menu-content-container[_ngcontent-%COMP%]   sd-date-picker[_ngcontent-%COMP%]{z-index:1;top:44px;left:176px}.menu-container[_ngcontent-%COMP%]{border-bottom:1px solid #dadada}.expiry-date-input[_ngcontent-%COMP%]{width:140px;height:30px;margin:0 8px;border-radius:2px;border:1px solid #dadada;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer}.expiry-date-input[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:14px;line-height:24px;font-family:NotoSans-Regular;color:#6c6c6c;margin-left:10px}.icon-box[_ngcontent-%COMP%]{font-size:18px;cursor:pointer;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-item-align:center;align-self:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:default}.content-padding[_ngcontent-%COMP%]{padding-bottom:14px}"],data:{animation:[U.a.rotate("chevron","90"),U.a.expandHiddenChildren("children")]},changeDetection:0}),t})();var ei=n("fw65");let ni=(()=>{class t{}return t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({factory:function(e){return new(e||t)},providers:[fn,Bn],imports:[[i.c,it.a,Jt.b,at.b,r.B,I,s.f,r.n,s.j,ot,s.t,N.b,ke,w.b,rt.a]]}),t})();l.xc(Tn,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,V.a,Fe.a,ei.a,r.H,r.w,r.G,r.d,r.x,r.A,r.b,r.D,r.E,r.z,r.r,r.s,r.C,r.p,r.o,r.y,r.c,r.e,r.i,r.l,r.j,r.m,r.f,D,s.e,r.u,r.v,r.t,s.i,q,s.s,B.a,W.a,De,Et.a,Tn,kn,Pn,En,ti],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,Ve.a,Be.a,We.a,Ye.a,Kt.a,T.a]),l.xc(kn,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,V.a,Fe.a,ei.a,r.H,r.w,r.G,r.d,r.x,r.A,r.b,r.D,r.E,r.z,r.r,r.s,r.C,r.p,r.o,r.y,r.c,r.e,r.i,r.l,r.j,r.m,r.f,D,s.e,r.u,r.v,r.t,s.i,q,s.s,B.a,W.a,De,Et.a,Tn,kn,Pn,En,ti],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,Ve.a,Be.a,We.a,Ye.a,Kt.a,T.a]),l.xc(Pn,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,V.a,Fe.a,ei.a,r.H,r.w,r.G,r.d,r.x,r.A,r.b,r.D,r.E,r.z,r.r,r.s,r.C,r.p,r.o,r.y,r.c,r.e,r.i,r.l,r.j,r.m,r.f,D,s.e,r.u,r.v,r.t,s.i,q,s.s,B.a,W.a,De,Et.a,Tn,kn,Pn,En,ti],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,Ve.a,Be.a,We.a,Ye.a,Kt.a,T.a]),l.xc(En,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,V.a,Fe.a,ei.a,r.H,r.w,r.G,r.d,r.x,r.A,r.b,r.D,r.E,r.z,r.r,r.s,r.C,r.p,r.o,r.y,r.c,r.e,r.i,r.l,r.j,r.m,r.f,D,s.e,r.u,r.v,r.t,s.i,q,s.s,B.a,W.a,De,Et.a,Tn,kn,Pn,En,ti],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,Ve.a,Be.a,We.a,Ye.a,Kt.a,T.a]),l.xc(ti,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,V.a,Fe.a,ei.a,r.H,r.w,r.G,r.d,r.x,r.A,r.b,r.D,r.E,r.z,r.r,r.s,r.C,r.p,r.o,r.y,r.c,r.e,r.i,r.l,r.j,r.m,r.f,D,s.e,r.u,r.v,r.t,s.i,q,s.s,B.a,W.a,De,Et.a,Tn,kn,Pn,En,ti],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,Ve.a,Be.a,We.a,Ye.a,Kt.a,T.a]);let ii=(()=>{class t{}return t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({factory:function(e){return new(e||t)},providers:[Yt],imports:[[i.c,s.x,it.a,Jt.b,at.b,ni,w.b,ot,N.b]]}),t})();l.xc(Xt,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,s.q,s.w,V.a,Fe.a,ei.a,En,q,B.a,W.a,qt,Xt,gn,hn],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,Ve.a,Be.a,We.a,Ye.a,Kt.a,T.a]),l.xc(gn,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,s.q,s.w,V.a,Fe.a,ei.a,En,q,B.a,W.a,qt,Xt,gn,hn],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,Ve.a,Be.a,We.a,Ye.a,Kt.a,T.a]),l.xc(hn,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,s.q,s.w,V.a,Fe.a,ei.a,En,q,B.a,W.a,qt,Xt,gn,hn],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l,Ve.a,Be.a,We.a,Ye.a,Kt.a,T.a]);let oi=(()=>{class t{}return t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({factory:function(e){return new(e||t)},imports:[[i.c,ii]]}),t})(),ai=(()=>{class t{constructor(t,e){this.authService=t,this.router=e}canActivate(t,e){return this.authService.sharedGetSession.pipe(h.a(1),G.a(t=>t?t.type===z.e.ADMIN||this.router.parseUrl("view/admin/dashboard"):this.router.parseUrl("view/admin/login")))}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(z.c),l.Wb(a.c))},t.\u0275prov=l.Ib({token:t,factory:t.\u0275fac}),t})();var si=n("JIr8");let ri=(()=>{class t{constructor(t,e){this.authService=t,this.router=e}canActivate(t,e){return this.authService.sharedGetSession.pipe(h.a(1),G.a(()=>!0),si.a(()=>Rn.a(this.router.parseUrl("view/admin/login?redirectTo="+t.routeConfig.path))))}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(z.c),l.Wb(a.c))},t.\u0275prov=l.Ib({token:t,factory:t.\u0275fac}),t})();var ci=n("CqXF"),li=n("MtjB");let di=(()=>{class t{constructor(t,e,n,i){this.authService=t,this.dialogService=e,this.formBuilder=n,this.translatePipe=i,this.passwordFormGroup=this.formBuilder.group({password:""})}canActivate(t,e){return this.passwordFormGroup.reset(""),this.dialogService.toggleDialogVisibility(c.c.CHECK_USER,!0,{title:this.translatePipe.transform("ACCOUNT_PAGE_PASSWORD_CHECK"),size:{width:452,height:282},formGroup:this.passwordFormGroup}),this.dialogService.dialogEvent$.pipe(L.a(t=>"confirm"===t.action&&t.dialogType===c.c.CHECK_USER),gt.a(()=>this.authService.postCheckPassword(this.passwordFormGroup.controls.password.value)),bt.a(()=>this.dialogService.closeCurrentActiveDialog()),ci.a(!0),li.a(t=>t.pipe(bt.a(()=>{this.passwordFormGroup.get("password").setErrors({invalid:!0})}))))}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(z.c),l.Wb(c.b),l.Wb(r.g),l.Wb(w.d))},t.\u0275prov=l.Ib({token:t,factory:t.\u0275fac}),t})(),pi=(()=>{class t{constructor(t,e){this.authService=t,this.router=e}canActivate(t,e){return this.authService.sharedGetSession.pipe(h.a(1),G.a(()=>this.router.parseUrl("view/admin/dashboard")),si.a(()=>Rn.a(!0)))}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(z.c),l.Wb(a.c))},t.\u0275prov=l.Ib({token:t,factory:t.\u0275fac}),t})(),hi=(()=>{class t{}return t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({factory:function(e){return new(e||t)},providers:[ri,pi,ai,di],imports:[[i.c]]}),t})();var gi=function(t){return t.DEMO="DEMO",t.REGULAR="REGULAR",t}({});let bi=(()=>{class t{constructor(t,e){this.baseHref=t,this.httpClient=e,this._licenseInfo=null}get licenseInfo(){return this._licenseInfo}getLicenseInfo(){return this.httpClient.post(this.baseHref+"v4/license/info",{observe:"response",responseType:"json"}).pipe(bt.a(t=>this._licenseInfo=t))}postLicense(t){return this.httpClient.post(this.baseHref+"v4/license/register",{license:t})}deleteLicense(){return this.httpClient.post(this.baseHref+"v4/license/deactive",{observe:"response",responseType:"json"})}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(i.a),l.Wb(o.b))},t.\u0275prov=l.Ib({token:t,factory:t.\u0275fac}),t})();function ui(t,e){if(1&t){const t=l.Tb();l.Sb(0,"button",7),l.Zb("click",(function(){return l.uc(t),l.dc().openDestroyLicenseDialog()})),l.Fc(1),l.ec(2,"translate"),l.Rb()}2&t&&(l.zb(1),l.Gc(l.fc(2,1,"LICENSE_DESTROY")))}function fi(t,e){if(1&t){const t=l.Tb();l.Sb(0,"div",8),l.Sb(1,"span",2),l.Fc(2),l.ec(3,"translate"),l.Rb(),l.Nb(4,"pu-input",9),l.ec(5,"translate"),l.Sb(6,"button",10),l.Zb("click",(function(){return l.uc(t),l.dc().registerLicense()})),l.Fc(7),l.ec(8,"translate"),l.Rb(),l.Rb()}if(2&t){const t=l.dc();l.zb(2),l.Gc(l.fc(3,5,"LICENSE_KEY")),l.zb(2),l.jc("placeholder",l.fc(5,7,"LICENSE_INPUT_PLACEHOLDER"))("formControl",t.licenseKeyInputFormControl),l.zb(2),l.jc("disabled",!t.licenseKeyInputFormControl.value),l.zb(1),l.Gc(l.fc(8,9,"REGISTER"))}}function mi(t,e){if(1&t){const t=l.Tb();l.Sb(0,"div",11),l.Sb(1,"span",2),l.Fc(2),l.ec(3,"translate"),l.Rb(),l.Sb(4,"div",12),l.Sb(5,"span"),l.Fc(6),l.Rb(),l.Sb(7,"i",13),l.Zb("click",(function(){l.uc(t);const e=l.dc();return e.copyToken(null==e.licenseInfo?null:e.licenseInfo.register)})),l.Rb(),l.Sb(8,"i",14),l.Zb("click",(function(){l.uc(t);const e=l.dc();return e.downloadToken(null==e.licenseInfo?null:e.licenseInfo.register,"streamdocs-license-issue-token")})),l.Rb(),l.Rb(),l.Rb()}if(2&t){const t=l.dc();l.zb(2),l.Gc(l.fc(3,4,"REGISTER_TOKEN")),l.zb(3),l.Eb("error",t.registerTokenInputFormControl.getError("fail")),l.zb(1),l.Gc(t.registerTokenInputFormControl.value)}}function Ci(t,e){if(1&t){const t=l.Tb();l.Sb(0,"div",8),l.Sb(1,"span",2),l.Fc(2),l.ec(3,"translate"),l.Rb(),l.Sb(4,"div",12),l.Sb(5,"span"),l.Fc(6),l.Rb(),l.Sb(7,"i",13),l.Zb("click",(function(){l.uc(t);const e=l.dc();return e.copyToken(null==e.licenseInfo?null:e.licenseInfo.deactivate)})),l.Rb(),l.Sb(8,"i",14),l.Zb("click",(function(){l.uc(t);const e=l.dc();return e.downloadToken(null==e.licenseInfo?null:e.licenseInfo.deactivate,"streamdocs-license-deregistration-code")})),l.Rb(),l.Rb(),l.Rb()}if(2&t){const t=l.dc();l.zb(2),l.Gc(l.fc(3,2,"DEACTIVATE_CODE")),l.zb(4),l.Gc(t.destroyTokenInputFormControl.value)}}let xi=(()=>{class t{constructor(t,e,n,i,o,a){this.licenseService=t,this.toastService=e,this.changeDetectorRef=n,this.adminDialogService=i,this.subscription=o,this.translatePipe=a,this.registerTokenInputFormControl=new r.h(""),this.destroyTokenInputFormControl=new r.h(""),this.licenseKeyInputFormControl=new r.h(""),this.isLoading=!0,this.Status=gi}get licenseStatusText(){if(!this.licenseInfo)return"";if(!this.licenseInfo.tier)return this.translatePipe.transform("FAIL_TO_FETCH_LICENSE");const t=this.licenseInfo.deactivate?`(${this.translatePipe.transform("DESTROYED")})`:"";return`${this.translatePipe.transform(this.licenseInfo.tier)} ${t}`}ngOnInit(){this.getLicenseInfo(),this.subscribe()}subscribe(){this.subscription.push(this.adminDialogService.dialogEvent$.pipe(L.a(t=>"confirm"===t.action&&t.dialogType===c.c.ASK_BEFORE_DESTROY_LICENSE)).subscribe({next:t=>{this.adminDialogService.closeCurrentActiveDialog(),this.destroyLicense()}}))}openDestroyLicenseDialog(){this.adminDialogService.toggleDialogVisibility(c.c.ASK_BEFORE_DESTROY_LICENSE,!0,{size:{width:336,height:280}})}registerLicense(){this.licenseKeyInputFormControl.value&&(this.isLoading=!0,this.licenseService.postLicense(this.licenseKeyInputFormControl.value).pipe(F.a(()=>{this.isLoading=!1,this.changeDetectorRef.markForCheck()})).subscribe({next:t=>{this.toastService.showToast({text:this.translatePipe.transform("SUCCEED_TO_REGISTER_LICENSE"),icon:"success"}),this.getLicenseInfo(),this.licenseKeyInputFormControl.reset(),this.changeDetectorRef.markForCheck()},error:t=>{this.toastService.showToast({text:this.translatePipe.transform("FAILED_TO_ADD_LICENSE"),icon:"success"})}}))}destroyLicense(){this.licenseService.deleteLicense().subscribe({next:t=>{this.toastService.showToast({text:this.translatePipe.transform("SUCCEED_TO_DESTROY_LICENSE"),icon:"success"}),this.getLicenseInfo()}})}copyToken(t){U.F.copyToClipboard(t),this.toastService.showToast({icon:"success",text:this.translatePipe.transform("COPY_TOKEN")})}downloadToken(t,e){const n=new Blob([t],{type:"octet/stream;"});U.l.downloadBlob(n,e)}getLicenseInfo(){this.licenseService.getLicenseInfo().pipe(F.a(()=>{this.isLoading=!1,this.changeDetectorRef.markForCheck()})).subscribe({next:t=>{this.licenseInfo=t,t.register&&this.registerTokenInputFormControl.setValue(t.register),t.deactivate&&this.destroyTokenInputFormControl.setValue(t.deactivate)},error:t=>{const e=this.translatePipe.transform("FETCH_TOKEN_ERROR");this.registerTokenInputFormControl.setValue(e),this.registerTokenInputFormControl.setErrors({fail:!0})}})}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(bi),l.Mb($.c),l.Mb(l.h),l.Mb(c.b),l.Mb(s.G),l.Mb(w.d))},t.\u0275cmp=l.Gb({type:t,selectors:[["sd-license"]],features:[l.yb([s.G])],decls:15,vars:14,consts:[[3,"isLoading"],[1,"row","status"],[1,"label"],[1,"license-status"],["class","ep-button","size","tiny","color","danger",3,"click",4,"ngIf"],["class","row",4,"ngIf"],["class","row register",4,"ngIf"],["size","tiny","color","danger",1,"ep-button",3,"click"],[1,"row"],["size","tiny",1,"register-input",3,"placeholder","formControl"],["size","tiny","color","white",1,"ep-button",3,"disabled","click"],[1,"row","register"],[1,"token"],[1,"papycon","papycon-copy",3,"click"],[1,"papycon","papycon-download",3,"click"]],template:function(t,e){1&t&&(l.Sb(0,"h1"),l.Fc(1),l.ec(2,"translate"),l.Rb(),l.Sb(3,"div"),l.Sb(4,"sd-card",0),l.Sb(5,"div",1),l.Sb(6,"span",2),l.Fc(7),l.ec(8,"translate"),l.Rb(),l.Sb(9,"span",3),l.Fc(10),l.Rb(),l.Dc(11,ui,3,3,"button",4),l.Rb(),l.Dc(12,fi,9,11,"div",5),l.Dc(13,mi,9,6,"div",6),l.Dc(14,Ci,9,4,"div",5),l.Rb(),l.Rb()),2&t&&(l.zb(1),l.Gc(l.fc(2,10,"LICENSE_MANAGEMENT")),l.zb(3),l.jc("isLoading",e.isLoading),l.zb(3),l.Gc(l.fc(8,12,"LICENSE_STATUS")),l.zb(2),l.Eb("error",!(null!=e.licenseInfo&&e.licenseInfo.tier)),l.zb(1),l.Gc(e.licenseStatusText),l.zb(1),l.jc("ngIf",(null==e.licenseInfo?null:e.licenseInfo.tier)===e.Status.REGULAR),l.zb(1),l.jc("ngIf",(null==e.licenseInfo?null:e.licenseInfo.tier)===e.Status.DEMO),l.zb(1),l.jc("ngIf",(null==e.licenseInfo?null:e.licenseInfo.tier)===e.Status.DEMO),l.zb(1),l.jc("ngIf",null==e.licenseInfo?null:e.licenseInfo.deactivate))},directives:[V.a,i.t,s.s,r.r,r.i],pipes:[T.a],styles:["[_nghost-%COMP%]{min-width:814px}sd-card[_ngcontent-%COMP%]{max-width:754px;min-height:200px;padding:30px}.row[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:64px}.row[_ngcontent-%COMP%]:not(.status):not(.license){border-top:1px solid #dadada}.border[_ngcontent-%COMP%]{width:100%;height:1px;background-color:#dadada}.label[_ngcontent-%COMP%]{-webkit-box-flex:0;-ms-flex:0 0 100px;flex:0 0 100px;color:#838383}.label[_ngcontent-%COMP%], .license-status[_ngcontent-%COMP%]{font-family:NotoSans-Medium;font-size:14px;height:14px;line-height:14px;font-weight:500}.license-status[_ngcontent-%COMP%]{letter-spacing:-.5px;color:#1e1e1e}.license-status.error[_ngcontent-%COMP%]{color:#e4002b;font-size:14px;margin-left:4px}.token[_ngcontent-%COMP%]{font-family:Consolas,Monaco,DejaVu Sans Mono,sans-serif;font-size:14px;height:14px;line-height:14px;font-weight:500;letter-spacing:-.5px;color:#1e1e1e;position:relative}.token[_ngcontent-%COMP%]   .papycon-copy[_ngcontent-%COMP%], .token[_ngcontent-%COMP%]   .papycon-download[_ngcontent-%COMP%]{color:#363636;font-size:16px;margin-left:14px;cursor:pointer}.token[_ngcontent-%COMP%]   .papycon-copy[_ngcontent-%COMP%]:hover, .token[_ngcontent-%COMP%]   .papycon-download[_ngcontent-%COMP%]:hover{color:#f79f1a}.token[_ngcontent-%COMP%]   .papycon-copy.error[_ngcontent-%COMP%], .token[_ngcontent-%COMP%]   .papycon-download.error[_ngcontent-%COMP%]{color:#e4002b;font-size:14px;margin-left:4px}.register-input[_ngcontent-%COMP%]{width:250px}button[_ngcontent-%COMP%]{margin-left:20px}"],changeDetection:0}),t})(),Oi=(()=>{class t{}return t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({factory:function(e){return new(e||t)},providers:[bi],imports:[[i.c,s.t,r.B,it.a,w.b]]}),t})(),Mi=(()=>{class t{constructor(t,e,n,i,o,a,s,r,c){this.subs=t,this.authService=e,this.toastService=n,this.router=i,this.activatedRoute=o,this.translatePipe=a,this.formBuilder=s,this.productService=r,this.changeDetectorRef=c,this.EMAIL_ITEM_KEY="userEmail",this.packageVersion="",this.formGroup=this.formBuilder.group({email:"",password:"",checkbox:!1})}get currentYear(){return(new Date).getFullYear()}get logoUrl(){return this.productService.getLoginLogo()}get description(){return this.productService.getText()}ngOnInit(){this.setEmailFromStorage(),this.initSubscriptions()}login(){this.subs.set("login",this.authService.login(this.formGroup.get("email").value,this.formGroup.get("password").value).pipe(gt.a(()=>this.authService.sharedGetSession)).subscribe({next:t=>{this.activatedRoute.queryParams.subscribe({next:({redirectTo:t})=>{this.router.navigate([null!=t?t:"dashboard"],{relativeTo:this.activatedRoute.parent})},error:()=>{this.router.navigate(["dashboard"],{relativeTo:this.activatedRoute.parent})}})},error:t=>{this.toastService.showToast(t.status===A.b.UNAUTHORIZED?{icon:$.a.FAILED,text:this.translatePipe.transform("LOGIN_FAILURE_ACCOUNT_ERROR"),spanStyle:{width:"320px",fontSize:"16px",lineHeight:"26px",whiteSpace:"pre-line"}}:t.message&&t.message===z.d.UNAUTHORIZED?{icon:$.a.FAILED,text:this.translatePipe.transform("LOGIN_ERROR_UNAUTHORIZED")}:{icon:$.a.FAILED,text:this.translatePipe.transform("LOGIN_FAILURE")})}}))}initSubscriptions(){this.subs.push(this.formGroup.controls.checkbox.valueChanges.subscribe({next:t=>{t?this.setStorageItem(this.EMAIL_ITEM_KEY,this.formGroup.controls.email.value):this.removeStorageItem(this.EMAIL_ITEM_KEY)}}),this.formGroup.controls.email.valueChanges.subscribe({next:t=>{this.formGroup.controls.checkbox.value&&this.setStorageItem(this.EMAIL_ITEM_KEY,t)}}),this.productService.getPackageVersion().subscribe({next:t=>{this.packageVersion="v"+t,this.changeDetectorRef.markForCheck()}}))}setEmailFromStorage(){this.getStorageItem(this.EMAIL_ITEM_KEY)&&(this.formGroup.controls.checkbox.setValue(!0),this.formGroup.controls.email.setValue(this.getStorageItem(this.EMAIL_ITEM_KEY)))}getStorageItem(t){return window.localStorage.getItem(t)||""}setStorageItem(t,e){window.localStorage.setItem(t,e)}removeStorageItem(t){window.localStorage.removeItem(t)}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(s.G),l.Mb(z.c),l.Mb($.c),l.Mb(a.c),l.Mb(a.a),l.Mb(w.d),l.Mb(r.g),l.Mb(ut.b),l.Mb(l.h))},t.\u0275cmp=l.Gb({type:t,selectors:[["e-login"]],features:[l.yb([s.G])],decls:26,vars:21,consts:[[1,"login-container"],[1,"login-form",3,"formGroup"],[1,"header"],[1,"logo",3,"src"],[1,"package-version"],[1,"title"],["formControlName","email","size","small",3,"placeholder","autofocus","keydown.enter"],["formControlName","password","size","small","type","password",3,"placeholder","keydown.enter"],["size","small","color","primary",1,"ep-button",3,"click"],[1,"tools"],["formControlName","checkbox",3,"label"],[1,"copy-right"],[1,"text-container"],[1,"admin-text"]],template:function(t,e){1&t&&(l.Sb(0,"section",0),l.Sb(1,"form",1),l.Sb(2,"div",2),l.Nb(3,"img",3),l.Sb(4,"span",4),l.Fc(5),l.Rb(),l.Rb(),l.Sb(6,"span",5),l.Fc(7),l.ec(8,"translate"),l.Rb(),l.Sb(9,"pu-input",6),l.Zb("keydown.enter",(function(){return e.login()})),l.ec(10,"translate"),l.Rb(),l.Sb(11,"pu-input",7),l.Zb("keydown.enter",(function(){return e.login()})),l.ec(12,"translate"),l.Rb(),l.Sb(13,"button",8),l.Zb("click",(function(){return e.login()})),l.Fc(14),l.ec(15,"translate"),l.Rb(),l.Sb(16,"div",9),l.Nb(17,"pu-checkbox",10),l.ec(18,"translate"),l.Rb(),l.Rb(),l.Sb(19,"span",11),l.Fc(20),l.Rb(),l.Rb(),l.Sb(21,"div",12),l.Sb(22,"span",13),l.Fc(23,"PDF Streaming Server,"),l.Nb(24,"br"),l.Fc(25),l.Rb(),l.Rb()),2&t&&(l.zb(1),l.jc("formGroup",e.formGroup),l.zb(2),l.jc("src",e.logoUrl,l.wc),l.zb(2),l.Gc(e.packageVersion),l.zb(2),l.Gc(l.fc(8,11,"LOGIN")),l.zb(2),l.jc("placeholder",l.fc(10,13,"E_MAIL"))("autofocus",!0),l.zb(2),l.jc("placeholder",l.fc(12,15,"PASSWORD")),l.zb(3),l.Gc(l.fc(15,17,"LOGIN")),l.zb(3),l.jc("label",l.fc(18,19,"SAVE_E_MAIL")),l.zb(3),l.Hc("\xa92004\u2013",e.currentYear," ePapyrus Inc.\xa0\xa0All rights reserved."),l.zb(5),l.Gc(e.description))},directives:[r.H,r.s,r.l,s.s,r.r,r.j,s.e],pipes:[T.a],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1;flex:1;position:fixed;top:0;background-color:#f7f1e8;background-image:url(background.6a9686395df992dec729.png);background-size:contain;background-position:100%;background-repeat:no-repeat}.text-container[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1 1 0px;flex:1 1 0;margin-top:calc(88vh - 14px + 2px);margin-left:116px}.text-container[_ngcontent-%COMP%]   span.admin-text[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif;font-size:12px;line-height:20px;color:#1e1e1e}.header[_ngcontent-%COMP%]   img.logo[_ngcontent-%COMP%]{width:168px;height:29px;vertical-align:bottom}.header[_ngcontent-%COMP%]   span.package-version[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif;font-size:14px;line-height:24px;color:#1e1e1e;width:56px;height:14px;margin:0 0 0 7.6px}.login-container[_ngcontent-%COMP%]{background-color:#fff;-webkit-box-flex:0;-ms-flex:0 0 610px;flex:0 0 610px;padding-top:185px;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.login-container[_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column}.login-form[_ngcontent-%COMP%]{flex-direction:column;width:338px;height:518px;margin-left:15px}.login-form[_ngcontent-%COMP%]   span.title[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif;font-size:16px;line-height:26px;color:#1e1e1e;margin:24px 0}.login-form[_ngcontent-%COMP%]   pu-input[_ngcontent-%COMP%]{margin-bottom:20px}.login-form[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]{margin-top:22px}span.copy-right[_ngcontent-%COMP%]{font-family:NotoSans-Regular,sans-serif;font-size:12px;line-height:20px;color:#6c6c6c;width:338px;padding-left:18px}"],changeDetection:0}),t})(),_i=(()=>{class t{}return t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({factory:function(e){return new(e||t)},imports:[[i.c,r.B,s.t,s.f,w.b]]}),t})();var Pi=n("YWXW");const yi=[{path:"",component:Lt,children:[{path:"login",component:Mi,canActivate:[pi]},{path:"document-list",component:_e,canActivate:[ri]},{path:"removed-document-list",component:Le,canActivate:[ri]},{path:"account",component:nt,canActivate:[ri,ai,di]},{path:"settings/view",component:Pi.b,canActivate:[ri,ai],canDeactivate:[Pi.c]},{path:"settings/watermark",loadChildren:()=>n.e(7).then(n.bind(null,"Jzxn")).then(t=>t.WatermarkSettingsModule),canActivate:[ri,ai]},{path:"dashboard",component:te,canActivate:[ri]},{path:"statistic-period",component:gn,canActivate:[ri]},{path:"statistic-document",component:hn,canActivate:[ri]},{path:"server-monitoring",component:Tn,canActivate:[ri,ai]},{path:"server-log",component:kn,canActivate:[ri,ai]},{path:"document-log",component:Pn,canActivate:[ri,ai]},{path:"system-management",component:ti,canActivate:[ri,ai]},{path:"license",component:xi,canActivate:[ri,ai]},{path:"**",redirectTo:"dashboard"}]}];let vi=(()=>{class t{}return t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({factory:function(e){return new(e||t)},imports:[[a.g.forChild(yi)],a.g]}),t})(),Si=(()=>{class t{}return t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({factory:function(e){return new(e||t)},imports:[[i.c]]}),t})(),Di=(()=>{class t{}return t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({factory:function(e){return new(e||t)},imports:[[i.c,s.x]]}),t})();var ki=n("LkYz");let wi=(()=>{class t{}return t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({factory:function(e){return new(e||t)},imports:[[i.c,s.x,ki.a,a.g,w.b]]}),t})();var Ei=n("z6cu");let Ti=(()=>{class t{constructor(t,e,n,i){this.authService=t,this.router=e,this.toastService=n,this.translatePipe=i}intercept(t,e){let n=ae.e;return t.headers.keys().forEach(e=>{n=n.set(e,t.headers.get(e))}),U.o.token&&(n=n.append("authorization",U.o.authorization)),e.handle(t.clone({headers:n})).pipe(si.a(n=>this.handleError(n,t,e)))}handleError(t,e,n){if(t.status===A.b.UNAUTHORIZED){const i=null!=U.o.token,o=e.url.includes("v4/auth/refresh/admin"),a=!i||o;return this.authService.deleteCookie("accessToken"),a?(this.router.navigateByUrl("view/admin/login"),U.o.token=null,Ei.a(t)):this.authService.sharedRefreshToken$.pipe(gt.a(t=>(U.o.token={accessToken:t.accessToken,refreshToken:U.o.token.refreshToken},n.handle(e.clone({setHeaders:{Authorization:"Bearer "+t.accessToken}})))))}return t.status===A.b.INTERNAL_SERVER_ERROR&&this.toastService.showToast({text:this.translatePipe.transform("FAILED"),icon:"failed"}),Ei.a(t)}}return t.\u0275fac=function(e){return new(e||t)(l.Wb(z.c),l.Wb(a.c),l.Wb($.c),l.Wb(w.d))},t.\u0275prov=l.Ib({token:t,factory:t.\u0275fac}),t})(),Ii=(()=>{class t{}return t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({factory:function(e){return new(e||t)},providers:[{provide:o.a,useClass:Ti,multi:!0}],imports:[[]]}),t})();var Ri=n("xghl");n("4YnD"),n("GPPu");let Ni=(()=>{class t{}return t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({factory:function(e){return new(e||t)},imports:[[a.g,o.c,Ri.a,i.c,Di,Si,wi,z.b,oi,_i,vi,Ke,I,$.b,s.j,hi,st,rt.a,Oi,ii,ni,Pi.d.forRoot(),Ii,lt.b.forRoot()]]}),t})()}}]);