!function(){function e(t,n,i){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(t,n,i||t)}function t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var r=s(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?r(e):t}function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(c){o=!0,r=c}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}return n}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"24iV":function(e,t,n){var i;!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(n,o){"use strict";var r=[],s=n.document,a=Object.getPrototypeOf,c=r.slice,l=r.concat,u=r.push,d=r.indexOf,h={},p=h.toString,f=h.hasOwnProperty,g=f.toString,b=g.call(Object),v={};function m(e,t){var n=(t=t||s).createElement("script");n.text=e,t.head.appendChild(n).parentNode.removeChild(n)}var y="3.2.0",S=function e(t,n){return new e.fn.init(t,n)},M=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,x=/^-ms-/,O=/-([a-z])/g,P=function(e,t){return t.toUpperCase()};function C(e){var t=!!e&&"length"in e&&e.length,n=S.type(e);return"function"!==n&&!S.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}S.fn=S.prototype={jquery:y,constructor:S,length:0,toArray:function(){return c.call(this)},get:function(e){return null==e?c.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(e){return this.pushStack(S.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(c.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:r.sort,splice:r.splice},S.extend=S.fn.extend=function(){var e,t,n,i,o,r,s=arguments[0]||{},a=1,c=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||S.isFunction(s)||(s={}),a===c&&(s=this,a--);a<c;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],s!==(i=e[t])&&(l&&i&&(S.isPlainObject(i)||(o=Array.isArray(i)))?(o?(o=!1,r=n&&Array.isArray(n)?n:[]):r=n&&S.isPlainObject(n)?n:{},s[t]=S.extend(l,r,i)):void 0!==i&&(s[t]=i));return s},S.extend({expando:"jQuery"+(y+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===S.type(e)},isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==p.call(e)||(t=a(e))&&(n=f.call(t,"constructor")&&t.constructor,"function"!=typeof n||g.call(n)!==b))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[p.call(e)]||"object":typeof e},globalEval:function(e){m(e)},camelCase:function(e){return e.replace(x,"ms-").replace(O,P)},each:function(e,t){var n,i=0;if(C(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(M,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(C(Object(e))?S.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:d.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;i<n;i++)e[o++]=t[i];return e.length=o,e},grep:function(e,t,n){for(var i=[],o=0,r=e.length,s=!n;o<r;o++)!t(e[o],o)!==s&&i.push(e[o]);return i},map:function(e,t,n){var i,o,r=0,s=[];if(C(e))for(i=e.length;r<i;r++)null!=(o=t(e[r],r,n))&&s.push(o);else for(r in e)null!=(o=t(e[r],r,n))&&s.push(o);return l.apply([],s)},guid:1,proxy:function(e,t){var n,i,o;if("string"==typeof t&&(n=e[t],t=e,e=n),S.isFunction(e))return i=c.call(arguments,2),(o=function(){return e.apply(t||this,i.concat(c.call(arguments)))}).guid=e.guid=e.guid||S.guid++,o},now:Date.now,support:v}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=r[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){h["[object "+t+"]"]=t.toLowerCase()}));var w=function(e){var t,n,i,o,r,s,a,c,l,u,d,h,p,f,g,b,v,m,y,S="sizzle"+1*new Date,M=e.document,x=0,O=0,P=ae(),C=ae(),w=ae(),k=function(e,t){return e===t&&(d=!0),0},_={}.hasOwnProperty,T=[],E=T.pop,I=T.push,R=T.push,N=T.slice,A=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},D="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",j="\\["+L+"*("+F+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+L+"*\\]",z=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",V=new RegExp(L+"+","g"),B=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),W=new RegExp("^"+L+"*,"+L+"*"),$=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),G=new RegExp(z),H=new RegExp("^"+F+"$"),q={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+D+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Z=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,J=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ee=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ie=function(){h()},oe=ye((function(e){return!0===e.disabled&&("form"in e||"label"in e)}),{dir:"parentNode",next:"legend"});try{R.apply(T=N.call(M.childNodes),M.childNodes)}catch(re){R={apply:T.length?function(e,t){I.apply(e,N.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function se(e,t,i,o){var r,a,l,u,d,f,v,m=t&&t.ownerDocument,x=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==x&&9!==x&&11!==x)return i;if(!o&&((t?t.ownerDocument||t:M)!==p&&h(t),t=t||p,g)){if(11!==x&&(d=K.exec(e)))if(r=d[1]){if(9===x){if(!(l=t.getElementById(r)))return i;if(l.id===r)return i.push(l),i}else if(m&&(l=m.getElementById(r))&&y(t,l)&&l.id===r)return i.push(l),i}else{if(d[2])return R.apply(i,t.getElementsByTagName(e)),i;if((r=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return R.apply(i,t.getElementsByClassName(r)),i}if(n.qsa&&!w[e+" "]&&(!b||!b.test(e))){if(1!==x)m=t,v=e;else if("object"!==t.nodeName.toLowerCase()){for((u=t.getAttribute("id"))?u=u.replace(te,ne):t.setAttribute("id",u=S),a=(f=s(e)).length;a--;)f[a]="#"+u+" "+me(f[a]);v=f.join(","),m=Q.test(e)&&be(t.parentNode)||t}if(v)try{return R.apply(i,m.querySelectorAll(v)),i}catch(O){}finally{u===S&&t.removeAttribute("id")}}}return c(e.replace(B,"$1"),t,i,o)}function ae(){var e=[];return function t(n,o){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=o}}function ce(e){return e[S]=!0,e}function le(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var n=e.split("|"),o=n.length;o--;)i.attrHandle[n[o]]=t}function de(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function he(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function fe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ge(e){return ce((function(t){return t=+t,ce((function(n,i){for(var o,r=e([],n.length,t),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))}))}))}function be(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},r=se.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},h=se.setDocument=function(e){var t,o,s=e?e.ownerDocument||e:M;return s!==p&&9===s.nodeType&&s.documentElement?(f=(p=s).documentElement,g=!r(p),M!==p&&(o=p.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",ie,!1):o.attachEvent&&o.attachEvent("onunload",ie)),n.attributes=le((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=le((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=Y.test(p.getElementsByClassName),n.getById=le((function(e){return f.appendChild(e).id=S,!p.getElementsByName||!p.getElementsByName(S).length})),n.getById?(i.filter.ID=function(e){var t=e.replace(J,ee);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(i.filter.ID=function(e){var t=e.replace(J,ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n,i,o,r=t.getElementById(e);if(r){if((n=r.getAttributeNode("id"))&&n.value===e)return[r];for(o=t.getElementsByName(e),i=0;r=o[i++];)if((n=r.getAttributeNode("id"))&&n.value===e)return[r]}return[]}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},i.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],b=[],(n.qsa=Y.test(p.querySelectorAll))&&(le((function(e){f.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&b.push("[*^$]="+L+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||b.push("\\["+L+"*(?:value|"+D+")"),e.querySelectorAll("[id~="+S+"-]").length||b.push("~="),e.querySelectorAll(":checked").length||b.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||b.push(".#.+[+~]")})),le((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&b.push("name"+L+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&b.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&b.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),b.push(",.*:")}))),(n.matchesSelector=Y.test(m=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&le((function(e){n.disconnectedMatch=m.call(e,"*"),m.call(e,"[s!='']:x"),v.push("!=",z)})),b=b.length&&new RegExp(b.join("|")),v=v.length&&new RegExp(v.join("|")),t=Y.test(f.compareDocumentPosition),y=t||Y.test(f.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return d=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e===p||e.ownerDocument===M&&y(M,e)?-1:t===p||t.ownerDocument===M&&y(M,t)?1:u?A(u,e)-A(u,t):0:4&i?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,i=0,o=e.parentNode,r=t.parentNode,s=[e],a=[t];if(!o||!r)return e===p?-1:t===p?1:o?-1:r?1:u?A(u,e)-A(u,t):0;if(o===r)return de(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;s[i]===a[i];)i++;return i?de(s[i],a[i]):s[i]===M?-1:a[i]===M?1:0},p):p},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&h(e),t=t.replace(U,"='$1']"),n.matchesSelector&&g&&!w[t+" "]&&(!v||!v.test(t))&&(!b||!b.test(t)))try{var i=m.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(o){}return se(t,p,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var o=i.attrHandle[t.toLowerCase()],r=o&&_.call(i.attrHandle,t.toLowerCase())?o(e,t,!g):void 0;return void 0!==r?r:n.attributes||!g?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(te,ne)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,i=[],o=0,r=0;if(d=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(k),d){for(;t=e[r++];)t===e[r]&&(o=i.push(r));for(;o--;)e.splice(i[o],1)}return u=null,e},o=se.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=o(t);return n},(i=se.selectors={cacheLength:50,createPseudo:ce,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(J,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(J,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&G.test(n)&&(t=s(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(J,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=P[e+" "];return t||(t=new RegExp("(^|"+L+")"+e+"("+L+"|$)"))&&P(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var o=se.attr(i,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(V," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,c){var l,u,d,h,p,f,g=r!==s?"nextSibling":"previousSibling",b=t.parentNode,v=a&&t.nodeName.toLowerCase(),m=!c&&!a,y=!1;if(b){if(r){for(;g;){for(h=t;h=h[g];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?b.firstChild:b.lastChild],s&&m){for(y=(p=(l=(u=(d=(h=b)[S]||(h[S]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===x&&l[1])&&l[2],h=p&&b.childNodes[p];h=++p&&h&&h[g]||(y=p=0)||f.pop();)if(1===h.nodeType&&++y&&h===t){u[e]=[x,p,y];break}}else if(m&&(y=p=(l=(u=(d=(h=t)[S]||(h[S]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===x&&l[1]),!1===y)for(;(h=++p&&h&&h[g]||(y=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++y||(m&&((u=(d=h[S]||(h[S]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]=[x,y]),h!==t)););return(y-=o)===i||y%i==0&&y/i>=0}}},PSEUDO:function(e,t){var n,o=i.pseudos[e]||i.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return o[S]?o(t):o.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,n){for(var i,r=o(e,t),s=r.length;s--;)e[i=A(e,r[s])]=!(n[i]=r[s])})):function(e){return o(e,0,n)}):o}},pseudos:{not:ce((function(e){var t=[],n=[],i=a(e.replace(B,"$1"));return i[S]?ce((function(e,t,n,o){for(var r,s=i(e,null,o,[]),a=e.length;a--;)(r=s[a])&&(e[a]=!(t[a]=r))})):function(e,o,r){return t[0]=e,i(t,null,r,n),t[0]=null,!n.pop()}})),has:ce((function(e){return function(t){return se(e,t).length>0}})),contains:ce((function(e){return e=e.replace(J,ee),function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}})),lang:ce((function(e){return H.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(J,ee).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:fe(!1),disabled:fe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return Z.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge((function(){return[0]})),last:ge((function(e,t){return[t-1]})),eq:ge((function(e,t,n){return[n<0?n+t:n]})),even:ge((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ge((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ge((function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e})),gt:ge((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=he(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=pe(t);function ve(){}function me(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function ye(e,t,n){var i=t.dir,o=t.next,r=o||i,s=n&&"parentNode"===r,a=O++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||s)return e(t,n,o);return!1}:function(t,n,c){var l,u,d,h=[x,a];if(c){for(;t=t[i];)if((1===t.nodeType||s)&&e(t,n,c))return!0}else for(;t=t[i];)if(1===t.nodeType||s)if(u=(d=t[S]||(t[S]={}))[t.uniqueID]||(d[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[i]||t;else{if((l=u[r])&&l[0]===x&&l[1]===a)return h[2]=l[2];if(u[r]=h,h[2]=e(t,n,c))return!0}return!1}}function Se(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function Me(e,t,n,i,o){for(var r,s=[],a=0,c=e.length,l=null!=t;a<c;a++)(r=e[a])&&(n&&!n(r,i,o)||(s.push(r),l&&t.push(a)));return s}function xe(e,t,n,i,o,r){return i&&!i[S]&&(i=xe(i)),o&&!o[S]&&(o=xe(o,r)),ce((function(r,s,a,c){var l,u,d,h=[],p=[],f=s.length,g=r||function(e,t,n){for(var i=0,o=t.length;i<o;i++)se(e,t[i],n);return n}(t||"*",a.nodeType?[a]:a,[]),b=!e||!r&&t?g:Me(g,h,e,a,c),v=n?o||(r?e:f||i)?[]:s:b;if(n&&n(b,v,a,c),i)for(l=Me(v,p),i(l,[],a,c),u=l.length;u--;)(d=l[u])&&(v[p[u]]=!(b[p[u]]=d));if(r){if(o||e){if(o){for(l=[],u=v.length;u--;)(d=v[u])&&l.push(b[u]=d);o(null,v=[],l,c)}for(u=v.length;u--;)(d=v[u])&&(l=o?A(r,d):h[u])>-1&&(r[l]=!(s[l]=d))}}else v=Me(v===s?v.splice(f,v.length):v),o?o(null,s,v,c):R.apply(s,v)}))}function Oe(e){for(var t,n,o,r=e.length,s=i.relative[e[0].type],a=s||i.relative[" "],c=s?1:0,u=ye((function(e){return e===t}),a,!0),d=ye((function(e){return A(t,e)>-1}),a,!0),h=[function(e,n,i){var o=!s&&(i||n!==l)||((t=n).nodeType?u(e,n,i):d(e,n,i));return t=null,o}];c<r;c++)if(n=i.relative[e[c].type])h=[ye(Se(h),n)];else{if((n=i.filter[e[c].type].apply(null,e[c].matches))[S]){for(o=++c;o<r&&!i.relative[e[o].type];o++);return xe(c>1&&Se(h),c>1&&me(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(B,"$1"),n,c<o&&Oe(e.slice(c,o)),o<r&&Oe(e=e.slice(o)),o<r&&me(e))}h.push(n)}return Se(h)}function Pe(e,t){var n=t.length>0,o=e.length>0,r=function(r,s,a,c,u){var d,f,b,v=0,m="0",y=r&&[],S=[],M=l,O=r||o&&i.find.TAG("*",u),P=x+=null==M?1:Math.random()||.1,C=O.length;for(u&&(l=s===p||s||u);m!==C&&null!=(d=O[m]);m++){if(o&&d){for(f=0,s||d.ownerDocument===p||(h(d),a=!g);b=e[f++];)if(b(d,s||p,a)){c.push(d);break}u&&(x=P)}n&&((d=!b&&d)&&v--,r&&y.push(d))}if(v+=m,n&&m!==v){for(f=0;b=t[f++];)b(y,S,s,a);if(r){if(v>0)for(;m--;)y[m]||S[m]||(S[m]=E.call(c));S=Me(S)}R.apply(c,S),u&&!r&&S.length>0&&v+t.length>1&&se.uniqueSort(c)}return u&&(x=P,l=M),y};return n?ce(r):r}return ve.prototype=i.filters=i.pseudos,i.setFilters=new ve,s=se.tokenize=function(e,t){var n,o,r,s,a,c,l,u=C[e+" "];if(u)return t?0:u.slice(0);for(a=e,c=[],l=i.preFilter;a;){for(s in n&&!(o=W.exec(a))||(o&&(a=a.slice(o[0].length)||a),c.push(r=[])),n=!1,(o=$.exec(a))&&(n=o.shift(),r.push({value:n,type:o[0].replace(B," ")}),a=a.slice(n.length)),i.filter)!(o=q[s].exec(a))||l[s]&&!(o=l[s](o))||(n=o.shift(),r.push({value:n,type:s,matches:o}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):C(e,c).slice(0)},a=se.compile=function(e,t){var n,i=[],o=[],r=w[e+" "];if(!r){for(t||(t=s(e)),n=t.length;n--;)(r=Oe(t[n]))[S]?i.push(r):o.push(r);(r=w(e,Pe(o,i))).selector=e}return r},c=se.select=function(e,t,n,o){var r,c,l,u,d,h="function"==typeof e&&e,p=!o&&s(e=h.selector||e);if(n=n||[],1===p.length){if((c=p[0]=p[0].slice(0)).length>2&&"ID"===(l=c[0]).type&&9===t.nodeType&&g&&i.relative[c[1].type]){if(!(t=(i.find.ID(l.matches[0].replace(J,ee),t)||[])[0]))return n;h&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(r=q.needsContext.test(e)?0:c.length;r--&&!i.relative[u=(l=c[r]).type];)if((d=i.find[u])&&(o=d(l.matches[0].replace(J,ee),Q.test(c[0].type)&&be(t.parentNode)||t))){if(c.splice(r,1),!(e=o.length&&me(c)))return R.apply(n,o),n;break}}return(h||a(e,p))(o,t,!g,n,!t||Q.test(e)&&be(t.parentNode)||t),n},n.sortStable=S.split("").sort(k).join("")===S,n.detectDuplicates=!!d,h(),n.sortDetached=le((function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))})),le((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||ue("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&le((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||ue("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),le((function(e){return null==e.getAttribute("disabled")}))||ue(D,(function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null})),se}(n);S.find=w,(S.expr=w.selectors)[":"]=S.expr.pseudos,S.uniqueSort=S.unique=w.uniqueSort,S.text=w.getText,S.isXMLDoc=w.isXML,S.contains=w.contains,S.escapeSelector=w.escape;var k=function(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&S(e).is(n))break;i.push(e)}return i},_=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},T=S.expr.match.needsContext;function E(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var I=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,R=/^.[^:#\[\.,]*$/;function N(e,t,n){return S.isFunction(t)?S.grep(e,(function(e,i){return!!t.call(e,i,e)!==n})):t.nodeType?S.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?S.grep(e,(function(e){return d.call(t,e)>-1!==n})):R.test(t)?S.filter(t,e,n):(t=S.filter(t,e),S.grep(e,(function(e){return d.call(t,e)>-1!==n&&1===e.nodeType})))}S.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?S.find.matchesSelector(i,e)?[i]:[]:S.find.matches(e,S.grep(t,(function(e){return 1===e.nodeType})))},S.fn.extend({find:function(e){var t,n,i=this.length,o=this;if("string"!=typeof e)return this.pushStack(S(e).filter((function(){for(t=0;t<i;t++)if(S.contains(o[t],this))return!0})));for(n=this.pushStack([]),t=0;t<i;t++)S.find(e,o[t],n);return i>1?S.uniqueSort(n):n},filter:function(e){return this.pushStack(N(this,e||[],!1))},not:function(e){return this.pushStack(N(this,e||[],!0))},is:function(e){return!!N(this,"string"==typeof e&&T.test(e)?S(e):e||[],!1).length}});var A,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||A,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:D.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(S.merge(this,S.parseHTML(i[1],(t=t instanceof S?t[0]:t)&&t.nodeType?t.ownerDocument||t:s,!0)),I.test(i[1])&&S.isPlainObject(t))for(i in t)S.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(o=s.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):S.isFunction(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,A=S(s);var L=/^(?:parents|prev(?:Until|All))/,F={children:!0,contents:!0,next:!0,prev:!0};function j(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0}))},closest:function(e,t){var n,i=0,o=this.length,r=[],s="string"!=typeof e&&S(e);if(!T.test(e))for(;i<o;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&S.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(r.length>1?S.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?d.call(S(e),this[0]):d.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,n){return k(e,"parentNode",n)},next:function(e){return j(e,"nextSibling")},prev:function(e){return j(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,n){return k(e,"nextSibling",n)},prevUntil:function(e,t,n){return k(e,"previousSibling",n)},siblings:function(e){return _((e.parentNode||{}).firstChild,e)},children:function(e){return _(e.firstChild)},contents:function(e){return E(e,"iframe")?e.contentDocument:(E(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},(function(e,t){S.fn[e]=function(n,i){var o=S.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=S.filter(i,o)),this.length>1&&(F[e]||S.uniqueSort(o),L.test(e)&&o.reverse()),this.pushStack(o)}}));var z=/[^\x20\t\r\n\f]+/g;function V(e){return e}function B(e){throw e}function W(e,t,n,i){var o;try{e&&S.isFunction(o=e.promise)?o.call(e).done(t).fail(n):e&&S.isFunction(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return S.each(e.match(z)||[],(function(e,n){t[n]=!0})),t}(e):S.extend({},e);var t,n,i,o,r=[],s=[],a=-1,c=function(){for(o=o||e.once,i=t=!0;s.length;a=-1)for(n=s.shift();++a<r.length;)!1===r[a].apply(n[0],n[1])&&e.stopOnFalse&&(a=r.length,n=!1);e.memory||(n=!1),t=!1,o&&(r=n?[]:"")},l={add:function(){return r&&(n&&!t&&(a=r.length-1,s.push(n)),function t(n){S.each(n,(function(n,i){S.isFunction(i)?e.unique&&l.has(i)||r.push(i):i&&i.length&&"string"!==S.type(i)&&t(i)}))}(arguments),n&&!t&&c()),this},remove:function(){return S.each(arguments,(function(e,t){for(var n;(n=S.inArray(t,r,n))>-1;)r.splice(n,1),n<=a&&a--})),this},has:function(e){return e?S.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=s=[],r=n="",this},disabled:function(){return!r},lock:function(){return o=s=[],n||t||(r=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=[e,(n=n||[]).slice?n.slice():n],s.push(n),t||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!i}};return l},S.extend({Deferred:function(e){var t=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return S.Deferred((function(n){S.each(t,(function(t,i){var o=S.isFunction(e[i[4]])&&e[i[4]];r[i[1]]((function(){var e=o&&o.apply(this,arguments);e&&S.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,o?[e]:arguments)}))})),e=null})).promise()},then:function(e,i,o){var r=0;function s(e,t,i,o){return function(){var a=this,c=arguments,l=function(){var n,l;if(!(e<r)){if((n=i.apply(a,c))===t.promise())throw new TypeError("Thenable self-resolution");S.isFunction(l=n&&("object"==typeof n||"function"==typeof n)&&n.then)?o?l.call(n,s(r,t,V,o),s(r,t,B,o)):(r++,l.call(n,s(r,t,V,o),s(r,t,B,o),s(r,t,V,t.notifyWith))):(i!==V&&(a=void 0,c=[n]),(o||t.resolveWith)(a,c))}},u=o?l:function(){try{l()}catch(n){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(n,u.stackTrace),e+1>=r&&(i!==B&&(a=void 0,c=[n]),t.rejectWith(a,c))}};e?u():(S.Deferred.getStackHook&&(u.stackTrace=S.Deferred.getStackHook()),n.setTimeout(u))}}return S.Deferred((function(n){t[0][3].add(s(0,n,S.isFunction(o)?o:V,n.notifyWith)),t[1][3].add(s(0,n,S.isFunction(e)?e:V)),t[2][3].add(s(0,n,S.isFunction(i)?i:B))})).promise()},promise:function(e){return null!=e?S.extend(e,o):o}},r={};return S.each(t,(function(e,n){var s=n[2],a=n[5];o[n[1]]=s.add,a&&s.add((function(){i=a}),t[3-e][2].disable,t[0][2].lock),s.add(n[3].fire),r[n[0]]=function(){return r[n[0]+"With"](this===r?void 0:this,arguments),this},r[n[0]+"With"]=s.fireWith})),o.promise(r),e&&e.call(r,r),r},when:function(e){var t=arguments.length,n=t,i=Array(n),o=c.call(arguments),r=S.Deferred(),s=function(e){return function(n){i[e]=this,o[e]=arguments.length>1?c.call(arguments):n,--t||r.resolveWith(i,o)}};if(t<=1&&(W(e,r.done(s(n)).resolve,r.reject,!t),"pending"===r.state()||S.isFunction(o[n]&&o[n].then)))return r.then();for(;n--;)W(o[n],s(n),r.reject);return r.promise()}});var $=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&$.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){n.setTimeout((function(){throw e}))};var U=S.Deferred();function G(){s.removeEventListener("DOMContentLoaded",G),n.removeEventListener("load",G),S.ready()}S.fn.ready=function(e){return U.then(e).catch((function(e){S.readyException(e)})),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==e&&--S.readyWait>0||U.resolveWith(s,[S]))}}),S.ready.then=U.then,"complete"===s.readyState||"loading"!==s.readyState&&!s.documentElement.doScroll?n.setTimeout(S.ready):(s.addEventListener("DOMContentLoaded",G),n.addEventListener("load",G));var H=function e(t,n,i,o,r,s,a){var c=0,l=t.length,u=null==i;if("object"===S.type(i))for(c in r=!0,i)e(t,n,c,i[c],!0,s,a);else if(void 0!==o&&(r=!0,S.isFunction(o)||(a=!0),u&&(a?(n.call(t,o),n=null):(u=n,n=function(e,t,n){return u.call(S(e),n)})),n))for(;c<l;c++)n(t[c],i,a?o:o.call(t[c],c,n(t[c],i)));return r?t:u?n.call(t):l?n(t[0],i):s},q=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Z(){this.expando=S.expando+Z.uid++}Z.uid=1,Z.prototype={cache:function(e){var t=e[this.expando];return t||(t={},q(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,o=this.cache(e);if("string"==typeof t)o[S.camelCase(t)]=n;else for(i in t)o[S.camelCase(i)]=t[i];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][S.camelCase(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(S.camelCase):(t=S.camelCase(t))in i?[t]:t.match(z)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||S.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var X=new Z,Y=new Z,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function J(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(Q,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:K.test(e)?JSON.parse(e):e)}(n)}catch(a){}Y.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Y.hasData(e)||X.hasData(e)},data:function(e,t,n){return Y.access(e,t,n)},removeData:function(e,t){Y.remove(e,t)},_data:function(e,t,n){return X.access(e,t,n)},_removeData:function(e,t){X.remove(e,t)}}),S.fn.extend({data:function(e,t){var n,i,o,r=this[0],s=r&&r.attributes;if(void 0===e){if(this.length&&(o=Y.get(r),1===r.nodeType&&!X.get(r,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(i=s[n].name).indexOf("data-")&&(i=S.camelCase(i.slice(5)),J(r,i,o[i]));X.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each((function(){Y.set(this,e)})):H(this,(function(t){var n;if(r&&void 0===t){if(void 0!==(n=Y.get(r,e)))return n;if(void 0!==(n=J(r,e)))return n}else this.each((function(){Y.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){Y.remove(this,e)}))}}),S.extend({queue:function(e,t,n){var i;if(e)return i=X.get(e,t=(t||"fx")+"queue"),n&&(!i||Array.isArray(n)?i=X.access(e,t,S.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){var n=S.queue(e,t=t||"fx"),i=n.length,o=n.shift(),r=S._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,(function(){S.dequeue(e,t)}),r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return X.get(e,n)||X.access(e,n,{empty:S.Callbacks("once memory").add((function(){X.remove(e,[t+"queue",n])}))})}}),S.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?S.queue(this[0],e):void 0===t?this:this.each((function(){var n=S.queue(this,e,t);S._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&S.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){S.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=S.Deferred(),r=this,s=this.length,a=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=X.get(r[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),o.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],ie=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&S.contains(e.ownerDocument,e)&&"none"===S.css(e,"display")},oe=function(e,t,n,i){var o,r,s={};for(r in t)s[r]=e.style[r],e.style[r]=t[r];for(r in o=n.apply(e,i||[]),t)e.style[r]=s[r];return o};function re(e,t,n,i){var o,r=1,s=20,a=i?function(){return i.cur()}:function(){return S.css(e,t,"")},c=a(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),u=(S.cssNumber[t]||"px"!==l&&+c)&&te.exec(S.css(e,t));if(u&&u[3]!==l){l=l||u[3],n=n||[],u=+c||1;do{S.style(e,t,(u/=r=r||".5")+l)}while(r!==(r=a()/c)&&1!==r&&--s)}return n&&(u=+u||+c||0,o=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=u,i.end=o)),o}var se={};function ae(e){var t,n=e.ownerDocument,i=e.nodeName,o=se[i];return o||(t=n.body.appendChild(n.createElement(i)),o=S.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),se[i]=o,o)}function ce(e,t){for(var n,i,o=[],r=0,s=e.length;r<s;r++)(i=e[r]).style&&(n=i.style.display,t?("none"===n&&(o[r]=X.get(i,"display")||null,o[r]||(i.style.display="")),""===i.style.display&&ie(i)&&(o[r]=ae(i))):"none"!==n&&(o[r]="none",X.set(i,"display",n)));for(r=0;r<s;r++)null!=o[r]&&(e[r].style.display=o[r]);return e}S.fn.extend({show:function(){return ce(this,!0)},hide:function(){return ce(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ie(this)?S(this).show():S(this).hide()}))}});var le=/^(?:checkbox|radio)$/i,ue=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,de=/^$|\/(?:java|ecma)script/i,he={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function pe(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&E(e,t)?S.merge([e],n):n}function fe(e,t){for(var n=0,i=e.length;n<i;n++)X.set(e[n],"globalEval",!t||X.get(t[n],"globalEval"))}he.optgroup=he.option,he.tbody=he.tfoot=he.colgroup=he.caption=he.thead,he.th=he.td;var ge=/<|&#?\w+;/;function be(e,t,n,i,o){for(var r,s,a,c,l,u,d=t.createDocumentFragment(),h=[],p=0,f=e.length;p<f;p++)if((r=e[p])||0===r)if("object"===S.type(r))S.merge(h,r.nodeType?[r]:r);else if(ge.test(r)){for(s=s||d.appendChild(t.createElement("div")),a=(ue.exec(r)||["",""])[1].toLowerCase(),s.innerHTML=(c=he[a]||he._default)[1]+S.htmlPrefilter(r)+c[2],u=c[0];u--;)s=s.lastChild;S.merge(h,s.childNodes),(s=d.firstChild).textContent=""}else h.push(t.createTextNode(r));for(d.textContent="",p=0;r=h[p++];)if(i&&S.inArray(r,i)>-1)o&&o.push(r);else if(l=S.contains(r.ownerDocument,r),s=pe(d.appendChild(r),"script"),l&&fe(s),n)for(u=0;r=s[u++];)de.test(r.type||"")&&n.push(r);return d}!function(){var e=s.createDocumentFragment().appendChild(s.createElement("div")),t=s.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),v.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var ve=s.documentElement,me=/^key/,ye=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Se=/^([^.]*)(?:\.(.+)|)/;function Me(){return!0}function xe(){return!1}function Oe(){try{return s.activeElement}catch(n){}}function Pe(e,t,n,i,o,r){var s,a;if("object"==typeof t){for(a in"string"!=typeof n&&(i=i||n,n=void 0),t)Pe(e,a,n,i,t[a],r);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=xe;else if(!o)return e;return 1===r&&(s=o,(o=function(e){return S().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=S.guid++)),e.each((function(){S.event.add(this,t,o,i,n)}))}S.event={global:{},add:function(e,t,n,i,o){var r,s,a,c,l,u,d,h,p,f,g,b=X.get(e);if(b)for(n.handler&&(n=(r=n).handler,o=r.selector),o&&S.find.matchesSelector(ve,o),n.guid||(n.guid=S.guid++),(c=b.events)||(c=b.events={}),(s=b.handle)||(s=b.handle=function(t){return void 0!==S&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(z)||[""]).length;l--;)p=g=(a=Se.exec(t[l])||[])[1],f=(a[2]||"").split(".").sort(),p&&(d=S.event.special[p]||{},d=S.event.special[p=(o?d.delegateType:d.bindType)||p]||{},u=S.extend({type:p,origType:g,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&S.expr.match.needsContext.test(o),namespace:f.join(".")},r),(h=c[p])||((h=c[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,i,f,s)||e.addEventListener&&e.addEventListener(p,s)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,u):h.push(u),S.event.global[p]=!0)},remove:function(e,t,n,i,o){var r,s,a,c,l,u,d,h,p,f,g,b=X.hasData(e)&&X.get(e);if(b&&(c=b.events)){for(l=(t=(t||"").match(z)||[""]).length;l--;)if(p=g=(a=Se.exec(t[l])||[])[1],f=(a[2]||"").split(".").sort(),p){for(d=S.event.special[p]||{},h=c[p=(i?d.delegateType:d.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=h.length;r--;)u=h[r],!o&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(h.splice(r,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));s&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,f,b.handle)||S.removeEvent(e,p,b.handle),delete c[p])}else for(p in c)S.event.remove(e,p+t[l],n,i,!0);S.isEmptyObject(c)&&X.remove(e,"handle events")}},dispatch:function(e){var t,n,i,o,r,s,a=S.event.fix(e),c=new Array(arguments.length),l=(X.get(this,"events")||{})[a.type]||[],u=S.event.special[a.type]||{};for(c[0]=a,t=1;t<arguments.length;t++)c[t]=arguments[t];if(a.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,a)){for(s=S.event.handlers.call(this,a,l),t=0;(o=s[t++])&&!a.isPropagationStopped();)for(a.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(r.namespace)||(a.handleObj=r,a.data=r.data,void 0!==(i=((S.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,c))&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,a),a.result}},handlers:function(e,t){var n,i,o,r,s,a=[],c=t.delegateCount,l=e.target;if(c&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(r=[],s={},n=0;n<c;n++)void 0===s[o=(i=t[n]).selector+" "]&&(s[o]=i.needsContext?S(o,this).index(l)>-1:S.find(o,this,null,[l]).length),s[o]&&r.push(i);r.length&&a.push({elem:l,handlers:r})}return l=this,c<t.length&&a.push({elem:l,handlers:t.slice(c)}),a},addProp:function(e,t){Object.defineProperty(S.Event.prototype,e,{enumerable:!0,configurable:!0,get:S.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Oe()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Oe()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(le.test(this.type)&&this.click&&E(this,"input"))return this.click(),!1},_default:function(e){return E(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},(S.Event=function(e,t){return this instanceof S.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Me:xe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||S.now(),void(this[S.expando]=!0)):new S.Event(e,t)}).prototype={constructor:S.Event,isDefaultPrevented:xe,isPropagationStopped:xe,isImmediatePropagationStopped:xe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Me,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Me,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Me,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&me.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&ye.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){S.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,r=e.handleObj;return o&&(o===i||S.contains(i,o))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}})),S.fn.extend({on:function(e,t,n,i){return Pe(this,e,t,n,i)},one:function(e,t,n,i){return Pe(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,S(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=xe),this.each((function(){S.event.remove(this,e,n,t)}))}});var Ce=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,we=/<script|<style|<link/i,ke=/checked\s*(?:[^=]|=\s*.checked.)/i,_e=/^true\/(.*)/,Te=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ee(e,t){return E(e,"table")&&E(11!==t.nodeType?t:t.firstChild,"tr")&&S(">tbody",e)[0]||e}function Ie(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){var t=_e.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Ne(e,t){var n,i,o,r,s,a,c,l;if(1===t.nodeType){if(X.hasData(e)&&(r=X.access(e),s=X.set(t,r),l=r.events))for(o in delete s.handle,s.events={},l)for(n=0,i=l[o].length;n<i;n++)S.event.add(t,o,l[o][n]);Y.hasData(e)&&(a=Y.access(e),c=S.extend({},a),Y.set(t,c))}}function Ae(e,t){var n=t.nodeName.toLowerCase();"input"===n&&le.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function De(e,t,n,i){t=l.apply([],t);var o,r,s,a,c,u,d=0,h=e.length,p=h-1,f=t[0],g=S.isFunction(f);if(g||h>1&&"string"==typeof f&&!v.checkClone&&ke.test(f))return e.each((function(o){var r=e.eq(o);g&&(t[0]=f.call(this,o,r.html())),De(r,t,n,i)}));if(h&&(r=(o=be(t,e[0].ownerDocument,!1,e,i)).firstChild,1===o.childNodes.length&&(o=r),r||i)){for(a=(s=S.map(pe(o,"script"),Ie)).length;d<h;d++)c=o,d!==p&&(c=S.clone(c,!0,!0),a&&S.merge(s,pe(c,"script"))),n.call(e[d],c,d);if(a)for(u=s[s.length-1].ownerDocument,S.map(s,Re),d=0;d<a;d++)de.test((c=s[d]).type||"")&&!X.access(c,"globalEval")&&S.contains(u,c)&&(c.src?S._evalUrl&&S._evalUrl(c.src):m(c.textContent.replace(Te,""),u))}return e}function Le(e,t,n){for(var i,o=t?S.filter(t,e):e,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||S.cleanData(pe(i)),i.parentNode&&(n&&S.contains(i.ownerDocument,i)&&fe(pe(i,"script")),i.parentNode.removeChild(i));return e}S.extend({htmlPrefilter:function(e){return e.replace(Ce,"<$1></$2>")},clone:function(e,t,n){var i,o,r,s,a=e.cloneNode(!0),c=S.contains(e.ownerDocument,e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(s=pe(a),i=0,o=(r=pe(e)).length;i<o;i++)Ae(r[i],s[i]);if(t)if(n)for(r=r||pe(e),s=s||pe(a),i=0,o=r.length;i<o;i++)Ne(r[i],s[i]);else Ne(e,a);return(s=pe(a,"script")).length>0&&fe(s,!c&&pe(e,"script")),a},cleanData:function(e){for(var t,n,i,o=S.event.special,r=0;void 0!==(n=e[r]);r++)if(q(n)){if(t=n[X.expando]){if(t.events)for(i in t.events)o[i]?S.event.remove(n,i):S.removeEvent(n,i,t.handle);n[X.expando]=void 0}n[Y.expando]&&(n[Y.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Le(this,e,!0)},remove:function(e){return Le(this,e)},text:function(e){return H(this,(function(e){return void 0===e?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return De(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ee(this,e).appendChild(e)}))},prepend:function(){return De(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ee(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return De(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return De(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(pe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return S.clone(this,e,t)}))},html:function(e){return H(this,(function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!we.test(e)&&!he[(ue.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(pe(t,!1)),t.innerHTML=e);t=0}catch(a){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return De(this,arguments,(function(t){var n=this.parentNode;S.inArray(this,e)<0&&(S.cleanData(pe(this)),n&&n.replaceChild(t,this))}),e)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){S.fn[e]=function(e){for(var n,i=[],o=S(e),r=o.length-1,s=0;s<=r;s++)n=s===r?this:this.clone(!0),S(o[s])[t](n),u.apply(i,n.get());return this.pushStack(i)}}));var Fe=/^margin/,je=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),ze=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)};function Ve(e,t,n){var i,o,r,s,a=e.style;return(n=n||ze(e))&&(""!==(s=n.getPropertyValue(t)||n[t])||S.contains(e.ownerDocument,e)||(s=S.style(e,t)),!v.pixelMarginRight()&&je.test(s)&&Fe.test(t)&&(i=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=o,a.maxWidth=r)),void 0!==s?s+"":s}function Be(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}!function(){function e(){if(c){c.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",c.innerHTML="",ve.appendChild(a);var e=n.getComputedStyle(c);t="1%"!==e.top,r="2px"===e.marginLeft,i="4px"===e.width,c.style.marginRight="50%",o="4px"===e.marginRight,ve.removeChild(a),c=null}}var t,i,o,r,a=s.createElement("div"),c=s.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===c.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(c),S.extend(v,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return e(),i},pixelMarginRight:function(){return e(),o},reliableMarginLeft:function(){return e(),r}}))}();var We=/^(none|table(?!-c[ea]).+)/,$e=/^--/,Ue={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"},He=["Webkit","Moz","ms"],qe=s.createElement("div").style;function Ze(e){var t=S.cssProps[e];return t||(t=S.cssProps[e]=function(e){if(e in qe)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=He.length;n--;)if((e=He[n]+t)in qe)return e}(e)||e),t}function Xe(e,t,n){var i=te.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function Ye(e,t,n,i,o){var r,s=0;for(r=n===(i?"border":"content")?4:"width"===t?1:0;r<4;r+=2)"margin"===n&&(s+=S.css(e,n+ne[r],!0,o)),i?("content"===n&&(s-=S.css(e,"padding"+ne[r],!0,o)),"margin"!==n&&(s-=S.css(e,"border"+ne[r]+"Width",!0,o))):(s+=S.css(e,"padding"+ne[r],!0,o),"padding"!==n&&(s+=S.css(e,"border"+ne[r]+"Width",!0,o)));return s}function Ke(e,t,n){var i,o=ze(e),r=Ve(e,t,o),s="border-box"===S.css(e,"boxSizing",!1,o);return je.test(r)?r:(i=s&&(v.boxSizingReliable()||r===e.style[t]),(r=parseFloat(r)||0)+Ye(e,t,n||(s?"border":"content"),i,o)+"px")}function Qe(e,t,n,i,o){return new Qe.prototype.init(e,t,n,i,o)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ve(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,s,a=S.camelCase(t),c=$e.test(t),l=e.style;return c||(t=Ze(a)),s=S.cssHooks[t]||S.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(o=s.get(e,!1,i))?o:l[t]:("string"==(r=typeof n)&&(o=te.exec(n))&&o[1]&&(n=re(e,t,o),r="number"),void(null!=n&&n==n&&("number"===r&&(n+=o&&o[3]||(S.cssNumber[a]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(c?l.setProperty(t,n):l[t]=n))))}},css:function(e,t,n,i){var o,r,s,a=S.camelCase(t);return $e.test(t)||(t=Ze(a)),(s=S.cssHooks[t]||S.cssHooks[a])&&"get"in s&&(o=s.get(e,!0,n)),void 0===o&&(o=Ve(e,t,i)),"normal"===o&&t in Ge&&(o=Ge[t]),""===n||n?(r=parseFloat(o),!0===n||isFinite(r)?r||0:o):o}}),S.each(["height","width"],(function(e,t){S.cssHooks[t]={get:function(e,n,i){if(n)return!We.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ke(e,t,i):oe(e,Ue,(function(){return Ke(e,t,i)}))},set:function(e,n,i){var o,r=i&&ze(e),s=i&&Ye(e,t,i,"border-box"===S.css(e,"boxSizing",!1,r),r);return s&&(o=te.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=S.css(e,t)),Xe(0,n,s)}}})),S.cssHooks.marginLeft=Be(v.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ve(e,"marginLeft"))||e.getBoundingClientRect().left-oe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(e,t){S.cssHooks[e+t]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];i<4;i++)o[e+ne[i]+t]=r[i]||r[i-2]||r[0];return o}},Fe.test(e)||(S.cssHooks[e+t].set=Xe)})),S.fn.extend({css:function(e,t){return H(this,(function(e,t,n){var i,o,r={},s=0;if(Array.isArray(t)){for(i=ze(e),o=t.length;s<o;s++)r[t[s]]=S.css(e,t[s],!1,i);return r}return void 0!==n?S.style(e,t,n):S.css(e,t)}),e,t,arguments.length>1)}}),S.Tween=Qe,(Qe.prototype={constructor:Qe,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(S.cssNumber[n]?"":"px")},cur:function(){var e=Qe.propHooks[this.prop];return e&&e.get?e.get(this):Qe.propHooks._default.get(this)},run:function(e){var t,n=Qe.propHooks[this.prop];return this.pos=t=this.options.duration?S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Qe.propHooks._default.set(this),this}}).init.prototype=Qe.prototype,(Qe.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[S.cssProps[e.prop]]&&!S.cssHooks[e.prop]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Qe.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},(S.fx=Qe.prototype.init).step={};var Je,et,tt=/^(?:toggle|show|hide)$/,nt=/queueHooks$/;function it(){et&&(!1===s.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(it):n.setTimeout(it,S.fx.interval),S.fx.tick())}function ot(){return n.setTimeout((function(){Je=void 0})),Je=S.now()}function rt(e,t){var n,i=0,o={height:e};for(t=t?1:0;i<4;i+=2-t)o["margin"+(n=ne[i])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function st(e,t,n){for(var i,o=(at.tweeners[t]||[]).concat(at.tweeners["*"]),r=0,s=o.length;r<s;r++)if(i=o[r].call(n,t,e))return i}function at(e,t,n){var i,o,r=0,s=at.prefilters.length,a=S.Deferred().always((function(){delete c.elem})),c=function(){if(o)return!1;for(var t=Je||ot(),n=Math.max(0,l.startTime+l.duration-t),i=1-(n/l.duration||0),r=0,s=l.tweens.length;r<s;r++)l.tweens[r].run(i);return a.notifyWith(e,[l,i,n]),i<1&&s?n:(s||a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},n),originalProperties:t,originalOptions:n,startTime:Je||ot(),duration:n.duration,tweens:[],createTween:function(t,n){var i=S.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,i=t?l.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)l.tweens[n].run(1);return t?(a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l,t])):a.rejectWith(e,[l,t]),this}}),u=l.props;for(function(e,t){var n,i,o,r,s;for(n in e)if(o=t[i=S.camelCase(n)],r=e[n],Array.isArray(r)&&(o=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),(s=S.cssHooks[i])&&"expand"in s)for(n in r=s.expand(r),delete e[i],r)n in e||(e[n]=r[n],t[n]=o);else t[i]=o}(u,l.opts.specialEasing);r<s;r++)if(i=at.prefilters[r].call(l,e,u,l.opts))return S.isFunction(i.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=S.proxy(i.stop,i)),i;return S.map(u,st,l),S.isFunction(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(at,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return re(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){S.isFunction(e)?(t=e,e=["*"]):e=e.match(z);for(var n,i=0,o=e.length;i<o;i++)(at.tweeners[n=e[i]]=at.tweeners[n]||[]).unshift(t)},prefilters:[function(e,t,n){var i,o,r,s,a,c,l,u,d="width"in t||"height"in t,h=this,p={},f=e.style,g=e.nodeType&&ie(e),b=X.get(e,"fxshow");for(i in n.queue||(null==(s=S._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,h.always((function(){h.always((function(){s.unqueued--,S.queue(e,"fx").length||s.empty.fire()}))}))),t)if(tt.test(o=t[i])){if(delete t[i],r=r||"toggle"===o,o===(g?"hide":"show")){if("show"!==o||!b||void 0===b[i])continue;g=!0}p[i]=b&&b[i]||S.style(e,i)}if((c=!S.isEmptyObject(t))||!S.isEmptyObject(p))for(i in d&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(l=b&&b.display)&&(l=X.get(e,"display")),"none"===(u=S.css(e,"display"))&&(l?u=l:(ce([e],!0),l=e.style.display||l,u=S.css(e,"display"),ce([e]))),("inline"===u||"inline-block"===u&&null!=l)&&"none"===S.css(e,"float")&&(c||(h.done((function(){f.display=l})),null==l&&(l="none"===(u=f.display)?"":u)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always((function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}))),c=!1,p)c||(b?"hidden"in b&&(g=b.hidden):b=X.access(e,"fxshow",{display:l}),r&&(b.hidden=!g),g&&ce([e],!0),h.done((function(){for(i in g||ce([e]),X.remove(e,"fxshow"),p)S.style(e,i,p[i])}))),c=st(g?b[i]:0,i,h),i in b||(b[i]=c.start,g&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?at.prefilters.unshift(e):at.prefilters.push(e)}}),S.speed=function(e,t,n){var i=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||S.isFunction(e)&&e,duration:e,easing:n&&t||t&&!S.isFunction(t)&&t};return S.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration=i.duration in S.fx.speeds?S.fx.speeds[i.duration]:S.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){S.isFunction(i.old)&&i.old.call(this),i.queue&&S.dequeue(this,i.queue)},i},S.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ie).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=S.isEmptyObject(e),r=S.speed(t,n,i),s=function(){var t=at(this,S.extend({},e),r);(o||X.get(this,"finish"))&&t.stop(!0)};return s.finish=s,o||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,o=null!=e&&e+"queueHooks",r=S.timers,s=X.get(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&nt.test(o)&&i(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(n),t=!1,r.splice(o,1));!t&&n||S.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=X.get(this),i=n[e+"queue"],o=n[e+"queueHooks"],r=S.timers,s=i?i.length:0;for(n.finish=!0,S.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish}))}}),S.each(["toggle","show","hide"],(function(e,t){var n=S.fn[t];S.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(rt(t,!0),e,i,o)}})),S.each({slideDown:rt("show"),slideUp:rt("hide"),slideToggle:rt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){S.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}})),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(Je=S.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),Je=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){et||(et=!0,it())},S.fx.stop=function(){et=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(e,t){return e=S.fx&&S.fx.speeds[e]||e,this.queue(t=t||"fx",(function(t,i){var o=n.setTimeout(t,e);i.stop=function(){n.clearTimeout(o)}}))},function(){var e=s.createElement("input"),t=s.createElement("select").appendChild(s.createElement("option"));e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=t.selected,(e=s.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value}();var ct,lt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return H(this,S.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){S.removeAttr(this,e)}))}}),S.extend({attr:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?S.prop(e,t,n):(1===r&&S.isXMLDoc(e)||(o=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?ct:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:null==(i=S.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&E(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,o=t&&t.match(z);if(o&&1===e.nodeType)for(;n=o[i++];)e.removeAttribute(n)}}),ct={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=lt[t]||S.find.attr;lt[t]=function(e,t,i){var o,r,s=t.toLowerCase();return i||(r=lt[s],lt[s]=o,o=null!=n(e,t,i)?s:null,lt[s]=r),o}}));var ut=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ht(e){return(e.match(z)||[]).join(" ")}function pt(e){return e.getAttribute&&e.getAttribute("class")||""}S.fn.extend({prop:function(e,t){return H(this,S.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[S.propFix[e]||e]}))}}),S.extend({prop:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&S.isXMLDoc(e)||(o=S.propHooks[t=S.propFix[t]||t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):ut.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(S.propHooks.selected={get:function(e){return null},set:function(e){}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(e){var t,n,i,o,r,s,a,c=0;if(S.isFunction(e))return this.each((function(t){S(this).addClass(e.call(this,t,pt(this)))}));if("string"==typeof e&&e)for(t=e.match(z)||[];n=this[c++];)if(o=pt(n),i=1===n.nodeType&&" "+ht(o)+" "){for(s=0;r=t[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");o!==(a=ht(i))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,i,o,r,s,a,c=0;if(S.isFunction(e))return this.each((function(t){S(this).removeClass(e.call(this,t,pt(this)))}));if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(z)||[];n=this[c++];)if(o=pt(n),i=1===n.nodeType&&" "+ht(o)+" "){for(s=0;r=t[s++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");o!==(a=ht(i))&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):S.isFunction(e)?this.each((function(n){S(this).toggleClass(e.call(this,n,pt(this),t),t)})):this.each((function(){var t,i,o,r;if("string"===n)for(i=0,o=S(this),r=e.match(z)||[];t=r[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=pt(this))&&X.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":X.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+ht(pt(n))+" ").indexOf(t)>-1)return!0;return!1}});var ft=/\r/g;S.fn.extend({val:function(e){var t,n,i,o=this[0];return arguments.length?(i=S.isFunction(e),this.each((function(n){var o;1===this.nodeType&&(null==(o=i?e.call(this,n,S(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=S.map(o,(function(e){return null==e?"":e+""}))),(t=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))}))):o?(t=S.valHooks[o.type]||S.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(ft,""):null==n?"":n:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:ht(S.text(e))}},select:{get:function(e){var t,n,i,o=e.options,r=e.selectedIndex,s="select-one"===e.type,a=s?null:[],c=s?r+1:o.length;for(i=r<0?c:s?r:0;i<c;i++)if(((n=o[i]).selected||i===r)&&!n.disabled&&(!n.parentNode.disabled||!E(n.parentNode,"optgroup"))){if(t=S(n).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var n,i,o=e.options,r=S.makeArray(t),s=o.length;s--;)((i=o[s]).selected=S.inArray(S.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(e.selectedIndex=-1),r}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=S.inArray(S(e).val(),t)>-1}},v.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var gt=/^(?:focusinfocus|focusoutblur)$/;S.extend(S.event,{trigger:function(e,t,i,o){var r,a,c,l,u,d,h,p=[i||s],g=f.call(e,"type")?e.type:e,b=f.call(e,"namespace")?e.namespace.split("."):[];if(a=c=i=i||s,3!==i.nodeType&&8!==i.nodeType&&!gt.test(g+S.event.triggered)&&(g.indexOf(".")>-1&&(b=g.split("."),g=b.shift(),b.sort()),u=g.indexOf(":")<0&&"on"+g,(e=e[S.expando]?e:new S.Event(g,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=b.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:S.makeArray(t,[e]),h=S.event.special[g]||{},o||!h.trigger||!1!==h.trigger.apply(i,t))){if(!o&&!h.noBubble&&!S.isWindow(i)){for(gt.test((l=h.delegateType||g)+g)||(a=a.parentNode);a;a=a.parentNode)p.push(a),c=a;c===(i.ownerDocument||s)&&p.push(c.defaultView||c.parentWindow||n)}for(r=0;(a=p[r++])&&!e.isPropagationStopped();)e.type=r>1?l:h.bindType||g,(d=(X.get(a,"events")||{})[e.type]&&X.get(a,"handle"))&&d.apply(a,t),(d=u&&a[u])&&d.apply&&q(a)&&(e.result=d.apply(a,t),!1===e.result&&e.preventDefault());return e.type=g,o||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),t)||!q(i)||u&&S.isFunction(i[g])&&!S.isWindow(i)&&((c=i[u])&&(i[u]=null),S.event.triggered=g,i[g](),S.event.triggered=void 0,c&&(i[u]=c)),e.result}},simulate:function(e,t,n){var i=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(i,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each((function(){S.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){S.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}})),S.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.focusin="onfocusin"in n,v.focusin||S.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){S.event.simulate(t,e.target,S.event.fix(e))};S.event.special[t]={setup:function(){var i=this.ownerDocument||this,o=X.access(i,t);o||i.addEventListener(e,n,!0),X.access(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=X.access(i,t)-1;o?X.access(i,t,o):(i.removeEventListener(e,n,!0),X.remove(i,t))}}}));var bt=n.location,vt=S.now(),mt=/\?/;S.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(s){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+e),t};var yt=/\[\]$/,St=/\r?\n/g,Mt=/^(?:submit|button|image|reset|file)$/i,xt=/^(?:input|select|textarea|keygen)/i;function Ot(e,t,n,i){var o;if(Array.isArray(t))S.each(t,(function(t,o){n||yt.test(e)?i(e,o):Ot(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,i)}));else if(n||"object"!==S.type(t))i(e,t);else for(o in t)Ot(e+"["+o+"]",t[o],n,i)}S.param=function(e,t){var n,i=[],o=function(e,t){var n=S.isFunction(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,(function(){o(this.name,this.value)}));else for(n in e)Ot(n,e[n],t,o);return i.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&xt.test(this.nodeName)&&!Mt.test(e)&&(this.checked||!le.test(e))})).map((function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,(function(e){return{name:t.name,value:e.replace(St,"\r\n")}})):{name:t.name,value:n.replace(St,"\r\n")}})).get()}});var Pt=/%20/g,Ct=/#.*$/,wt=/([?&])_=[^&]*/,kt=/^(.*?):[ \t]*([^\r\n]*)$/gm,_t=/^(?:GET|HEAD)$/,Tt=/^\/\//,Et={},It={},Rt="*/".concat("*"),Nt=s.createElement("a");function At(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,r=t.toLowerCase().match(z)||[];if(S.isFunction(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function Dt(e,t,n,i){var o={},r=e===It;function s(a){var c;return o[a]=!0,S.each(e[a]||[],(function(e,a){var l=a(t,n,i);return"string"!=typeof l||r||o[l]?r?!(c=l):void 0:(t.dataTypes.unshift(l),s(l),!1)})),c}return s(t.dataTypes[0])||!o["*"]&&s("*")}function Lt(e,t){var n,i,o=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&S.extend(!0,e,i),e}Nt.href=bt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(bt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Lt(Lt(e,S.ajaxSettings),t):Lt(S.ajaxSettings,e)},ajaxPrefilter:At(Et),ajaxTransport:At(It),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var i,o,r,a,c,l,u,d,h,p,f=S.ajaxSetup({},t=t||{}),g=f.context||f,b=f.context&&(g.nodeType||g.jquery)?S(g):S.event,v=S.Deferred(),m=S.Callbacks("once memory"),y=f.statusCode||{},M={},x={},O="canceled",P={readyState:0,getResponseHeader:function(e){var t;if(u){if(!a)for(a={};t=kt.exec(r);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return u?r:null},setRequestHeader:function(e,t){return null==u&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,M[e]=t),this},overrideMimeType:function(e){return null==u&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)P.always(e[P.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||O;return i&&i.abort(t),C(0,t),this}};if(v.promise(P),f.url=((e||f.url||bt.href)+"").replace(Tt,bt.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(z)||[""],null==f.crossDomain){l=s.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=Nt.protocol+"//"+Nt.host!=l.protocol+"//"+l.host}catch(_){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=S.param(f.data,f.traditional)),Dt(Et,f,t,P),u)return P;for(h in(d=S.event&&f.global)&&0==S.active++&&S.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!_t.test(f.type),o=f.url.replace(Ct,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Pt,"+")):(p=f.url.slice(o.length),f.data&&(o+=(mt.test(o)?"&":"?")+f.data,delete f.data),!1===f.cache&&(o=o.replace(wt,"$1"),p=(mt.test(o)?"&":"?")+"_="+vt+++p),f.url=o+p),f.ifModified&&(S.lastModified[o]&&P.setRequestHeader("If-Modified-Since",S.lastModified[o]),S.etag[o]&&P.setRequestHeader("If-None-Match",S.etag[o])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&P.setRequestHeader("Content-Type",f.contentType),P.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Rt+"; q=0.01":""):f.accepts["*"]),f.headers)P.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(g,P,f)||u))return P.abort();if(O="abort",m.add(f.complete),P.done(f.success),P.fail(f.error),i=Dt(It,f,t,P)){if(P.readyState=1,d&&b.trigger("ajaxSend",[P,f]),u)return P;f.async&&f.timeout>0&&(c=n.setTimeout((function(){P.abort("timeout")}),f.timeout));try{u=!1,i.send(M,C)}catch(_){if(u)throw _;C(-1,_)}}else C(-1,"No Transport");function C(e,t,s,a){var l,h,p,M,x,O=t;u||(u=!0,c&&n.clearTimeout(c),i=void 0,r=a||"",P.readyState=e>0?4:0,l=e>=200&&e<300||304===e,s&&(M=function(e,t,n){for(var i,o,r,s,a=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in a)if(a[o]&&a[o].test(i)){c.unshift(o);break}if(c[0]in n)r=c[0];else{for(o in n){if(!c[0]||e.converters[o+" "+c[0]]){r=o;break}s||(s=o)}r=r||s}if(r)return r!==c[0]&&c.unshift(r),n[r]}(f,P,s)),M=function(e,t,n,i){var o,r,s,a,c,l={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(r=u.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!c&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=r,r=u.shift())if("*"===r)r=c;else if("*"!==c&&c!==r){if(!(s=l[c+" "+r]||l["* "+r]))for(o in l)if((a=o.split(" "))[1]===r&&(s=l[c+" "+a[0]]||l["* "+a[0]])){!0===s?s=l[o]:!0!==l[o]&&(r=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(d){return{state:"parsererror",error:s?d:"No conversion from "+c+" to "+r}}}return{state:"success",data:t}}(f,M,P,l),l?(f.ifModified&&((x=P.getResponseHeader("Last-Modified"))&&(S.lastModified[o]=x),(x=P.getResponseHeader("etag"))&&(S.etag[o]=x)),204===e||"HEAD"===f.type?O="nocontent":304===e?O="notmodified":(O=M.state,h=M.data,l=!(p=M.error))):(p=O,!e&&O||(O="error",e<0&&(e=0))),P.status=e,P.statusText=(t||O)+"",l?v.resolveWith(g,[h,O,P]):v.rejectWith(g,[P,O,p]),P.statusCode(y),y=void 0,d&&b.trigger(l?"ajaxSuccess":"ajaxError",[P,f,l?h:p]),m.fireWith(g,[P,O]),d&&(b.trigger("ajaxComplete",[P,f]),--S.active||S.event.trigger("ajaxStop")))}return P},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],(function(e,t){S[t]=function(e,n,i,o){return S.isFunction(n)&&(o=o||i,i=n,n=void 0),S.ajax(S.extend({url:e,type:t,dataType:o,data:n,success:i},S.isPlainObject(e)&&e))}})),S._evalUrl=function(e){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(S.isFunction(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return S.isFunction(e)?this.each((function(t){S(this).wrapInner(e.call(this,t))})):this.each((function(){var t=S(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=S.isFunction(e);return this.each((function(n){S(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(o){}};var Ft={0:200,1223:204},jt=S.ajaxSettings.xhr();v.cors=!!jt&&"withCredentials"in jt,v.ajax=jt=!!jt,S.ajaxTransport((function(e){var t,i;if(v.cors||jt&&!e.crossDomain)return{send:function(o,r){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];for(s in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)a.setRequestHeader(s,o[s]);t=function(e){return function(){t&&(t=i=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(Ft[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),i=a.onerror=t("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&n.setTimeout((function(){t&&i()}))},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(d){if(t)throw d}},abort:function(){t&&t()}}})),S.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),S.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain)return{send:function(i,o){t=S("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),s.head.appendChild(t[0])},abort:function(){n&&n()}}}));var zt=[],Vt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zt.pop()||S.expando+"_"+vt++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",(function(e,t,i){var o,r,s,a=!1!==e.jsonp&&(Vt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=S.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Vt,"$1"+o):!1!==e.jsonp&&(e.url+=(mt.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return s||S.error(o+" was not called"),s[0]},e.dataTypes[0]="json",r=n[o],n[o]=function(){s=arguments},i.always((function(){void 0===r?S(n).removeProp(o):n[o]=r,e[o]&&(e.jsonpCallback=t.jsonpCallback,zt.push(o)),s&&S.isFunction(r)&&r(s[0]),s=r=void 0})),"script"})),v.createHTMLDocument=function(){var e=s.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((i=(t=s.implementation.createHTMLDocument("")).createElement("base")).href=s.location.href,t.head.appendChild(i)):t=s),r=!n&&[],(o=I.exec(e))?[t.createElement(o[1])]:(o=be([e],t,r),r&&r.length&&S(r).remove(),S.merge([],o.childNodes)));var i,o,r},S.fn.load=function(e,t,n){var i,o,r,s=this,a=e.indexOf(" ");return a>-1&&(i=ht(e.slice(a)),e=e.slice(0,a)),S.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),s.length>0&&S.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done((function(e){r=arguments,s.html(i?S("<div>").append(S.parseHTML(e)).find(i):e)})).always(n&&function(e,t){s.each((function(){n.apply(this,r||[e.responseText,t,e])}))}),this},S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){S.fn[t]=function(e){return this.on(t,e)}})),S.expr.pseudos.animated=function(e){return S.grep(S.timers,(function(t){return e===t.elem})).length},S.offset={setOffset:function(e,t,n){var i,o,r,s,a,c,l=S.css(e,"position"),u=S(e),d={};"static"===l&&(e.style.position="relative"),a=u.offset(),r=S.css(e,"top"),c=S.css(e,"left"),("absolute"===l||"fixed"===l)&&(r+c).indexOf("auto")>-1?(s=(i=u.position()).top,o=i.left):(s=parseFloat(r)||0,o=parseFloat(c)||0),S.isFunction(t)&&(t=t.call(e,n,S.extend({},a))),null!=t.top&&(d.top=t.top-a.top+s),null!=t.left&&(d.left=t.left-a.left+o),"using"in t?t.using.call(e,d):u.css(d)}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){S.offset.setOffset(this,e,t)}));var t,n,i,o,r=this[0];return r?r.getClientRects().length?{top:(i=r.getBoundingClientRect()).top+(o=(t=r.ownerDocument).defaultView).pageYOffset-(n=t.documentElement).clientTop,left:i.left+o.pageXOffset-n.clientLeft}:{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===S.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),E(e[0],"html")||(i=e.offset()),i={top:i.top+S.css(e[0],"borderTopWidth",!0),left:i.left+S.css(e[0],"borderLeftWidth",!0)}),{top:t.top-i.top-S.css(n,"marginTop",!0),left:t.left-i.left-S.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||ve}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;S.fn[e]=function(i){return H(this,(function(e,i,o){var r;return S.isWindow(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===o?r?r[t]:e[i]:void(r?r.scrollTo(n?r.pageXOffset:o,n?o:r.pageYOffset):e[i]=o)}),e,i,arguments.length)}})),S.each(["top","left"],(function(e,t){S.cssHooks[t]=Be(v.pixelPosition,(function(e,n){if(n)return n=Ve(e,t),je.test(n)?S(e).position()[t]+"px":n}))})),S.each({Height:"height",Width:"width"},(function(e,t){S.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,i){S.fn[i]=function(o,r){var s=arguments.length&&(n||"boolean"!=typeof o),a=n||(!0===o||!0===r?"margin":"border");return H(this,(function(t,n,o){var r;return S.isWindow(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===o?S.css(t,n,a):S.style(t,n,o,a)}),t,s?o:void 0,s)}}))})),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},holdReady:function(e){e?S.readyWait++:S.ready(!0)}}),S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=E,void 0===(i=(function(){return S}).apply(t,[]))||(e.exports=i);var Bt=n.jQuery,Wt=n.$;return S.noConflict=function(e){return n.$===S&&(n.$=Wt),e&&n.jQuery===S&&(n.jQuery=Bt),S},o||(n.jQuery=n.$=S),S})),jQuery=e.exports,function(e){function t(e,t,n){if(!n[0]||"object"==typeof n[0])return t.init.apply(e,n);if(t[n[0]])return t[n[0]].apply(e,Array.prototype.slice.call(n,1));throw d(n[0]+" is not a method or property")}function n(e,t,n,i){return{css:{position:"absolute",top:e,left:t,overflow:i||"hidden",zIndex:n||"auto"}}}function i(e,t,n,i,r){var s=1-r,a=s*s*s,c=r*r*r;return o(Math.round(a*e.x+3*r*s*s*t.x+3*r*r*s*n.x+c*i.x),Math.round(a*e.y+3*r*s*s*t.y+3*r*r*s*n.y+c*i.y))}function o(e,t){return{x:e,y:t}}function r(e,t,n){return p&&n?" translate3d("+e+"px,"+t+"px, 0px) ":" translate("+e+"px, "+t+"px) "}function s(e){return" rotate("+e+"deg) "}function a(e,t){return Object.prototype.hasOwnProperty.call(t,e)}function c(){for(var e=["Moz","Webkit","Khtml","O","ms"],t=e.length,n="";t--;)e[t]+"Transform"in document.body.style&&(n="-"+e[t].toLowerCase()+"-");return n}function l(e,t,n,i,r){var s,a=[];if("-webkit-"==g){for(s=0;s<r;s++)a.push("color-stop("+i[s][0]+", "+i[s][1]+")");e.css({"background-image":"-webkit-gradient(linear, "+t.x+"% "+t.y+"%,"+n.x+"% "+n.y+"%, "+a.join(",")+" )"})}else{t={x:t.x/100*e.width(),y:t.y/100*e.height()};var c=(n={x:n.x/100*e.width(),y:n.y/100*e.height()}).x-t.x;s=n.y-t.y;var l=Math.atan2(s,c),u=l-Math.PI/2,d=(u=Math.abs(e.width()*Math.sin(u))+Math.abs(e.height()*Math.cos(u)),c=Math.sqrt(s*s+c*c),n=o(n.x<t.x?e.width():0,n.y<t.y?e.height():0),Math.tan(l));for(n=(s=-1/d)*(d=(s*n.x-n.y-d*t.x+t.y)/(s-d))-s*n.x+n.y,t=Math.sqrt(Math.pow(d-t.x,2)+Math.pow(n-t.y,2)),s=0;s<r;s++)a.push(" "+i[s][1]+" "+100*(t+c*i[s][0])/u+"%");e.css({"background-image":g+"linear-gradient("+-l+"rad,"+a.join(",")+")"})}}function u(t,n,i){return t=e.Event(t),n.trigger(t,i),t.isDefaultPrevented()?"prevented":t.isPropagationStopped()?"stopped":""}function d(e){function t(e){this.name="TurnJsError",this.message=e}return(t.prototype=Error()).constructor=t,new t(e)}function h(e){var t={top:0,left:0};do{t.left+=e.offsetLeft,t.top+=e.offsetTop}while(e=e.offsetParent);return t}var p,f,g="",b=Math.PI,v=b/2,m="ontouchstart"in window,y=m?{down:"touchstart",move:"touchmove",up:"touchend",over:"touchstart",out:"touchend"}:{down:"mousedown",move:"mousemove",up:"mouseup",over:"mouseover",out:"mouseout"},S={backward:["bl","tl"],forward:["br","tr"],all:"tl bl tr br l r".split(" ")},M=["single","double"],x=["ltr","rtl"],O={acceleration:!0,display:"double",duration:600,page:1,gradients:!0,turnCorners:"bl,br",when:null},P={cornerSize:100},C={init:function(t){var n,i;p="WebKitCSSMatrix"in window||"MozPerspective"in document.body.style,f=!(n=/AppleWebkit\/([0-9\.]+)/i.exec(navigator.userAgent))||534.3<parseFloat(n[1]),g=c(),n=0;var o=this.data(),s=this.children();if(t=e.extend({width:this.width(),height:this.height(),direction:this.attr("dir")||this.css("direction")||"ltr"},O,t),o.opts=t,o.pageObjs={},o.pages={},o.pageWrap={},o.pageZoom={},o.pagePlace={},o.pageMv=[],o.zoom=1,o.totalPages=t.pages||0,o.eventHandlers={touchStart:e.proxy(C._touchStart,this),touchMove:e.proxy(C._touchMove,this),touchEnd:e.proxy(C._touchEnd,this),start:e.proxy(C._eventStart,this)},t.when)for(i in t.when)a(i,t.when)&&this.bind(i,t.when[i]);for(this.css({position:"relative",width:t.width,height:t.height}),this.turn("display",t.display),""!==t.direction&&this.turn("direction",t.direction),p&&!m&&t.acceleration&&this.transform(r(0,0,!0)),i=0;i<s.length;i++)"1"!=e(s[i]).attr("ignore")&&this.turn("addPage",s[i],++n);return e(this).bind(y.down,o.eventHandlers.touchStart).bind("end",C._eventEnd).bind("pressed",C._eventPressed).bind("released",C._eventReleased).bind("flip",C._flip),e(this).parent().bind("start",o.eventHandlers.start),e(document).bind(y.move,o.eventHandlers.touchMove).bind(y.up,o.eventHandlers.touchEnd),this.turn("page",t.page),o.done=!0,this},addPage:function(t,n){var i,o=!1,r=this.data(),s=r.totalPages+1;if(r.destroying)return!1;if((i=/\bp([0-9]+)\b/.exec(e(t).attr("class")))&&(n=parseInt(i[1],10)),n){if(n==s)o=!0;else if(n>s)throw d('Page "'+n+'" cannot be inserted')}else n=s,o=!0;return 1<=n&&n<=s&&(i="double"==r.display?n%2?" odd":" even":"",r.done&&this.turn("stop"),n in r.pageObjs&&C._movePages.call(this,n,1),o&&(r.totalPages=s),r.pageObjs[n]=e(t).css({float:"left"}).addClass("page p"+n+i),-1!=navigator.userAgent.indexOf("MSIE 9.0")&&r.pageObjs[n].hasClass("hard")&&r.pageObjs[n].removeClass("hard"),C._addPage.call(this,n),C._removeFromDOM.call(this)),this},_addPage:function(t){var n=this.data(),i=n.pageObjs[t];if(i)if(C._necessPage.call(this,t)){if(!n.pageWrap[t]){n.pageWrap[t]=e("<div/>",{class:"page-wrapper",page:t,css:{position:"absolute",overflow:"hidden"}}),this.append(n.pageWrap[t]),n.pagePlace[t]||(n.pagePlace[t]=t,n.pageObjs[t].appendTo(n.pageWrap[t]));var o=C._pageSize.call(this,t,!0);i.css({width:o.width,height:o.height}),n.pageWrap[t].css(o)}n.pagePlace[t]==t&&C._makeFlip.call(this,t)}else n.pagePlace[t]=0,n.pageObjs[t]&&n.pageObjs[t].remove()},hasPage:function(e){return a(e,this.data().pageObjs)},center:function(t){var n=this.data(),i=e(this).turn("size"),o=0;return n.noCenter||("double"==n.display&&(t=this.turn("view",t||n.tpage||n.page),"ltr"==n.direction?t[0]?t[1]||(o+=i.width/4):o-=i.width/4:t[0]?t[1]||(o-=i.width/4):o+=i.width/4),e(this).css({marginLeft:o})),this},destroy:function(){var t=this,n=this.data(),i="end first flip last pressed released start turning turned zooming missing".split(" ");if("prevented"!=u("destroying",this)){for(n.destroying=!0,e.each(i,(function(e,n){t.unbind(n)})),this.parent().unbind("start",n.eventHandlers.start),e(document).unbind(y.move,n.eventHandlers.touchMove).unbind(y.up,n.eventHandlers.touchEnd);0!==n.totalPages;)this.turn("removePage",n.totalPages);return n.fparent&&n.fparent.remove(),n.shadow&&n.shadow.remove(),this.removeData(),n=null,this}},is:function(){return"object"==typeof this.data().pages},zoom:function(t){var n=this.data();if("number"==typeof t){if(.001>t||100<t)throw d(t+" is not a value for zoom");if("prevented"==u("zooming",this,[t,n.zoom]))return this;var i=this.turn("size"),o=this.turn("view"),r=1/n.zoom,s=Math.round(i.width*r*t);for(i=Math.round(i.height*r*t),n.zoom=t,e(this).turn("stop").turn("size",s,i),n.opts.autoCenter&&this.turn("center"),C._updateShadow.call(this),t=0;t<o.length;t++)o[t]&&n.pageZoom[o[t]]!=n.zoom&&(this.trigger("zoomed",[o[t],o,n.pageZoom[o[t]],n.zoom]),n.pageZoom[o[t]]=n.zoom);return this}return n.zoom},_pageSize:function(e,t){var n=this.data(),i={};if("single"==n.display)i.width=this.width(),i.height=this.height(),t&&(i.top=0,i.left=0,i.right="auto");else{var o=this.width()/2,r=this.height();if(n.pageObjs[e].hasClass("own-size")?(i.width=n.pageObjs[e].width(),i.height=n.pageObjs[e].height()):(i.width=o,i.height=r),t){var s=e%2;i.top=(r-i.height)/2,"ltr"==n.direction?(i[s?"right":"left"]=o-i.width,i[s?"left":"right"]="auto"):(i[s?"left":"right"]=o-i.width,i[s?"right":"left"]="auto")}}return i},_makeFlip:function(e){var t=this.data();if(!t.pages[e]&&t.pagePlace[e]==e){var n="single"==t.display,i=e%2;t.pages[e]=t.pageObjs[e].css(C._pageSize.call(this,e)).flip({page:e,next:i||n?e+1:e-1,turn:this}).flip("disable",t.disabled),C._setPageLoc.call(this,e),t.pageZoom[e]=t.zoom}return t.pages[e]},_makeRange:function(){var e,t;if(!(1>this.data().totalPages))for(e=(t=this.turn("range"))[0];e<=t[1];e++)C._addPage.call(this,e)},range:function(e){var t,n,i,o=this.data();if(i=C._view.call(this,e=e||o.tpage||o.page||1),1>e||e>o.totalPages)throw d('"'+e+'" is not a valid page');return i[1]=i[1]||i[0],1<=i[0]&&i[1]<=o.totalPages?(e=Math.floor(2),o.totalPages-i[1]>i[0]?n=2*e-(t=Math.min(i[0]-1,e)):t=2*e-(n=Math.min(o.totalPages-i[1],e))):n=t=5,[Math.max(1,i[0]-t),Math.min(o.totalPages,i[1]+n)]},_necessPage:function(e){if(0===e)return!0;var t=this.turn("range");return this.data().pageObjs[e].hasClass("fixed")||e>=t[0]&&e<=t[1]},_removeFromDOM:function(){var e,t=this.data();for(e in t.pageWrap)a(e,t.pageWrap)&&!C._necessPage.call(this,e)&&C._removePageFromDOM.call(this,e)},_removePageFromDOM:function(e){var t=this.data();if(t.pages[e]){var n=t.pages[e].data();w._moveFoldingPage.call(t.pages[e],!1),n.f&&n.f.fwrapper&&n.f.fwrapper.remove(),t.pages[e].removeData(),t.pages[e].remove(),delete t.pages[e]}t.pageObjs[e]&&t.pageObjs[e].remove(),t.pageWrap[e]&&(t.pageWrap[e].remove(),delete t.pageWrap[e]),C._removeMv.call(this,e),delete t.pagePlace[e],delete t.pageZoom[e]},removePage:function(e){var t=this.data();if("*"==e)for(;0!==t.totalPages;)this.turn("removePage",t.totalPages);else{if(1>e||e>t.totalPages)throw d("The page "+e+" doesn't exist");t.pageObjs[e]&&(this.turn("stop"),C._removePageFromDOM.call(this,e),delete t.pageObjs[e]),C._movePages.call(this,e,-1),t.totalPages-=1,t.page>t.totalPages?(t.page=null,C._fitPage.call(this,t.totalPages)):(C._makeRange.call(this),this.turn("update"))}return this},_movePages:function(e,t){var n,i=this,o=this.data(),r="single"==o.display,s=function(e){var n=e+t,s=n%2,a=s?" odd ":" even ";o.pageObjs[e]&&(o.pageObjs[n]=o.pageObjs[e].removeClass("p"+e+" odd even").addClass("p"+n+a)),o.pagePlace[e]&&o.pageWrap[e]&&(o.pagePlace[n]=n,o.pageWrap[n]=o.pageObjs[n].hasClass("fixed")?o.pageWrap[e].attr("page",n):o.pageWrap[e].css(C._pageSize.call(i,n,!0)).attr("page",n),o.pages[e]&&(o.pages[n]=o.pages[e].flip("options",{page:n,next:r||s?n+1:n-1})),t&&(delete o.pages[e],delete o.pagePlace[e],delete o.pageZoom[e],delete o.pageObjs[e],delete o.pageWrap[e]))};if(0<t)for(n=o.totalPages;n>=e;n--)s(n);else for(n=e;n<=o.totalPages;n++)s(n)},display:function(t){var n=this.data(),i=n.display;if(void 0===t)return i;if(-1==e.inArray(t,M))throw d('"'+t+'" is not a value for display');switch(t){case"single":n.pageObjs[0]||(this.turn("stop").css({overflow:"hidden"}),n.pageObjs[0]=e("<div />",{class:"page p-temporal"}).css({width:this.width(),height:this.height()}).appendTo(this)),this.addClass("shadow");break;case"double":n.pageObjs[0]&&(this.turn("stop").css({overflow:""}),n.pageObjs[0].remove(),delete n.pageObjs[0]),this.removeClass("shadow")}return n.display=t,i&&(t=this.turn("size"),C._movePages.call(this,1,0),this.turn("size",t.width,t.height).turn("update")),this},direction:function(t){var n=this.data();if(void 0===t)return n.direction;if(t=t.toLowerCase(),-1==e.inArray(t,x))throw d('"'+t+'" is not a value for direction');return"rtl"==t&&e(this).attr("dir","ltr").css({direction:"ltr"}),n.direction=t,n.done&&this.turn("size",e(this).width(),e(this).height()),this},animating:function(){return 0<this.data().pageMv.length},corner:function(){var e,t,n=this.data();for(t in n.pages)if(a(t,n.pages)&&(e=n.pages[t].flip("corner")))return e;return!1},data:function(){return this.data()},disable:function(t){var n,i=this.data(),o=this.turn("view");for(n in i.disabled=void 0===t||!0===t,i.pages)a(n,i.pages)&&i.pages[n].flip("disable",!!i.disabled||-1==e.inArray(parseInt(n,10),o));return this},disabled:function(e){return void 0===e?!0===this.data().disabled:this.turn("disable",e)},size:function(e,t){if(void 0===e||void 0===t)return{width:this.width(),height:this.height()};this.turn("stop");var n,i,o=this.data();for(n in i="double"==o.display?e/2:e,this.css({width:e,height:t}),o.pageObjs[0]&&o.pageObjs[0].css({width:i,height:t}),o.pageWrap)a(n,o.pageWrap)&&(i=C._pageSize.call(this,n,!0),o.pageObjs[n].css({width:i.width,height:i.height}),o.pageWrap[n].css(i),o.pages[n]&&o.pages[n].css({width:i.width,height:i.height}));return this.turn("resize"),this},resize:function(){var e,t=this.data();for(t.pages[0]&&(t.pageWrap[0].css({left:-this.width()}),t.pages[0].flip("resize",!0)),e=1;e<=t.totalPages;e++)t.pages[e]&&t.pages[e].flip("resize",!0);C._updateShadow.call(this),t.opts.autoCenter&&this.turn("center")},_removeMv:function(e){var t,n=this.data();for(t=0;t<n.pageMv.length;t++)if(n.pageMv[t]==e)return n.pageMv.splice(t,1),!0;return!1},_addMv:function(e){var t=this.data();C._removeMv.call(this,e),t.pageMv.push(e)},_view:function(e){var t=this.data();return e=e||t.page,"double"==t.display?e%2?[e-1,e]:[e,e+1]:[e]},view:function(e){var t=this.data();return e=C._view.call(this,e),"double"==t.display?[0<e[0]?e[0]:0,e[1]<=t.totalPages?e[1]:0]:[0<e[0]&&e[0]<=t.totalPages?e[0]:0]},stop:function(e,t){if(this.turn("animating")){var n,i,o,r=this.data();for(r.tpage&&(r.page=r.tpage,delete r.tpage),n=0;n<r.pageMv.length;n++)r.pageMv[n]&&r.pageMv[n]!==e&&(i=(o=r.pages[r.pageMv[n]]).data().f.opts,o.flip("hideFoldedPage",t),t||w._moveFoldingPage.call(o,!1),i.force&&(i.next=0==i.page%2?i.page-1:i.page+1,delete i.force))}return this.turn("update"),this},pages:function(e){var t=this.data();if(e){if(e<t.totalPages)for(var n=t.totalPages;n>e;n--)this.turn("removePage",n);return t.totalPages=e,C._fitPage.call(this,t.page),this}return t.totalPages},_missing:function(e){var t=this.data();if(!(1>t.totalPages)){var n=this.turn("range",e),i=[];for(e=n[0];e<=n[1];e++)t.pageObjs[e]||i.push(e);0<i.length&&this.trigger("missing",[i])}},_fitPage:function(e){var t=this.data(),n=this.turn("view",e);if(C._missing.call(this,e),t.pageObjs[e]){t.page=e,this.turn("stop");for(var i=0;i<n.length;i++)n[i]&&t.pageZoom[n[i]]!=t.zoom&&(this.trigger("zoomed",[n[i],n,t.pageZoom[n[i]],t.zoom]),t.pageZoom[n[i]]=t.zoom);C._removeFromDOM.call(this),C._makeRange.call(this),C._updateShadow.call(this),this.trigger("turned",[e,n]),this.turn("update"),t.opts.autoCenter&&this.turn("center")}},_turnPage:function(t){var n,i,o=this.data(),r=o.pagePlace[t],s=this.turn("view"),a=this.turn("view",t);if(o.page!=t){var c=o.page;if("prevented"==u("turning",this,[t,a]))return void(c==o.page&&-1!=e.inArray(r,o.pageMv)&&o.pages[r].flip("hideFoldedPage",!0));-1!=e.inArray(1,a)&&this.trigger("first"),-1!=e.inArray(o.totalPages,a)&&this.trigger("last")}"single"==o.display?(n=s[0],i=a[0]):s[1]&&t>s[1]?(n=s[1],i=a[0]):s[0]&&t<s[0]&&(n=s[0],i=a[1]),r=o.opts.turnCorners.split(","),a=(s=o.pages[n].data().f).opts,c=s.point,C._missing.call(this,t),o.pageObjs[t]&&(this.turn("stop"),o.page=t,C._makeRange.call(this),o.tpage=i,a.next!=i&&(a.next=i,a.force=!0),this.turn("update"),s.point=c,o.pages[n].flip("turnPage","hard"==s.effect?"ltr"==o.direction?t>n?"r":"l":t>n?"l":"r":"ltr"==o.direction?r[t>n?1:0]:r[t>n?0:1]))},page:function(t){var n=this.data();if(void 0===t)return n.page;if(!n.disabled&&!n.destroying){if(0<(t=parseInt(t,10))&&t<=n.totalPages)return t!=n.page&&(n.done&&-1==e.inArray(t,this.turn("view"))?C._turnPage.call(this,t):C._fitPage.call(this,t)),this;throw d("The page "+t+" does not exist")}},next:function(){return this.turn("page",Math.min(this.data().totalPages,C._view.call(this,this.data().page).pop()+1))},previous:function(){return this.turn("page",Math.max(1,C._view.call(this,this.data().page).shift()-1))},peel:function(e,t){var n=this.data(),i=this.turn("view");return t=void 0===t||!0===t,!1===e?this.turn("stop",null,t):"single"==n.display?n.pages[n.page].flip("peel",e,t):(i="ltr"==n.direction?-1!=e.indexOf("l")?i[0]:i[1]:-1!=e.indexOf("l")?i[1]:i[0],n.pages[i]&&n.pages[i].flip("peel",e,t)),this},_addMotionPage:function(){var t=e(this).data().f.opts,n=t.turn;n.data(),C._addMv.call(n,t.page)},_eventStart:function(e,t,n){var i=t.turn.data(),o=i.pageZoom[t.page];e.isDefaultPrevented()||(o&&o!=i.zoom&&(t.turn.trigger("zoomed",[t.page,t.turn.turn("view",t.page),o,i.zoom]),i.pageZoom[t.page]=i.zoom),"single"==i.display&&n&&("l"==n.charAt(1)&&"ltr"==i.direction||"r"==n.charAt(1)&&"rtl"==i.direction?(t.next=t.next<t.page?t.next:t.page-1,t.force=!0):t.next=t.next>t.page?t.next:t.page+1),C._addMotionPage.call(e.target)),C._updateShadow.call(t.turn)},_eventEnd:function(t,n,i){e(t.target).data();var o=(t=n.turn).data();i?((i=o.tpage||o.page)==n.next||i==n.page)&&(delete o.tpage,C._fitPage.call(t,i||n.next,!0)):(C._removeMv.call(t,n.page),C._updateShadow.call(t),t.turn("update"))},_eventPressed:function(t){var n=(t=e(t.target).data().f).opts.turn;return n.data().mouseAction=!0,n.turn("update"),t.time=(new Date).getTime()},_eventReleased:function(t,n){var i,o=(i=e(t.target)).data().f,r=o.opts.turn,s=r.data();i="single"==s.display?"br"==n.corner||"tr"==n.corner?n.x<i.width()/2:n.x>i.width()/2:0>n.x||n.x>i.width(),(200>(new Date).getTime()-o.time||i)&&(t.preventDefault(),C._turnPage.call(r,o.opts.next)),s.mouseAction=!1},_flip:function(t){t.stopPropagation(),(t=e(t.target).data().f.opts).turn.trigger("turn",[t.next]),t.turn.data().opts.autoCenter&&t.turn.turn("center",t.next)},_touchStart:function(){var e,t=this.data();for(e in t.pages)if(a(e,t.pages)&&!1===w._eventStart.apply(t.pages[e],arguments))return!1},_touchMove:function(){var e,t=this.data();for(e in t.pages)a(e,t.pages)&&w._eventMove.apply(t.pages[e],arguments)},_touchEnd:function(){var e,t=this.data();for(e in t.pages)a(e,t.pages)&&w._eventEnd.apply(t.pages[e],arguments)},calculateZ:function(e){var t,n,i,o,r=this,s=this.data(),a=(t=this.turn("view"))[0]||t[1],c=e.length-1,l={pageZ:{},partZ:{},pageV:{}},u=function(e){(e=r.turn("view",e))[0]&&(l.pageV[e[0]]=!0),e[1]&&(l.pageV[e[1]]=!0)};for(t=0;t<=c;t++)i=s.pages[n=e[t]].data().f.opts.next,o=s.pagePlace[n],u(n),u(i),l.pageZ[n=s.pagePlace[i]==i?i:n]=s.totalPages-Math.abs(a-n),l.partZ[o]=2*s.totalPages-c+t;return l},update:function(){var t,n=this.data();if(this.turn("animating")&&0!==n.pageMv[0]){var i,o=this.turn("calculateZ",n.pageMv),r=this.turn("corner"),s=this.turn("view"),c=this.turn("view",n.tpage);for(t in n.pageWrap)a(t,n.pageWrap)&&(i=n.pageObjs[t].hasClass("fixed"),n.pageWrap[t].css({display:o.pageV[t]||i?"":"none",zIndex:(n.pageObjs[t].hasClass("hard")?o.partZ[t]:o.pageZ[t])||(i?-1:0)}),i=n.pages[t])&&(i.flip("z",o.partZ[t]||null),o.pageV[t]&&i.flip("resize"),n.tpage?i.flip("hover",!1).flip("disable",-1==e.inArray(parseInt(t,10),n.pageMv)&&t!=c[0]&&t!=c[1]):i.flip("hover",!1===r).flip("disable",t!=s[0]&&t!=s[1]))}else for(t in n.pageWrap)a(t,n.pageWrap)&&(o=C._setPageLoc.call(this,t),n.pages[t]&&n.pages[t].flip("disable",n.disabled||1!=o).flip("hover",!0).flip("z",null));return this},_updateShadow:function(){var t,i,o=this.data(),r=this.width(),s=this.height(),a="single"==o.display?r:r/2;t=this.turn("view"),o.shadow||(o.shadow=e("<div />",{class:"shadow",css:n(0,0,0).css}).appendTo(this));for(var c=0;c<o.pageMv.length&&t[0]&&t[1];c++)t=this.turn("view",o.pages[o.pageMv[c]].data().f.opts.next),i=this.turn("view",o.pageMv[c]),t[0]=t[0]&&i[0],t[1]=t[1]&&i[1];switch(t[0]?t[1]?3:"ltr"==o.direction?2:1:"ltr"==o.direction?1:2){case 1:o.shadow.css({width:a,height:s,top:0,left:a});break;case 2:o.shadow.css({width:a,height:s,top:0,left:0});break;case 3:o.shadow.css({width:r,height:s,top:0,left:0})}},_setPageLoc:function(e){var t=this.data(),n=this.turn("view"),i=0;if(e==n[0]||e==n[1]?i=1:("single"==t.display&&e==n[0]+1||"double"==t.display&&e==n[0]-2||e==n[1]+2)&&(i=2),!this.turn("animating"))switch(i){case 1:t.pageWrap[e].css({zIndex:t.totalPages,display:""});break;case 2:t.pageWrap[e].css({zIndex:t.totalPages-1,display:""});break;case 0:t.pageWrap[e].css({zIndex:0,display:t.pageObjs[e].hasClass("fixed")?"":"none"})}return i},options:function(t){if(void 0===t)return this.data().opts;var n=this.data();if(e.extend(n.opts,t),t.pages&&this.turn("pages",t.pages),t.page&&this.turn("page",t.page),t.display&&this.turn("display",t.display),t.direction&&this.turn("direction",t.direction),t.width&&t.height&&this.turn("size",t.width,t.height),t.when)for(var i in t.when)a(i,t.when)&&this.unbind(i).bind(i,t.when[i]);return this},version:function(){return"4.1.0"}},w={init:function(e){return this.data({f:{disabled:!1,hover:!1,effect:this.hasClass("hard")?"hard":"sheet"}}),this.flip("options",e),w._addPageWrapper.call(this),this},setData:function(t){var n=this.data();return n.f=e.extend(n.f,t),this},options:function(t){var n=this.data().f;return t?(w.setData.call(this,{opts:e.extend({},n.opts||P,t)}),this):n.opts},z:function(e){var t=this.data().f;return t.opts["z-index"]=e,t.fwrapper&&t.fwrapper.css({zIndex:e||parseInt(t.parent.css("z-index"),10)||0}),this},_cAllowed:function(){var e=this.data().f,t=e.opts.page,n=e.opts.turn.data(),i=t%2;return"hard"==e.effect?"ltr"==n.direction?[i?"r":"l"]:[i?"l":"r"]:"single"==n.display?1==t?"ltr"==n.direction?S.forward:S.backward:t==n.totalPages?"ltr"==n.direction?S.backward:S.forward:S.all:"ltr"==n.direction?S[i?"forward":"backward"]:S[i?"backward":"forward"]},_cornerActivated:function(t){var n=this.data().f,i=this.width(),o=this.height(),r=n.opts.cornerSize;if(0>=(t={x:t.x,y:t.y,corner:""}).x||0>=t.y||t.x>=i||t.y>=o)return!1;var s=w._cAllowed.call(this);switch(n.effect){case"hard":if(t.x>i-r)t.corner="r";else{if(!(t.x<r))return!1;t.corner="l"}break;case"sheet":if(t.y<r)t.corner+="t";else{if(!(t.y>=o-r))return!1;t.corner+="b"}if(t.x<=r)t.corner+="l";else{if(!(t.x>=i-r))return!1;t.corner+="r"}}return!(!t.corner||-1==e.inArray(t.corner,s))&&t},_isIArea:function(e){var t=this.data().f.parent.offset();return w._cornerActivated.call(this,{x:(e=m&&e.originalEvent?e.originalEvent.touches[0]:e).pageX-t.left,y:e.pageY-t.top})},_c:function(e,t){switch(t=t||0,e){case"tl":return o(t,t);case"tr":return o(this.width()-t,t);case"bl":return o(t,this.height()-t);case"br":return o(this.width()-t,this.height()-t);case"l":return o(t,0);case"r":return o(this.width()-t,0)}},_c2:function(e){switch(e){case"tl":return o(2*this.width(),0);case"tr":return o(-this.width(),0);case"bl":return o(2*this.width(),this.height());case"br":return o(-this.width(),this.height());case"l":return o(2*this.width(),0);case"r":return o(-this.width(),0)}},_foldingPage:function(){var e=this.data().f;if(e){var t=e.opts;if(t.turn)return"single"==(e=t.turn.data()).display?1<t.next||1<t.page?e.pageObjs[0]:null:e.pageObjs[t.next]}},_backGradient:function(){var t=this.data().f,i=t.opts.turn.data();return(i=i.opts.gradients&&("single"==i.display||2!=t.opts.page&&t.opts.page!=i.totalPages-1))&&!t.bshadow&&(t.bshadow=e("<div/>",n(0,0,1)).css({position:"",width:this.width(),height:this.height()}).appendTo(t.parent)),i},type:function(){return this.data().f.effect},resize:function(e){var t=this.data().f,n=t.opts.turn.data(),i=this.width(),o=this.height();switch(t.effect){case"hard":e&&(t.wrapper.css({width:i,height:o}),t.fpage.css({width:i,height:o}),n.opts.gradients&&(t.ashadow.css({width:i,height:o}),t.bshadow.css({width:i,height:o})));break;case"sheet":e&&(e=Math.round(Math.sqrt(Math.pow(i,2)+Math.pow(o,2))),t.wrapper.css({width:e,height:e}),t.fwrapper.css({width:e,height:e}).children(":first-child").css({width:i,height:o}),t.fpage.css({width:i,height:o}),n.opts.gradients&&t.ashadow.css({width:i,height:o}),w._backGradient.call(this)&&t.bshadow.css({width:i,height:o})),t.parent.is(":visible")&&(n=h(t.parent[0]),t.fwrapper.css({top:n.top,left:n.left}),n=h(t.opts.turn[0]),t.fparent.css({top:-n.top,left:-n.left})),this.flip("z",t.opts["z-index"])}},_addPageWrapper:function(){var t=this.data().f,i=t.opts.turn.data(),o=this.parent();if(t.parent=o,!t.wrapper)switch(t.effect){case"hard":(r={})[g+"transform-style"]="preserve-3d",r[g+"backface-visibility"]="hidden",t.wrapper=e("<div/>",n(0,0,2)).css(r).appendTo(o).prepend(this),t.fpage=e("<div/>",n(0,0,1)).css(r).appendTo(o),i.opts.gradients&&(t.ashadow=e("<div/>",n(0,0,0)).hide().appendTo(o),t.bshadow=e("<div/>",n(0,0,0)));break;case"sheet":var r=this.width(),s=this.height();Math.round(Math.sqrt(Math.pow(r,2)+Math.pow(s,2))),t.fparent=t.opts.turn.data().fparent,t.fparent||((r=e("<div/>",{css:{"pointer-events":"none"}}).hide()).data().flips=0,r.css(n(0,0,"auto","visible").css).appendTo(t.opts.turn),t.opts.turn.data().fparent=r,t.fparent=r),this.css({position:"absolute",top:0,left:0,bottom:"auto",right:"auto"}),t.wrapper=e("<div/>",n(0,0,this.css("z-index"))).appendTo(o).prepend(this),t.fwrapper=e("<div/>",n(o.offset().top,o.offset().left)).hide().appendTo(t.fparent),t.fpage=e("<div/>",n(0,0,0,"visible")).css({cursor:"default"}).appendTo(t.fwrapper),i.opts.gradients&&(t.ashadow=e("<div/>",n(0,0,1)).appendTo(t.fpage)),w.setData.call(this,t)}w.resize.call(this,!0)},_fold:function(e){var t=this.data().f,n=t.opts.turn.data(),i=w._c.call(this,e.corner),a=this.width(),c=this.height();switch(t.effect){case"hard":e.x="l"==e.corner?Math.min(Math.max(e.x,0),2*a):Math.max(Math.min(e.x,a),-a);var u,d,h,p,m,y=n.totalPages,S=t.opts["z-index"]||y,M={overflow:"visible"},x=i.x?(i.x-e.x)/a:e.x/a,O=90*x,P=90>O;switch(e.corner){case"l":p="0% 50%",m="100% 50%",P?(u=0,d=0<t.opts.next-1,h=1):(u="100%",d=t.opts.page+1<y,h=0);break;case"r":p="100% 50%",m="0% 50%",O=-O,a=-a,P?(u=0,d=t.opts.next+1<y,h=0):(u="-100%",d=1!=t.opts.page,h=1)}M[g+"perspective-origin"]=m,t.wrapper.transform("rotateY("+O+"deg)translate3d(0px, 0px, "+(this.attr("depth")||0)+"px)",m),t.fpage.transform("translateX("+a+"px) rotateY("+(180+O)+"deg)",p),t.parent.css(M),P?(x=1-x,t.wrapper.css({zIndex:S+1}),t.fpage.css({zIndex:S})):(x-=1,t.wrapper.css({zIndex:S}),t.fpage.css({zIndex:S+1})),n.opts.gradients&&(d?t.ashadow.css({display:"",left:u,backgroundColor:"rgba(0,0,0,"+.5*x+")"}).transform("rotateY(0deg)"):t.ashadow.hide(),t.bshadow.css({opacity:1-x}),P?t.bshadow.parent()[0]!=t.wrapper[0]&&t.bshadow.appendTo(t.wrapper):t.bshadow.parent()[0]!=t.fpage[0]&&t.bshadow.appendTo(t.fpage),l(t.bshadow,o(100*h,0),o(100*(1-h),0),[[0,"rgba(0,0,0,0.3)"],[1,"rgba(0,0,0,0)"]],2));break;case"sheet":var C,k,_,T,E,I,R,N=this,A=0,D=o(0,0),L=o(0,0),F=o(0,0),j=w._foldingPage.call(this);Math.tan(0);var z=n.opts.acceleration,V=t.wrapper.height(),B="t"==e.corner.substr(0,1),W="l"==e.corner.substr(1,1),$=function t(){var r=o(0,0),s=o(0,0);r.x=i.x?i.x-e.x:e.x,r.y=f?i.y?i.y-e.y:e.y:0,s.x=W?a-r.x/2:e.x+r.x/2,s.y=r.y/2;var l=v-Math.atan2(r.y,r.x),u=l-Math.atan2(s.y,s.x);return u=Math.max(0,Math.sin(u)*Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2))),A=l/b*180,F=o(u*Math.sin(l),u*Math.cos(l)),l>v&&(F.x+=Math.abs(F.y*r.y/r.x),F.y=0,Math.round(F.x*Math.tan(b-l))<c)?(e.y=Math.sqrt(Math.pow(c,2)+2*s.x*r.x),B&&(e.y=c-e.y),t()):(l>v&&(r=b-l,s=V-c/Math.sin(r),D=o(Math.round(s*Math.cos(r)),Math.round(s*Math.sin(r))),W&&(D.x=-D.x),B&&(D.y=-D.y)),C=Math.round(F.y/Math.tan(l)+F.x),s=(r=a-C)*Math.cos(2*l),u=r*Math.sin(2*l),L=o(Math.round(W?r-s:C+s),Math.round(B?u:c-u)),n.opts.gradients&&(E=r*Math.sin(l),r=w._c2.call(N,e.corner),r=Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))/a,R=Math.sin(v*(1<r?2-r:r)),I=Math.min(r,1),T=100<E?(E-100)/E:0,k=o(E*Math.sin(l)/a*100,E*Math.cos(l)/c*100),w._backGradient.call(N)&&(_=o(1.2*E*Math.sin(l)/a*100,1.2*E*Math.cos(l)/c*100),W||(_.x=100-_.x),B||(_.y=100-_.y))),F.x=Math.round(F.x),F.y=Math.round(F.y),!0)};switch(u=function(e,i,u,d){var h=(a-V)*u[0]/100,p=(c-V)*u[1]/100,f=(i={left:(f=["0","auto"])[i[0]],top:f[i[1]],right:f[i[2]],bottom:f[i[3]]},{}),g=90!=d&&-90!=d?W?-1:1:0,b=u[0]+"% "+u[1]+"%";N.css(i).transform(s(d)+r(e.x+g,e.y,z),b),t.fpage.css(i).transform(s(d)+r(e.x+L.x-D.x-a*u[0]/100,e.y+L.y-D.y-c*u[1]/100,z)+s((180/d-2)*d),b),t.wrapper.transform(r(-e.x+h-g,-e.y+p,z)+s(-d),b),t.fwrapper.transform(r(-e.x+D.x+h,-e.y+D.y+p,z)+s(-d),b),n.opts.gradients&&(u[0]&&(k.x=100-k.x),u[1]&&(k.y=100-k.y),f["box-shadow"]="0 0 20px rgba(0,0,0,"+.5*R+")",j.css(f),l(t.ashadow,o(W?100:0,B?0:100),o(k.x,k.y),[[T,"rgba(0,0,0,0)"],[.8*(1-T)+T,"rgba(0,0,0,"+.2*I+")"],[1,"rgba(255,255,255,"+.2*I+")"]],3),w._backGradient.call(N)&&l(t.bshadow,o(W?0:100,B?0:100),o(_.x,_.y),[[.6,"rgba(0,0,0,0)"],[.8,"rgba(0,0,0,"+.3*I+")"],[1,"rgba(0,0,0,0)"]],3))},e.corner){case"tl":e.x=Math.max(e.x,1),$(),u(F,[1,0,0,1],[100,0],A);break;case"tr":e.x=Math.min(e.x,a-1),$(),u(o(-F.x,F.y),[0,0,0,1],[0,0],-A);break;case"bl":e.x=Math.max(e.x,1),$(),u(o(F.x,-F.y),[1,1,0,0],[100,100],-A);break;case"br":e.x=Math.min(e.x,a-1),$(),u(o(-F.x,-F.y),[0,1,1,0],[0,100],A)}}t.point=e},_moveFoldingPage:function(e){var t=this.data().f;if(t){var n=t.opts.turn,i=n.data(),o=i.pagePlace;e?(o[i=t.opts.next]!=t.opts.page&&(t.folding&&w._moveFoldingPage.call(this,!1),w._foldingPage.call(this).appendTo(t.fpage),o[i]=t.opts.page,t.folding=i),n.turn("update")):t.folding&&(i.pages[t.folding]?(n=i.pages[t.folding].data().f,i.pageObjs[t.folding].appendTo(n.wrapper)):i.pageWrap[t.folding]&&i.pageObjs[t.folding].appendTo(i.pageWrap[t.folding]),t.folding in o&&(o[t.folding]=t.folding),delete t.folding)}},_showFoldedPage:function(e,t){var n=w._foldingPage.call(this),i=(s=this.data()).f,o=i.visible;if(n){if(!(o&&i.point&&i.point.corner==e.corner||(n="hover"==i.status||"peel"==i.status||i.opts.turn.data().mouseAction?e.corner:null,o=!1,"prevented"!=u("start",this,[i.opts,n]))))return!1;if(t){var r=this,s=i.point&&i.point.corner==e.corner?i.point:w._c.call(this,e.corner,1);this.animatef({from:[s.x,s.y],to:[e.x,e.y],duration:500,frame:function(t){e.x=Math.round(t[0]),e.y=Math.round(t[1]),w._fold.call(r,e)}})}else w._fold.call(this,e),s.effect&&!s.effect.turning&&this.animatef(!1);if(!o)switch(i.effect){case"hard":i.visible=!0,w._moveFoldingPage.call(this,!0),i.fpage.show(),i.opts.shadows&&i.bshadow.show();break;case"sheet":i.visible=!0,i.fparent.show().data().flips++,w._moveFoldingPage.call(this,!0),i.fwrapper.show(),i.bshadow&&i.bshadow.show()}return!0}return!1},hide:function(){var e=this.data().f,t=e.opts.turn.data(),n=w._foldingPage.call(this);switch(e.effect){case"hard":t.opts.gradients&&(e.bshadowLoc=0,e.bshadow.remove(),e.ashadow.hide()),e.wrapper.transform(""),e.fpage.hide();break;case"sheet":0==--e.fparent.data().flips&&e.fparent.hide(),this.css({left:0,top:0,right:"auto",bottom:"auto"}).transform(""),e.wrapper.transform(""),e.fwrapper.hide(),e.bshadow&&e.bshadow.hide(),n.transform("")}return e.visible=!1,this},hideFoldedPage:function(e){var t=this.data().f;if(t.point){var n=this,r=t.point,s=function(){t.point=null,t.status="",n.flip("hide"),n.trigger("end",[t.opts,!1])};if(e){var a=w._c.call(this,r.corner),c=(e="t"==r.corner.substr(0,1)?Math.min(0,r.y-a.y)/2:Math.max(0,r.y-a.y)/2,o(r.x,r.y+e)),l=o(a.x,a.y-e);this.animatef({from:0,to:1,frame:function(e){e=i(r,c,l,a,e),r.x=e.x,r.y=e.y,w._fold.call(n,r)},complete:s,duration:800,hiding:!0})}else this.animatef(!1),s()}},turnPage:function(e){var t=this,n=this.data().f,o=n.opts.turn.data(),r=(e={corner:n.corner?n.corner.corner:e||w._cAllowed.call(this)[0]},n.point||w._c.call(this,e.corner,n.opts.turn?o.opts.elevation:0)),s=w._c2.call(this,e.corner);this.trigger("flip").animatef({from:0,to:1,frame:function(n){n=i(r,r,s,s,n),e.x=n.x,e.y=n.y,w._showFoldedPage.call(t,e)},complete:function(){t.trigger("end",[n.opts,!0])},duration:o.opts.duration,turning:!0}),n.corner=null},moving:function(){return"effect"in this.data()},isTurning:function(){return this.flip("moving")&&this.data().effect.turning},corner:function(){return this.data().f.corner},_eventStart:function(e){var t=this.data().f,n=t.opts.turn;if(!t.corner&&!t.disabled&&!this.flip("isTurning")&&t.opts.page==n.data().pagePlace[t.opts.page]){if(t.corner=w._isIArea.call(this,e),t.corner&&w._foldingPage.call(this))return this.trigger("pressed",[t.point]),w._showFoldedPage.call(this,t.corner),!1;t.corner=null}},_eventMove:function(e){var t=this.data().f;if(!t.disabled)if(e=m?e.originalEvent.touches:[e],t.corner){var n=t.parent.offset();t.corner.x=e[0].pageX-n.left,t.corner.y=e[0].pageY-n.top,w._showFoldedPage.call(this,t.corner)}else t.hover&&!this.data().effect&&this.is(":visible")&&((e=w._isIArea.call(this,e[0]))?("sheet"==t.effect&&2==e.corner.length||"hard"==t.effect)&&(t.status="hover",t=w._c.call(this,e.corner,t.opts.cornerSize/2),e.x=t.x,e.y=t.y,w._showFoldedPage.call(this,e,!0)):"hover"==t.status&&(t.status="",w.hideFoldedPage.call(this,!0)))},_eventEnd:function(){var e=this.data().f,t=e.corner;!e.disabled&&t&&"prevented"!=u("released",this,[e.point||t])&&w.hideFoldedPage.call(this,!0),e.corner=null},disable:function(e){return w.setData.call(this,{disabled:e}),this},hover:function(e){return w.setData.call(this,{hover:e}),this},peel:function(t,n){var i=this.data().f;if(t){if(-1==e.inArray(t,S.all))throw d("Corner "+t+" is not permitted");if(-1!=e.inArray(t,w._cAllowed.call(this))){var o=w._c.call(this,t,i.opts.cornerSize/2);i.status="peel",w._showFoldedPage.call(this,{corner:t,x:o.x,y:o.y},n)}}else i.status="",w.hideFoldedPage.call(this,n);return this}};window.requestAnim=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},e.extend(e.fn,{flip:function(){return t(e(this[0]),w,arguments)},turn:function(){return t(e(this[0]),C,arguments)},transform:function(e,t){var n={};return t&&(n[g+"transform-origin"]=t),n[g+"transform"]=e,this.css(n)},animatef:function(t){var n=this.data();if(n.effect&&n.effect.stop(),t){t.to.length||(t.to=[t.to]),t.from.length||(t.from=[t.from]);for(var i=[],o=t.to.length,r=!0,s=this,a=(new Date).getTime(),c=0;c<o;c++)i.push(t.to[c]-t.from[c]);n.effect=e.extend({stop:function(){r=!1},easing:function(e,t,n,i,o){return i*Math.sqrt(1-(t=t/o-1)*t)+n}},t),this.data(n),function e(){if(n.effect&&r){for(var c=[],l=Math.min(t.duration,(new Date).getTime()-a),u=0;u<o;u++)c.push(n.effect.easing(1,l,t.from[u],i[u],t.duration));t.frame(1==o?c[0]:c),l==t.duration?(delete n.effect,s.data(n),t.complete&&t.complete()):window.requestAnim(e)}}()}else delete n.effect}}),e.isTouch=m,e.mouseEvents=y,e.cssPrefix=c,e.cssTransitionEnd=function(){var e,t=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MSTransition:"transitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]},e.findPos=h}(jQuery)},Fu2j:function(n,o,u){"use strict";u.r(o),u.d(o,"SDModule",(function(){return Zr}));var h=u("SVse"),f=u("s7LF"),g=u("3vOV"),b=u("GS7A"),v=u("P9HX"),m=u("I2Si"),y=u("ey9i"),S=u("boWW"),M=u("Clfw"),x=u("qgV2"),O=u("97pD"),P=u("IfHC"),C=u("ULA1"),w=u("nDMq"),k=u("lJxs"),_=u("eIep"),T=u("pLZG"),E=u("0lfv"),I=u("8Y7J"),R=u("WmZK"),N=u("tqRt"),A=u("Vbab"),D=u("QMcV"),L=u("4yJm"),F=u("Gf8t"),j=u("gNdQ");function z(e,t){if(1&e){var n=I.Tb();I.Qb(0),I.Sb(1,"button",8),I.Zb("click",(function(){return I.uc(n),I.dc().onClickUndo()})),I.Nb(2,"i",9),I.Rb(),I.Sb(3,"button",8),I.Zb("click",(function(){return I.uc(n),I.dc().onClickRedo()})),I.Nb(4,"i",10),I.Rb(),I.Pb()}if(2&e){var i=I.dc();I.zb(1),I.jc("disabled",!i.canUndo),I.zb(2),I.jc("disabled",!i.canRedo)}}function V(e,t){if(1&e){var n=I.Tb();I.Sb(0,"button",18),I.Zb("click",(function(e){I.uc(n);var t=I.dc(),i=t.$implicit,o=t.index,r=I.dc(3);return r.activateLastTool(i,o),r.activateTool(e,i.tool)})),I.Nb(1,"i",19),I.Rb()}if(2&e){var i=I.dc().$implicit,o=I.dc(3);I.jc("title",i.alt),I.Ab("color",o.styleOfMenuTool(i)),I.zb(1),I.jc("ngClass",i.iconClass)}}function B(e,t){if(1&e&&(I.Qb(0),I.Dc(1,V,2,3,"button",17),I.Pb()),2&e){var n=t.$implicit;I.zb(1),I.jc("ngIf",n.use)}}function W(e,t){if(1&e&&(I.Sb(0,"section",15),I.Sb(1,"div"),I.Dc(2,B,2,1,"ng-container",16),I.Rb(),I.Rb()),2&e){var n=I.dc(2);I.zb(2),I.jc("ngForOf",n.selectedSubtools)}}function $(e,t){if(1&e){var n=I.Tb();I.Qb(0),I.Sb(1,"section",11),I.Sb(2,"button",12),I.Zb("click",(function(){return I.uc(n),I.dc().closeAnnotationToolbar()})),I.ec(3,"translate"),I.Nb(4,"i",13),I.Rb(),I.Nb(5,"div",5),I.Rb(),I.Dc(6,W,3,1,"section",14),I.Pb()}if(2&e){var i=I.dc();I.zb(2),I.jc("title",I.fc(3,2,"CLOSE")),I.zb(4),I.jc("ngIf",i.selectedSubtools.length>0)}}function U(e,t){if(1&e){var n=I.Tb();I.Sb(0,"button",25),I.Zb("click",(function(){I.uc(n);var e=I.dc(2).$implicit;return I.dc(2).expanderClicked(e)})),I.Nb(1,"i",26),I.Rb()}}function G(e,t){1&e&&I.Nb(0,"div",27)}function H(e,t){if(1&e){var n=I.Tb();I.Qb(0),I.Sb(1,"button",30),I.Zb("click",(function(e){I.uc(n);var t=I.dc(),i=t.index,o=t.$implicit,r=I.dc(3).$implicit,s=I.dc(2);return r.lastUsed=i,s.activateTool(e,o.tool)})),I.Nb(2,"i",19),I.Rb(),I.Pb()}if(2&e){var i=I.dc().$implicit,o=I.dc(5);I.zb(1),I.jc("title",i.alt),I.Ab("color",o.styleOfMenuTool(i)),I.zb(1),I.jc("ngClass",i.iconClass)}}function q(e,t){if(1&e&&(I.Qb(0),I.Dc(1,H,3,3,"ng-container",2),I.Pb()),2&e){var n=t.$implicit;I.zb(1),I.jc("ngIf",n.use)}}function Z(e,t){if(1&e&&(I.Sb(0,"div",28),I.Sb(1,"div",29),I.Dc(2,q,2,1,"ng-container",16),I.Rb(),I.Rb()),2&e){var n=I.dc(2).$implicit;I.jc("@menuState",n.menuState),I.zb(2),I.jc("ngForOf",n.subtools)}}function X(e,t){if(1&e){var n=I.Tb();I.Qb(0),I.Sb(1,"div",20),I.Sb(2,"button",21),I.Zb("click",(function(e){I.uc(n);var t=I.dc().$implicit;return I.dc(2).activateTool(e,t.tool||t.lastTool.tool)})),I.Nb(3,"i",19),I.Fc(4),I.Rb(),I.Dc(5,U,2,0,"button",22),I.Dc(6,G,1,0,"div",23),I.Dc(7,Z,3,2,"div",24),I.Rb(),I.Pb()}if(2&e){var i=I.dc().$implicit,o=I.dc(2);I.zb(2),I.Eb("ep-text-button",!i.text)("ep-button",i.text)("expandable",o.subtoolsLength(i)>1),I.jc("title",i.alt),I.Ab("color",i.text?"white":"dark")("size",i.text?"tiny":null),I.zb(1),I.jc("ngClass",i.iconClass),I.zb(1),I.Hc(" ",i.text||""," "),I.zb(1),I.jc("ngIf",o.subtoolsLength(i)>1),I.zb(1),I.jc("ngIf",!i.text&&o.isActivated(i.tool||i.lastTool.tool)),I.zb(1),I.jc("ngIf",o.subtoolsLength(i)>1&&o.windowResponsiveBasis.width<=o.windowWidth)}}function Y(e,t){if(1&e&&(I.Qb(0),I.Dc(1,X,8,14,"ng-container",2),I.Pb()),2&e){var n=t.$implicit;I.zb(1),I.jc("ngIf",n.use)}}function K(e,t){if(1&e&&(I.Qb(0),I.Dc(1,Y,2,1,"ng-container",16),I.Pb()),2&e){var n=I.dc();I.zb(1),I.jc("ngForOf",n.getActiveMenus())}}function Q(e,t){if(1&e){var n=I.Tb();I.Sb(0,"button",18),I.Zb("click",(function(){return I.uc(n),I.dc(2).toggleRuler()})),I.ec(1,"translate"),I.Nb(2,"i",19),I.Rb()}if(2&e){var i=I.dc(2);I.jc("title",I.fc(1,3,"SHOW_RULER")),I.Ab("color",i.rulerActive?"primary":"dark"),I.zb(2),I.jc("ngClass",i.rulerActive?"papycon-ruler-show":"papycon-ruler-hide")}}function J(e,t){if(1&e){var n=I.Tb();I.Sb(0,"button",33),I.Zb("click",(function(){return I.uc(n),I.dc(2).toggleFormFieldHighlight()})),I.ec(1,"translate"),I.Nb(2,"i",19),I.Rb()}if(2&e){var i=I.dc(2);I.jc("title",I.fc(1,3,"FORMFIELD_HIGHLIGHTED")),I.Ab("color",i.formFieldHighlighted?"primary":"dark"),I.zb(2),I.jc("ngClass",i.formFieldHighlighted?"papycon-area-show":"papycon-area-hide")}}function ee(e,t){if(1&e&&(I.Sb(0,"section"),I.Nb(1,"div",31),I.Dc(2,Q,3,5,"button",17),I.Dc(3,J,3,5,"button",32),I.Rb()),2&e){var n=I.dc();I.zb(2),I.jc("ngIf",n.runtimeEnv.get(n.RuntimeEnvKey.FORM_TOOLBAR_RULER)&&n.windowResponsiveBasis.width<=n.windowWidth),I.zb(1),I.jc("ngIf",n.isFormHighlightAvailable&&!n.hidableMenus[n.HidableView.TOOLBAR_FORM])}}function te(e,t){if(1&e){var n=I.Tb();I.Sb(0,"button",34),I.Zb("click",(function(){return I.uc(n),I.dc().toggleRightSideView()})),I.ec(1,"translate"),I.Nb(2,"i",35),I.Rb()}if(2&e){var i=I.dc();I.jc("title",I.fc(1,2,"PROPERTIES_PANEL")),I.Ab("color",i.isAnnotPropertyViewActive()?"primary":"dark")}}var ne,ie,oe=((ie=function(){function e(t,n,i,o,r,s,a,c,l,u,h,p,f,g,b){d(this,e),this.annotService=t,this.contentService=n,this.dialogService=i,this.changeDetectorRef=o,this.defaultAnnot=r,this.annotSelectedService=s,this.documentService=a,this.subscriptionService=c,this.preferenceService=l,this.actionHistoryService=u,this.store$=h,this.translatePipe=p,this.signatureService=f,this.selectTextService=g,this.toolbarService=b,this.unExportableTools=[m.a.REDACTION,m.a.POPUP,m.a.SEARCH,m.a.COPY,m.a.EDIT,m.a.CLOUD_CROSS_SHAPE,m.a.CLOUD_T_SHAPE],this.contextAnnotMenus=[],this.formFieldHighlighted=!0,this.canUndo=!1,this.canRedo=!1,this.hidableMenus={},this.variableMenus=this.initVariableMenus(),this.formVariableMenus=this.initFormVariableMenus(),this.signatureVariableMenus=[{tool:m.a.INSTANT_SIGNATURE,alt:this.translatePipe.transform("SIGN"),text:this.translatePipe.transform("INSTANT_SIGNATURE"),iconClass:"papycon-signature",use:w.f.get(w.d.SIGNATURE_INSTANT_SIGNATURE),priority:6,mobileStatus:{display:"block"}}],this.tempTool=null,this.isDeepCopy=!1,this.selectedSubtools=[]}return p(e,[{key:"initVariableMenus",value:function(){return[{tool:M.a.SELECT_ANNOT,alt:this.translatePipe.transform("SELECT_ANNOT_TOOL"),iconClass:"papycon-pointer",use:this.canUseAnnotSelect(),priority:1,mobileStatus:{display:"block"}},{lastUsed:0,menuState:"off",menuStyle:{},mobileStatus:{display:"block"},subtools:[{tool:m.a.INK,alt:this.translatePipe.transform("INK_TOOL"),iconClass:"papycon-pencil",use:w.f.get(w.d.ANNOTATION_BASIC_INK)},{tool:m.a.LINE,alt:this.translatePipe.transform("LINE_TOOL"),iconClass:"papycon-line",use:w.f.get(w.d.ANNOTATION_BASIC_LINE)},{tool:m.a.SQUARE,alt:this.translatePipe.transform("SQUARE_TOOL"),iconClass:"papycon-square",use:w.f.get(w.d.ANNOTATION_BASIC_SQUARE)},{tool:m.a.CIRCLE,alt:this.translatePipe.transform("CIRCLE_TOOL"),iconClass:"papycon-circle",use:w.f.get(w.d.ANNOTATION_BASIC_CIRCLE)},{tool:m.a.POLYGON,alt:this.translatePipe.transform("POLYGON_TOOL"),iconClass:"papycon-polygon",use:w.f.get(w.d.ANNOTATION_BASIC_POLYGON)},{tool:m.a.POLYLINE,alt:this.translatePipe.transform("POLYLINE_TOOL"),iconClass:"papycon-polyline",use:w.f.get(w.d.ANNOTATION_BASIC_POLYLINE)},{tool:m.a.CLOUD,alt:this.translatePipe.transform("POLYGON_CLOUD_TOOL"),iconClass:"papycon-revisioncloud",use:w.f.get(w.d.ANNOTATION_BASIC_CLOUD)}].filter((function(e){return e.use})),get lastTool(){return this.subtools[this.lastUsed]},get tool(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.tool},get iconClass(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.iconClass},get alt(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.alt},priority:1,use:w.f.get(w.c.ANNOTATION_BASIC)},{lastUsed:0,menuState:"off",menuStyle:{},mobileStatus:{display:"block"},subtools:[{tool:m.a.TEXT_FREE,alt:this.translatePipe.transform("FREE_TEXT_TOOL"),iconClass:"papycon-textbox",use:w.f.get(w.d.ANNOTATION_TEXT_TEXT_FREE)},{tool:m.a.TEXT_CALLOUT,alt:this.translatePipe.transform("FREE_TEXT_CALLOUT_TOOL"),iconClass:"papycon-callout2",use:w.f.get(w.d.ANNOTATION_TEXT_TEXT_CALLOUT)}].filter((function(e){return e.use})),get lastTool(){return this.subtools[this.lastUsed]},get tool(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.tool},get iconClass(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.iconClass},get alt(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.alt},priority:1,use:w.f.get(w.c.ANNOTATION_TEXT)},{tool:m.a.TEXT_POPUP,alt:this.translatePipe.transform("TEXT_TOOL"),iconClass:"papycon-memo3",use:w.f.get(w.d.ANNOTATION_MEMO),priority:2,mobileStatus:{display:"block"}},{lastUsed:0,menuState:"off",menuStyle:{},mobileStatus:{display:"block"},subtools:[{tool:m.a.LINE_DIMENSION,alt:this.translatePipe.transform("DISTANCE_TOOL"),iconClass:"papycon-line-measure2",use:w.f.get(w.d.ANNOTATION_MEASURE_LINE_DIMENSION)},{tool:m.a.POLYLINE_DIMENSION,alt:this.translatePipe.transform("PERIMETER_TOOL"),iconClass:"papycon-polyline-measure2",use:w.f.get(w.d.ANNOTATION_MEASURE_POLYLINE_DIMENSION)},{tool:m.a.POLYGON_DIMENSION,alt:this.translatePipe.transform("AREA_TOOL"),iconClass:"papycon-polygon-measure2",use:w.f.get(w.d.ANNOTATION_MEASURE_POLYGON_DIMENSION)}].filter((function(e){return e.use})),get lastTool(){return this.subtools[this.lastUsed]},get tool(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.tool},get iconClass(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.iconClass},get alt(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.alt},priority:1,use:w.f.get(w.c.ANNOTATION_MEASURE)},{tool:m.a.STAMP,alt:this.translatePipe.transform("STAMP_TOOL"),iconClass:"papycon-stamp2",use:w.f.get(w.d.ANNOTATION_STAMP),priority:3,mobileStatus:{display:"block"}},{lastUsed:0,menuState:"off",menuStyle:{},mobileStatus:{display:"block"},subtools:[{tool:m.a.HIGHLIGHT,alt:this.translatePipe.transform("HIGHLIGHT"),iconClass:"papycon-text-highlight",use:w.f.get(w.d.ANNOTATION_TEXT_MARKUP_HIGHLIGHT)},{tool:m.a.STRIKE,alt:this.translatePipe.transform("STRIKEOUT"),iconClass:"papycon-text-strikeout",use:w.f.get(w.d.ANNOTATION_TEXT_MARKUP_STRIKE)},{tool:m.a.UNDERLINE,alt:this.translatePipe.transform("UNDERLINE"),iconClass:"papycon-text-underline",use:w.f.get(w.d.ANNOTATION_TEXT_MARKUP_UNDERLINE)}].filter((function(e){return e.use})),get lastTool(){return this.subtools[this.lastUsed]},get tool(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.tool},get iconClass(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.iconClass},get alt(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.alt},priority:4,use:w.f.get(w.c.ANNOTATION_TEXT_MARKUP)},{tool:m.a.LINK,alt:this.translatePipe.transform("CREATE_LINK"),iconClass:"papycon-link",use:w.f.get(w.d.ANNOTATION_LINK),priority:5,mobileStatus:{display:"block"}},{tool:m.a.ERASER,alt:this.translatePipe.transform("ERASER"),iconClass:"papycon-eraser",use:w.f.get(w.d.ANNOTATION_ERASER),priority:3,mobileStatus:{display:"block"}},{tool:m.a.SIGNATURE,alt:this.translatePipe.transform("SIGN"),iconClass:"papycon-signature",use:w.f.get(w.d.FORM_SIGNATURE),priority:6,mobileStatus:{display:"block"}}]}},{key:"initFormVariableMenus",value:function(){return[{tool:M.a.SELECT_ANNOT,alt:this.translatePipe.transform("SELECT_ANNOT_TOOL"),iconClass:"papycon-pointer",use:this.canUseAnnotSelect(),priority:6,mobileStatus:{display:"block"}},{tool:m.a.TEXT_FIELD,alt:this.translatePipe.transform("TEXT_FIELD"),iconClass:"papycon-text-field",use:w.f.get(w.d.FORM_TEXT_FIELD),priority:6,mobileStatus:{display:"block"}},{tool:m.a.COMBO_BOX,alt:this.translatePipe.transform("COMBO_BOX"),iconClass:"papycon-dropdown",use:w.f.get(w.d.FORM_COMBO_BOX),priority:6,mobileStatus:{display:"block"}},{tool:m.a.LIST_BOX,alt:this.translatePipe.transform("LIST_BOX"),iconClass:"papycon-list-box",use:w.f.get(w.d.FORM_LIST_BOX),priority:6,mobileStatus:{display:"block"}},{tool:m.a.CHECK_BUTTON,alt:this.translatePipe.transform("CHECK_BUTTON"),iconClass:"papycon-check-mark4",use:w.f.get(w.d.FORM_CHECK_BUTTON),priority:6,mobileStatus:{display:"block"}},{tool:m.a.RADIO_BUTTON,alt:this.translatePipe.transform("RADIO_BUTTON"),iconClass:"papycon-radio2-checked",use:w.f.get(w.d.FORM_RADIO_BUTTON),priority:6,mobileStatus:{display:"block"}},{tool:m.a.BUTTON,alt:this.translatePipe.transform("BUTTON"),iconClass:"papycon-ok",use:w.f.get(w.d.FORM_BUTTON),priority:6,mobileStatus:{display:"block"}}]}},{key:"ngOnInit",value:function(){this.initSubscriptions(),this.resize(),this.subscribeSubtoolMenuCloser()}},{key:"onClickUndo",value:function(){this.annotSelectedService.unselectAll(),this.actionHistoryService.undo()}},{key:"onClickRedo",value:function(){this.annotSelectedService.unselectAll(),this.actionHistoryService.redo()}},{key:"activateTool",value:function(e,t){var n=this;if("number"==typeof t)return this.store$.dispatch(P.a.set({key:"dragMode",value:t})),this.store$.dispatch(v.a.unselectTool()),this.selectTextService.publishSelectedText(null),this.annotService.closeEditor(),!1;if(this.unExportableTools.indexOf(t)>-1||!this.documentService.checkAuthority(y.j.DRAW_ANNOTATION))return!1;this.menuItems.forEach((function(e){e.menuState="off"}));var i=this.currentTool;return m.a.STAMP===t?(this.dialogService.toggleDialogVisibility(S.c.STAMP_CREATION,!0),!1):m.a.INSTANT_SIGNATURE===t?(this.signatureService.prepareSignature().subscribe({next:function(){n.signatureService.toggleOverlay(!1),n.signatureService.toggleSignatureModuleLoadingDialog(!1),n.store$.dispatch(v.a.selectTool({payload:t})),n.changeDetectorRef.markForCheck()}}),!1):m.a.INVISIBLE_SIGNATURE===t?(this.store$.dispatch(v.a.selectTool({payload:null})),this.signatureService.prepareSignature().pipe(k.a((function(){return n.signatureService.createEmptySignatureAnnot(0)})),_.a((function(e){return n.signatureService.injectSignature(e,"create")})),T.a((function(e){return Boolean(e)}))).subscribe(),!1):(t!==i&&(this.store$.dispatch(v.a.selectTool({payload:t})),this.changeDetectorRef.markForCheck()),this.windowWidth<this.windowResponsiveBasis.width&&(this.selectedSubtools=[]),this.annotService.closeEditor(),!1)}},{key:"getActiveMenus",value:function(){if(this.annotToolActive)return this.variableMenus;if(this.formToolActive)return this.formVariableMenus;if(this.signatureToolActive)return this.signatureVariableMenus;throw new Error("not supported active menu")}},{key:"expanderClicked",value:function(e){e.menuState="off"===e.menuState?"on":"off",this.menuItems.forEach((function(t){t.hasOwnProperty("subtools")&&t!==e&&(t.menuState="off")})),e.hasOwnProperty("subtools")&&(this.selectedSubtools="off"===e.menuState?[]:c(e.subtools))}},{key:"isEbookMode",value:function(){return 4===this.viewMode&&this.documentService.eBookStatus}},{key:"isActivated",value:function(e){return"number"==typeof e?this.dragMode===e&&null===this.currentTool:this.currentTool===e}},{key:"isTemped",value:function(e){return this.tempTool===e}},{key:"styleOfMenuTool",value:function(e){return this.isActivated(e.tool)||this.isTemped(e.tool)?"white":"dark"}},{key:"toggleRightSideView",value:function(){this.rightSideViewMode!==O.a.AnnotProperty&&this.store$.dispatch(P.a.set({key:"rightSideViewMode",value:O.a.AnnotProperty})),this.store$.dispatch(P.a.set({key:"rightSideViewVisible",value:!this.visibleRightSideView}))}},{key:"toggleFormFieldHighlight",value:function(){this.preferenceService.updatePreferences(["formFieldHighlighted"],!this.formFieldHighlighted)}},{key:"toggleRuler",value:function(){this.store$.dispatch(P.a.set({key:"rulerActive",value:!this.rulerActive}))}},{key:"isAnnotPropertyViewActive",value:function(){return this.visibleRightSideView&&this.rightSideViewMode===O.a.AnnotProperty}},{key:"canUseAnnotSelect",value:function(){return!this.isEbookMode()&&w.f.get(w.c.DRAG_MODE)&&w.f.get(w.d.DRAG_MODE_SELECT_ANNOT)&&!this.hidableMenus[C.a.TOOLBAR_DRAG_MODE_SELECT_ANNOTATION]}},{key:"createMenus",value:function(){var e=c(this.variableMenus);if(!E.F.isMobile())return e;var t=[m.a.HIGHLIGHT,m.a.STRIKE,m.a.UNDERLINE];return e.filter((function(e){return!t.includes(e.tool)}))}},{key:"subscribeAnnotContext",value:function(){var e=this;this.subscriptionService.push(this.store$.pipe(Object(v.c)()).subscribe({next:function(t){if(e.currentTool=t,!e.isUnExportableTool(t)&&t!==m.a.ERASER){if(null!==t){e.isDeepCopy=!1;var n=e.defaultAnnot.getAnnot(t,e.isDeepCopy);if(!n)return;e.annotSelectedService.unselectAll(),e.annotSelectedService.add({data:n,elementRef:void 0})}else e.annotSelectedService.unselectAll();e.changeDetectorRef.markForCheck()}}}))}},{key:"initSubscriptions",value:function(){var e=this;this.subscribeAnnotContext(),this.subscriptionService.push(this.store$.pipe(Object(P.f)("rightSideViewMode")).subscribe({next:function(t){e.rightSideViewMode=t,e.changeDetectorRef.detectChanges()}}),this.store$.pipe(Object(P.e)([C.a.TOOLBAR_DRAG_MODE_SELECT_ANNOTATION,C.a.ANNOTATION_INK,C.a.ANNOTATION_LINE,C.a.ANNOTATION_SQUARE,C.a.ANNOTATION_POLYLINE,C.a.ANNOTATION_CLOUD,C.a.ANNOTATION_TEXT_FREE,C.a.ANNOTATION_TEXT_CALLOUT,C.a.ANNOTATION_TEXT_POPUP,C.a.ANNOTATION_LINE_DIMENSION,C.a.ANNOTATION_POLYLINE_DIMENSION,C.a.ANNOTATION_POLYGON_DIMENSION,C.a.ANNOTATION_STAMP,C.a.ANNOTATION_HIGHLIGHT,C.a.ANNOTATION_STRIKE,C.a.ANNOTATION_UNDERLINE,C.a.ANNOTATION_LINK,C.a.ANNOTATION_SIGNATURE,C.a.ANNOTATION_TEXT_FIELD,C.a.ANNOTATION_COMBO_BOX,C.a.ANNOTATION_LIST_BOX,C.a.ANNOTATION_CHECK_BUTTON,C.a.ANNOTATION_RADIO_BUTTON,C.a.ANNOTATION_BUTTON,C.a.ANNOTATION_ERASER,C.a.FORM_SIGNATURE,C.a.FORM_TEXT_FIELD,C.a.FORM_COMBO_BOX,C.a.FORM_LIST_BOX,C.a.FORM_CHECK_BUTTON,C.a.FORM_RADIO_BUTTON,C.a.FORM_BUTTON])).subscribe({next:function(t){var n=t.hiddenViews;Object.assign(e.hidableMenus,n),e.variableMenus=e.initVariableMenus(),e.formVariableMenus=e.initFormVariableMenus(),Object.keys(e.hidableMenus).forEach((function(t){if(e.hidableMenus[t]){var n=a(t.split("."),2),i=n[0],o=n[1];e.hideAnnotTool(i,o)}})),e.changeDetectorRef.markForCheck()}}),E.F.windowResize$.subscribe({next:function(t){return e.resize(t)}}),this.documentService.authorityUpdate$.subscribe({next:function(){return e.changeDetectorRef.markForCheck()}}),this.contentService.annotEvent$.pipe(T.a((function(e){return null!==e}))).subscribe({next:function(){return e.changeDetectorRef.markForCheck()}}),this.contentService.annotListEvent$.pipe(T.a((function(e){return null!==e}))).subscribe({next:function(){return e.changeDetectorRef.markForCheck()}}),this.annotSelectedService.selectionInfoChange$.subscribe({next:function(){e.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(P.f)("rightSideViewVisible")).subscribe({next:function(t){e.visibleRightSideView=t,e.selectedSubtools=[],e.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(x.e)("formFieldHighlighted")).subscribe({next:function(t){e.formFieldHighlighted=t,e.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(P.f)("rulerActive")).subscribe({next:function(t){e.rulerActive=t,e.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(P.f)("dragMode")).subscribe({next:function(t){e.dragMode=t,e.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(P.f)("viewMode")).subscribe({next:function(t){return e.viewMode=t}}),this.actionHistoryService.availableUndoCount$.subscribe({next:function(t){e.canUndo=t>0,e.changeDetectorRef.detectChanges()}}),this.actionHistoryService.availableRedoCount$.subscribe({next:function(t){e.canRedo=t>0,e.changeDetectorRef.detectChanges()}}),this.signatureService.module$.subscribe({next:function(t){t&&e.signatureVariableMenus.push({tool:m.a.INVISIBLE_SIGNATURE,alt:e.translatePipe.transform("SIGN"),text:e.translatePipe.transform("INVISIBLE_SIGNATURE"),iconClass:"papycon-memo2",use:w.f.get(w.d.SIGNATURE_INVISIBLE_SIGNATURE)&&Boolean(t),priority:6,mobileStatus:{display:"block"}})}}))}},{key:"isNestedMenuItem",value:function(e){return"subtools"in e}},{key:"subtoolsLength",value:function(e){return e.subtools?e.subtools.filter((function(e){return e.use})).length:1}},{key:"hideAnnotTool",value:function(e,t){var n,i=this;n="ANNOTATION"===e?this.variableMenus:this.formVariableMenus;var o=-1,r=n.findIndex((function(e){return i.isNestedMenuItem(e)?-1!==(o=e.subtools.findIndex((function(e){return e.tool===t}))):e.tool===t})),s=n[r];if(E.g.isDefined(s))if(this.isNestedMenuItem(s)){if(s.subtools[o].use=!1,o===s.lastUsed){var a=s.subtools.findIndex((function(e){return e.use}));-1===a&&(s.use=!1),s.lastUsed=a,this.store$.dispatch(v.a.unselectTool())}}else s.use=!1}},{key:"resize",value:function(e){this.menuItems=this.buildMenu(e),e&&this.changeDetectorRef.markForCheck()}},{key:"buildMenu",value:function(e){var t;t=this.menuItems?this.menuItems:this.createMenus();for(var n=(544-E.F.width)/48;n>=this.contextAnnotMenus.length&&this.contextAnnotMenus.length<0;)this.splicePriorityMenuItem(t),1===this.contextAnnotMenus.length&&this.splicePriorityMenuItem(t);return n+1<this.contextAnnotMenus.length&&(n>1?this.appendPriorityMenuItem(t):n<=0&&(this.appendPriorityMenuItem(t),this.appendPriorityMenuItem(t))),t}},{key:"splicePriorityMenuItem",value:function(e){var t=0,n=0;e.forEach((function(e,i){e.priority>t&&"none"!==e.mobileStatus.display&&(t=e.priority,n=i)})),this.contextAnnotMenus.splice(this.contextAnnotMenus.length,0,e[n]),e[n].mobileStatus.display="none"}},{key:"appendPriorityMenuItem",value:function(e){var t=10,n=0;e.forEach((function(e,i){e.priority<t&&"none"===e.mobileStatus.display&&(t=e.priority,n=i)})),this.contextAnnotMenus.splice(this.contextAnnotMenus.length-1,1),e[n].mobileStatus.display="block"}},{key:"subscribeSubtoolMenuCloser",value:function(){this.subscriptionService.push()}},{key:"isUnExportableTool",value:function(e){var t=!1;return this.unExportableTools.forEach((function(n){n===e&&(t=!0)})),t}},{key:"closeAnnotationToolbar",value:function(){this.toolbarService.toggleAnnotToolbar(!1),this.toolbarService.toggleFormToolbar(!1)}},{key:"activateLastTool",value:function(e,t){var n=this;this.menuItems.forEach((function(i){if(n.isNestedMenuItem(i)){var o=i.subtools.find((function(t){return t.tool===e.tool}));E.g.isDefined(o)&&(i.lastUsed=t)}}))}},{key:"RuntimeEnvKey",get:function(){return w.d}},{key:"runtimeEnv",get:function(){return w.f}},{key:"DocumentAction",get:function(){return y.j}},{key:"windowWidth",get:function(){return E.F.width}},{key:"windowResponsiveBasis",get:function(){return E.F.responsiveBasis}},{key:"isVisiblePropertyButton",get:function(){return this.annotToolActive&&this.runtimeEnv.get(w.d.ANNOT_TOOLBAR_ANNOT_PROPERTY)||this.formToolActive&&this.runtimeEnv.get(w.d.FORM_TOOLBAR_ANNOT_PROPERTY)}},{key:"HidableView",get:function(){return C.a}},{key:"isFormHighlightAvailable",get:function(){return w.f.get(w.d.MAIN_TOOLBAR_ACRO_FORM_HIGHLIGHT)&&this.documentService.checkAuthority(y.j.FORM)}}]),e}()).\u0275fac=function(e){return new(e||ie)(I.Mb(y.d),I.Mb(y.f),I.Mb(S.b),I.Mb(I.h),I.Mb(R.b),I.Mb(y.c),I.Mb(y.k),I.Mb(g.G),I.Mb(x.c),I.Mb(y.b),I.Mb(N.h),I.Mb(A.d),I.Mb(D.b),I.Mb(L.a),I.Mb(F.a))},ie.\u0275cmp=I.Gb({type:ie,selectors:[["sd-annot-toolbar"]],inputs:{annotToolActive:"annotToolActive",formToolActive:"formToolActive",signatureToolActive:"signatureToolActive"},features:[I.yb([g.G])],decls:11,vars:7,consts:[[1,"responsive-group"],[1,"left"],[4,"ngIf"],[1,"right"],[1,"annotation"],[1,"full","divider"],[1,"panel"],["class","ep-text-button annot-property-toggle tool-button",3,"title","click",4,"ngIf"],["size","tiny","color","white",1,"ep-button",3,"disabled","click"],[1,"papycon","papycon-undo"],[1,"papycon","papycon-redo"],[1,"close"],["color","dark",1,"ep-text-button","close-button",3,"title","click"],[1,"papycon","papycon-cross"],["class","subtool-container",4,"ngIf"],[1,"subtool-container"],[4,"ngFor","ngForOf"],["class","ep-text-button tool-button",3,"title","click",4,"ngIf"],[1,"ep-text-button","tool-button",3,"title","click"],[1,"papycon",3,"ngClass"],[1,"tool-container"],[1,"tool-button",3,"title","click"],["class","ep-text-button expand-button","color","dark",3,"click",4,"ngIf"],["class","active-indicator",4,"ngIf"],["class","subtool-menu",4,"ngIf"],["color","dark",1,"ep-text-button","expand-button",3,"click"],[1,"papycon","papycon-chevron3-down"],[1,"active-indicator"],[1,"subtool-menu"],[1,"menu-container"],[1,"ep-text-button",3,"title","click"],[1,"center","divider"],["class","ep-text-button form-field-highlight tool-button",3,"title","click",4,"ngIf"],[1,"ep-text-button","form-field-highlight","tool-button",3,"title","click"],[1,"ep-text-button","annot-property-toggle","tool-button",3,"title","click"],[1,"papycon","papycon-show-panel"]],template:function(e,t){1&e&&(I.Sb(0,"div",0),I.Sb(1,"section",1),I.Dc(2,z,5,2,"ng-container",2),I.Rb(),I.Rb(),I.Sb(3,"section",3),I.Dc(4,$,7,4,"ng-container",2),I.Sb(5,"section",4),I.Dc(6,K,2,1,"ng-container",2),I.Rb(),I.Dc(7,ee,4,2,"section",2),I.Nb(8,"div",5),I.Sb(9,"section",6),I.Dc(10,te,3,4,"button",7),I.Rb(),I.Rb()),2&e&&(I.zb(2),I.jc("ngIf",t.annotToolActive&&t.runtimeEnv.get(t.RuntimeEnvKey.ANNOTATION_UNDO)||t.formToolActive&&t.runtimeEnv.get(t.RuntimeEnvKey.FORM_UNDO)),I.zb(2),I.jc("ngIf",t.windowWidth<t.windowResponsiveBasis.width),I.zb(1),I.Eb("form-tool",!t.annotToolActive),I.zb(1),I.jc("ngIf",t.documentService.checkAuthority(t.DocumentAction.DRAW_ANNOTATION)&&(t.annotToolActive||t.formToolActive||t.signatureToolActive)),I.zb(1),I.jc("ngIf",!t.annotToolActive),I.zb(3),I.jc("ngIf",t.isVisiblePropertyButton))},directives:[h.t,h.s,h.q],pipes:[j.a],styles:["i[_ngcontent-%COMP%]{line-height:22px}i.papycon-next-symbol2[_ngcontent-%COMP%], i.papycon-previous-symbol2[_ngcontent-%COMP%]{font-size:11px}i.papycon-regular-expression[_ngcontent-%COMP%]{font-size:13px}i.papycon-cross[_ngcontent-%COMP%], i.papycon-hamburger-menu[_ngcontent-%COMP%], i.papycon-minus[_ngcontent-%COMP%], i.papycon-plus2[_ngcontent-%COMP%]{font-size:14px}i.papycon-clip[_ngcontent-%COMP%], i.papycon-edit[_ngcontent-%COMP%], i.papycon-extend[_ngcontent-%COMP%], i.papycon-formtools[_ngcontent-%COMP%], i.papycon-one-page-continuous3[_ngcontent-%COMP%], i.papycon-two-page-continuous3[_ngcontent-%COMP%]{font-size:16px}i.papycon-annotation-list[_ngcontent-%COMP%], i.papycon-area-hide[_ngcontent-%COMP%], i.papycon-area-show[_ngcontent-%COMP%], i.papycon-bookmark[_ngcontent-%COMP%], i.papycon-case-sensitive[_ngcontent-%COMP%], i.papycon-check-mark4[_ngcontent-%COMP%], i.papycon-circle[_ngcontent-%COMP%], i.papycon-dropdown[_ngcontent-%COMP%], i.papycon-fit-height2[_ngcontent-%COMP%], i.papycon-fit-width2[_ngcontent-%COMP%], i.papycon-formfield[_ngcontent-%COMP%], i.papycon-hamburger-menu[_ngcontent-%COMP%], i.papycon-line[_ngcontent-%COMP%], i.papycon-line-measure2[_ngcontent-%COMP%], i.papycon-link[_ngcontent-%COMP%], i.papycon-list[_ngcontent-%COMP%], i.papycon-list-box[_ngcontent-%COMP%], i.papycon-memo3[_ngcontent-%COMP%], i.papycon-pencil[_ngcontent-%COMP%], i.papycon-polygon[_ngcontent-%COMP%], i.papycon-polygon-measure2[_ngcontent-%COMP%], i.papycon-polyline[_ngcontent-%COMP%], i.papycon-polyline-measure2[_ngcontent-%COMP%], i.papycon-radio2-checked[_ngcontent-%COMP%], i.papycon-redaction2[_ngcontent-%COMP%], i.papycon-redo[_ngcontent-%COMP%], i.papycon-revisioncloud[_ngcontent-%COMP%], i.papycon-ruler-hide[_ngcontent-%COMP%], i.papycon-ruler-show[_ngcontent-%COMP%], i.papycon-search[_ngcontent-%COMP%], i.papycon-show-panel[_ngcontent-%COMP%], i.papycon-show-panel2[_ngcontent-%COMP%], i.papycon-sign-list[_ngcontent-%COMP%], i.papycon-square[_ngcontent-%COMP%], i.papycon-text-field[_ngcontent-%COMP%], i.papycon-text-highlight[_ngcontent-%COMP%], i.papycon-text-strikeout[_ngcontent-%COMP%], i.papycon-text-underline[_ngcontent-%COMP%], i.papycon-textbox[_ngcontent-%COMP%], i.papycon-undo[_ngcontent-%COMP%]{font-size:17px}i.papycon-hand[_ngcontent-%COMP%], i.papycon-list2[_ngcontent-%COMP%], i.papycon-two-page3[_ngcontent-%COMP%]{font-size:18px}i.papycon-eraser[_ngcontent-%COMP%], i.papycon-pointer[_ngcontent-%COMP%], i.papycon-selection-annotation-text[_ngcontent-%COMP%], i.papycon-signature[_ngcontent-%COMP%]{font-size:19px}i.papycon-composite-document[_ngcontent-%COMP%], i.papycon-ok[_ngcontent-%COMP%], i.papycon-stamp2[_ngcontent-%COMP%]{font-size:20px}i.papycon-chevron3-down[_ngcontent-%COMP%]{font-size:10px;-webkit-transform:scale(.7);transform:scale(.7);-webkit-transform-origin:50% 50%;transform-origin:50% 50%}i.papycon-chevron3-down.expanded[_ngcontent-%COMP%]{-webkit-transform:scale(.7) rotate(-180deg);transform:scale(.7) rotate(-180deg)}@media screen and (max-width:811px){i.papycon-link[_ngcontent-%COMP%], i.papycon-memo3[_ngcontent-%COMP%]{font-size:14px}i.papycon-eraser[_ngcontent-%COMP%], i.papycon-pointer[_ngcontent-%COMP%], i.papycon-signature[_ngcontent-%COMP%], i.papycon-stamp2[_ngcontent-%COMP%]{font-size:16px}i.papycon-list2[_ngcontent-%COMP%], i.papycon-ok[_ngcontent-%COMP%], i.papycon-one-page-continuous3[_ngcontent-%COMP%]{font-size:17px}i.papycon-callout2[_ngcontent-%COMP%], i.papycon-more-symbol4[_ngcontent-%COMP%]{font-size:19px}}[_nghost-%COMP%]{position:relative;width:100%;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;background-color:#f4f4f4;border-bottom:1px solid #dadada;z-index:2}[_nghost-%COMP%], section[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}section[_ngcontent-%COMP%]{height:100%}section[_ngcontent-%COMP%] > .divider[_ngcontent-%COMP%]{height:32px;width:1px;background-color:#dadada}section[_ngcontent-%COMP%] > .divider.full[_ngcontent-%COMP%]{height:100%}.responsive-group[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%}section.left[_ngcontent-%COMP%]{padding-left:8px}section.left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:8px}section.left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:17px}section.right[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}section.right[_ngcontent-%COMP%]   section.annotation[_ngcontent-%COMP%]{padding:0 12px}section.right[_ngcontent-%COMP%]   div.tool-container[_ngcontent-%COMP%]{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;height:calc(48px / 2)}section.right[_ngcontent-%COMP%]   div.tool-container[_ngcontent-%COMP%]   button.tool-button[_ngcontent-%COMP%]{margin:0}section.right[_ngcontent-%COMP%]   div.tool-container[_ngcontent-%COMP%] + div.tool-container[_ngcontent-%COMP%]{margin-left:20px}section.right[_ngcontent-%COMP%]   button.close-button[_ngcontent-%COMP%], section.right[_ngcontent-%COMP%]   button.tool-button[_ngcontent-%COMP%]{margin:calc((42px - (48px / 2)) / 2) calc((48px - (48px / 2)) / 2);width:calc(48px / 2);height:calc(48px / 2)}section.right[_ngcontent-%COMP%]   button.close-button.expandable[_ngcontent-%COMP%], section.right[_ngcontent-%COMP%]   button.tool-button.expandable[_ngcontent-%COMP%]{margin-right:0}section.right[_ngcontent-%COMP%]   .expand-button[_ngcontent-%COMP%]{margin-left:2px;font-size:10px;line-height:10px}section.right[_ngcontent-%COMP%]   .expand-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{-webkit-transform:scale(.7);transform:scale(.7)}section.right[_ngcontent-%COMP%]   .active-indicator[_ngcontent-%COMP%]{position:absolute;left:0;bottom:-8px;width:100%;height:4px;background-color:#f79f1a;border-radius:2px}.subtool-menu[_ngcontent-%COMP%]{-webkit-box-shadow:0 4px 32px 0 hsla(0,0%,42.4%,.12);box-shadow:0 4px 32px 0 hsla(0,0%,42.4%,.12);position:absolute;height:44px;top:100%;left:5px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box;padding:6px 12px;margin-top:5px;border:1px solid #dadada;border-radius:2px;background-color:#fff;white-space:nowrap;z-index:3}.subtool-menu[_ngcontent-%COMP%], .subtool-menu[_ngcontent-%COMP%]   .menu-container[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.subtool-menu[_ngcontent-%COMP%]   .menu-container[_ngcontent-%COMP%]{min-width:100%}.subtool-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .subtool-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30px;height:30px}.subtool-container[_ngcontent-%COMP%]   button[color=white][_ngcontent-%COMP%], .subtool-menu[_ngcontent-%COMP%]   button[color=white][_ngcontent-%COMP%]{background-color:#f79f1a}.subtool-container[_ngcontent-%COMP%]   button[color=white][_ngcontent-%COMP%]:focus, .subtool-menu[_ngcontent-%COMP%]   button[color=white][_ngcontent-%COMP%]:focus{border-color:#fff}.subtool-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%], .subtool-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:12px}.subtool-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .subtool-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:17px}@media screen and (max-width:1200px){[_nghost-%COMP%]{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start}section.left[_ngcontent-%COMP%]{position:static}section.left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-right:10px}section.right[_ngcontent-%COMP%]{position:absolute;right:0;top:0}}@media screen and (max-width:811px){section.left[_ngcontent-%COMP%]   button.ep-button[_ngcontent-%COMP%]{display:none}}@media screen and (max-width:768px){section.left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:0}section.left[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}@media screen and (max-width:639px){section.left[_ngcontent-%COMP%]{display:none}}@media screen and (max-width:548px){[_nghost-%COMP%]{background:#fff;position:absolute;top:0;z-index:3}section.right[_ngcontent-%COMP%]{width:100%;position:relative}section.right[_ngcontent-%COMP%]   section.subtool-container[_ngcontent-%COMP%]{position:absolute;top:calc(42px + 1px);left:0;background-color:#f4f4f4;-webkit-box-shadow:0 2px 1px 0 hsla(0,0%,42.4%,.12);box-shadow:0 2px 1px 0 hsla(0,0%,42.4%,.12);border-bottom:1px solid #dadada;width:100%}section.right[_ngcontent-%COMP%]   section.subtool-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;padding:0 12px}section.right[_ngcontent-%COMP%]   section.subtool-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}section.right[_ngcontent-%COMP%]   section.subtool-container[_ngcontent-%COMP%]   button.tool-button[_ngcontent-%COMP%]{width:32px;height:32px}section.right[_ngcontent-%COMP%]   section.subtool-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:12px}section.close[_ngcontent-%COMP%], section.panel[_ngcontent-%COMP%]{width:48px}section.annotation[_ngcontent-%COMP%]{width:calc(100% - (48px * 2));white-space:nowrap;overflow-x:scroll;overflow-y:hidden;-ms-overflow-style:none;scrollbar-width:none}section.annotation[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}section.annotation[_ngcontent-%COMP%]   div.tool-container[_ngcontent-%COMP%]{display:inline-block}section.annotation[_ngcontent-%COMP%]   div.tool-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{vertical-align:middle}button.close-button[_ngcontent-%COMP%], button.expand-button[_ngcontent-%COMP%], button.tool-button[_ngcontent-%COMP%]{overflow:visible}}"],data:{animation:[E.a.expandSubTool(),Object(b.m)("hostState",[Object(b.j)("off",Object(b.k)({left:"5%"})),Object(b.j)("on",Object(b.k)({left:"calc(48% - 220px)"})),Object(b.l)("off <=> on",Object(b.e)("250ms linear"))])]},changeDetection:0}),ie),re=((ne=function e(){d(this,e)}).\u0275mod=I.Kb({type:ne}),ne.\u0275inj=I.Jb({factory:function(e){return new(e||ne)},providers:[F.a],imports:[[A.b,h.c]]}),ne),se=u("OIqU"),ae=u("WNJb"),ce=u("DOh9"),le=u("24iV"),ue=u("VRyK"),de=u("7o/Q"),he=u("D0XW");u("zx2A");var pe={leading:!0,trailing:!1};function fe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:he.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pe;return function(i){return i.lift(new ge(e,t,n.leading,n.trailing))}}var ge=function(){function e(t,n,i,o){d(this,e),this.duration=t,this.scheduler=n,this.leading=i,this.trailing=o}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new be(e,this.duration,this.scheduler,this.leading,this.trailing))}}]),e}(),be=function(e){t(o,e);var n=i(o);function o(e,t,i,r,s){var a;return d(this,o),(a=n.call(this,e)).duration=t,a.scheduler=i,a.leading=r,a.trailing=s,a._hasTrailingValue=!1,a._trailingValue=null,a}return p(o,[{key:"_next",value:function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(ve,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))}},{key:"_complete",value:function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}},{key:"clearThrottle",value:function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)}}]),o}(de.a);function ve(e){e.subscriber.clearThrottle()}var me=u("/uUt"),ye=u("K38v"),Se=["containerWrapperRef"];function Me(e,t){1&e&&I.Nb(0,"div",8)}var xe=function(){return{"object-fit":"contain"}};function Oe(e,t){if(1&e){var n=I.Tb();I.Sb(0,"sd-image",9),I.Zb("rendered",(function(){I.uc(n);var e=I.dc().$implicit;return I.dc(2).onImageRendered(e)})),I.Rb()}if(2&e){var i=I.dc().$implicit,o=I.dc(2);I.jc("pdfPage",i)("documentId",o.documentId)("imgStyle",I.mc(3,xe))}}function Pe(e,t){if(1&e&&(I.Sb(0,"div",5),I.Dc(1,Me,1,0,"div",6),I.Dc(2,Oe,1,4,"sd-image",7),I.Rb()),2&e){var n=t.$implicit,i=I.dc(2);I.zb(1),I.jc("ngIf",!i.isLoadedPage(n)),I.zb(1),I.jc("ngIf",i.isVisiblePage(n))}}function Ce(e,t){if(1&e&&(I.Sb(0,"div",3),I.Dc(1,Pe,3,2,"div",4),I.Rb()),2&e){var n=I.dc();I.Bc("visibility",n.eBookReady?"visible":"hidden"),I.jc("ngStyle",n.eBookContainerStyle()),I.zb(1),I.jc("ngForOf",n.pdfPages)}}var we,ke=function(e){return e.SINGLE="single",e.DOUBLE="double",e}({}),_e=((we=function(){function e(t,n,i,o,r,s,a,c,l,u){d(this,e),this.contentService=t,this.documentService=n,this.elementRef=i,this.changeDetectorRef=o,this.shortcutService=r,this.subscriptionService=s,this.renderer=a,this.scrollController=c,this.store$=l,this.pageService=u,this.eBookReady=!1,this.containerWrapperStyle={},this.WIDTH_MARGIN=64,this.HEIGHT_MARGIN=64,this.viewerDirection=0,this.isR2L=!1,this.bookSize={width:0,height:0},this.containerStyle={},this.loadedPageNoArr=[],this.scale=100,this.dragListeners=[],this.pdfPages=[]}return p(e,[{key:"ngOnInit",value:function(){this.initSubscriptions()}},{key:"ngOnChanges",value:function(){var e=this;this.eBookReady=!1,this.calcBookPageRatio(),this.eBook&&(this.eBook.turn("destroy"),this.eBook=void 0),setTimeout((function(){e.bindEbook()}))}},{key:"onWrapperMousedown",value:function(e){var t=this;this.prevDragEvent=e,this.dragListeners.push(this.renderer.listen(this.containerWrapperRef.nativeElement,"mousemove",(function(e){return t.onMoveEvent(e)})),this.renderer.listen(this.containerWrapperRef.nativeElement,"mouseup",(function(){return t.onEndDragEvent()})),this.renderer.listen(this.containerWrapperRef.nativeElement,"mouseleave",(function(){return t.onEndDragEvent()})))}},{key:"eBookContainerStyle",value:function(){return this.containerStyle}},{key:"isLoadedPage",value:function(e){return Boolean(this.loadedPageNoArr[e.i+1])}},{key:"isVisiblePage",value:function(e){return(this.prevPageNoRange||[]).includes(e.i+1)}},{key:"onImageRendered",value:function(e){this.loadedPageNoArr[e.i+1]=!0,this.contentService.publishSomePageLoaded(!0),this.changeDetectorRef.markForCheck()}},{key:"initSubscriptions",value:function(){var e=this;this.subscriptionService.push(this.store$.pipe(Object(P.f)("currentPageNo")).subscribe({next:function(t){return e.currentPageNo=t}}),this.store$.pipe(Object(P.f)("pageCount")).subscribe({next:function(t){return e.pageCount=t}}),this.shortcutService.getShortcutEvent(ce.a.EBOOK_LAST_PAGE).pipe(fe(100),T.a((function(){return e.eBook}))).subscribe({next:function(){return e.eBook.turn("previous")}}),this.shortcutService.getShortcutEvent(ce.a.EBOOK_NEXT_PAGE).pipe(fe(100),T.a((function(){return e.eBook}))).subscribe({next:function(){return e.eBook.turn("next")}}),this.contentService.pageNo$.pipe(k.a((function(e){return e.pageNo})),k.a((function(e){return P.d.getEbookPageNo(e)})),me.a(),T.a((function(){return e.eBook}))).subscribe({next:function(t){e.eBook.turn("page",t)}}),ue.a(E.F.windowResize$,this.store$.pipe(Object(P.f)("sideViewVisible")),this.store$.pipe(Object(P.f)("sideViewSize")),this.store$.pipe(Object(P.f)("rightSideViewVisible")),this.store$.pipe(Object(P.f)("rightSideViewSize"))).subscribe({next:function(){e.eBook&&e.safeCallTurnJS((function(){e.decideDisplayMode(),e.calcBookSize(),e.eBook.turn("size",e.bookSize.width,e.bookSize.height)}))}}),this.documentService.pdfInfo$.subscribe({next:function(t){e.pdfInfo=t,e.decideR2L()}}),this.store$.pipe(Object(x.e)("viewerDirection")).subscribe({next:function(t){e.viewerDirection=t,e.decideR2L()}}),this.store$.pipe(Object(P.f)("scale")).subscribe({next:function(t){if(e.scale=t,e.eBook){var n=1,i=e.bookSize.width;e.safeCallTurnJS((function(){e.decideDisplayMode(),e.calcBookSize(),n=e.bookSize.width/i,e.eBook.turn("size",e.bookSize.width,e.bookSize.height)}));var o=e.scrollController.jumpingOrigin;o.x>0&&(e.scrollContainer.scrollLeft=(e.scrollContainer.scrollLeft+o.x)*n-o.x),o.y>0&&(e.scrollContainer.scrollTop=(e.scrollContainer.scrollTop+o.y)*n-o.y)}}}),this.pageService.pdfPages$.subscribe({next:function(t){return e.pdfPages=t}}))}},{key:"calcBookPageRatio",value:function(){if(this.pdfPages){var e,t={},n=0;for(var i in this.pdfPages.forEach((function(e){var n=(e.bbox.h/e.bbox.w).toFixed(5);t[n]?t[n]++:t[n]=1})),t)t[i]>n&&(n=t[i],e=Number(i));this.bookPageRatio=e}}},{key:"decideDisplayMode",value:function(){var e=this.bookDisplayMode||null;this.bookDisplayMode=ke.DOUBLE,E.F.isMobile()&&this.bookPageRatio<this.scrollContainer.clientHeight/this.scrollContainer.clientWidth*2&&(this.bookDisplayMode=ke.SINGLE),e&&e!==this.bookDisplayMode&&this.eBook.turn("display",this.bookDisplayMode)}},{key:"calcBookSize",value:function(){this.bookPageRatio||this.calcBookPageRatio();var e,t,n=this.scrollContainer.clientWidth-(E.F.isMobile()?0:2*this.WIDTH_MARGIN),i=this.scrollContainer.clientHeight-(E.F.isMobile()?0:2*this.HEIGHT_MARGIN),o=this.bookDisplayMode===ke.SINGLE?this.bookPageRatio:this.bookPageRatio/2;o>i/n?e=(t=i)/o:t=(e=n)*o,this.bookSize.width=e*(this.scale/100),this.bookSize.height=t*(this.scale/100),this.containerWrapperStyle.width=this.bookSize.width+"px",this.containerWrapperStyle.height=this.bookSize.height+"px";var r="0",s="0";return this.bookSize.width<this.scrollContainer.clientWidth&&(r=((this.scrollContainer.clientWidth-this.bookSize.width)/2).toFixed(2)+"px"),this.bookSize.height<this.scrollContainer.clientHeight&&(s=((this.scrollContainer.clientHeight-this.bookSize.height)/2).toFixed(2)+"px"),this.containerWrapperStyle.transform="translate(".concat(r,", ").concat(s,")"),this.bookSize}},{key:"bindEbook",value:function(){var e=this;this.decideDisplayMode(),this.calcBookSize(),this.updateEbookStyle(),this.eBook=le("#ebook"),this.eBook.turn({display:this.bookDisplayMode,elevation:50,gradients:!0,autoCenter:!1,acceleration:!0,pages:this.pdfPages.length,duration:500,page:this.currentPageNo,width:this.bookSize.width,height:this.bookSize.height,direction:this.isR2L?"rtl":"ltr",when:{turning:function(t,n,i){var o=P.d.getEbookPageNo(n);e.updateEbookStyle(o),e.contentService.movePage({pageNo:o,pageMoveEvent:1}),e.scrollController.updateReadStatus(),e.changeDetectorRef.markForCheck()},end:function(t,n,i){var o=a(e.eBook.turn("range"),2),r=o[0],s=o[1],c=Array.from(new Array(s-r+1),(function(e,t){return t+r}));e.prevPageNoRange&&e.prevPageNoRange.forEach((function(t){c.includes(t)||(e.loadedPageNoArr[t]=!1)})),e.prevPageNoRange=c,e.changeDetectorRef.markForCheck()}}});var t=a(this.eBook.turn("range"),2),n=t[0],i=t[1];this.prevPageNoRange=Array.from(new Array(i-n+1),(function(e,t){return t+n})),this.eBookReady=!0,this.changeDetectorRef.markForCheck()}},{key:"updateEbookStyle",value:function(e){if(this.bookDisplayMode!==ke.SINGLE){var t=e;E.g.isDefined(t)||(t=this.currentPageNo);var n=parseInt(this.containerWrapperStyle.width,10),i=Math.min(n-this.bookSize.width,this.bookSize.width/2)+(n-this.bookSize.width<this.bookSize.width/2?(this.bookSize.width/2-(n-this.bookSize.width))/2:0);this.containerStyle["margin-left"]=1===t||t===this.pageCount?"".concat(this.isR2L!==(1===t)?"-":"").concat(i.toFixed(3),"px"):null}}},{key:"decideR2L",value:function(){var e,t,n=Boolean("R2L"===(null===(t=null===(e=this.pdfInfo)||void 0===e?void 0:e.ViewerPreferences)||void 0===t?void 0:t.Direction));n=0===this.viewerDirection?n:2===this.viewerDirection,this.store$.dispatch(P.a.set({key:"isR2L",value:n})),this.changeDirection(this.isR2L?"rtl":"ltr")}},{key:"changeDirection",value:function(e){var t=this;this.eBook&&this.eBook.turn("direction")!==e&&this.safeCallTurnJS((function(){t.eBook.turn("direction",e)}))}},{key:"safeCallTurnJS",value:function(e){this.containerStyle.transition="none",this.containerStyle["margin-left"]=null,this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges(),e(),this.updateEbookStyle(),this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges(),this.containerStyle.transition=null}},{key:"onMoveEvent",value:function(e){var t=e.clientX-this.prevDragEvent.clientX,n=e.clientY-this.prevDragEvent.clientY;t&&(this.scrollContainer.scrollLeft-=t),n&&(this.scrollContainer.scrollTop-=n),(n||t)&&(this.prevDragEvent=e)}},{key:"onEndDragEvent",value:function(){this.dragListeners.forEach((function(e){return e()})),this.dragListeners.splice(0),this.changeDetectorRef.markForCheck()}},{key:"isDragging",get:function(){return this.dragListeners.length>0}},{key:"scrollContainer",get:function(){return this.elementRef.nativeElement.parentElement}}]),e}()).\u0275fac=function(e){return new(e||we)(I.Mb(y.f),I.Mb(y.k),I.Mb(I.l),I.Mb(I.h),I.Mb(ce.c),I.Mb(g.G),I.Mb(I.E),I.Mb(ae.a),I.Mb(N.h),I.Mb(ye.b))},we.\u0275cmp=I.Gb({type:we,selectors:[["sd-ebook-view"]],viewQuery:function(e,t){var n;1&e&&I.zc(Se,!0),2&e&&I.sc(n=I.ac())&&(t.containerWrapperRef=n.first)},inputs:{documentId:"documentId"},features:[I.yb([g.G]),I.xb],decls:3,vars:4,consts:[[1,"container-wrapper",3,"ngStyle","mousedown"],["containerWrapperRef",""],["id","ebook","class","animated",3,"visibility","ngStyle",4,"ngIf"],["id","ebook",1,"animated",3,"ngStyle"],["class","pdf-page",4,"ngFor","ngForOf"],[1,"pdf-page"],["class","spin-loader",4,"ngIf"],[3,"pdfPage","documentId","imgStyle","rendered",4,"ngIf"],[1,"spin-loader"],[3,"pdfPage","documentId","imgStyle","rendered"]],template:function(e,t){1&e&&(I.Sb(0,"div",0,1),I.Zb("mousedown",(function(e){return t.onWrapperMousedown(e)})),I.Dc(2,Ce,2,4,"div",2),I.Rb()),2&e&&(I.Eb("dragging",t.isDragging),I.jc("ngStyle",t.containerWrapperStyle),I.zb(2),I.jc("ngIf",(null==t.pdfPages?null:t.pdfPages.length)>0))},styles:[".container-wrapper[_ngcontent-%COMP%]{cursor:url(grab.ff66d0e16708a8387706.cur),default;overflow:hidden}.container-wrapper.dragging[_ngcontent-%COMP%]{cursor:url(grabbing.64a865afeb83429aea35.cur),default}#ebook[_ngcontent-%COMP%]{width:100%;height:100%;z-index:0;overflow:initial!important}.animated[_ngcontent-%COMP%]{-webkit-transition:margin-left .2s ease-in-out;transition:margin-left .2s ease-in-out}.pdf-page[_ngcontent-%COMP%]{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;background-color:#fff}.pdf-page[_ngcontent-%COMP%]   .spin-loader[_ngcontent-%COMP%]{width:56px;height:56px;border-width:3px}.pdf-page[_ngcontent-%COMP%]   sd-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]  .page.p-temporal{background-color:#fff}"],changeDetection:0}),we),Te=u("K/4z"),Ee=u("rebN");function Ie(e,t){1&e&&I.Nb(0,"sd-bottom-right-indicator")}function Re(e,t){1&e&&I.Nb(0,"sd-scale-indicator")}var Ne,Ae=((Ne=function(){function e(t,n,i){d(this,e),this.changeDetectorRef=t,this.subscriptionService=n,this.store$=i}return p(e,[{key:"ngOnInit",value:function(){var e=this;this.subscriptionService.push(this.store$.pipe(Object(P.f)("viewMode")).subscribe({next:function(t){e.viewMode=t,e.changeDetectorRef.markForCheck()}}))}},{key:"RuntimeEnvKey",get:function(){return w.d}},{key:"runtimeEnv",get:function(){return w.f}},{key:"isEbookMode",get:function(){return 4===this.viewMode}}]),e}()).\u0275fac=function(e){return new(e||Ne)(I.Mb(I.h),I.Mb(g.G),I.Mb(N.h))},Ne.\u0275cmp=I.Gb({type:Ne,selectors:[["sd-indicator"]],features:[I.yb([g.G])],decls:2,vars:2,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(I.Dc(0,Ie,1,0,"sd-bottom-right-indicator",0),I.Dc(1,Re,1,0,"sd-scale-indicator",0)),2&e&&(I.jc("ngIf",!t.isEbookMode),I.zb(1),I.jc("ngIf",t.runtimeEnv.get(t.RuntimeEnvKey.SCALE_INDICATOR)))},styles:["[_nghost-%COMP%]{pointer-events:none}"],changeDetection:0}),Ne),De=["viewComp"];function Le(e,t){if(1&e&&I.Nb(0,"sd-measure-body",2,3),2&e){var n=I.dc();I.jc("model",n.model)}}var Fe,je=((Fe=function(){function e(t,n,i,o){d(this,e),this.contentService=t,this.annotSelectedService=n,this.changeDetectorRef=i,this.subscriptionService=o,this.indicatorState="off",this.indicatorStyle={},this.model=null}return p(e,[{key:"ngOnInit",value:function(){var e=this;this.subscriptionService.push(ue.a(this.annotSelectedService.selectionInfoChange$,ue.a(this.contentService.annotListEvent$,this.contentService.annotEvent$).pipe(T.a((function(e){return(null==e?void 0:e.sdEventType)===y.r.SELECTED}))),this.contentService.measureIndicatorEvent$.pipe(T.a((function(e){return"create"===(null==e?void 0:e.action)})))).subscribe({next:function(t){var n=t;if(0===e.annotSelectedService.selectedComponents.length)return e.turnOffIndicator(),void e.detectChanges();E.g.isDefined(n)||(n={annot:e.annotSelectedService.selectedComponents[0].data}),E.b.isLineDimension(n.annot)||E.b.isPolyLineDimension(n.annot)||E.b.isPolygonDimension(n.annot)?(e.model=n.annot,e.turnOnIndicator()):e.turnOffIndicator(),e.detectChanges()}}),this.contentService.measureIndicatorEvent$.pipe(T.a((function(e){return"edit"===(null==e?void 0:e.action)}))).subscribe({next:function(){return e.detectChanges()}}))}},{key:"detectChanges",value:function(){var e;this.changeDetectorRef.destroyed||(this.changeDetectorRef.markForCheck(),(null===(e=this.viewComp)||void 0===e?void 0:e.detectChanges)&&this.viewComp.detectChanges())}},{key:"indicatorChanged",value:function(e,t){var n=this;E.g.animDispChange(e,t,"block",null,(function(){"off"===n.indicatorState&&(n.model=null)}))}},{key:"turnOnIndicator",value:function(){this.indicatorState="on"}},{key:"turnOffIndicator",value:function(){this.indicatorState="off"}}]),e}()).\u0275fac=function(e){return new(e||Fe)(I.Mb(y.f),I.Mb(y.c),I.Mb(I.h),I.Mb(g.G))},Fe.\u0275cmp=I.Gb({type:Fe,selectors:[["sd-measure-indicator"]],viewQuery:function(e,t){var n;1&e&&I.Lc(De,!0),2&e&&I.sc(n=I.ac())&&(t.viewComp=n.first)},features:[I.yb([g.G])],decls:2,vars:3,consts:[[1,"container",3,"ngStyle"],[3,"model",4,"ngIf"],[3,"model"],["viewComp",""]],template:function(e,t){1&e&&(I.Sb(0,"div",0),I.Zb("@indicatorState.done",(function(e){return t.indicatorChanged(e,t.indicatorStyle)}))("@indicatorState.start",(function(e){return t.indicatorChanged(e,t.indicatorStyle)})),I.Dc(1,Le,2,1,"sd-measure-body",1),I.Rb()),2&e&&(I.jc("@indicatorState",t.indicatorState)("ngStyle",t.indicatorStyle),I.zb(1),I.jc("ngIf",t.model))},styles:[".container[_ngcontent-%COMP%]{-webkit-box-shadow:0 4px 32px 0 hsla(0,0%,42.4%,.12);box-shadow:0 4px 32px 0 hsla(0,0%,42.4%,.12);-webkit-box-sizing:border-box;box-sizing:border-box;min-width:192px;min-height:144px;position:relative;float:right;border:1px solid #dadada;border-radius:2px;background-color:#f4f4f4;opacity:0;display:none;margin-right:35px;padding:16px;pointer-events:none}"],data:{animation:[Object(b.m)("indicatorState",[Object(b.j)("off",Object(b.k)({opacity:0})),Object(b.j)("on",Object(b.k)({opacity:1})),Object(b.l)("off <=> on",Object(b.e)("250ms linear"))])]},changeDetection:0}),Fe);function ze(e,t){1&e&&(I.Sb(0,"div"),I.Fc(1),I.ec(2,"translate"),I.Rb()),2&e&&(I.zb(1),I.Gc(I.fc(2,1,"RATIO")))}function Ve(e,t){1&e&&(I.Sb(0,"div"),I.Fc(1),I.ec(2,"translate"),I.Rb()),2&e&&(I.zb(1),I.Gc(I.fc(2,1,"PRECISION")))}function Be(e,t){1&e&&(I.Sb(0,"div"),I.Fc(1),I.ec(2,"translate"),I.Rb()),2&e&&(I.zb(1),I.Gc(I.fc(2,1,"ROTATION")))}function We(e,t){if(1&e&&(I.Sb(0,"div"),I.Fc(1),I.Rb()),2&e){var n=I.dc();I.zb(1),I.Gc(n.model.attributes.Measure.R)}}function $e(e,t){if(1&e&&(I.Sb(0,"div"),I.Fc(1),I.Rb()),2&e){var n=I.dc();I.zb(1),I.Gc(1/n.precision)}}function Ue(e,t){if(1&e&&(I.Sb(0,"div"),I.Fc(1),I.Rb()),2&e){var n=I.dc();I.zb(1),I.Gc(n.lineDegree)}}var Ge,He,qe=((He=function(){function e(t,n){d(this,e),this.changeDetectorRef=t,this.translatePipe=n}return p(e,[{key:"isLineDimension",value:function(){return E.b.isLineDimension(this.model)}},{key:"isPolyLineDimension",value:function(){return E.b.isPolyLineDimension(this.model)}},{key:"isPolygonDimension",value:function(){return E.b.isPolygonDimension(this.model)}},{key:"detectChanges",value:function(){this.changeDetectorRef.markForCheck()}},{key:"precision",get:function(){return this.model.attributes.Measure?this.model.attributes.Measure.X[0].D:2}},{key:"lineDegree",get:function(){if(!this.isLineDimension())return null;var e=this.model.attributes.coordinates,t=e.sp,n=e.ep;return E.g.getTheta2(t.x,t.y,n.x,n.y).toFixed(Math.log10(this.precision))}},{key:"toolName",get:function(){return this.isLineDimension()?this.translatePipe.transform("DISTANCE"):this.isPolyLineDimension()?this.translatePipe.transform("PERIMETER"):this.isPolygonDimension()?this.translatePipe.transform("AREA"):this.translatePipe.transform("UNKNOWN")}},{key:"toolValue",get:function(){var e=E.r.calcMeasurement(this.model);return E.g.isDefined(e)?(E.b.isPolygonDimension(this.model)&&(e+=this.translatePipe.transform("SQUARE_OF")),e):"0"}}]),e}()).\u0275fac=function(e){return new(e||He)(I.Mb(I.h),I.Mb(A.d))},He.\u0275cmp=I.Gb({type:He,selectors:[["sd-measure-body"]],inputs:{model:"model"},features:[I.yb([g.G])],decls:16,vars:12,consts:[[1,"title"],[1,"property"],[1,"keys"],[4,"ngIf"],[1,"values"]],template:function(e,t){1&e&&(I.Sb(0,"div",0),I.Fc(1),I.ec(2,"translate"),I.Rb(),I.Sb(3,"div",1),I.Sb(4,"div",2),I.Sb(5,"div"),I.Fc(6),I.Rb(),I.Dc(7,ze,3,3,"div",3),I.Dc(8,Ve,3,3,"div",3),I.Dc(9,Be,3,3,"div",3),I.Rb(),I.Sb(10,"div",4),I.Sb(11,"div"),I.Fc(12),I.Rb(),I.Dc(13,We,2,1,"div",3),I.Dc(14,$e,2,1,"div",3),I.Dc(15,Ue,2,1,"div",3),I.Rb(),I.Rb()),2&e&&(I.zb(1),I.Ic("",t.toolName," ",I.fc(2,10,"TOOL"),""),I.zb(5),I.Gc(t.toolName),I.zb(1),I.jc("ngIf",t.model.attributes.Measure),I.zb(1),I.jc("ngIf",t.model.attributes.Measure),I.zb(1),I.jc("ngIf",t.isLineDimension()),I.zb(3),I.Gc(t.toolValue),I.zb(1),I.jc("ngIf",t.model.attributes.Measure),I.zb(1),I.jc("ngIf",t.model.attributes.Measure),I.zb(1),I.jc("ngIf",t.isLineDimension()))},directives:[h.t],pipes:[j.a],styles:[".title[_ngcontent-%COMP%]{font-size:14px;line-height:24px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e;margin-bottom:14px}.property[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.property[_ngcontent-%COMP%]   div.keys[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e;margin-right:16px}.property[_ngcontent-%COMP%]   div.keys[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(:first-child){margin-top:2px}.property[_ngcontent-%COMP%]   div.values[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Regular,sans-serif;color:#6c6c6c;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.property[_ngcontent-%COMP%]   div.values[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(:first-child){margin-top:2px}"],changeDetection:0}),He),Ze=((Ge=function e(){d(this,e)}).\u0275mod=I.Kb({type:Ge}),Ge.\u0275inj=I.Jb({factory:function(e){return new(e||Ge)},imports:[[A.b,h.c]]}),Ge);I.xc(je,[h.q,h.r,h.s,h.t,h.A,h.w,h.x,h.y,h.z,h.u,h.v,je,qe],[j.a,h.b,h.G,h.p,h.k,h.E,h.g,h.C,h.F,h.d,h.f,h.i,h.j,h.l]);var Xe=u("+Cyk");function Ye(e,t){1&e&&I.Nb(0,"sd-measure-indicator")}function Ke(e,t){1&e&&I.Nb(0,"sd-page-indicator")}var Qe,Je=((Qe=function(){function e(){d(this,e)}return p(e,[{key:"RuntimeEnvKey",get:function(){return w.d}},{key:"runtimeEnv",get:function(){return w.f}},{key:"WindowUtil",get:function(){return E.F}}]),e}()).\u0275fac=function(e){return new(e||Qe)},Qe.\u0275cmp=I.Gb({type:Qe,selectors:[["sd-bottom-right-indicator"]],features:[I.yb([g.G])],decls:2,vars:2,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(I.Dc(0,Ye,1,0,"sd-measure-indicator",0),I.Dc(1,Ke,1,0,"sd-page-indicator",0)),2&e&&(I.jc("ngIf",t.runtimeEnv.get(t.RuntimeEnvKey.MEASURE_INDICATOR)),I.zb(1),I.jc("ngIf",!t.WindowUtil.isMobile()&&t.runtimeEnv.get(t.RuntimeEnvKey.PAGE_INDICATOR)))},styles:["[_nghost-%COMP%]{position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;bottom:0;right:0;padding-bottom:40px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}"],changeDetection:0}),Qe),et=u("QLCq"),tt=u("XNiG"),nt=u("NXyV"),it=u("LRne"),ot=u("vkgz"),rt=u("Kj3r"),st=["img"];function at(e,t){1&e&&I.Nb(0,"div",10)}var ct,lt,ut,dt=function(e){return e.VISIBLE="visible",e.INVISIBLE="invisible",e}({}),ht=((ct=function(){function e(t,n,i,o,r,s,a,c,l,u){d(this,e),this.pageService=t,this.changeDetectorRef=n,this.scrollController=i,this.renderer=o,this.documentService=r,this.contentService=s,this.subscriptionService=a,this.renderingService=c,this.store$=l,this.muPDFService=u,this.MAX_WIDTH=200,this.MAX_HEIGHT=200,this.MARGIN=12,this.containerStyles={},this.imgStyles={},this.changesSrc=new tt.a,this.currentRotation=0,this._pageIndicatorVisible=dt.INVISIBLE}return p(e,[{key:"ngOnInit",value:function(){this.initSubscription()}},{key:"initSubscription",value:function(){var e=this;this.subscriptionService.push(this.store$.pipe(Object(P.f)("currentPageNo")).pipe(me.a(),T.a((function(t){return e.currentPageNo!==t}))).subscribe({next:function(t){e.currentPageNo=t,e.imgEl&&E.u.setVisibility(e.imgEl.nativeElement,!1,e.renderer,!0),e.changesSrc.next()}}),this.pageService.pdfPages$.subscribe({next:function(t){e.pdfPages=t,e.changesSrc.next()}}),this.documentService.openedDocument$.subscribe({next:function(t){e.doc=t,e.changesSrc.next()}}),this.store$.pipe(Object(P.f)("degree")).subscribe({next:function(t){e.currentRotation=t,e.changesSrc.next()}}),this.pageService.pageArrangeEvt$.subscribe({next:function(){E.u.setVisibility(e.imgEl.nativeElement,!1,e.renderer,!0),e.renderedPageNo=-1,e.cachedImageData=null,e.changesSrc.next()}}),this.store$.pipe(Object(P.f)("renderingMode"),T.a((function(e){return e===et.b.HYBRID})),_.a((function(){return e.muPDFService.document$.pipe(T.a((function(e){return 2===e.status})))}))).subscribe({next:function(){e.renderedPageNo=-1,e.cachedImageData=null,e.fetch(),e.updatePage()}}),this.scrollController.currentViewRect$.pipe(T.a(E.g.isDefined),ot.a((function(t){e.currentViewRect=t.rect,e.updatePage()}))).subscribe({next:function(t){return e.changesSrc.next()}}),this.changesSrc.pipe(ot.a((function(){e.detectChanges(),e.pageIndicatorVisible=dt.VISIBLE})),rt.a(50)).subscribe({next:function(){return e.fetch()}}),this.changesSrc.pipe(rt.a(2e3)).subscribe({next:function(){e.pageIndicatorVisible=dt.INVISIBLE,e.renderedPageNo=-1,e.detectChanges()}}),this.contentService.reload$.pipe(T.a((function(t){return t.pageInfo&&t.pageInfo[e.pageNo-1]})),_.a((function(){return e.store$})),Object(P.f)("renderingMode"),_.a((function(t){return nt.a((function(){return t!==et.b.CLIENT?it.a(void 0):e.muPDFService.document$.pipe(T.a((function(e){return 2===e.status})))}))}))).subscribe({next:function(){e.renderedPageNo=-1,e.cachedImageData=null,e.fetch()}}))}},{key:"updatePage",value:function(){var e;if(this.pageNo&&this.pdfPages&&this.pdfPages.length){var t=this.pdfPages[this.pageNo-1],n=t.bbox,i=t.r,o=this.MAX_WIDTH-2*this.MARGIN,r=this.MAX_HEIGHT-2*this.MARGIN,s=n.w,a=n.h,c=(i+this.currentRotation)/90%2==1;c&&(s=(e=[a,s])[0],a=e[1]),s<a?(this.thumbnailRatio=r/a,o=s*this.thumbnailRatio):(this.thumbnailRatio=o/s,r=a*this.thumbnailRatio),this.imgWidth=o,this.imgHeight=r,this.imgStyles.display="block",this.imgStyles.width=(c?r:o)+"px",this.imgStyles.height=(c?o:r)+"px",this.imgStyles.transform="rotate(".concat(i+this.currentRotation,"deg)"),this.containerStyles.width=o+2*this.MARGIN+"px",this.containerStyles.height=r+2*this.MARGIN+"px",this.detectChanges()}}},{key:"fetch",value:function(){var e,t,n=this,i=this.pageNo;if(this.doc&&this.renderedPageNo!==i&&(null===(e=this.pdfPages)||void 0===e?void 0:e.length))if((null===(t=this.cachedImageData)||void 0===t?void 0:t.pageNo)!==i)this.subscriptionService.set("httpSubscription",this.renderingService.fetchThumbnail(this.doc.streamdocsId,this.pdfPages[i-1].ref).subscribe({next:function(e){n.pageIndicatorVisible&&(n.cachedImageData={pageNo:i,imageData:Object.assign({},e)},n.renderedPageNo=i,n.imgData=e,E.u.setVisibility(n.imgEl.nativeElement,!0,n.renderer,!0),n.detectChanges())}}));else{if(!this.pageIndicatorVisible)return;setTimeout((function(){n.renderedPageNo=i,n.imgData=Object.assign({},n.cachedImageData.imageData),E.u.setVisibility(n.imgEl.nativeElement,!0,n.renderer,!0),n.detectChanges()}))}}},{key:"detectChanges",value:function(){this.changeDetectorRef.destroyed||this.changeDetectorRef.markForCheck()}},{key:"pageIndicatorVisible",get:function(){var e;return(null===(e=this.pdfPages)||void 0===e?void 0:e.length)&&this._pageIndicatorVisible||dt.INVISIBLE},set:function(e){this._pageIndicatorVisible=e}},{key:"pageNo",get:function(){return this.currentPageNo}},{key:"highlightRect",get:function(){return this.currentViewRect&&this.thumbnailRatio?{x:this.MARGIN+this.currentViewRect.x*this.thumbnailRatio,y:this.MARGIN+this.currentViewRect.y*this.thumbnailRatio,w:this.currentViewRect.w*this.thumbnailRatio,h:this.currentViewRect.h*this.thumbnailRatio}:{x:this.MARGIN,y:this.MARGIN,w:Number(this.imgStyles.width)||0,h:Number(this.imgStyles.height)||0}}}]),e}()).\u0275fac=function(e){return new(e||ct)(I.Mb(ye.b),I.Mb(I.h),I.Mb(ae.a),I.Mb(I.E),I.Mb(y.k),I.Mb(y.f),I.Mb(g.G),I.Mb(Xe.e),I.Mb(N.h),I.Mb(y.n))},ct.\u0275cmp=I.Gb({type:ct,selectors:[["sd-page-indicator"]],viewQuery:function(e,t){var n;1&e&&I.Lc(st,!0),2&e&&I.sc(n=I.ac())&&(t.imgEl=n.first)},features:[I.yb([g.G])],decls:12,vars:22,consts:[[3,"ngStyle"],["id","img-container",3,"ngStyle"],["class","spin-loader",4,"ngIf"],[3,"sdImage"],["img",""],["id","page-ind-mask"],["fill","white"],["fill","black"],["fill","black","stroke","none","opacity","0.1","mask","url(#page-ind-mask)"],["fill","none","stroke","#ff2635","stroke-width","3"],[1,"spin-loader"]],template:function(e,t){1&e&&(I.Sb(0,"div",0),I.Sb(1,"div",1),I.Dc(2,at,1,0,"div",2),I.Nb(3,"img",3,4),I.Rb(),I.cc(),I.Sb(5,"svg",0),I.Sb(6,"defs"),I.Sb(7,"mask",5),I.Nb(8,"rect",6),I.Nb(9,"rect",7),I.Rb(),I.Rb(),I.Nb(10,"rect",8),I.Nb(11,"rect",9),I.Rb(),I.Rb()),2&e&&(I.jc("@showState",t.pageIndicatorVisible)("ngStyle",t.containerStyles),I.zb(1),I.jc("ngStyle",t.imgStyles),I.zb(1),I.jc("ngIf",!t.imgData),I.zb(1),I.jc("sdImage",t.imgData),I.zb(2),I.jc("ngStyle",t.containerStyles),I.zb(3),I.Ab("x",t.MARGIN)("y",t.MARGIN)("width",t.imgWidth)("height",t.imgHeight),I.zb(1),I.Ab("x",t.highlightRect.x)("y",t.highlightRect.y)("width",t.highlightRect.w)("height",t.highlightRect.h),I.zb(1),I.Ab("x",t.MARGIN)("y",t.MARGIN)("width",t.imgWidth)("height",t.imgHeight),I.zb(1),I.Ab("x",t.highlightRect.x)("y",t.highlightRect.y)("width",t.highlightRect.w)("height",t.highlightRect.h))},styles:["*[_ngcontent-%COMP%]{pointer-events:none}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{position:relative;background:#c8c8c8;border-radius:2px;display:-webkit-box;display:-ms-flexbox;display:flex;float:right;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin:12px 35px 0 0}div#img-container[_ngcontent-%COMP%]{display:none;background:#fff;position:relative}div#img-container[_ngcontent-%COMP%]   .spin-loader[_ngcontent-%COMP%]{z-index:1;position:absolute;top:calc(50% - 28px);left:calc(50% - 28px);display:inline-block;width:56px;height:56px;border-width:3px}div#img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;top:0;left:0;z-index:2}img[_ngcontent-%COMP%]{width:100%;height:auto;visibility:hidden}svg[_ngcontent-%COMP%]{position:absolute;left:0;top:0}"],data:{animation:[Object(b.m)("showState",[Object(b.j)(dt.INVISIBLE,Object(b.k)({opacity:0,display:"none"})),Object(b.j)(dt.VISIBLE,Object(b.k)({opacity:1,display:"flex"})),Object(b.l)("".concat(dt.VISIBLE," => ").concat(dt.INVISIBLE),Object(b.e)("400ms linear"))])]},changeDetection:0}),ct),pt=u("zp1y"),ft=function(e){return e.VISIBLE="visible",e.INVISIBLE="invisible",e}({}),gt=((lt=function(){function e(t,n,i,o){d(this,e),this.changeDetectorRef=t,this.subscriptionService=n,this.translatePipe=i,this.store$=o,this.labelMap={0:{icon:"papycon papycon-list2",label:this.translatePipe.transform("SINGLE_PAGE_VIEW")},1:{icon:"papycon papycon-one-page-continuous3",label:this.translatePipe.transform("SINGLE_PAGE_CONTINUOUS")},2:{icon:"papycon papycon-two-page3",label:this.translatePipe.transform("TWO_PAGE_VIEW")},3:{icon:"papycon papycon-two-page-continuous3",label:this.translatePipe.transform("TWO_PAGE_CONTINUOUS")},4:{icon:"papycon papycon-one-page",label:this.translatePipe.transform("LAYOUT_INDICATOR_EBOOK")}},this.showScale=ft.INVISIBLE,this.showLayout=ft.INVISIBLE,this.visibilitySrc=new tt.a}return p(e,[{key:"ngOnInit",value:function(){var e=this;this.subscriptionService.push(this.visibilitySrc.pipe(rt.a(800)).subscribe({next:function(t){e.showScale=t,e.showLayout=t,e.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(P.f)("scale"),pt.a(this.store$.pipe(Object(P.f)("scaleRatio"))),k.a((function(e){var t=a(e,2),n=t[0],i=t[1];return Math.round(n/i)})),me.a()).subscribe({next:function(t){e.scale=Number(t.toFixed(0)),e.showScale=ft.VISIBLE,e.changeDetectorRef.markForCheck(),e.visibilitySrc.next(ft.INVISIBLE)}}),this.store$.pipe(Object(P.f)("viewMode")).subscribe({next:function(t){e.viewMode=t,e.showLayout=ft.VISIBLE,e.changeDetectorRef.markForCheck(),e.visibilitySrc.next(ft.INVISIBLE)}}))}}]),e}()).\u0275fac=function(e){return new(e||lt)(I.Mb(I.h),I.Mb(g.G),I.Mb(A.d),I.Mb(N.h))},lt.\u0275cmp=I.Gb({type:lt,selectors:[["sd-scale-indicator"]],features:[I.yb([g.G])],decls:7,vars:6,consts:[[1,"page-layout"],[1,"page-scale"]],template:function(e,t){1&e&&(I.Sb(0,"div",0),I.Nb(1,"i"),I.Sb(2,"span"),I.Fc(3),I.Rb(),I.Rb(),I.Sb(4,"div",1),I.Sb(5,"span"),I.Fc(6),I.Rb(),I.Rb()),2&e&&(I.jc("@showState",t.showLayout),I.zb(1),I.Bb(null==t.labelMap[t.viewMode]?null:t.labelMap[t.viewMode].icon),I.zb(2),I.Gc(null==t.labelMap[t.viewMode]?null:t.labelMap[t.viewMode].label),I.zb(1),I.jc("@showState",t.showScale),I.zb(2),I.Hc("",t.scale,"%"))},styles:["[_nghost-%COMP%]{position:absolute;left:50%;top:50%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);pointer-events:none}[_nghost-%COMP%], div[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}div[_ngcontent-%COMP%]{font-size:20px;line-height:28px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e;-webkit-box-shadow:0 4px 8px 0 hsla(0,0%,42.4%,.12);box-shadow:0 4px 8px 0 hsla(0,0%,42.4%,.12);-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#f4f4f4;border:1px solid #dadada;border-radius:4px;text-align:center;cursor:default;z-index:1}div.page-layout[_ngcontent-%COMP%]{width:168px;height:168px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin-bottom:20px}div.page-layout[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{width:80px;height:80px;line-height:80px;font-size:63px;margin-bottom:19px}div.page-scale[_ngcontent-%COMP%]{width:100px;height:50px}"],data:{animation:[Object(b.m)("showState",[Object(b.j)(ft.INVISIBLE,Object(b.k)({opacity:0,display:"none"})),Object(b.j)(ft.VISIBLE,Object(b.k)({opacity:1,display:"flex"})),Object(b.l)("".concat(ft.VISIBLE," => ").concat(ft.INVISIBLE),Object(b.e)("400ms linear"))])]},changeDetection:0}),lt),bt=u("524M"),vt=((ut=function e(){d(this,e)}).\u0275mod=I.Kb({type:ut}),ut.\u0275inj=I.Jb({factory:function(e){return new(e||ut)},imports:[[h.c,Ze,Xe.d]]}),ut);I.xc(Je,[h.q,h.r,h.s,h.t,h.A,h.w,h.x,h.y,h.z,h.u,h.v,je,bt.a,Je,Ae,gt,ht],[h.b,h.G,h.p,h.k,h.E,h.g,h.C,h.F,h.d,h.f,h.i,h.j,h.l]),I.xc(Ae,[h.q,h.r,h.s,h.t,h.A,h.w,h.x,h.y,h.z,h.u,h.v,je,bt.a,Je,Ae,gt,ht],[h.b,h.G,h.p,h.k,h.E,h.g,h.C,h.F,h.d,h.f,h.i,h.j,h.l]),I.xc(ht,[h.q,h.r,h.s,h.t,h.A,h.w,h.x,h.y,h.z,h.u,h.v,je,bt.a,Je,Ae,gt,ht],[h.b,h.G,h.p,h.k,h.E,h.g,h.C,h.F,h.d,h.f,h.i,h.j,h.l]);var mt=u("mgza"),yt=u("akkN"),St=u("JX91"),Mt=u("FQpF"),xt=u("GJmQ"),Ot=u("nYR2"),Pt=u("wvpq"),Ct=["searchComp"];function wt(e,t){1&e&&I.Nb(0,"div",19)}function kt(e,t){if(1&e&&(I.Sb(0,"span",20),I.Fc(1),I.Rb()),2&e){var n=I.dc();I.zb(1),I.Ic("",n.currentSelectedWord," / ",n.totalSearchedWord,"")}}function _t(e,t){if(1&e){var n=I.Tb();I.Sb(0,"img",21),I.Zb("click",(function(){return I.uc(n),I.dc().onClearWord()})),I.Rb()}}function Tt(e,t){if(1&e){var n=I.Tb();I.Sb(0,"button",13),I.Zb("click",(function(){I.uc(n);var e=I.dc();return e.useRegex=!e.useRegex})),I.Nb(1,"i",22),I.Rb()}if(2&e){var i=I.dc();I.zb(1),I.Eb("active",i.useRegex)}}var Et,It=function(e){return{"padding-right.px":e}},Rt=function(){return{standalone:!0}},Nt=((Et=function(){function e(t,n,i,o,r,s,a,c,l){d(this,e),this.contentService=t,this.pageService=n,this.searchService=i,this.modalService=o,this.changeDetectorRef=r,this.subscriptionService=s,this.store$=a,this.apiEventBridgeService=c,this.translatePipe=l,this.searchedPage=new Set,this.searchCaseSensitive=!1,this.useRegex=!1,this.keyword="",this.currentSelectedWord=0,this.totalSearchedWord=0,this.indicatorVisibility=!1,this.paddingRight=35,this.searchResult=[],this.isDestroying=!1,this.findSearchWordSrc=new tt.a,this.countTotalSearchWordSrc=new tt.a,this.keepSearchState=!1,this.checkWordCounting=!1}return p(e,[{key:"ngOnInit",value:function(){var e=this;this.subscriptionService.push(this.store$.pipe(Object(P.f)("pageCount")).subscribe({next:function(t){return e.pageCount=t}}),this.store$.pipe(Object(P.f)("currentPageNo")).subscribe({next:function(t){return e.currentPageNo=t}}),this.pageService.pdfPages$.subscribe({next:function(t){var n;e.pages=t,e.pagesLength=null!==(n=null==t?void 0:t.length)&&void 0!==n?n:0}}),this.findSearchWordSrc.pipe(rt.a(10)).subscribe({next:function(t){return e.initSearch(t)}})),this.searchService.searchState.keyword&&(this.keyword=this.searchService.searchState.keyword,this.searchCaseSensitive=this.searchService.searchState.searchCaseSensitive,this.useRegex=this.searchService.searchState.useRegex,-1===this.searchService.searchState.startPageIndex&&(this.searchService.searchState.startPageIndex=this.searchService.searchState.pageIndex),-1!==this.searchService.searchState.wordIndex&&this.searchService.searchState.pageIndex===this.currentPageNo-1||(this.searchService.initSearchState(),this.searchService.bundle.bundle.splice(0))),this.apiEventBridgeService.searchToolVisibilityChangedSrc.next()}},{key:"resubscribeSearchEvent",value:function(){var e=this,t=5,n=Math.max(Math.min(Math.ceil(this.pagesLength/10),100),10),i=0;this.subscriptionService.set("searchSub",this.countTotalSearchWordSrc.pipe(St.a({keyword:E.v.EMPTY_STRING,caseSensitive:this.searchCaseSensitive,regex:this.useRegex,streamdocsId:this.pdfDoc.streamdocsId,isForwardSearch:!0}),rt.a(100),me.a((function(t,n){return t.keyword===n.keyword&&t.caseSensitive===n.caseSensitive&&t.regex===n.regex&&t.streamdocsId===n.streamdocsId&&(e.bundleState.bundle[0].numOfItem&&e.findSearchWordSrc.next(n.isForwardSearch),!0)})),T.a((function(e){return e.keyword!==E.v.EMPTY_STRING})),ot.a((function(t){e.bundleState||(e.bundleState={bundle:[],activeIndex:0},e.searchService.bundle=e.bundleState),e.searchService.searchState.keyword!==t.keyword&&(e.contentService.clearSearchHighlight(),e.searchService.initSearchState(),e.searchService.searchState.keyword=t.keyword),e.isSearching=!0,e.indicatorVisibility=!0,e.checkWordCounting=!1,e.totalSearchedWord=0,e.currentSelectedWord=0,e.searchService.searchState.streamdocsId=t.streamdocsId,e.searchService.searchState.searchCaseSensitive=t.caseSensitive,e.searchService.searchState.useRegex=t.regex,e.contentService.searchRedactionMark([]),e.bundleState.bundle=[],e.bundleState.activeIndex=0,e.pushNewBundle(),e.changeDetectorRef.markForCheck()})),_.a((function(o){return e.searchService.getSearchResult(o.streamdocsId,o.keyword,o.caseSensitive,o.regex,e.getPageIndexes(0,10)).pipe(Mt.a((function(r,s){var a=--t>0?10:n,c=t>0?(s+1)*a:i;return c>=e.pagesLength?it.a(null):(i=c+a,e.searchService.getSearchResult(o.streamdocsId,o.keyword,o.caseSensitive,o.regex,e.getPageIndexes(c,a)))})),xt.a((function(t){return null!==t||(e.checkWordCounting=!0,!1)})),Ot.a((function(){!e.totalSearchedWord&&e.checkWordCounting&&(e.indicatorVisibility=!0),e.isSearching=!1,e.searchComp.focus(),e.changeDetectorRef.markForCheck()})))}))).subscribe({next:function(t){for(var n=e.bundleState.bundle[e.bundleState.bundle.length-1],i=t.length,o=0;o<i;o++)n.numOfItem>100&&(n=e.pushNewBundle()),n.results.push(t[o]),n.numOfItem+=t[o].words.length,0===e.currentSelectedWord&&(e.currentSelectedWord=1,e.indicatorVisibility=!0),e.totalSearchedWord+=t[o].words.length;e.bundleState.bundle[e.bundleState.bundle.length-1]=Object.assign({},n),e.changeDetectorRef.markForCheck()},error:function(){e.clear(),e.modalService.createCommonModal({type:mt.a.ERROR,title:e.translatePipe.transform("SERVER_ERROR_TITLE"),content:e.translatePipe.transform("SERVER_ERROR_MESSAGE"),confirmButton:!0,confirmLabel:e.translatePipe.transform("CLOSE")})}}))}},{key:"onKeyDown",value:function(e){"Enter"===e.key&&e.shiftKey?this.searchStart(!1):"Enter"===e.key&&this.searchStart(!0)}},{key:"clear",value:function(){this.resubscribeSearchEvent(),this.bundleState&&(this.bundleState.bundle=[],this.bundleState.activeIndex=0),this.keyword=E.v.EMPTY_STRING,this.contentService.clearSearchHighlight(),this.contentService.searchRedactionMark([])}},{key:"getPageIndexes",value:function(e,t){for(var n=[],i=Math.min(e+t,this.pages.length),o=e;o<i;++o)n.push(o);return n}},{key:"pushNewBundle",value:function(){return this.bundleState.bundle[this.bundleState.bundle.push({numOfItem:0,results:[]})-1]}},{key:"ngOnDestroy",value:function(){this.isDestroying=!0,this.keepSearchState||(this.contentService.clearSearchHighlight(),this.searchService.initSearchState()),this.searchResult.splice(0),this.apiEventBridgeService.searchToolVisibilityChangedSrc.next()}},{key:"ngAfterViewInit",value:function(){this.resubscribeSearchEvent(),this.searchComp.focus()}},{key:"searchStart",value:function(e){this.searchService.searchState.keyword&&this.searchService.searchState.keyword===this.keyword||this.findSearchWordSrc.next(e),this.countTotalSearchWordSrc.next({keyword:this.keyword,caseSensitive:this.searchCaseSensitive,regex:this.useRegex,streamdocsId:this.pdfDoc.streamdocsId,isForwardSearch:e})}},{key:"onClearWord",value:function(){this.paddingRight=35,this.indicatorVisibility=!1,this.isSearching=!1,this.currentSelectedWord=0,this.totalSearchedWord=0,this.searchService.searchState.keyword="",this.searchComp.focus(),this.clear()}},{key:"onClickDetail",value:function(){""===this.keyword&&(this.searchService.bundle=null),this.keepSearchState=!0,this.close(),this.store$.dispatch(P.a.set({key:"rightSideViewMode",value:O.a.TextSearch})),this.store$.dispatch(P.a.set({key:"rightSideViewVisible",value:!0}))}},{key:"initSearch",value:function(e){if(this.pdfDoc){if(this.changeDetectorRef.markForCheck(),0===this.keyword.length)return this.isSearching=!1,void this.changeDetectorRef.markForCheck();this.keyword===this.searchService.searchState.keyword&&this.searchCaseSensitive===this.searchService.searchState.searchCaseSensitive&&this.useRegex===this.searchService.searchState.useRegex&&this.pdfDoc.streamdocsId===this.searchService.searchState.streamdocsId&&this.searchResult[this.searchService.searchState.pageIndex]?this.gotoNextWord(e):(this.searchResult.splice(0),this.searchService.searchState.searchCaseSensitive=this.searchCaseSensitive,this.searchService.searchState.useRegex=this.useRegex,this.searchService.searchState.keyword=this.keyword,this.searchService.searchState.pageIndex=this.currentPageNo-1,this.searchService.searchState.wordIndex=-1,this.searchService.searchState.streamdocsId=this.pdfDoc.streamdocsId,this.searchService.searchState.startPageIndex=this.searchService.searchState.pageIndex,this.findWord(e))}}},{key:"close",value:function(){this.store$.dispatch(P.a.set({key:"searchToolActive",value:!1}))}},{key:"gotoNextWord",value:function(e){var t=this.searchResult[this.searchService.searchState.pageIndex].length;if(e){if(this.currentSelectedWord++,this.currentSelectedWord>this.totalSearchedWord&&(this.currentSelectedWord=1),this.searchService.searchState.wordIndex+1===t)return void this.gotoNextPage(e);this.searchService.searchState.wordIndex++}else{if(this.currentSelectedWord--,0===this.currentSelectedWord&&(this.currentSelectedWord=this.totalSearchedWord),this.searchService.searchState.wordIndex-1<0)return void this.gotoNextPage(e);this.searchService.searchState.wordIndex--}this.activateWord()}},{key:"gotoNextPage",value:function(e){if(this.searchedPage.add(this.searchService.searchState.pageIndex),e?(this.searchService.searchState.pageIndex++,this.searchService.searchState.pageIndex%=this.pageCount):(this.searchService.searchState.pageIndex--,-1===this.searchService.searchState.pageIndex&&(this.searchService.searchState.pageIndex=this.pageCount-1)),this.searchedPage.size===this.pageCount)return this.isSearching=!1,this.searchService.searchState.wordIndex=-1,this.searchService.searchState.startPageIndex!==this.searchService.searchState.pageIndex&&this.findWord(e),this.searchedPage.clear(),void this.changeDetectorRef.markForCheck();this.searchService.searchState.wordIndex=-1,this.findWord(e)}},{key:"findWord",value:function(e){var t=this;this.isDestroying||(this.searchResult[this.searchService.searchState.pageIndex]?this.validateWord(e):this.subscriptionService.set("dataSub",this.searchService.getSearchResult(this.pdfDoc.streamdocsId,this.searchService.searchState.keyword,this.searchService.searchState.searchCaseSensitive,this.searchService.searchState.useRegex,[this.searchService.searchState.pageIndex]).subscribe({next:function(n){t.isDestroying||(t.searchResult[t.searchService.searchState.pageIndex]=n.length?n[0].words:[],t.validateWord(e))},error:function(){t.searchService.searchState.keyword=E.v.EMPTY_STRING,t.isSearching=!1,t.modalService.createCommonModal({type:mt.a.ERROR,title:t.translatePipe.transform("SERVER_ERROR_TITLE"),content:t.translatePipe.transform("SERVER_ERROR_MESSAGE"),confirmButton:!0})}})))}},{key:"validateWord",value:function(e){if(this.searchResult[this.searchService.searchState.pageIndex].length>0){if(-1!==this.searchService.searchState.wordIndex)return void this.gotoNextWord(e);this.searchService.searchState.wordIndex=e?0:this.searchResult[this.searchService.searchState.pageIndex].length-1,this.activateWord()}else this.gotoNextPage(e)}},{key:"activateWord",value:function(){var e=this.searchService.searchState.pageIndex;this.searchService.activateWord(this.searchResult[e][this.searchService.searchState.wordIndex],this.pages[e]),this.changeDetectorRef.markForCheck()}},{key:"RuntimeEnvKey",get:function(){return w.d}},{key:"runtimeEnv",get:function(){return w.f}},{key:"environment",get:function(){return yt.c}}]),e}()).\u0275fac=function(e){return new(e||Et)(I.Mb(y.f),I.Mb(ye.b),I.Mb(y.t),I.Mb(mt.c),I.Mb(I.h),I.Mb(g.G),I.Mb(N.h),I.Mb(Pt.a),I.Mb(A.d))},Et.\u0275cmp=I.Gb({type:Et,selectors:[["sd-search-tool"]],viewQuery:function(e,t){var n;1&e&&I.zc(Ct,!0),2&e&&I.sc(n=I.ac())&&(t.searchComp=n.first)},inputs:{pdfDoc:"pdfDoc"},features:[I.yb([g.G])],decls:29,vars:27,consts:[[1,"header"],["class","spin-loader",4,"ngIf"],[1,"right"],["color","dark",1,"ep-text-button",3,"click"],[1,"papycon","papycon-extend"],[1,"papycon","papycon-cross"],[1,"input-row"],["size","small",3,"maxLength","placeholder","inputStyle","ngModelOptions","ngModel","ngModelChange","keydown"],["searchComp",""],["class","indicator",4,"ngIf"],["class","clear","src","assets/images/clear.svg",3,"click",4,"ngIf"],[1,"buttons"],[1,"left"],["size","tiny","color","white",1,"ep-button",3,"click"],[1,"papycon","papycon-case-sensitive"],["class","ep-button","size","tiny","color","white",3,"click",4,"ngIf"],["size","tiny","color","white",1,"ep-button",3,"title","disabled","click"],[1,"papycon","papycon-previous-symbol2"],[1,"papycon","papycon-next-symbol2"],[1,"spin-loader"],[1,"indicator"],["src","assets/images/clear.svg",1,"clear",3,"click"],[1,"papycon","papycon-regular-expression"]],template:function(e,t){1&e&&(I.Sb(0,"nav",0),I.Sb(1,"span"),I.Fc(2),I.ec(3,"translate"),I.Rb(),I.Dc(4,wt,1,0,"div",1),I.Sb(5,"section",2),I.Sb(6,"button",3),I.Zb("click",(function(){return t.onClickDetail()})),I.Nb(7,"i",4),I.Rb(),I.Sb(8,"button",3),I.Zb("click",(function(){return t.close()})),I.Nb(9,"i",5),I.Rb(),I.Rb(),I.Rb(),I.Sb(10,"nav",6),I.Sb(11,"form"),I.Sb(12,"pu-input",7,8),I.Zb("ngModelChange",(function(e){return t.keyword=e}))("keydown",(function(e){return t.onKeyDown(e)})),I.ec(14,"translate"),I.Rb(),I.Dc(15,kt,2,2,"span",9),I.Dc(16,_t,1,0,"img",10),I.Rb(),I.Rb(),I.Sb(17,"nav",11),I.Sb(18,"section",12),I.Sb(19,"button",13),I.Zb("click",(function(){return t.searchCaseSensitive=!t.searchCaseSensitive})),I.Nb(20,"i",14),I.Rb(),I.Dc(21,Tt,2,2,"button",15),I.Rb(),I.Sb(22,"section",2),I.Sb(23,"button",16),I.Zb("click",(function(){return t.searchStart(!1)})),I.ec(24,"translate"),I.Nb(25,"i",17),I.Rb(),I.Sb(26,"button",16),I.Zb("click",(function(){return t.searchStart(!0)})),I.ec(27,"translate"),I.Nb(28,"i",18),I.Rb(),I.Rb(),I.Rb()),2&e&&(I.zb(2),I.Gc(I.fc(3,16,"QUICK_SEARCH")),I.zb(2),I.jc("ngIf",t.isSearching),I.zb(8),I.jc("maxLength",t.environment.textSearchLengthLimit)("placeholder",I.fc(14,18,"SEARCH"))("inputStyle",I.nc(24,It,t.paddingRight))("ngModelOptions",I.mc(26,Rt))("ngModel",t.keyword),I.zb(3),I.jc("ngIf",t.indicatorVisibility),I.zb(1),I.jc("ngIf",t.keyword),I.zb(4),I.Eb("active",t.searchCaseSensitive),I.zb(1),I.jc("ngIf",t.runtimeEnv.get(t.RuntimeEnvKey.TEXT_SEARCH_VIEW_REGEX)),I.zb(2),I.jc("title",I.fc(24,20,"BACKWARD_SEARCH"))("disabled",!t.totalSearchedWord||!t.keyword),I.zb(3),I.jc("title",I.fc(27,22,"FORWARD_SEARCH"))("disabled",!t.totalSearchedWord||!t.keyword))},directives:[h.t,f.H,f.s,f.t,g.s,f.r,f.u],pipes:[j.a],styles:["[_nghost-%COMP%]{-webkit-box-shadow:0 4px 32px 0 hsla(0,0%,42.4%,.12);box-shadow:0 4px 32px 0 hsla(0,0%,42.4%,.12);position:absolute;bottom:8px;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:300px;height:auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-sizing:border-box;box-sizing:border-box;padding:16px;border-radius:2px;background:#fff;z-index:1}.header[_ngcontent-%COMP%], [_nghost-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.header[_ngcontent-%COMP%]{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;line-height:24px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e}.header[_ngcontent-%COMP%]   .spin-loader[_ngcontent-%COMP%]{margin-right:auto;margin-left:10px;width:22px;height:22px;pointer-events:none}.header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:24px;height:24px}.header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:12px}.header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-extend[_ngcontent-%COMP%]{font-size:16px}.header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-cross[_ngcontent-%COMP%]{font-size:14px}.input-row[_ngcontent-%COMP%], .input-row[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{position:relative}.input-row[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;margin-top:8px}.input-row[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   pu-input[_ngcontent-%COMP%]{width:100%}.input-row[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Medium,sans-serif;color:#6c6c6c;right:34px;opacity:.5}.input-row[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%], .input-row[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.input-row[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]{width:20px;height:20px;-o-object-fit:contain;object-fit:contain;right:4px}.input-row[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]:hover{cursor:pointer}.buttons[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-top:12px}.buttons[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:8px}.buttons[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-case-sensitive[_ngcontent-%COMP%]{font-size:17px}.buttons[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-.regular-expression[_ngcontent-%COMP%]{font-size:15px}.buttons[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#f79f1a}.buttons[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:8px}.buttons[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{font-size:11px}"],changeDetection:0}),Et),At=u("QZky"),Dt=u("yjpQ"),Lt=u("ZMf9"),Ft=u("bj6Y");function jt(e,t){if(1&e&&(I.cc(),I.Nb(0,"path")),2&e){var n=t.$implicit;I.Ab("d",n.path)("fill",n.color)}}var zt,Vt=((zt=function(){function e(t,n,i){d(this,e),this.apiHighlightService=t,this.changeDetectorRef=n,this.subscriptionService=i,this.renderingInfo=[]}return p(e,[{key:"ngOnInit",value:function(){var e=this;this.subscriptionService.push(this.apiHighlightService.highlightInfoMapChange$.pipe(T.a((function(t){return t.pageIndex===e.pdfPage.i}))).subscribe({next:function(t){return e.updatePath()}})),this.updatePath()}},{key:"updatePath",value:function(){var e=this,t=this.apiHighlightService.highlightInfoMap[this.pdfPage.i];if(t){var n={};t.forEach((function(e){n[e.color]?n[e.color]+=" "+e.path:n[e.color]=e.path})),this.renderingInfo.splice(0),Object.keys(n).forEach((function(t){e.renderingInfo.push({color:t,path:n[t]})})),this.changeDetectorRef.markForCheck()}}}]),e}()).\u0275fac=function(e){return new(e||zt)(I.Mb(Ft.b),I.Mb(I.h),I.Mb(g.G))},zt.\u0275cmp=I.Gb({type:zt,selectors:[["sd-api-highlight"]],inputs:{pdfPage:"pdfPage"},features:[I.yb([g.G])],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(I.cc(),I.Sb(0,"svg"),I.Dc(1,jt,1,2,"path",0),I.Rb()),2&e&&(I.zb(1),I.jc("ngForOf",t.renderingInfo))},directives:[h.s],styles:["svg[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0}svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill-opacity:.5}"],changeDetection:0}),zt),Bt=u("l207"),Wt=u("rb3Q"),$t=u("itXk"),Ut=u("1uah"),Gt=u("Cfvw"),Ht=u("xgIS"),qt=u("3E0/"),Zt=u("IzEk"),Xt=u("5+tZ"),Yt=u("z+Ro"),Kt=function(){function e(t,n,i,o){d(this,e),this.bufferTimeSpan=t,this.bufferCreationInterval=n,this.maxBufferSize=i,this.scheduler=o}return p(e,[{key:"call",value:function(e,t){return t.subscribe(new Jt(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))}}]),e}(),Qt=function e(){d(this,e),this.buffer=[]},Jt=function(n){t(a,n);var o=i(a);function a(e,t,n,i,s){var c;d(this,a),(c=o.call(this,e)).bufferTimeSpan=t,c.bufferCreationInterval=n,c.maxBufferSize=i,c.scheduler=s,c.contexts=[];var l=c.openContext();if(c.timespanOnly=null==n||n<0,c.timespanOnly)c.add(l.closeAction=s.schedule(en,t,{subscriber:r(c),context:l,bufferTimeSpan:t}));else{var u={bufferTimeSpan:t,bufferCreationInterval:n,subscriber:r(c),scheduler:s};c.add(l.closeAction=s.schedule(nn,t,{subscriber:r(c),context:l})),c.add(s.schedule(tn,n,u))}return c}return p(a,[{key:"_next",value:function(e){for(var t,n=this.contexts,i=n.length,o=0;o<i;o++){var r=n[o],s=r.buffer;s.push(e),s.length==this.maxBufferSize&&(t=r)}t&&this.onBufferFull(t)}},{key:"_error",value:function(t){this.contexts.length=0,e(s(a.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){for(var t=this.contexts,n=this.destination;t.length>0;){var i=t.shift();n.next(i.buffer)}e(s(a.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){this.contexts=null}},{key:"onBufferFull",value:function(e){this.closeContext(e);var t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();var n=this.bufferTimeSpan;this.add(e.closeAction=this.scheduler.schedule(en,n,{subscriber:this,context:e,bufferTimeSpan:n}))}}},{key:"openContext",value:function(){var e=new Qt;return this.contexts.push(e),e}},{key:"closeContext",value:function(e){this.destination.next(e.buffer);var t=this.contexts;(t?t.indexOf(e):-1)>=0&&t.splice(t.indexOf(e),1)}}]),a}(de.a);function en(e){var t=e.subscriber,n=e.context;n&&t.closeContext(n),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function tn(e){var t=e.bufferCreationInterval,n=e.bufferTimeSpan,i=e.subscriber,o=e.scheduler,r=i.openContext();i.closed||(i.add(r.closeAction=o.schedule(nn,n,{subscriber:i,context:r})),this.schedule(e,t))}function nn(e){var t=e.subscriber,n=e.context;t.closeContext(n)}var on,rn,sn=function(){function e(t,n){var i=this;d(this,e),this.comp=t,this.scrollEl=n,this.listeners=[],this.trigger=Ht.a(this.scrollEl,"mousedown").subscribe({next:function(e){return i.start(e)}})}return p(e,[{key:"destroy",value:function(){return this.destroyMoveListener(),this.trigger.unsubscribe(),E.v.destroy(this),null}},{key:"isDragging",value:function(){return Boolean(this.listeners.length)}},{key:"start",value:function(e){e.target.classList.contains("no-scroller")||(this.prevEvent=e,this.prevEvent.dataTransfer&&(this.prevEvent.dataTransfer.clearData(),this.prevEvent.dataTransfer.setDragImage(this.scrollEl.children[1],0,0),this.prevEvent.dataTransfer.effectAllowed="none"),this.buildMoveListener(),this.comp.markForCheck())}},{key:"scroll",value:function(e){var t=e.clientX-this.prevEvent.clientX,n=e.clientY-this.prevEvent.clientY;return t&&(this.scrollEl.scrollLeft-=t),n&&(this.scrollEl.scrollTop-=n),!(!n&&!t||(this.prevEvent=e,1))}},{key:"buildMoveListener",value:function(){var e=this;this.destroyMoveListener(),this.listeners.push(Ht.a(this.scrollEl,"mousemove").subscribe({next:function(t){return e.scroll(t)}}),Ht.a(this.scrollEl,"mouseup").subscribe({next:function(){return e.destroyMoveListener()}}),Ht.a(this.scrollEl,"mouseleave").subscribe({next:function(){return e.destroyMoveListener()}}))}},{key:"destroyMoveListener",value:function(){this.listeners.length&&(this.listeners.forEach((function(e){return e.unsubscribe()})),this.listeners.length=0)}}]),e}(),an=function(){function e(t,n,i){var o=this;d(this,e),this.comp=t,this.element=n,this.scrollController=i,this.touchListeners=[],this.isPinchStart=!1,this.touchListeners.push(Ht.a(this.element,"touchstart").subscribe({next:function(e){!o.isPinchStart&&e.touches.length>1&&(e.preventDefault(),o.isPinchStart=!0,o.pinchStart(e))}}),Ht.a(this.element,"touchmove").subscribe({next:function(e){o.isPinchStart&&e.touches.length>1&&o.pinchChange(e)}}),Ht.a(this.element,"touchend").subscribe({next:function(e){o.isPinchStart=!1,o.pinchEnd(e)}}),Ht.a(this.element,"touchcancel").subscribe({next:function(e){o.isPinchStart=!1,o.pinchEnd(e)}}))}return p(e,[{key:"destroy",value:function(){this.touchListeners.forEach((function(e){return e.unsubscribe()}))}},{key:"changeScale",value:function(e){this.comp.store$.dispatch(P.a.set({key:"scale",value:Number((this.baseScale*e).toFixed(2))})),Logger.debug("Changing scale",this.scale)}},{key:"pinchStart",value:function(e){this.baseScale=this.scale,this.baseEvent=e}},{key:"pinchEnd",value:function(e){this.scrollController.jumpingOrigin={x:0,y:0}}},{key:"pinchChange",value:function(e){this.scrollController.jumpingOrigin={x:(e.touches[0].clientX+e.touches[1].clientX)/2,y:(e.touches[0].clientY+e.touches[1].clientY)/2};var t=Math.hypot(this.baseEvent.touches[0].clientX-this.baseEvent.touches[1].clientX,this.baseEvent.touches[0].clientY-this.baseEvent.touches[1].clientY),n=Math.hypot(e.touches[0].clientX-e.touches[1].clientX,e.touches[0].clientY-e.touches[1].clientY);this.changeScale(n/t)}},{key:"scale",get:function(){return this.comp.scale}}]),e}(),cn=((rn=function(){function e(t){d(this,e),this.scrollController=t}return p(e,[{key:"createScroller",value:function(e,t){return new sn(e,t)}},{key:"createZoomer",value:function(e,t){return E.F.isTouchableDevice()?new an(e,t,this.scrollController):null}}]),e}()).\u0275fac=function(e){return new(e||rn)(I.Wb(ae.a))},rn.\u0275prov=I.Ib({token:rn,factory:rn.\u0275fac}),rn),ln=((on=function(){function e(t){var n=this;d(this,e),this.store$=t,this.screenSize=E.F.screenSize,this.orientationType=E.F.orientationType,this.store$.pipe(Object(P.f)("scale")).subscribe({next:function(e){return n.scale=e}}),this.store$.pipe(Object(P.f)("viewMode")).subscribe({next:function(e){return n.viewMode=e}}),this.store$.pipe(Object(P.f)("currentPageNo")).subscribe({next:function(e){return n.currentPageNo=e}}),this.store$.pipe(Object(P.f)("degree")).subscribe({next:function(e){return n.degree=e}})}return p(e,[{key:"fit",value:function(e,t,n){if(!E.g.isDefined(e))return!1;if(!e.pdfPages||!e.pdfPages.length)return!1;var i=this.scale,o=this.calculateFitSize(e,t,n)/Bt.b;return this.store$.dispatch(P.a.set({key:"scale",value:e.isSlideshow?o:Math.floor(o)})),i!==this.scale}},{key:"calculateFitSize",value:function(e,t,n){var i,o=e.pdfPages,r=P.d.isTwoPageMode(this.viewMode)?2:1,s=this.currentPageNo-1,c=s-s%r,l=a(o.slice(c,c+2),2),u=l[0],d=l[1],h=a(E.q.calculateMaxArea(u,this.degree),2),p=h[0],f=h[1],g=a(d?E.q.calculateMaxArea(d,this.degree):[0,0],2),b=g[0],v=g[1],m=t.offsetWidth,y=t.offsetHeight,S=this.selectFitMode(n,p,f,m,y),M=P.d.isTwoPageMode(this.viewMode)&&(o.length%2!=1||this.currentPageNo!==o.length),x=0,O=m/y,C=e.getPageContainerSize(this.viewMode,s),w=C.width/C.height;if(0===S)x=m,O>w&&(x-=E.F.scrollbarSize.vertical),i=p+2*se.a.MARGIN+(M?b+2*se.a.MARGIN:0);else if(1===S)x=y,O<w&&(x-=E.F.scrollbarSize.horizontal),i=(M?Math.max(f,v):f)+2*se.a.MARGIN;else{if(4===S)return Math.ceil(100*Bt.b);if(6===S){var k=this.selectFitMode(3,p,f,m,y);return i=0===k?p:f,(x=E.F.isLandscape()&&this.screenSize.height>this.screenSize.width?0===k?this.screenSize.height:this.screenSize.width:0===k?this.screenSize.width:this.screenSize.height)/i*100}Logger.warn("Unsupported fitMode=",S)}return Math.floor(x/i*100)}},{key:"selectFitMode",value:function(e,t,n,i,o){switch(e){case 2:return E.F.isSmallDevice()||t>n?0:1;case 3:return t/n>i/o?0:1;case 5:return t*Bt.b>i?0:4;default:return e}}}]),e}()).\u0275fac=function(e){return new(e||on)(I.Wb(N.h))},on.\u0275prov=I.Ib({token:on,factory:on.\u0275fac}),on),un=u("7ezp");u("lt0f");var dn,hn=((dn=function(){function e(t,n,i,o,r,s,a,c,l){d(this,e),this.link=t,this.portalRef=n,this.elementRef=i,this.annotService=o,this.contentService=r,this.modalService=s,this.subscriptionService=a,this.translatePipe=c,this.store$=l,this.pageIdx="",this.url="",this.radioOption="GoTo"}return p(e,[{key:"ngOnInit",value:function(){var e=this;this.subscriptionService.push(this.store$.pipe(Object(P.f)("pageCount")).subscribe({next:function(t){return e.pageCount=t}}),Ht.a(window,"keydown",{capture:!0}).pipe(T.a((function(e){return"Escape"===e.key})),T.a((function(){return e.modalService.lastModal===e.portalRef}))).subscribe({next:function(){return e.close()}})),this.elementRef.nativeElement.parentElement.style.minWidth="375px"}},{key:"close",value:function(){this.portalRef.dispose()}},{key:"createLink",value:function(){if(this.link.attributes.type=this.radioOption,"GoTo"===this.radioOption){if(0===this.pageIdx.length||isNaN(Number(this.pageIdx)))return void this.modalService.createCommonModal({type:mt.a.WARN,title:this.translatePipe.transform("CREATE_LINK"),content:this.translatePipe.transform("ONLY_NUMBER_CAN_BE_PAGE_INDEX"),confirmButton:!0,confirmLabel:this.translatePipe.transform("CLOSE")});if(parseInt(this.pageIdx,10)>this.pageCount||parseInt(this.pageIdx,10)<1)return void this.modalService.createCommonModal({type:mt.a.WARN,title:this.translatePipe.transform("CREATE_LINK"),content:this.translatePipe.transform("INVALID_PAGE_INDEX"),confirmButton:!0});this.link.attributes.dest=""+(parseInt(this.pageIdx,10)-1),this.link.attributes.contents=this.translatePipe.transform("GO_TO_PAGE").replace("%s",""+parseInt(this.pageIdx,10))}else{if(0===this.url.length)return void this.modalService.createCommonModal({type:mt.a.WARN,title:this.translatePipe.transform("CREATE_LINK"),content:this.translatePipe.transform("URL_CANNOT_BE_BLANK"),confirmButton:!0,confirmLabel:this.translatePipe.transform("CLOSE")});this.link.attributes.dest=this.url,this.link.attributes.contents=this.translatePipe.transform("GO_TO_SITE").replace("%s",this.link.attributes.dest)}this.annotService.putModel(this.link),this.contentService.fireAnnotEvent({sdEventType:y.r.CREATE,annot:this.link}),this.contentService.fireAnnotListEvent({from:"AnnotComponent",sdEventType:y.r.CREATE,annot:this.link}),this.close()}}]),e}()).\u0275fac=function(e){return new(e||dn)(I.Mb(un.a),I.Mb(un.b),I.Mb(I.l),I.Mb(y.d),I.Mb(y.f),I.Mb(mt.c),I.Mb(g.G),I.Mb(A.d),I.Mb(N.h))},dn.\u0275cmp=I.Gb({type:dn,selectors:[["sd-link-creation-dialog"]],features:[I.yb([g.G])],decls:19,vars:28,consts:[["value","GoTo",3,"label","ngModel","ngModelChange"],["size","tiny","type","text",3,"disabled","placeholder","ngModel","autofocus","ngModelChange"],["value","URI",3,"label","ngModel","ngModelChange"],["size","tiny","type","text",3,"disabled","placeholder","ngModel","ngModelChange"],["color","white","size","small",1,"ep-button",3,"click"],["color","primary","size","small",1,"ep-button",3,"click"]],template:function(e,t){1&e&&(I.Sb(0,"h3"),I.Fc(1),I.ec(2,"translate"),I.Rb(),I.Sb(3,"main"),I.Sb(4,"pu-radio-button",0),I.Zb("ngModelChange",(function(e){return t.radioOption=e})),I.ec(5,"translate"),I.Rb(),I.Sb(6,"pu-input",1),I.Zb("ngModelChange",(function(e){return t.pageIdx=e})),I.ec(7,"translate"),I.Rb(),I.Sb(8,"pu-radio-button",2),I.Zb("ngModelChange",(function(e){return t.radioOption=e})),I.ec(9,"translate"),I.Rb(),I.Sb(10,"pu-input",3),I.Zb("ngModelChange",(function(e){return t.url=e})),I.ec(11,"translate"),I.Rb(),I.Rb(),I.Sb(12,"footer"),I.Sb(13,"button",4),I.Zb("click",(function(){return t.close()})),I.Fc(14),I.ec(15,"translate"),I.Rb(),I.Sb(16,"button",5),I.Zb("click",(function(){return t.createLink()})),I.Fc(17),I.ec(18,"translate"),I.Rb(),I.Rb()),2&e&&(I.zb(1),I.Gc(I.fc(2,14,"CREATE_LINK")),I.zb(3),I.jc("label",I.fc(5,16,"GO_TO_SPECIFIC_PAGE"))("ngModel",t.radioOption),I.zb(2),I.jc("disabled","GoTo"!==t.radioOption)("placeholder",I.fc(7,18,"PLEASE_ENTER_PAGE_NUMBER"))("ngModel",t.pageIdx)("autofocus",!0),I.zb(2),I.jc("label",I.fc(9,20,"OPEN_WEB_PAGE"))("ngModel",t.radioOption),I.zb(2),I.jc("disabled","URI"!==t.radioOption)("placeholder",I.fc(11,22,"PLEASE_ENTER_URL"))("ngModel",t.url),I.zb(4),I.Gc(I.fc(15,24,"CANCEL")),I.zb(3),I.Gc(I.fc(18,26,"CREATE")))},directives:[g.B,f.r,f.u,g.s],pipes:[j.a],styles:["h3[_ngcontent-%COMP%]{font-size:20px;line-height:28px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e;margin:8px 0}main[_ngcontent-%COMP%]{font-size:13px;line-height:22px;color:#6c6c6c;white-space:pre-wrap;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}main[_ngcontent-%COMP%]   pu-input[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   pu-radio-button[_ngcontent-%COMP%]{margin:8px 0}footer[_ngcontent-%COMP%]{text-align:right;margin-top:32px}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:12px}"],changeDetection:0}),dn),pn=["preScrollable"],fn=["scaleWrapper"],gn=["slideshowOverlay"];function bn(e,t){if(1&e&&I.Nb(0,"sd-popups",9),2&e){I.dc(2);var n=I.tc(1);I.jc("contentViewRoot",n)}}function vn(e,t){if(1&e){var n=I.Tb();I.Sb(0,"div",15),I.Sb(1,"sd-page",16),I.Zb("mousedown",(function(e){I.uc(n);var i=t.$implicit;return I.dc(3).onPageMouseDown(e,i)})),I.Rb(),I.Rb()}if(2&e){var i=t.$implicit,o=I.dc(3);I.jc("page",i),I.zb(1),I.Eb("hide-outline",o.isSlideshow),I.jc("priority",o.renderPriorityOf(i))("page",i)("documentId",o.documentId)}}function mn(e,t){if(1&e&&I.Nb(0,"sd-contextmenu",17),2&e){var n=I.dc(3);I.jc("eventInfo",n.contextMenuEventInfo)("isClickOnGrayArea",n.isClickOnGrayArea)}}function yn(e,t){if(1&e&&(I.Sb(0,"div",10,11),I.Sb(2,"div",12),I.Dc(3,vn,2,6,"div",13),I.Rb(),I.Dc(4,mn,1,2,"sd-contextmenu",14),I.Rb()),2&e){var n=I.dc(2);I.zb(3),I.jc("ngForOf",n.pdfPages)("ngForTrackBy",n.trackByIndex),I.zb(1),I.jc("ngIf",n.shouldShowContextMenu&&n.runtimeEnv.get(n.MergedRuntimeEnvKey.CONTEXT_MENU))}}function Sn(e,t){if(1&e&&(I.Qb(0),I.Dc(1,bn,1,1,"sd-popups",7),I.Dc(2,yn,5,3,"div",8),I.Pb()),2&e){var n=I.dc();I.zb(1),I.jc("ngIf",n.pdfPages.length),I.zb(1),I.jc("ngIf",n.pdfPages.length)}}function Mn(e,t){if(1&e&&I.Nb(0,"sd-ebook-view",18),2&e){var n=I.dc();I.jc("documentId",n.documentId)}}function xn(e,t){1&e&&I.Nb(0,"div",19,20)}function On(e,t){if(1&e){var n=I.Tb();I.Qb(0),I.Sb(1,"div",23),I.Sb(2,"pu-input",24),I.Zb("keydown.enter",(function(){I.uc(n);var e=I.dc(2);return e.goToPage(e.pageNoFormControl.value)})),I.Rb(),I.Sb(3,"div",25),I.Fc(4),I.Rb(),I.Rb(),I.Pb()}if(2&e){var i=I.dc(2);I.zb(2),I.Bc("max-width",i.pageNoFormControl.value.toString().length<=3?29:null,"px"),I.jc("autoResize",i.pageNoFormControl.value.toString().length>=3)("maxLength",i.pageCount.toString().length)("formControl",i.pageNoFormControl),I.zb(1),I.jc("ngStyle",i.pdfDoc?null:i.viewerService.disableStyle),I.zb(1),I.Hc(" /\xa0",i.pageCount,"")}}function Pn(e,t){if(1&e){var n=I.Tb();I.Qb(0),I.Sb(1,"div",26),I.Sb(2,"button",27),I.Zb("click",(function(){I.uc(n);var e=I.dc(2);return e.previousPage(e.currentPageNo)})),I.ec(3,"translate"),I.Nb(4,"i",28),I.Rb(),I.Sb(5,"button",29),I.Zb("click",(function(){I.uc(n);var e=I.dc(2);return e.nextPage(e.currentPageNo)})),I.ec(6,"translate"),I.Nb(7,"i",30),I.Rb(),I.Rb(),I.Pb()}if(2&e){var i=I.dc(2);I.zb(2),I.jc("disabled",i.prevButtonDisabled)("title",I.fc(3,4,"PREVIOUS_PAGE")),I.zb(3),I.jc("disabled",i.nextButtonDisabled)("title",I.fc(6,6,"NEXT_PAGE"))}}function Cn(e,t){if(1&e){var n=I.Tb();I.Qb(0),I.Sb(1,"div",31),I.Sb(2,"button",32),I.Zb("click",(function(){I.uc(n);var e=I.dc(2);return e.zoom(-e.scaleStep)})),I.ec(3,"translate"),I.Nb(4,"i",33),I.Rb(),I.Sb(5,"button",34),I.Zb("click",(function(){I.uc(n);var e=I.dc(2);return e.zoom(e.scaleStep)})),I.ec(6,"translate"),I.Nb(7,"i",35),I.Rb(),I.Rb(),I.Pb()}if(2&e){var i=I.dc(2);I.zb(2),I.jc("disabled",!i.pdfDoc)("title",I.fc(3,4,"ZOOM_OUT")),I.zb(3),I.jc("disabled",!i.pdfDoc)("title",I.fc(6,6,"ZOOM_IN"))}}function wn(e,t){if(1&e){var n=I.Tb();I.Qb(0),I.Sb(1,"div",36),I.Sb(2,"button",37),I.Zb("click",(function(){return I.uc(n),I.dc(2).toggleSearchTool()})),I.ec(3,"translate"),I.Nb(4,"i",38),I.Rb(),I.Rb(),I.Pb()}if(2&e){var i=I.dc(2);I.zb(2),I.jc("disabled",!i.pdfDoc)("title",I.fc(3,2,"SEARCH"))}}function kn(e,t){if(1&e&&(I.Sb(0,"div",21),I.Dc(1,On,5,7,"ng-container",2),I.Dc(2,Pn,8,8,"ng-container",2),I.Nb(3,"div",22),I.Dc(4,Cn,8,8,"ng-container",2),I.Nb(5,"div",22),I.Dc(6,wn,5,4,"ng-container",2),I.Rb()),2&e){var n=I.dc();I.zb(1),I.jc("ngIf",n.runtimeEnv.get(n.RuntimeEnvKey.MAIN_TOOLBAR_PAGE_NAVIGATION)),I.zb(1),I.jc("ngIf",n.runtimeEnv.get(n.RuntimeEnvKey.MAIN_TOOLBAR_PAGINATION)),I.zb(2),I.jc("ngIf",n.runtimeEnv.get(n.RuntimeEnvKey.MAIN_TOOLBAR_SCALE)),I.zb(2),I.jc("ngIf",n.runtimeEnv.get(n.MergedRuntimeEnvKey.TEXT_SEARCH_VIEW)&&!n.hidableMenus[n.HidableView.TOOLBAR_SEARCH])}}function _n(e,t){if(1&e&&I.Nb(0,"sd-search-tool",39),2&e){var n=I.dc();I.jc("pdfDoc",n.pdfDoc)}}function Tn(e,t){1&e&&I.Nb(0,"sd-indicator")}var En,In,Rn=((En=function(){function e(t,n,i,o,r,s,a,c,l,u,h,p,g,b,v,m,y,S,M,x,O,P){d(this,e),this.acroFormService=t,this.annotService=n,this.changeDetectorRef=i,this.contentEventsFactory=o,this.documentService=r,this.pageService=s,this.fitService=a,this.annotSelectedService=c,this.contentService=l,this.scrollController=u,this.store$=h,this.viewerService=p,this.subscriptionService=g,this.apiEventBridgeService=b,this.guideLineService=v,this.modalService=m,this.sdContextMenuService=y,this.selectTextService=S,this.renderer=M,this.toastService=x,this.translatePipe=O,this.shortcutService=P,this.pageNoFormControl=new f.h(1),this.isContextMenuOpened=!1,this.clickedPage=null,this.isClickOnGrayArea=!1,this.pdfPages=[],this.preferences=null,this.hidableMenus={},this.scaleEventSrc=new tt.a,this.renderedSrc=new tt.a,this.customSrc=new tt.a}return p(e,[{key:"ngOnChanges",value:function(e){this.clearAllCache(),this.contentService.publishDocValidation(null)}},{key:"ngOnInit",value:function(){this.initSubscribers(),this.buildMobileZoomer()}},{key:"ngAfterViewChecked",value:function(){this.renderedSrc.next()}},{key:"ngOnDestroy",value:function(){this.destroyDragScroller(),this.destroyMobileZoomer(),this.finalizeSubscribers(),this.scrollController.stop(),this.clearAllCache(),this.contentService.publishDocValidation(null),E.v.destroy(this)}},{key:"markForCheck",value:function(){arguments.length>0&&void 0!==arguments[0]||E.v.EMPTY_STRING,this.changeDetectorRef.markForCheck()}},{key:"onRightMouseUp",value:function(e){2!==e.button||this.dragMode===M.a.MAGNIFY||this.annotSelectedService.selectedComponents.length||this.isSlideshow||(this.sdContextMenuService.publishContextMenuStatus(!0),this.contextMenuEventInfo=e)}},{key:"onPdfDocumentReady",value:function(e,t){var n,i,o=this;this.pdfInfo=t,this.store$.dispatch(P.a.set({key:"pageCount",value:e.length})),this.store$.dispatch(P.a.set({key:"scaleRatio",value:1}));var r=Boolean("R2L"===(null===(n=null==t?void 0:t.ViewerPreferences)||void 0===n?void 0:n.Direction));this.preferences&&E.g.isDefined(this.preferences.viewerDirection)&&(r=0===this.preferences.viewerDirection?r:2===this.preferences.viewerDirection),this.store$.dispatch(P.a.set({key:"isR2L",value:r})),this.stateHolder=new se.a,this.stateHolder.pdfPages=e,this.stateHolder.degree=this.degree,this.stateHolder.isR2L=this.isR2L,this.subscribeScale(),this.scrollController.start(this.contentView,this.stateHolder,this.contentViewElement),this.subscribePageArrange(),this.subscribePageNo(),this.subscribeRotation(),this.subscribeViewMode(),this.subscribeMainViewResized(),this.subscribeSimpleSearch(),this.fit(null!==(i={fitWidth:0,fitHeight:1,fitPage:3,actualSize:4}[this.overWrittenZoom])&&void 0!==i?i:this.preferences.pageFitMode),""===this.overWrittenZoom||Number.isNaN(Number(this.overWrittenZoom))||this.store$.dispatch(P.a.set({key:"scale",value:Number(this.overWrittenZoom)})),this.contentService.disableContinuousViewMode((E.F.isIE()||E.F.isEdge())&&4*this.stateHolder.getPageContainerSize(1).height*Bt.b>1e6),this.contentService.publishPageEndNoLoaded(),E.t.runAsync((function(){return o.apiEventBridgeService.documentReadySrc.next()}))}},{key:"trackByIndex",value:function(e,t){return t.i}},{key:"renderPriorityOf",value:function(e){return this.currentPageNo-e.i-1}},{key:"onPageMouseDown",value:function(e,t){return this.pageService.publishPage(t),this.annotSelectedService.unselectAll(),!0}},{key:"isEbookMode",value:function(){return 4===this.viewMode&&this.documentService.eBookStatus}},{key:"canTextSearch",value:function(){return this.documentService.checkAuthority(y.j.SEARCH_TEXT)}},{key:"destroyDragScroller",value:function(){var e;this.dragScroller=null===(e=this.dragScroller)||void 0===e?void 0:e.destroy()}},{key:"buildDragScroller",value:function(){this.destroyDragScroller(),M.a.MOVE===this.dragMode&&(this.dragScroller=this.contentEventsFactory.createScroller(this,this.contentViewElement))}},{key:"destroyMobileZoomer",value:function(){this.mobileZoomer&&this.mobileZoomer.destroy(),this.mobileZoomer=null}},{key:"buildMobileZoomer",value:function(){this.destroyMobileZoomer(),this.mobileZoomer=this.contentEventsFactory.createZoomer(this,this.contentViewElement)}},{key:"clearAllCache",value:function(){this.annotService.clearActionLogs(),this.acroFormService.clearActionLogs(),this.pageService.clearPageArrangeLogs()}},{key:"isMoving",value:function(){var e;return null===(e=this.dragScroller)||void 0===e?void 0:e.isDragging()}},{key:"goToPage",value:function(e){this.viewerService.goPage("string"!=typeof e?e:Number(e))}},{key:"previousPage",value:function(e){this.viewerService.goPage(Number(e)-P.d.getPageMovement(this.viewMode))}},{key:"nextPage",value:function(e){this.viewerService.goPage(Number(e)+P.d.getPageMovement(this.viewMode))}},{key:"publishScale",value:function(e){this.store$.dispatch(P.a.set({key:"scale",value:e})),this.contentService.publishFitMode(null)}},{key:"zoom",value:function(e){this.setScale(this.scale+e)}},{key:"setScale",value:function(e){"number"==typeof e&&isFinite(e)&&!isNaN(e)&&this.publishScale(e)}},{key:"toggleSearchTool",value:function(){this.documentService.checkAuthority(y.j.SEARCH_TEXT)&&!this.simpleSearchDisabled&&(w.f.get(w.d.QUICK_SEARCH_VIEW)?this.store$.dispatch(P.a.set({key:"searchToolActive",value:!this.searchToolActive})):this.rightSideViewVisible&&this.rightSideViewMode===O.a.TextSearch?this.store$.dispatch(P.a.set({key:"rightSideViewVisible",value:!1})):(this.store$.dispatch(P.a.set({key:"rightSideViewVisible",value:!0})),this.store$.dispatch(P.a.set({key:"rightSideViewMode",value:O.a.TextSearch}))))}},{key:"subscribeSimpleSearch",value:function(){var e=this;this.subscriptionService.push(this.shortcutService.getShortcutEvent(ce.a.SEARCH).subscribe({next:function(t){t.preventDefault(),t.stopPropagation(),e.documentService.checkAuthority(y.j.SEARCH_TEXT)&&w.f.get(w.c.TEXT_SEARCH_VIEW)&&!e.isEbookMode()&&!e.simpleSearchDisabled&&e.toggleSearchTool()}}))}},{key:"subscribePageNo",value:function(){var e=this;this.subscriptionService.push(this.contentService.pageNo$.pipe(T.a((function(t){return!P.d.isContinuousMode(e.viewMode)||0!==t.pageMoveEvent}))).subscribe({next:function(t){if(e.pageNoFormControl.setValue(t.pageNo),t.fit&&t.centerPoint)Logger.warn("Unsupported page change event");else{e.scrollController.lastIndex=void 0;var n=t.pageNo,i=P.d.getNextPageNo(n,e.viewMode,e.pageCount);if(e.store$.dispatch(P.a.set({key:"currentPageNo",value:i})),P.d.isContinuousMode(e.viewMode)||e.scrollController.updateReadStatus(),t.fit||t.centerPoint){var o,r,s=!1;if(t.fit){var c=t.fit,l=c.mode,u=c.args;switch(l){case"XYZ":u.zoom&&(s=100*u.zoom!==e.scale,e.store$.dispatch(P.a.set({key:"scale",value:100*u.zoom}))),null!==u.left&&(o=u.left),null!==u.top&&(r=e.pageService.pdfPages[n-1].bbox.h-u.top);break;case"Fit":case"FitB":return void e.scrollController.bufferPages((function(){e.scrollController.jumpToCurrentPage(),E.t.runAsync((function(){return e.fit(3)}))}));case"FitH":case"FitBH":e.fit(0),null!==u.top&&(r=e.pageService.pdfPages[n-1].bbox.h-u.top);break;case"FitV":case"FitBV":e.fit(1),null!==u.left&&(o=u.left);break;case"FitR":return void e.scrollController.bufferPages((function(){e.contentService.fitToRect({pageNo:n,rect:{bottom:e.pageService.pdfPages[n-1].bbox.h-u.bottom,left:u.left,top:e.pageService.pdfPages[n-1].bbox.h-u.top,right:u.right}})}));default:return void Logger.warn("Unsupported destination mode: "+l)}}else t.centerPoint&&(o=t.centerPoint.x,r=t.centerPoint.y);e.scrollController.bufferPages((function(){var i,c,l,u=null===(i=e.scrollController.currentViewRect)||void 0===i?void 0:i.rect,d=null!==(c=null!=o?o:u.x)&&void 0!==c?c:0,h=null!==(l=null!=r?r:u.y)&&void 0!==l?l:0;if(d||h){var p=(e.stateHolder.pdfPages[n-1].r+e.degree+360)%360,f=a(e.rotatePoint(n,p,d,h),2);d=f[0],h=f[1]}if(t.centerPoint){var g=E.u.normalizeScale(e.scale);d-=e.contentViewElement.clientWidth/(2*g),h-=e.contentViewElement.clientHeight/(2*g)}s?e.customSrc.next({pageNo:n,x:d,y:h}):e.scrollController.jumpToPage(n,d,h,0)}))}else e.scrollController.bufferPages((function(){return e.scrollController.jumpToCurrentPage()}))}}}))}},{key:"subscribeRotation",value:function(){var e=this;this.subscriptionService.push(this.store$.pipe(Object(P.f)("degree")).subscribe({next:function(t){Logger.debug("Changed rotation$",t),e.stateHolder.degree=e.degree,e.scrollController.bufferPages((function(){e.scrollController.jumpToCurrentPage(),e.apiEventBridgeService.rotateChangeAppliedSrc.next()}))}}))}},{key:"subscribeScale",value:function(){var e=this;this.subscriptionService.push(this.store$.pipe(Object(P.f)("scale"),qt.a(0)).subscribe({next:function(t){Logger.debug("Changed scale",t),e.scrollController.rescale(t),e.scrollController.bufferPages(),e.changeDetectorRef.destroyed||(e.changeDetectorRef.markForCheck(),e.scaleEventSrc.next()),e.scrollController.jumpToCurrentPage(),e.subscriptionService.push(E.t.runAsync((function(){return e.apiEventBridgeService.scaleChangeAppliedSrc.next()})))}}))}},{key:"subscribePageArrange",value:function(){var e=this;this.pageService.pageArrangeEvt$.pipe(T.a(E.g.isDefined)),this.pageService.pageArrangeEvt$.pipe(T.a(E.g.isDefined),T.a((function(e){return"rotate"!==e.action}))),this.subscriptionService.push(this.pageService.pageArrangeEvt$.pipe(T.a(E.g.isDefined)).subscribe({next:function(t){Logger.debug("Changed arrangement$",t),e.store$.dispatch(P.a.set({key:"pageCount",value:e.stateHolder.pdfPages.length})),e.stateHolder.pdfPages=e.pageService.pdfPages,e.pdfPages.splice(0),e.scrollController.bufferPages((function(){"copy"!==t.action&&"delete"!==t.action||e.scrollController.moveToPage(e.scrollController.findCurrentPageNo(),0)}))}}),this.pageService.pageArrangeEvt$.pipe(T.a(E.g.isDefined),T.a((function(e){return!e.isTemporary})),T.a((function(e){return"rotate"!==e.action}))).subscribe({next:function(t){return e.annotService.processPageArrangeEvt(t)}}))}},{key:"subscribeViewMode",value:function(){var e=this;this.subscriptionService.push(this.store$.pipe(ot.a((function(){e.pdfPages.length||e.scrollController.bufferPages()})),Object(P.f)("viewMode")).subscribe({next:function(){Logger.debug("Changed viewMode"),e.scrollController.changeViewMode(),e.fit(e.preferences.pageFitMode)||E.t.runAsync((function(){return e.scrollController.bufferPages((function(){return e.scrollController.jumpToCurrentPage()}))})),e.subscriptionService.push(E.t.runAsync((function(){return e.apiEventBridgeService.viewModeChangeAppliedSrc.next()})))}}))}},{key:"subscribeMainViewResized",value:function(){var e=this,t=function(){4!==e.viewMode&&e.contentView.update(e.stateHolder,e.scale,e.viewMode,e.currentPageNo,e.degree),e.changeDetectorRef.markForCheck()};this.subscriptionService.push(ue.a(E.F.windowResize$,this.store$.pipe(Object(P.f)("sideViewVisible")),this.store$.pipe(Object(P.f)("sideViewSize")),this.store$.pipe(Object(P.f)("rightSideViewVisible")),this.store$.pipe(Object(P.f)("rightSideViewSize")),this.store$.pipe(Object(P.e)([C.a.SIDE_VIEW,C.a.SIDE_VIEW_THUMBNAIL,C.a.SIDE_VIEW_BOOKMARK,C.a.SIDE_VIEW_ANNOTATION,C.a.SIDE_VIEW_REDACTION,C.a.SIDE_VIEW_EMBEDDED_FILE,C.a.SIDE_VIEW_FORM,C.a.SIDE_VIEW_SIGNATURE,C.a.TOOLBAR_SEARCH]))).subscribe({next:function(){t(),e.subscriptionService.push(E.t.runAsync((function(){return t()})))}}))}},{key:"initSubscribers",value:function(){var e=this;this.subscriptionService.push(this.store$.pipe(Object(P.f)("scale")).subscribe({next:function(t){return e.scale=t}}),this.store$.pipe(Object(P.f)("degree")).subscribe({next:function(t){return e.degree=t}}),this.store$.pipe(Object(P.f)("viewMode")).subscribe({next:function(t){return e.viewMode=t}}),this.store$.pipe(Object(P.f)("dragMode")).subscribe({next:function(t){e.dragMode=t,e.buildDragScroller()}}),this.store$.pipe(Object(P.f)("pageCount")).subscribe({next:function(t){return e.pageCount=t}}),this.store$.pipe(Object(P.f)("isR2L")).subscribe({next:function(t){return e.isR2L=t}}),this.store$.pipe(Object(P.f)("currentPageNo")).subscribe({next:function(t){e.currentPageNo=t,e.pageNoFormControl.setValue(e.currentPageNo),e.isSlideshow&&e.fit(6)}}),this.store$.pipe(Object(P.f)("searchToolActive")).subscribe({next:function(t){e.canTextSearch()?(e.searchToolActive=t,e.changeDetectorRef.markForCheck()):e.apiEventBridgeService.searchToolVisibilityChangedSrc.error("Unauthorized")}}),this.store$.pipe(Object(P.f)("rightSideViewMode")).subscribe({next:function(t){e.rightSideViewMode=t,e.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(P.f)("rightSideViewVisible")).subscribe({next:function(t){e.rightSideViewVisible=t,e.changeDetectorRef.markForCheck()}}),this.contentService.fitMode$.pipe(T.a(E.g.isDefined)).subscribe({next:function(t){return e.fit(t)}}),this.store$.pipe(Object(x.e)()).subscribe({next:function(t){var n,i;e.preferences=t;var o=Boolean("R2L"===(null===(i=null===(n=e.pdfInfo)||void 0===n?void 0:n.ViewerPreferences)||void 0===i?void 0:i.Direction));if(e.preferences&&E.g.isDefined(e.preferences.viewerDirection)&&(o=0===e.preferences.viewerDirection?o:2===e.preferences.viewerDirection),e.isR2L!==o){if(e.store$.dispatch(P.a.set({key:"isR2L",value:o})),e.pdfPages.splice(0),!e.scrollController||!e.stateHolder)return;e.stateHolder.isR2L=o,e.scrollController.bufferPages()}e.changeDetectorRef.detectChanges()}}),$t.b([this.pageService.pdfPages$.pipe(T.a(E.g.isDefined)),this.documentService.pdfInfo$]).pipe(T.a((function(t){var n=a(t,2),i=(n[0],n[1]);return e.pdfInfo!==i}))).subscribe({next:function(t){var n=a(t,2),i=n[0],o=n[1];return e.onPdfDocumentReady(i,o)}}),this.contentService.bufferedPage$.subscribe({next:function(t){return e.renderPage(t)}}),this.contentService.fitToRect$.subscribe({next:function(t){var n=t.pageNo,i=t.rect,o=i.right-i.left+20,r=i.bottom-i.top+20,s=(i.left+i.right)/2,a=(i.top+i.bottom)/2,c=e.contentViewElement.offsetWidth,l=e.contentViewElement.offsetHeight;e.store$.dispatch(P.a.set({key:"scale",value:Math.floor((l/c>r/o?c/o:l/r)/E.u.normalizeScale(1))})),e.contentService.publishFitMode(null),e.subscriptionService.push(E.t.runAsync((function(){return e.contentService.movePage({pageNo:n,pageMoveEvent:1,centerPoint:{x:s,y:a}})})))}}),this.contentService.scrollToPoint$.subscribe({next:function(t){var n=t.pageNo,i=t.point,o=i.x,r=i.y;e.subscriptionService.push(E.t.runAsync((function(){return e.contentService.movePage({pageNo:n,pageMoveEvent:1,centerPoint:{x:o,y:r}})})))}}),this.contentService.enableLinkCreationDialog$.subscribe({next:function(t){return e.modalService.createModal(hn,t)}}),this.contentService.rebufferPages$.subscribe({next:function(){e.stateHolder.pdfPages=e.pageService.pdfPages,e.stateHolder.degree=e.degree,e.stateHolder.isR2L=e.isR2L,e.scrollController.bufferPages()}}),this.sdContextMenuService.contextMenuStatus$.subscribe({next:function(t){e.isContextMenuOpened=t,e.changeDetectorRef.markForCheck()}}),E.F.windowMousedown$.pipe(T.a((function(t){var n;return(null===(n=e.selectedText)||void 0===n?void 0:n.textBox)&&2===t.button}))).subscribe({next:function(t){e.selectedText.page.i===e.clickedPage.i&&t.target!==e.scaleWrapper.nativeElement||e.selectTextService.publishSelectedText(null)}}),E.F.windowMousedown$.subscribe({next:function(t){return e.isClickOnGrayArea=t.target===e.scaleWrapper.nativeElement}}),this.pageService.clickedPage$.subscribe({next:function(t){return e.clickedPage=t}}),this.selectTextService.publishSelectedText$.subscribe({next:function(t){t&&(E.F.isMobile()||E.F.isTablet()||E.F.isTouchableDevice())&&e.sdContextMenuService.publishContextMenuStatus(!0),e.selectedText=t}}),this.customSrc.pipe(_.a((function(t){return Ut.a(it.a(t),e.scaleEventSrc)})),_.a((function(t){var n=a(t,1)[0];return Ut.a(it.a(n),e.renderedSrc).pipe(Zt.a(1))}))).subscribe({next:function(t){var n=a(t,1)[0];e.scrollController.bufferPages(),e.scrollController.jumpToPage(n.pageNo,n.x,n.y,0)}}),this.store$.pipe(Object(P.f)("isSlideshow"),T.a((function(e){return e})),_.a((function(t){if(!Boolean(E.g.getFullscreenMethod(e.contentViewElement)))return e.store$.dispatch(P.a.set({key:"isSlideshow",value:!1})),e.toastService.create({toastStyle:Wt.c.NOTIFICATION,content:e.translatePipe.transform("NOT_SUPPORTED_BROWSER_SLIDESHOW")}),it.a();e.stateHolder.isSlideshow=t,e.originalViewMode=e.viewMode,e.originalScale=e.scale,e.originalPageNo=e.currentPageNo,e.store$.dispatch(P.a.set({key:"viewMode",value:0}));var n=E.g.getFullscreenMethod(e.contentViewElement);return"requestFullscreen"!==n?it.a(e.contentViewElement[n]()):e.contentViewElement[n]()}))).subscribe({next:function(){e.viewerService.goPage(0),e.fit(6)}}),Gt.a(E.g.getFullscreenEventNames()).pipe(Xt.a((function(e){return Ht.a(E.F.nativeWindow,e)})),T.a((function(t){return t.target===e.contentViewElement})),function(e){var t=arguments.length,n=he.a;Object(Yt.a)(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],t--);var i=null;t>=2&&(i=arguments[1]);var o=Number.POSITIVE_INFINITY;return t>=3&&(o=arguments[2]),function(t){return t.lift(new Kt(e,i,o,n))}}(0),T.a((function(e){return e.length>0}))).subscribe({next:function(){if(E.g.isFullscreenMode())return e.renderer.setStyle(e.contentViewElement,"background-color","black"),e.renderer.setStyle(e.slideshowOverlay.nativeElement,"background-color","transparent"),e.subscribeSlideshowEvent(),void e.fit(6);e.unsubscribeSlideshowEvent(),e.stateHolder.isSlideshow=!1,e.viewerService.goPage(e.originalPageNo-1),e.renderer.setStyle(e.contentViewElement,"background-color",""),e.store$.dispatch(P.a.set({key:"isSlideshow",value:!1})),e.store$.dispatch(P.a.set({key:"viewMode",value:e.originalViewMode})),e.store$.dispatch(P.a.set({key:"scale",value:e.originalScale})),e.fit(null)}}))}},{key:"subscribeSlideshowEvent",value:function(){var e=this;this.subscriptionService.set("slideshowOrientationChange",nt.a((function(){return E.F.nativeWindow.screen.orientation?Ht.a(E.F.nativeWindow.screen.orientation,"change"):it.a(void 0)})).subscribe({next:function(){e.fitService.orientationType=E.F.orientationType,e.fit(6)}})),this.subscriptionService.set("slideshowResizeEvent",Ht.a(E.F.nativeWindow,"resize").pipe(T.a((function(){return document[E.g.getFullscreenElement()]&&e.stateHolder.isSlideshow}))).subscribe({next:function(){e.fitService.screenSize={width:E.F.width,height:E.F.height},e.fit(6)}})),this.subscriptionService.set("slideshowKeyboardEvent",Ht.a(E.F.nativeWindow,"keydown").subscribe({next:function(t){t.preventDefault(),t.stopPropagation(),"transparent"===e.slideshowOverlay.nativeElement.style.backgroundColor?"."!==t.key&&"B"!==t.key&&"b"!==t.key?","!==t.key&&"W"!==t.key&&"w"!==t.key?(1===e.currentPageNo||"ArrowLeft"!==t.key&&"ArrowUp"!==t.key&&"PageUp"!==t.key&&"Backspace"!==t.key||e.viewerService.goPage(e.currentPageNo-1),e.currentPageNo===e.pageCount||"ArrowRight"!==t.key&&"ArrowDown"!==t.key&&"PageDown"!==t.key&&" "!==t.key||e.viewerService.goPage(e.currentPageNo+1),1!==e.currentPageNo&&"Home"===t.key&&e.viewerService.goPage(0),e.currentPageNo!==e.pageCount&&"End"===t.key&&e.viewerService.goPage(e.pageCount)):e.renderer.setStyle(e.slideshowOverlay.nativeElement,"background-color","#FFFFFF"):e.renderer.setStyle(e.slideshowOverlay.nativeElement,"background-color","#000000"):e.renderer.setStyle(e.slideshowOverlay.nativeElement,"background-color","transparent")}})),this.subscriptionService.set("slideshowMouseEvent",Ht.a(this.slideshowOverlay.nativeElement,"pointerdown").pipe(T.a((function(e){return"mouse"===e.pointerType&&0===e.button}))).subscribe({next:function(t){t.preventDefault(),t.stopPropagation(),"transparent"===e.slideshowOverlay.nativeElement.style.backgroundColor?e.viewerService.goPage(e.currentPageNo+1):e.renderer.setStyle(e.slideshowOverlay.nativeElement,"background-color","transparent")}})),this.subscriptionService.set("slideshowTouchEvent",ue.a(Ht.a(this.slideshowOverlay.nativeElement,"touchstart"),Ht.a(this.slideshowOverlay.nativeElement,"touchmove"),Ht.a(this.slideshowOverlay.nativeElement,"touchend")).pipe(T.a((function(e){return e.touches.length>1}))).subscribe({next:function(e){e.preventDefault(),e.stopPropagation()}}))}},{key:"unsubscribeSlideshowEvent",value:function(){this.subscriptionService.get("slideshowOrientationChange").unsubscribe(),this.subscriptionService.get("slideshowResizeEvent").unsubscribe(),this.subscriptionService.get("slideshowKeyboardEvent").unsubscribe(),this.subscriptionService.get("slideshowMouseEvent").unsubscribe(),this.subscriptionService.get("slideshowTouchEvent").unsubscribe()}},{key:"fit",value:function(e){var t=this,n=this.fitService.fit(this.stateHolder,this.contentViewElement,e);return this.subscriptionService.push(E.t.runAsync((function(){var e=t.contentViewElement;e.scrollLeft=(e.scrollWidth-e.clientWidth)/2,t.apiEventBridgeService.fitModeAppliedSrc.next()}))),n}},{key:"renderPage",value:function(e){var t=this;this.ensureRenderPages(e.pages),this.markForCheck("renderPage"),e.postRender(),this.subscriptionService.push(E.t.runAsync((function(){var e=E.u.normalizeScale(t.scale),n=se.e.getOffset(t.stateHolder,t.contentViewElement,t.scale,t.viewMode,t.currentPageNo),i=Object.assign({},t.stateHolder.getPageFrameOffset(t.viewMode,t.currentPageNo-1));i.offsetX=(i.offsetX+se.a.MARGIN)*e,i.offsetY=(i.offsetY+se.a.MARGIN)*e,t.guideLineService.publishContentViewOffset({offsetX:n.offsetX+i.offsetX,offsetY:n.offsetY+i.offsetY,width:t.contentViewElement.offsetWidth,height:t.contentViewElement.offsetHeight}),t.guideLineService.publishScrollOffset({offsetX:t.contentViewElement.scrollLeft,offsetY:t.contentViewElement.scrollTop})})))}},{key:"ensureRenderPages",value:function(e){var t,n,i,o;if(!this.pdfPages.length)return(t=this.pdfPages).push.apply(t,c(e));var r=e[0].i-this.pdfPages[0].i,s=e[e.length-1].i-this.pdfPages[this.pdfPages.length-1].i;if(r||s){if(this.pdfPages.splice(Math.max(this.pdfPages.length+s,0)),r>0&&this.pdfPages.splice(0,r),!this.pdfPages.length)return(n=this.pdfPages).push.apply(n,c(e));var a=s>0?e.slice(Math.max(e.length-s,0)):[];e.splice(Math.max(-r,0)),(i=this.pdfPages).splice.apply(i,[0,0].concat(c(e))),(o=this.pdfPages).push.apply(o,c(a))}}},{key:"finalizeSubscribers",value:function(){this.pageService.publishPages(null),this.documentService.closeEBook()}},{key:"rotatePoint",value:function(e,t,n,i){var o=this.stateHolder.pdfPages[e-1].bbox,r=n,s=i;if((n||i)&&t)switch(t){case 90:r=o.h-i,s=n;break;case 180:r=o.w-n,s=o.h-i;break;case 270:r=i,s=o.w-n}return[r,s]}},{key:"RuntimeEnvKey",get:function(){return w.d}},{key:"MergedRuntimeEnvKey",get:function(){return w.c}},{key:"runtimeEnv",get:function(){return w.f}},{key:"HidableView",get:function(){return C.a}},{key:"shouldShowContextMenu",get:function(){return this.isContextMenuOpened}},{key:"prevButtonDisabled",get:function(){return this.currentPageNo<=1}},{key:"nextButtonDisabled",get:function(){return 4===this.viewMode?P.d.getEbookPageNo(this.pageCount)<=this.currentPageNo:this.pageCount<=this.currentPageNo}},{key:"scaleStep",get:function(){return yt.c.scaleChange}},{key:"isVisibleFloatingNav",get:function(){return w.f.get(w.d.MAIN_TOOLBAR_PAGE_NAVIGATION)||w.f.get(w.d.MAIN_TOOLBAR_PAGINATION)||w.f.get(w.d.MAIN_TOOLBAR_SCALE)||w.f.get(w.c.TEXT_SEARCH_VIEW)&&!this.hidableMenus[C.a.TOOLBAR_SEARCH]}},{key:"documentId",get:function(){return this.pdfDoc?this.pdfDoc.streamdocsId:null}},{key:"contentViewStyle",get:function(){return this.dragMode!==M.a.MOVE?null:{cursor:"url(assets/images/grab".concat(this.isMoving()?"bing":E.v.EMPTY_STRING,".cur),default")}}},{key:"isSlideshow",get:function(){var e;return null===(e=this.stateHolder)||void 0===e?void 0:e.isSlideshow}},{key:"contentViewElement",get:function(){return this.preScrollable.nativeElement}},{key:"simpleSearchDisabled",get:function(){return!this.pdfDoc}}]),e}()).\u0275fac=function(e){return new(e||En)(I.Mb(y.a),I.Mb(y.d),I.Mb(I.h),I.Mb(cn),I.Mb(y.k),I.Mb(ye.b),I.Mb(ln),I.Mb(y.c),I.Mb(y.f),I.Mb(ae.a),I.Mb(N.h),I.Mb(y.w),I.Mb(g.G),I.Mb(Pt.a),I.Mb(Ee.b),I.Mb(mt.c),I.Mb(Te.b),I.Mb(L.a),I.Mb(I.E),I.Mb(Wt.b),I.Mb(A.d),I.Mb(ce.c))},En.\u0275cmp=I.Gb({type:En,selectors:[["sd-content-view"]],viewQuery:function(e,t){var n;1&e&&(I.zc(pn,!0),I.Lc(fn,!0),I.zc(se.b,!0),I.Lc(gn,!0)),2&e&&(I.sc(n=I.ac())&&(t.preScrollable=n.first),I.sc(n=I.ac())&&(t.scaleWrapper=n.first),I.sc(n=I.ac())&&(t.contentView=n.first),I.sc(n=I.ac())&&(t.slideshowOverlay=n.first))},inputs:{pdfDoc:"pdfDoc",overWrittenZoom:"overWrittenZoom"},features:[I.yb([ln,cn,g.G]),I.xb],decls:8,vars:7,consts:[["sdContentViewLayout","",1,"pre-scrollable",3,"ngStyle","mouseup"],["preScrollable",""],[4,"ngIf"],[3,"documentId",4,"ngIf"],["id","slideshow-overlay",4,"ngIf"],["class","floating-page-nav",4,"ngIf"],[3,"pdfDoc",4,"ngIf"],[3,"contentViewRoot",4,"ngIf"],["id","scale-wrapper","sdScaleWrapperLayout","",4,"ngIf"],[3,"contentViewRoot"],["id","scale-wrapper","sdScaleWrapperLayout",""],["scaleWrapper",""],["id","scroll-expander","sdScrollExpanderLayout",""],["class","page-frame","sdPageFrameLayout","",3,"page",4,"ngFor","ngForOf","ngForTrackBy"],[3,"eventInfo","isClickOnGrayArea",4,"ngIf"],["sdPageFrameLayout","",1,"page-frame",3,"page"],["sdPageContentLayout","",3,"priority","page","documentId","mousedown"],[3,"eventInfo","isClickOnGrayArea"],[3,"documentId"],["id","slideshow-overlay"],["slideshowOverlay",""],[1,"floating-page-nav"],[1,"divider"],[1,"page-input"],["size","tiny","align","left",1,"current-page-index","left-child",3,"autoResize","maxLength","formControl","keydown.enter"],[1,"page-label",3,"ngStyle"],[1,"page-move"],["color","dark",1,"ep-text-button","previous-page","left-child",3,"disabled","title","click"],[1,"papycon","papycon-previous-symbol2"],["color","dark",1,"ep-text-button","next-page",3,"disabled","title","click"],[1,"papycon","papycon-next-symbol2"],[1,"zoom"],["color","dark",1,"ep-text-button","zoom-out","left-child",3,"disabled","title","click"],[1,"papycon","papycon-minus"],["color","dark",1,"ep-text-button","zoom-in",3,"disabled","title","click"],[1,"papycon","papycon-plus"],[1,"search"],["color","dark",1,"ep-text-button","search-button",3,"disabled","title","click"],[1,"papycon","papycon-search"],[3,"pdfDoc"]],template:function(e,t){1&e&&(I.Sb(0,"div",0,1),I.Zb("mouseup",(function(e){return t.onRightMouseUp(e)})),I.Dc(2,Sn,3,2,"ng-container",2),I.Dc(3,Mn,1,1,"sd-ebook-view",3),I.Dc(4,xn,2,0,"div",4),I.Rb(),I.Dc(5,kn,7,4,"div",5),I.Dc(6,_n,1,1,"sd-search-tool",6),I.Dc(7,Tn,1,0,"sd-indicator",2)),2&e&&(I.jc("ngStyle",t.contentViewStyle),I.zb(2),I.jc("ngIf",!t.isEbookMode()),I.zb(1),I.jc("ngIf",t.isEbookMode()),I.zb(1),I.jc("ngIf",t.isSlideshow),I.zb(1),I.jc("ngIf",!t.isSlideshow&&t.isVisibleFloatingNav),I.zb(1),I.jc("ngIf",t.canTextSearch()&&t.searchToolActive),I.zb(1),I.jc("ngIf",!t.isSlideshow))},styles:["#scale-wrapper[_ngcontent-%COMP%]{position:absolute;top:0}#scroll-expander[_ngcontent-%COMP%]{display:table;-webkit-transform-origin:0 0;transform-origin:0 0}.pre-scrollable[_ngcontent-%COMP%]{overflow:auto;position:relative;width:100%;height:100%;-webkit-overflow-scrolling:touch}.page-frame[_ngcontent-%COMP%]{position:absolute;display:table-cell}.floating-page-nav[_ngcontent-%COMP%]{-webkit-box-shadow:0 4px 32px 0 hsla(0,0%,42.4%,.12);box-shadow:0 4px 32px 0 hsla(0,0%,42.4%,.12);background-color:#fff;-ms-flex-align:center;position:absolute;bottom:10px;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);border:1px solid #dadada;border-radius:90px;height:42px}.floating-page-nav[_ngcontent-%COMP%], .floating-page-nav[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.divider){display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;align-items:center}.floating-page-nav[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.divider){-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;margin:0 12px}.floating-page-nav[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .left-child[_ngcontent-%COMP%]{margin-right:8px}.floating-page-nav[_ngcontent-%COMP%]   div.page-input[_ngcontent-%COMP%]{margin-left:20px;margin-right:0}.floating-page-nav[_ngcontent-%COMP%]   div.page-input[_ngcontent-%COMP%]   .left-child[_ngcontent-%COMP%]{margin-right:4px}.floating-page-nav[_ngcontent-%COMP%]   pu-input.current-page-index[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Regular,sans-serif;color:#6c6c6c;min-width:29px;border-radius:2px}.floating-page-nav[_ngcontent-%COMP%]   div.page-label[_ngcontent-%COMP%]{font-size:14px;line-height:24px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e;white-space:pre}.floating-page-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:12px;padding:7px 5px}.floating-page-nav[_ngcontent-%COMP%]   div.divider[_ngcontent-%COMP%]{height:24px;width:1px;background-color:#dadada}.floating-page-nav[_ngcontent-%COMP%]   div.search[_ngcontent-%COMP%]{margin-right:16px}.floating-page-nav[_ngcontent-%COMP%]   div.search[_ngcontent-%COMP%]   button.search-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.hide-outline[_ngcontent-%COMP%]{outline:none}#slideshow-overlay[_ngcontent-%COMP%]{width:100%;height:100%;position:fixed;top:0;left:0;cursor:default}"],changeDetection:0}),En),Nn=u("PqYM"),An=u("zP0r"),Dn=["imgEl"],Ln=function(e){return e.WebkitOptimizeContrast="-webkit-optimize-contrast",e.Pixelated="pixelated",e}({}),Fn=((In=function(){function e(t,n,i,o,r,s,a,c){d(this,e),this.contentService=t,this.pageService=n,this.changeDetectorRef=i,this.renderer=o,this.subscriptionService=r,this.renderingService=s,this.store$=a,this.muPDFService=c,this.imgStyle={},this.resetted=new I.n,this.rendered=new I.n,this.failed=new I.n,this.currentImageScale=0,this.retryHandler=null}return p(e,[{key:"ngOnInit",value:function(){var e=this;this.imgStyle.imageRendering="-webkit-optimize-contrast",this.subscriptionService.push(ue.a(this.store$.pipe(Object(x.e)("renderingOption")),this.store$.pipe(Object(x.e)("hidpiRendering")),this.store$.pipe(Object(P.f)("scale"),ot.a((function(t){return e.scale=t})),An.a(1),rt.a(200),T.a((function(t){return t!==e.currentImageScale})),ot.a((function(t){return e.currentImageScale=t}))),this.contentService.reload$.pipe(T.a((function(t){return y.q.typeAndPage(t,e.pdfPage.i,y.g.Image)})),_.a((function(){return e.store$})),Object(P.f)("renderingMode"),_.a((function(t){return t!==et.b.CLIENT?it.a(void 0):e.muPDFService.document$.pipe(T.a((function(e){return 2===e.status})))})))).subscribe({next:function(){return e.delayFetch()}}),this.store$.pipe(Object(P.f)("quality")).subscribe({next:function(t){return e.quality=t}}),this.store$.pipe(Object(P.f)("renderingMode"),T.a((function(e){return e===et.b.HYBRID})),_.a((function(){return e.muPDFService.document$})),T.a((function(e){return 2===e.status}))).subscribe({next:function(){return e.delayFetch()}})),this.subscribePageArrangeEvent()}},{key:"ngOnDestroy",value:function(){this.imgData=void 0,this.imgElementRef.nativeElement.parentElement.removeChild(this.imgElementRef.nativeElement),E.v.destroy(this)}},{key:"ngOnChanges",value:function(){this.renderer.setStyle(this.imgElementRef.nativeElement,E.v.SK_Z_INDEX,"".concat(E.p.Image).concat(E.v.EMPTY_STRING)),this.delayFetch()}},{key:"fetch",value:function(){var e=this;if(this.pdfPage){this.imgStyle.imageRendering=Ln.WebkitOptimizeContrast;var t=this.renderingService.renderingMode!==et.b.SERVER;this.subscriptionService.set("dataSub",this.renderingService.fetchImage(this.documentId,this.pdfPage.ref,{zoom:Object(Xe.g)(this.scale,t),jpegQuality:this.quality,renderAnnots:!1,increasePrint:!1}).subscribe({next:function(n){var i=t&&E.F.isChromium()&&w.f.get(w.d.CLIENT_RENDERING_PIXELATED);e.imgStyle.imageRendering=i?Ln.Pixelated:Ln.WebkitOptimizeContrast,e.render(n)},error:function(t){return e.onFetchFailed(t)}}))}}},{key:"preloadFetch",value:function(){var e=this;this.pdfPage&&this.subscriptionService.set("preloadDataSub",this.renderingService.fetchPreload(this.documentId,this.pdfPage.ref).pipe(T.a((function(){return!e.imgData&&Math.max(e.pdfPage.bbox.w,e.pdfPage.bbox.h)>1e3}))).subscribe({next:function(t){E.g.isDefined(t)&&e.render(t)}}))}},{key:"delayFetch",value:function(){var e=this;this.subscriptionService.set("delayedFetchSub",Nn.a(E.y.IMAGE).subscribe({next:function(){e.clearRetryHandler(),e.fetchFailCount=0,e.preloadFetch(),e.fetch()}}))}},{key:"onFetchFailed",value:function(e){var t=this;this.clearRetryHandler(),++this.fetchFailCount>yt.c.retryCount?this.failed.emit(e):this.retryHandler=setTimeout((function(){return t.fetch()}),yt.c.retryInterval)}},{key:"clearRetryHandler",value:function(){null!==this.retryHandler&&(clearTimeout(this.retryHandler),this.retryHandler=null)}},{key:"render",value:function(e){e&&(this.imgData=e),E.u.setVisibility(this.imgElementRef.nativeElement,!0,this.renderer,!0),this.changeDetectorRef.markForCheck(),this.rendered.emit()}},{key:"reset",value:function(){E.u.setVisibility(this.imgElementRef.nativeElement,!1,this.renderer),this.resetted.emit()}},{key:"subscribePageArrangeEvent",value:function(){var e=this;this.subscriptionService.push(this.pageService.pageArrangeEvt$.pipe(T.a((function(t){return ye.b.arrangeAffectedChecker(e.pdfPage.originalIndex,t)}))).subscribe({next:function(){e.reset(),e.ngOnChanges()}}))}}]),e}()).\u0275fac=function(e){return new(e||In)(I.Mb(y.f),I.Mb(ye.b),I.Mb(I.h),I.Mb(I.E),I.Mb(g.G),I.Mb(Xe.e),I.Mb(N.h),I.Mb(y.n))},In.\u0275cmp=I.Gb({type:In,selectors:[["sd-image"]],viewQuery:function(e,t){var n;1&e&&I.zc(Dn,!0),2&e&&I.sc(n=I.ac())&&(t.imgElementRef=n.first)},inputs:{pdfPage:"pdfPage",documentId:"documentId",imgStyle:"imgStyle"},outputs:{resetted:"resetted",rendered:"rendered",failed:"failed"},features:[I.yb([g.G]),I.xb],decls:2,vars:2,consts:[[1,"image",3,"sdImage","ngStyle"],["imgEl",""]],template:function(e,t){1&e&&I.Nb(0,"img",0,1),2&e&&I.jc("sdImage",t.imgData)("ngStyle",t.imgStyle)},styles:["img.image[_ngcontent-%COMP%]{width:100%;height:100%;visibility:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}"],changeDetection:0}),In),jn=["magnifySvg"];function zn(e,t){if(1&e&&(I.cc(),I.Nb(0,"rect",3)),2&e){var n=I.dc();I.Ab("height",n.rectRender.h)("width",n.rectRender.w)("x",n.rectRender.x)("y",n.rectRender.y)}}var Vn,Bn=((Vn=function(){function e(t,n,i,o,r){d(this,e),this.changeDetectorRef=t,this.contentService=n,this.renderer=i,this.subscriptionService=o,this.store$=r,this.created=!1,this.startPoint={x:0,y:0},this.rectRender={x:0,y:0,w:0,h:0},this.onMouseMoveListener=null,this.onMouseUpListener=null}return p(e,[{key:"ngOnInit",value:function(){var e=this;this.subscriptionService.push(this.store$.pipe(Object(P.f)("scale")).subscribe({next:function(t){return e.scale=t}}))}},{key:"ngOnDestroy",value:function(){this.destroyMouseListeners()}},{key:"onDown",value:function(e){var t=this;return this.rectRender.h=0,this.rectRender.w=this.rectRender.h,this.onMouseUpListener=this.renderer.listen(this.magnifySvgElementRef.nativeElement,"mouseup",(function(e){return t.onUp(e)})),0!==e.button||(e.preventDefault(),e.stopPropagation(),this.prevEvent=e,this.changeDetectorRef.markForCheck(),this.created=!0,this.rectRender.x=e.offsetX,this.startPoint.x=this.rectRender.x,this.rectRender.y=e.offsetY,this.startPoint.y=this.rectRender.y,this.onMouseMoveListener=this.renderer.listen(this.magnifySvgElementRef.nativeElement,"mousemove",(function(e){return t.onMove(e)})),!1)}},{key:"onMove",value:function(e){return!this.created||(e.preventDefault(),e.stopPropagation(),this.prevEvent.offsetX===e.offsetX&&this.prevEvent.offsetY===e.offsetY||(this.rectRender.x=Math.min(this.startPoint.x,e.offsetX),this.rectRender.y=Math.min(this.startPoint.y,e.offsetY),this.rectRender.w=Math.abs(e.offsetX-this.startPoint.x),this.rectRender.h=Math.abs(e.offsetY-this.startPoint.y),this.prevEvent=e,this.changeDetectorRef.markForCheck()),!1)}},{key:"onUp",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.destroyMouseListeners(),this.created=!1,this.changeDetectorRef.markForCheck();var n={left:this.rectRender.x,top:this.rectRender.y,right:this.rectRender.x+this.rectRender.w,bottom:this.rectRender.y+this.rectRender.h};if(this.store$.dispatch(P.a.set({key:"currentPageNo",value:this.pdfPage.i+1})),this.rectRender.w<10&&this.rectRender.h<10){switch(e.button){case 0:this.setScale(this.scale+10),setTimeout((function(){return t.contentService.scrollToPoint({pageNo:t.pdfPage.i+1,point:{x:(n.left+n.right)/2,y:(n.top+n.bottom)/2}})}));break;case 2:this.setScale(this.scale-10),setTimeout((function(){return t.contentService.scrollToPoint({pageNo:t.pdfPage.i+1,point:{x:e.offsetX,y:e.offsetY}})}));break;default:return!1}return!1}return this.contentService.fitToRect({pageNo:this.pdfPage.i+1,rect:n}),!1}},{key:"onMouseleave",value:function(){this.destroyMouseListeners(),this.created=!1,this.changeDetectorRef.markForCheck()}},{key:"setScale",value:function(e){this.store$.dispatch(P.a.set({key:"scale",value:Number(e.toFixed(0))})),this.contentService.publishFitMode(null)}},{key:"destroyMouseListeners",value:function(){(this.onMouseMoveListener||E.v.EMPTY_FUNCTION)(),this.onMouseMoveListener=null,(this.onMouseUpListener||E.v.EMPTY_FUNCTION)(),this.onMouseUpListener=null}}]),e}()).\u0275fac=function(e){return new(e||Vn)(I.Mb(I.h),I.Mb(y.f),I.Mb(I.E),I.Mb(g.G),I.Mb(N.h))},Vn.\u0275cmp=I.Gb({type:Vn,selectors:[["sd-magnify-tool"]],viewQuery:function(e,t){var n;1&e&&I.zc(jn,!0),2&e&&I.sc(n=I.ac())&&(t.magnifySvgElementRef=n.first)},inputs:{pdfPage:"pdfPage"},features:[I.yb([g.G])],decls:3,vars:1,consts:[["id","magnify-svg",2,"width","100%","height","100%","background-color","rgba(255, 255, 255, 0)",3,"mousedown","mouseleave"],["magnifySvg",""],["fill","transparent","stroke","#f79f1a","stroke-dasharray","8 8","stroke-width","1",4,"ngIf"],["fill","transparent","stroke","#f79f1a","stroke-dasharray","8 8","stroke-width","1"]],template:function(e,t){1&e&&(I.cc(),I.Sb(0,"svg",0,1),I.Zb("mousedown",(function(e){return t.onDown(e)}))("mouseleave",(function(){return t.onMouseleave()})),I.Dc(2,zn,1,4,"rect",2),I.Rb()),2&e&&(I.zb(2),I.jc("ngIf",t.created))},directives:[h.t],styles:["#magnify-svg[_ngcontent-%COMP%]{z-index:999;position:absolute;right:0;top:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:crosshair}"],changeDetection:0}),Vn),Wn=u("2Vo4"),$n=["selectText"];function Un(e,t){if(1&e&&(I.Sb(0,"div",10),I.Nb(1,"div",11),I.Rb()),2&e){var n=I.dc();I.jc("ngStyle",n.getIndicatorStyle(!0))}}function Gn(e,t){if(1&e&&(I.Sb(0,"div",12),I.Nb(1,"div",13),I.Sb(2,"span"),I.Fc(3),I.ec(4,"translate"),I.Rb(),I.Rb()),2&e){var n=I.dc();I.jc("ngStyle",n.getIndicatorStyle(!1)),I.zb(3),I.Gc(I.fc(4,2,"FAILED_TO_LOAD_PAGE"))}}function Hn(e,t){if(1&e){var n=I.Tb();I.Sb(0,"sd-image",14),I.Zb("resetted",(function(){return I.uc(n),I.dc().imgResetted()}))("rendered",(function(){return I.uc(n),I.dc().imgRenderDone()}))("failed",(function(e){return I.uc(n),I.dc().imgFetchFailed(e)})),I.Rb()}if(2&e){var i=I.dc();I.jc("pdfPage",i.page)("documentId",i.documentId)}}function qn(e,t){1&e&&I.Nb(0,"sd-user-info")}function Zn(e,t){if(1&e&&I.Nb(0,"sd-watermark",15),2&e){var n=I.dc();I.jc("ngStyle",n.watermarkStyle)("documentId",n.documentId)("pdfPage",n.page)}}function Xn(e,t){if(1&e&&I.Nb(0,"sd-annot",16),2&e){var n=I.dc();I.jc("pdfPage",n.page)("documentId",n.documentId)("selectText",n.selectText)}}function Yn(e,t){if(1&e&&I.Nb(0,"sd-api-highlight",17),2&e){var n=I.dc();I.jc("pdfPage",n.page)}}function Kn(e,t){if(1&e&&I.Nb(0,"sd-search-highlight",18),2&e){var n=I.dc();I.jc("pdfPage",n.page)("result",n.searchResult)("redactionMarks",n.redactionMarks)}}function Qn(e,t){if(1&e&&I.Nb(0,"sd-select-text",19,20),2&e){var n=I.dc();I.jc("pdfPage",n.page)("documentId",n.documentId)}}function Jn(e,t){if(1&e&&I.Nb(0,"sd-magnify-tool",17),2&e){var n=I.dc();I.jc("pdfPage",n.page)}}function ei(e,t){if(1&e&&I.Nb(0,"sd-tts-script",21),2&e){var n=I.dc();I.jc("documentId",n.documentId)("pdfPage",n.page)}}function ti(e,t){if(1&e&&I.Nb(0,"sd-guide-line",17),2&e){var n=I.dc();I.jc("pdfPage",n.page)}}var ni,ii=((ni=function(){function e(t,n,i,o,r,s,a,c){d(this,e),this.elementRef=t,this.changeDetectorRef=n,this.contentService=i,this.subscriptionService=o,this.apiEventBridgeService=r,this.apiHighlightService=s,this.documentService=a,this.store$=c,this.isReady=!1,this.isImgLoaded=!1,this.isImgFailed=!1,this.apiHighlighted=!1,this.changesSrc=new Wn.a(null)}return p(e,[{key:"ngOnChanges",value:function(e){this.changesSrc.next(e)}},{key:"ngOnInit",value:function(){var e=this;this.subscriptionService.push(ue.a(this.store$.pipe(Object(P.f)("supportTTS")).pipe(ot.a((function(t){return e.supportTTS=t})))).subscribe({next:function(){return e.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(P.f)("dragMode")).pipe(ot.a((function(t){return e.dragMode=t})),An.a(1)).subscribe({next:function(){e.changeDetectorRef.markForCheck(),e.apiEventBridgeService.dragToolChangeAppliedSrc.next()}}),ue.a(this.store$.pipe(Object(P.f)("degree")).pipe(ot.a((function(t){return e.degree=t}))),this.store$.pipe(Object(P.f)("scale")).pipe(ot.a((function(t){return e.scale=t})))).subscribe({next:function(){e.changeDetectorRef.destroyed||e.changeDetectorRef.detectChanges()}}),this.contentService.searchResult$.pipe(qt.a(0)).subscribe({next:function(t){return e.bindSearchResult(t)}}),this.contentService.searchRedactionMark$.subscribe({next:function(t){e.bindRedactionMarks(t)}}),this.changesSrc.pipe(T.a(E.g.isDefined),T.a((function(e){return Boolean(e.page)||Boolean(e.documentId)||Boolean(e.priority)})),rt.a(200)).subscribe({next:function(){return e.render()}}),this.store$.pipe(Object(P.f)("rulerActive")).subscribe({next:function(t){e.rulerActive=t,e.changeDetectorRef.markForCheck()}}),ue.a(it.a(null),this.apiHighlightService.highlightInfoMapChange$).subscribe({next:function(){e.apiHighlighted=e.apiHighlightService.highlightInfoMap[e.page.i]&&e.apiHighlightService.highlightInfoMap[e.page.i].length>0,e.changeDetectorRef.markForCheck()}}))}},{key:"ngOnDestroy",value:function(){E.v.removeElement(this.elementRef.nativeElement),E.v.destroy(this)}},{key:"onClick",value:function(e){"SD-PAGE"===e.target.nodeName&&e.stopPropagation()}},{key:"imgResetted",value:function(){this.isImgFailed=!1,this.isImgLoaded=this.isImgFailed}},{key:"imgRenderDone",value:function(){this.isImgLoaded=!0,this.contentService.publishSomePageLoaded(!0)}},{key:"imgFetchFailed",value:function(e){this.isImgFailed=!0}},{key:"isVisibleSelectText",value:function(){return this.isReady&&(this.dragMode===M.a.SELECT_TEXT||E.F.isMobile())}},{key:"isVisibleMagnifyTool",value:function(){return this.isReady&&this.dragMode===M.a.MAGNIFY}},{key:"getIndicatorStyle",value:function(e){var t={transform:E.u.rotationNote(-(this.page.r+this.degree))};return e&&(t.transform+=" scale(".concat(100/this.scale,")")),t}},{key:"render",value:function(){var e=this,t=100*(Math.abs(this.priority)+1)+10*this.priority;this.subscriptionService.set("delayedFetchSub",Nn.a(t).subscribe({next:function(){e.isReady=!0,e.changeDetectorRef.markForCheck()}}))}},{key:"bindSearchResult",value:function(e){this.searchResult=(null==e?void 0:e.pageIdx)===this.page.i?e:null,this.changeDetectorRef.markForCheck()}},{key:"bindRedactionMarks",value:function(e){var t=e&&e[this.page.i];this.redactionMarks=(null==t?void 0:t.length)>0?{words:c(t)}:null,this.changeDetectorRef.markForCheck()}},{key:"displayUserInfo",get:function(){return yt.c.displayUserInfo}},{key:"isEnabledAnnotation",get:function(){return this.documentService.checkAuthority(y.j.ANNOTATION)||this.documentService.checkAuthority(y.j.FORM)}},{key:"watermarkStyle",get:function(){var e,t=E.u.normalizeDegree(360-this.page.r),n=this.page.bbox,i=n.w,o=n.h;t%180!=0&&(i=(e=[o,i])[0],o=e[1]);var r=Math.abs(Math.sin(t*Math.PI/180)),s=r*(o-i)/2;return{marginTop:E.u.pixelOf(r*(i-o)/2),marginLeft:E.u.pixelOf(s),width:E.u.pixelOf(i),height:E.u.pixelOf(o),transform:E.u.rotationNote(t)}}}]),e}()).\u0275fac=function(e){return new(e||ni)(I.Mb(I.l),I.Mb(I.h),I.Mb(y.f),I.Mb(g.G),I.Mb(Pt.a),I.Mb(Ft.b),I.Mb(y.k),I.Mb(N.h))},ni.\u0275cmp=I.Gb({type:ni,selectors:[["sd-page"]],viewQuery:function(e,t){var n;1&e&&I.Lc($n,!0),2&e&&I.sc(n=I.ac())&&(t.selectText=n.first)},hostBindings:function(e,t){1&e&&I.Zb("click",(function(e){return t.onClick(e)}))},inputs:{priority:"priority",page:"page",documentId:"documentId"},features:[I.yb([g.G]),I.xb],decls:12,vars:12,consts:[["class","indicator loader",3,"ngStyle",4,"ngIf"],["class","indicator fail",3,"ngStyle",4,"ngIf"],[3,"pdfPage","documentId","resetted","rendered","failed",4,"ngIf"],[4,"ngIf"],[3,"ngStyle","documentId","pdfPage",4,"ngIf"],[3,"pdfPage","documentId","selectText",4,"ngIf"],[3,"pdfPage",4,"ngIf"],[3,"pdfPage","result","redactionMarks",4,"ngIf"],[3,"pdfPage","documentId",4,"ngIf"],[3,"documentId","pdfPage",4,"ngIf"],[1,"indicator","loader",3,"ngStyle"],[1,"spin-loader"],[1,"indicator","fail",3,"ngStyle"],[1,"image"],[3,"pdfPage","documentId","resetted","rendered","failed"],[3,"ngStyle","documentId","pdfPage"],[3,"pdfPage","documentId","selectText"],[3,"pdfPage"],[3,"pdfPage","result","redactionMarks"],[3,"pdfPage","documentId"],["selectText",""],[3,"documentId","pdfPage"]],template:function(e,t){1&e&&(I.Dc(0,Un,2,1,"div",0),I.Dc(1,Gn,5,4,"div",1),I.Dc(2,Hn,1,2,"sd-image",2),I.Dc(3,qn,1,0,"sd-user-info",3),I.Dc(4,Zn,1,3,"sd-watermark",4),I.Dc(5,Xn,1,3,"sd-annot",5),I.Dc(6,Yn,1,1,"sd-api-highlight",6),I.Dc(7,Kn,1,3,"sd-search-highlight",7),I.Dc(8,Qn,2,2,"sd-select-text",8),I.Dc(9,Jn,1,1,"sd-magnify-tool",6),I.Dc(10,ei,1,2,"sd-tts-script",9),I.Dc(11,ti,1,1,"sd-guide-line",6)),2&e&&(I.jc("ngIf",!t.isImgLoaded&&!t.isImgFailed&&!t.supportTTS),I.zb(1),I.jc("ngIf",!t.isImgLoaded&&t.isImgFailed),I.zb(1),I.jc("ngIf",t.isReady&&!t.supportTTS),I.zb(1),I.jc("ngIf",t.displayUserInfo),I.zb(1),I.jc("ngIf",t.isReady&&!t.supportTTS),I.zb(1),I.jc("ngIf",t.isReady&&!t.supportTTS&&t.isEnabledAnnotation),I.zb(1),I.jc("ngIf",t.apiHighlighted),I.zb(1),I.jc("ngIf",t.isReady&&(t.searchResult||t.redactionMarks)&&!t.supportTTS),I.zb(1),I.jc("ngIf",t.isVisibleSelectText()&&!t.supportTTS),I.zb(1),I.jc("ngIf",t.isVisibleMagnifyTool()&&!t.supportTTS),I.zb(1),I.jc("ngIf",t.isReady&&t.supportTTS),I.zb(1),I.jc("ngIf",t.rulerActive))},styles:["[_nghost-%COMP%]{display:block;background-color:#fff;outline:1px solid #e8e8e8}.indicator[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;z-index:-1}.indicator.fail[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.indicator.fail[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:163px;height:140px;background-image:url(invalid-page.5692d42d07de0716d7a9.svg);background-size:contain;background-repeat:no-repeat}.indicator.fail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;line-height:28px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e;margin-top:32px}.indicator.loader[_ngcontent-%COMP%]{display:none;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.indicator.loader[_ngcontent-%COMP%]   .spin-loader[_ngcontent-%COMP%]{width:56px;height:56px;border-width:3px}sd-watermark[_ngcontent-%COMP%]{position:absolute;top:0;left:0;overflow:hidden}"],changeDetection:0}),ni),oi=u("RAh+"),ri=["svg"],si=["popup"];function ai(e,t){if(1&e&&(I.Sb(0,"span",18),I.Fc(1),I.Rb()),2&e){var n=I.dc();I.zb(1),I.Gc(n.title)}}function ci(e,t){if(1&e){var n=I.Tb();I.Sb(0,"pu-input",19),I.Zb("blur",(function(){return I.uc(n),I.dc().finishEditTitle()}))("keydown.enter",(function(){return I.uc(n),I.dc().finishEditTitle()})),I.ec(1,"translate"),I.Rb()}if(2&e){var i=I.dc();I.kc("placeholder",I.fc(1,3,"ENTER_THE_AUTHOR_NAME")),I.jc("autofocus",!0)("formControl",i.titleFormControl)}}function li(e,t){if(1&e){var n=I.Tb();I.Sb(0,"div",20),I.Sb(1,"div",21),I.Zb("click",(function(){return I.uc(n),I.dc().onColorPaletteClick()})),I.Rb(),I.Rb()}if(2&e){var i=I.dc();I.Eb("disabled",i.isLockedAnnot())("selected",i.isColorTabClicked),I.zb(1),I.Bc("background",i.textAnnotColor)}}function ui(e,t){if(1&e){var n=I.Tb();I.Sb(0,"pu-color-palette",22),I.Zb("ngModelChange",(function(e){return I.uc(n),I.dc().textAnnotColor=e})),I.ec(1,"translate"),I.ec(2,"translate"),I.Rb()}if(2&e){var i=I.dc();I.jc("nullable",!1)("customColorLabel",I.fc(1,6,"CUSTOM_COLOR"))("defaultColorLabel",I.fc(2,8,"DEFAULT_COLOR"))("defaultColorPanelExpandedd",!0)("colorRectHeight",18)("ngModel",i.textAnnotColor)}}function di(e,t){1&e&&I.Nb(0,"sd-popup-resizer",23),2&e&&I.jc("anchor",t.$implicit)}var hi,pi,fi=function(e){return{process:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(n[e]||E.v.EMPTY_FUNCTION)()}}},gi=((pi=function(){function e(t,n,i,o,r,s,a,c,l,u){d(this,e),this.annotService=t,this.contentService=n,this.documentService=i,this.renderer=o,this.changeDetectorRef=r,this.scrollController=s,this.elementRef=a,this.subscriptionService=c,this.store$=l,this.translatePipe=u,this.popupSize={width:0,height:0},this.preferences={},this.titleFormControl=new f.h,this.linkStyles={},this._containerStyle={},this.drag_startCursorPos={x:0,y:0},this.drag_startPopupPos={top:0,left:0,right:0,bottom:0},this.boundingTranslate={x:0,y:0},this.memoColor=null,this.popupViewCoords={x:0,y:0},this.onMouseMoveListener=null,this.onMouseUpListener=null,this.onTouchMoveListener=null,this.onTouchEndListener=null,this.txtTotalDelta={x:0,y:0},this.isColorTabClicked=!1}return p(e,[{key:"ngOnChanges",value:function(e){e.popupInfo&&(this._containerPos={left:[-this.pdfPage.bbox.x,-this.pdfPage.bbox.y,this.pdfPage.bbox.x,this.pdfPage.bbox.y],top:[this.pdfPage.bbox.y,-this.pdfPage.bbox.x,-this.pdfPage.bbox.y,this.pdfPage.bbox.x]})}},{key:"ngOnInit",value:function(){var e=this;this.subscriptionService.push(this.store$.pipe(Object(x.e)("popupFontSize")).subscribe({next:function(t){e.preferences.popupFontSize=t,setTimeout((function(){return e.changeDetectorRef.markForCheck()}))}}),this.store$.pipe(Object(x.e)("language")).subscribe({next:function(t){e.preferences.language=t,setTimeout((function(){return e.changeDetectorRef.markForCheck()}))}}),this.annotService.text$.pipe(T.a((function(t){return e.data.oid===t.model.oid}))).subscribe({next:function(t){e.txtTotalDelta=t.totalDelta,e.changeDetectorRef.markForCheck()}}),this.contentService.annotEvent$.pipe(T.a((function(t){return t&&(t.sdEventType===y.r.SELECTED&&"popups"===t.to&&t.annot.oid!==e.popup.oid||t.sdEventType===y.r.UPDATE&&t.annot.Popup===e.popup.oid)}))).subscribe({next:function(){return e.changeDetectorRef.markForCheck()}}),ue.a(this.contentService.pageNo$,this.store$.pipe(Object(P.f)("viewMode")).pipe(ot.a((function(t){return e.viewMode=t}))),this.store$.pipe(Object(P.f)("scale")).pipe(ot.a((function(t){return e.scale=t})),qt.a(0)),this.store$.pipe(Object(P.f)("degree")).pipe(ot.a((function(t){return e.degree=t})))).subscribe({next:function(){return e.changeDetectorRef.markForCheck()}}),this.contentService.postAnnotEdit$.pipe(T.a((function(t){return t.annotOid===e.data.oid}))).subscribe({next:function(){return e.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(P.f)("currentPageNo")).subscribe({next:function(t){return e.currentPageNo=t}})),this.subscribeMainViewResized();var t=this.svg;t&&t.firstElementChild&&this.fixPoints(t,this.points,3)}},{key:"ngOnDestroy",value:function(){this.destroyMouseListeners()}},{key:"ngAfterViewInit",value:function(){var e=E.c.elementStyleOf(this.popup),t=e.width,n=e.height;this.popupSize.width=parseFloat(t),this.popupSize.height=parseFloat(n);var i=this.popupElementRef.nativeElement;this.locate(i),(this.data.attributes.contents||E.v.EMPTY_STRING).length||setTimeout((function(){return(i.getElementsByTagName("textarea")[0]||E.m).focus()}))}},{key:"isReadonly",value:function(){return!this.documentService.checkAuthority(y.j.EDIT_ANNOTATION)||oi.a.get(this.data.attributes.F,7)}},{key:"isLockedAnnot",value:function(){return oi.a.get(this.data.attributes.F,7)}},{key:"onMouseDown",value:function(e){var t=this;if(e.target===e.currentTarget){e.stopPropagation(),e.preventDefault();var n=this.popupOrder.indexOf(this.data.Popup);n>-1&&(this.popupOrder.splice(n,1),this.popupOrder.push(this.data.Popup)),this.contentService.fireAnnotEvent({sdEventType:y.r.SELECTED,annot:this.popup,to:"popups"}),this.applyTranslateToReal(),this.drag_startCursorPos.x=e.clientX,this.drag_startCursorPos.y=e.clientY,Object.assign(this.drag_startPopupPos,this.popupCoords),this.destroyMouseListeners(),this.onMouseMoveListener=this.renderer.listen("document","mousemove",(function(e){return t.onMouseMove(e)})),this.onMouseUpListener=this.renderer.listen("document","mouseup",(function(e){return t.onMouseUp(e)})),this.onTouchMoveListener=this.renderer.listen("document","touchmove",(function(e){return t.onMouseMove(t.touchToMouse(e))})),this.onTouchEndListener=this.renderer.listen("document","touchend",(function(e){return t.onMouseUp(t.touchToMouse(e))}))}}},{key:"touchToMouse",value:function(e){return E.g.touchToMouseEvt(e,this.degree,this.scale,this.pdfPage)}},{key:"startEditTitle",value:function(){var e,t,n;this.isLockedAnnot()||(this.titleFormControl.setValue(null!==(n=null===(t=null===(e=this.data)||void 0===e?void 0:e.attributes)||void 0===t?void 0:t.T)&&void 0!==n?n:""),this.isEditingTitle=!0)}},{key:"finishEditTitle",value:function(){this.data.attributes.T=this.titleFormControl.value,this.onPopupValueChanged(),this.isEditingTitle=!1}},{key:"applyTranslateToReal",value:function(){var e=this.direction;if(this.boundingTranslate.x){var t=this.boundingTranslate.x/this.zoom;2!==e&&3!==e||(t*=-1),1===e||3===e?(this.popupCoords.top+=t,this.popupCoords.bottom+=t):(this.popupCoords.left+=t,this.popupCoords.right+=t),this.boundingTranslate.x=0}if(this.boundingTranslate.y){var n=this.boundingTranslate.y/this.zoom;0!==e&&3!==e||(n*=-1),1===e||3===e?(this.popupCoords.left+=n,this.popupCoords.right+=n):(this.popupCoords.top+=n,this.popupCoords.bottom+=n),this.boundingTranslate.y=0}}},{key:"togglePopup",value:function(){this.annotService.togglePopup(this.data)}},{key:"onMouseClickDelete",value:function(){this.contents="";var e={from:"PopupComponent",sdEventType:y.r.DELETE,annot:E.b.isText(this.data)?this.data:this.popup};this.contentService.fireAnnotEvent(e),this.contentService.fireAnnotListEvent(e)}},{key:"onColorPaletteClick",value:function(){this.isColorTabClicked=!this.isColorTabClicked}},{key:"onPopupValueChanged",value:function(){this.annotService.putModel(this.data,"modify"),this.contentService.fireAnnotListEvent({from:"PopupComponent",sdEventType:y.r.UPDATE,annot:this.data})}},{key:"onMouseMove",value:function(e){var t;e.stopPropagation(),e.preventDefault();var n=this.direction,i={x:e.clientX-this.drag_startCursorPos.x,y:this.drag_startCursorPos.y-e.clientY};return 1!==n&&3!==n||(t=[i.y,i.x],i.x=t[0],i.y=t[1]),fi(n).process(null,(function(){i.x*=-1}),(function(){i.x*=-1,i.y*=-1}),(function(){i.y*=-1})),i.x/=this.zoom,i.y/=this.zoom,this.popupCoords.top=this.drag_startPopupPos.top+i.y,this.popupCoords.left=this.drag_startPopupPos.left+i.x,this.popupCoords.right=this.drag_startPopupPos.right+i.x,this.popupCoords.bottom=this.drag_startPopupPos.bottom+i.y,this.changeDetectorRef.markForCheck(),!1}},{key:"onMouseUp",value:function(e){var t=this.elementRef.nativeElement.parentElement.getBoundingClientRect(),n=this.popupElementRef.nativeElement.getBoundingClientRect(),i=Math.max(t.left-n.left,0)/this.zoom,o=Math.min(n.top-t.top,0)/this.zoom;this.popupCoords.top+=o,this.popupCoords.left+=i,this.popupCoords.bottom+=o,this.popupCoords.right+=i,e.stopPropagation(),e.preventDefault(),this.destroyMouseListeners(),this.annotService.putModel(this.popup,"modify"),this.changeDetectorRef.markForCheck()}},{key:"destroyMouseListeners",value:function(){(this.onMouseMoveListener||E.v.EMPTY_FUNCTION)(),this.onMouseMoveListener=null,(this.onMouseUpListener||E.v.EMPTY_FUNCTION)(),this.onMouseUpListener=null,(this.onTouchMoveListener||E.v.EMPTY_FUNCTION)(),this.onTouchMoveListener=null,(this.onTouchEndListener||E.v.EMPTY_FUNCTION)(),this.onTouchEndListener=null}},{key:"convertPDFCoord",value:function(e,t){var n,i=this.scrollController.stateHolder.getPageSize(this.pdfPage.i),o=this.scrollController.stateHolder.getPageFrameOffset(this.viewMode,this.pdfPage.i),r={x:0,y:0},s=se.e.getOffset(this.scrollController.stateHolder,this.contentViewRoot,this.scale,this.viewMode,this.currentPageNo),a=this.direction,c=e,l=t;return 1!==a&&3!==a||(c=(n=[l,c])[0],l=n[1]),fi(a).process((function(){r.x=o.offsetX,r.y=o.offsetY+i.height}),(function(){r.x=o.offsetX,r.y=o.offsetY,l*=-1}),(function(){r.x=o.offsetX+i.width,r.y=o.offsetY,c*=-1,l*=-1}),(function(){r.x=o.offsetX+i.width,r.y=o.offsetY+i.height,c*=-1})),{x:(r.x+se.a.MARGIN+c)*this.zoom+s.offsetX,y:(r.y+se.a.MARGIN-l)*this.zoom+s.offsetY}}},{key:"locate",value:function(e){if(e){var t=this.contentViewRoot.getBoundingClientRect(),n=e.getBoundingClientRect();n.top<t.top?this.boundingTranslate.y=t.top-n.top:t.bottom<n.bottom&&(this.boundingTranslate.y=t.bottom-n.bottom),n.left<t.left?this.boundingTranslate.x=t.left-n.left:t.right<n.right&&(this.boundingTranslate.x=t.right-n.right)}}},{key:"fixPoints",value:function(e,t,n){for(var i=n-t.numberOfItems,o=0;o<i;o++)t.appendItem(e.createSVGPoint());for(var r=i-1;r>=n;r++)t.removeItem(r);return t}},{key:"centerPointOfPopup",value:function(){return{x:this.popupViewCoords.x+(this.popupCoords.right-this.popupCoords.left)/2+this.boundingTranslate.x,y:this.popupViewCoords.y+(this.popupCoords.top-this.popupCoords.bottom)/2+this.boundingTranslate.y}}},{key:"drawPopupLink",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},n=E.c.centerPointOf(this.textCoords);n=this.convertPDFCoord(n.x,n.y);var i=Object.assign({},t),o=this.direction;1!==o&&3!==o||(e=[i.y,i.x],i.x=e[0],i.y=e[1]),fi(o).process(null,(function(){i.x*=-1}),(function(){i.x*=-1,i.y*=-1}),(function(){i.y*=-1})),n.x+=i.x*this.zoom,n.y+=i.y*this.zoom;var r=this.centerPointOfPopup(),s=[n,{x:r.x-10,y:r.y-10},{x:r.x+10,y:r.y+10}],a=this.points;s.length===a.numberOfItems&&s.forEach((function(e,t){return Object.assign(a.getItem(t),e)}))}},{key:"subscribeMainViewResized",value:function(){var e=this;this.subscriptionService.push(ue.a(E.F.windowResize$,this.store$.pipe(Object(P.f)("sideViewVisible")),this.store$.pipe(Object(P.f)("sideViewSize")),this.store$.pipe(Object(P.f)("rightSideViewVisible")),this.store$.pipe(Object(P.f)("rightSideViewSize"))).pipe(rt.a(0)).subscribe({next:function(){return e.changeDetectorRef.markForCheck()}}))}},{key:"environment",get:function(){return yt.c}},{key:"zoom",get:function(){return E.u.normalizeScale(this.scale)}},{key:"anchorList",get:function(){return e.AnchorList}},{key:"data",get:function(){return this.popupInfo.src}},{key:"isTextAnnot",get:function(){return E.b.isText(this.data)}},{key:"textAnnotColor",get:function(){return E.b.isText(this.data)?this.data.attributes.color:(Logger.warn("textAnnotColor cannot be used except this.data is text annotation"),null)},set:function(e){E.b.isText(this.data)?(this.data.attributes.color=e,this.annotService.putModel(this.data,"modify"),this.contentService.fireAnnotEvent({from:"PopupComponent",sdEventType:y.r.UPDATE,pageIdx:this.data.attributes.pageIdx,annot:this.data})):Logger.warn("Some warning message")}},{key:"popup",get:function(){return this.popupInfo.popup}},{key:"pdfPage",get:function(){return this.popupInfo.pdfPage}},{key:"direction",get:function(){return E.u.rotate2Direction(this.pdfPage.r+this.degree)}},{key:"points",get:function(){return this.svg.firstElementChild.points}},{key:"svg",get:function(){return this.svgElementRef.nativeElement}},{key:"textCoords",get:function(){return this.data.attributes.rect}},{key:"popupCoords",get:function(){return this.popup.attributes.rect}},{key:"popupLinkBoxStyles",get:function(){return e.linkBoxStyle}},{key:"contents",get:function(){var e,t;return(null===(t=null===(e=this.data)||void 0===e?void 0:e.attributes)||void 0===t?void 0:t.contents)||E.v.EMPTY_STRING},set:function(e){this.data.attributes.contents=e,this.contentService.publishAnnotContentsChange({annotOid:this.data.oid})}},{key:"title",get:function(){var e,t,n=null===(t=null===(e=this.data)||void 0===e?void 0:e.attributes)||void 0===t?void 0:t.T;return E.g.isDefined(n)&&""!==n?n:this.translatePipe.transform("ENTER_THE_AUTHOR_NAME")}},{key:"popupStyles",get:function(){Object.assign(this.popupViewCoords,this.convertPDFCoord(this.popup.attributes.rect.left,this.popup.attributes.rect.top)),this.drawPopupLink(this.txtTotalDelta);var e=E.c.elementStyleOf(this.popup);e.bottom=null,e.right=e.bottom,e.top=e.right,e.left=e.top,e.transform="translate("+(this.popupViewCoords.x+this.boundingTranslate.x)+"px,"+(this.popupViewCoords.y+this.boundingTranslate.y)+"px)";var t=null,n=function(e){if(!e)return e;var t=e.substring(1);return 3!==t.length?t:t[0]+t[0]+t[1]+t[1]+t[2]+t[2]}(this.data.attributes.color);return n&&(this.memoColor={r:parseInt("0x"+n.substring(0,2),16),g:parseInt("0x"+n.substring(2,4),16),b:parseInt("0x"+n.substring(4,6),16)},t={r:230+Math.floor(this.memoColor.r/10),g:230+Math.floor(this.memoColor.g/10),b:230+Math.floor(this.memoColor.b/10)}),e.background=t?"rgb(".concat(t.r,", ").concat(t.g,", ").concat(t.b,")"):"#ffeb98",this._popupStyles=Object.assign(Object.assign({},this._popupStyles||{color:null,background:null}),E.v.bindLayoutOrder(e,E.p.Popup+this.popupOrder.indexOf(this.data.Popup)))}},{key:"popupLinkStyles",get:function(){return this.memoColor?(this.linkStyles.stroke="rgb(".concat(this.memoColor.r,", ").concat(this.memoColor.g,", ").concat(this.memoColor.b,")"),this.linkStyles.fill="rgba(".concat(this.memoColor.r,", ").concat(this.memoColor.g,", ").concat(this.memoColor.b,", 0.1)")):(this.linkStyles.stroke="transparent",this.linkStyles.fill="transparent"),this.linkStyles}},{key:"popupContainerStyles",get:function(){var e=this.direction,t=P.d.isVisible(this.pdfPage.i,this.currentPageNo-1,this.viewMode);return this._containerStyle.visibility=t?null:"hidden",this._containerPos&&(this._containerStyle.left=this._containerPos.left[e]*this.zoom+"px",this._containerStyle.top=this._containerPos.top[e]*this.zoom+"px"),this._containerStyle}}]),e}()).linkBoxStyle=E.v.bindLayoutOrder({width:"initial",height:"initial","pointer-events":"none"},E.p.PopupLinker),pi.AnchorList=["nw","ne","sw","se","n","s","w","e"],pi.\u0275fac=function(e){return new(e||pi)(I.Mb(y.d),I.Mb(y.f),I.Mb(y.k),I.Mb(I.E),I.Mb(I.h),I.Mb(ae.a),I.Mb(I.l),I.Mb(g.G),I.Mb(N.h),I.Mb(A.d))},pi.\u0275cmp=I.Gb({type:pi,selectors:[["sd-popup"]],viewQuery:function(e,t){var n;1&e&&(I.zc(ri,!0),I.zc(si,!0)),2&e&&(I.sc(n=I.ac())&&(t.svgElementRef=n.first),I.sc(n=I.ac())&&(t.popupElementRef=n.first))},inputs:{popupInfo:"popupInfo",popupOrder:"popupOrder",contentViewRoot:"contentViewRoot"},features:[I.yb([g.G]),I.xb],decls:23,vars:26,consts:[[1,"popup-container",3,"ngStyle"],[1,"popup","no-scroller",3,"ngStyle","mousedown","touchstart","pointerdown","pointermove","pointerup"],["popup",""],[1,"nav"],[1,"label",3,"dblclick"],["class","title",4,"ngIf","ngIfElse"],["inputTitleRef",""],[1,"btns"],["class","color-picker-container",3,"disabled","selected",4,"ngIf"],[3,"nullable","customColorLabel","defaultColorLabel","defaultColorPanelExpandedd","colorRectHeight","ngModel","ngModelChange",4,"ngIf"],["color","dark",1,"ep-text-button",3,"title","click"],[1,"papycon","papycon-exit-fullscreen"],["color","dark",1,"ep-text-button",3,"title","disabled","click"],[1,"papycon","papycon-trash-can"],[3,"anchor",4,"ngFor","ngForOf"],[1,"no-scroller",3,"placeholder","ngModel","maxlength","readonly","change","ngModelChange","keyup.esc","touchstart","pointerdown","pointermove","pointerup"],[3,"ngStyle"],["svg",""],[1,"title"],[3,"placeholder","autofocus","formControl","blur","keydown.enter"],[1,"color-picker-container"],[1,"color-rect",3,"click"],[3,"nullable","customColorLabel","defaultColorLabel","defaultColorPanelExpandedd","colorRectHeight","ngModel","ngModelChange"],[3,"anchor"]],template:function(e,t){if(1&e&&(I.Sb(0,"div",0),I.Sb(1,"div",1,2),I.Zb("mousedown",(function(e){return t.onMouseDown(e)}))("touchstart",(function(e){return t.onMouseDown(t.touchToMouse(e))}))("pointerdown",(function(e){return e.stopPropagation()}))("pointermove",(function(e){return e.stopPropagation()}))("pointerup",(function(e){return e.stopPropagation()})),I.Sb(3,"div",3),I.Sb(4,"div",4),I.Zb("dblclick",(function(){return t.startEditTitle()})),I.Dc(5,ai,2,1,"span",5),I.Dc(6,ci,2,5,"ng-template",null,6,I.Ec),I.Rb(),I.Sb(8,"div",7),I.Dc(9,li,2,6,"div",8),I.Dc(10,ui,3,10,"pu-color-palette",9),I.Sb(11,"button",10),I.Zb("click",(function(){return t.togglePopup()})),I.ec(12,"translate"),I.Nb(13,"i",11),I.Rb(),I.Sb(14,"button",12),I.Zb("click",(function(){return t.onMouseClickDelete()})),I.ec(15,"translate"),I.Nb(16,"i",13),I.Rb(),I.Rb(),I.Rb(),I.Dc(17,di,1,1,"sd-popup-resizer",14),I.Sb(18,"textarea",15),I.Zb("change",(function(){return t.onPopupValueChanged()}))("ngModelChange",(function(e){return t.contents=e}))("keyup.esc",(function(){return t.togglePopup()}))("touchstart",(function(e){return e.stopPropagation()}))("pointerdown",(function(e){return e.stopPropagation()}))("pointermove",(function(e){return e.stopPropagation()}))("pointerup",(function(e){return e.stopPropagation()})),I.ec(19,"translate"),I.Rb(),I.Rb(),I.cc(),I.Sb(20,"svg",16,17),I.Nb(22,"polygon",16),I.Rb(),I.Rb()),2&e){var n=I.tc(7);I.jc("ngStyle",t.popupContainerStyles),I.zb(1),I.jc("ngStyle",t.popupStyles),I.zb(4),I.jc("ngIf",!t.isEditingTitle)("ngIfElse",n),I.zb(4),I.jc("ngIf",t.isTextAnnot),I.zb(1),I.jc("ngIf",t.isColorTabClicked),I.zb(1),I.jc("title",I.fc(12,20,"CLOSE")),I.zb(3),I.jc("title",I.fc(15,22,"DELETE"))("disabled",t.isLockedAnnot()),I.zb(3),I.jc("ngForOf",t.anchorList),I.zb(1),I.Bc("font-size",t.preferences.popupFontSize+"px")("background",t.popupStyles.background),I.jc("placeholder",I.fc(19,24,"COMMENTS"))("ngModel",t.contents)("maxlength",null==t.environment||null==t.environment.annotation?null:t.environment.annotation.contentsLengthLimit)("readonly",t.isReadonly()),I.zb(2),I.jc("ngStyle",t.popupLinkBoxStyles),I.zb(2),I.jc("ngStyle",t.popupLinkStyles)}},styles:["[_nghost-%COMP%]{display:block;height:100%}.popup[_ngcontent-%COMP%]{position:absolute;top:0;left:0;-webkit-box-shadow:0 4px 9px rgba(0,0,0,.24);box-shadow:0 4px 9px rgba(0,0,0,.24)}.nav[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:40px;border-bottom:1px solid rgba(15,31,69,.1);-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 16px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;white-space:nowrap}.nav[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;cursor:text;pointer-events:auto}.nav[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Medium,sans-serif;color:#6c6c6c}.nav[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.nav[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .color-picker-container[_ngcontent-%COMP%]{border:1px solid #dadada;border-radius:2px;-webkit-box-sizing:border-box;box-sizing:border-box;padding:3px;width:24px;height:24px;pointer-events:auto;cursor:pointer}.nav[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .color-picker-container.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nav[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .color-picker-container.selected[_ngcontent-%COMP%]{background-color:rgba(247,159,26,.08);border:1px solid #f79f1a;-webkit-box-shadow:0 0 6px 0 #f79f1a;box-shadow:0 0 6px 0 #f79f1a}.nav[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .color-picker-container[_ngcontent-%COMP%]   .color-rect[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:2px;background-size:cover}.nav[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   pu-color-palette[_ngcontent-%COMP%]{background:#fff;border:1.2px solid #dadada;border-radius:2px;-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;margin-top:33.2px;pointer-events:auto;padding:10px;width:216px;overflow:hidden;z-index:10000}.nav[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:24px;height:24px;margin-left:8px;opacity:.8;pointer-events:auto}.nav[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.popup-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0}textarea[_ngcontent-%COMP%]{font-size:14px;line-height:24px;font-family:NotoSans-Regular,sans-serif;color:#1e1e1e;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;max-width:100%;height:calc(100% - 40px);max-height:calc(100% - 20px);padding:16px;background-color:inherit;border:none;overflow:auto;resize:none}textarea[_ngcontent-%COMP%]:focus{outline:none}svg[_ngcontent-%COMP%]{position:absolute;left:0;cursor:auto;overflow:visible}polygon[_ngcontent-%COMP%]{stroke-width:1}"],changeDetection:0}),pi),bi=((hi=function(){function e(t,n,i,o){d(this,e),this.annotService=t,this.renderer=n,this.changeDetectorRef=i,this.popup=o,this.MIN_WIDTH=95,this.MIN_HEIGHT=50,this._resizerStyles={},this.onMouseMoveListener=null,this.onMouseUpListener=null,this.onTouchMoveListener=null,this.onTouchEndListener=null,this.drag_startCursorPos={x:0,y:0},this.drag_startPopupPos={top:0,left:0,right:0,bottom:0},this.popup_prevSize={width:0,height:0}}return p(e,[{key:"ngAfterViewInit",value:function(){Object.assign(this._resizerStyles,this.positionCalc(this.anchor,4)),Object.assign(this._resizerStyles,this.sizeCalc(this.anchor,10)),this._resizerStyles.cursor=this.anchor+"-resize",this._resizerStyles.position="absolute",this.detectChange()}},{key:"ngOnDestroy",value:function(){this.destroyMouseListeners()}},{key:"onMouseDown",value:function(e){var t=this;e.target===e.currentTarget&&(e.stopPropagation(),e.preventDefault(),this.popup.applyTranslateToReal(),this.popup_prevSize.width=this.popup.popupSize.width,this.popup_prevSize.height=this.popup.popupSize.height,this.drag_startCursorPos.x=e.clientX,this.drag_startCursorPos.y=e.clientY,Object.assign(this.drag_startPopupPos,this.popup.popupCoords),this.onMouseMoveListener=this.renderer.listen("document","mousemove",(function(e){return t.onMouseMove(e)})),this.onMouseUpListener=this.renderer.listen("document","mouseup",(function(e){return t.onMouseUp(e)})),this.onTouchMoveListener=this.renderer.listen("document","touchmove",(function(e){return t.onMouseMove(t.touchToMouse(e))})),this.onTouchEndListener=this.renderer.listen("document","touchend",(function(e){return t.onMouseUp(t.touchToMouse(e))})))}},{key:"onMouseMove",value:function(e){var t=this.popup.direction,n={left:0,top:0,right:0,bottom:0};return e.stopPropagation(),e.preventDefault(),this.anchor.includes("n")&&(n.top=this.drag_startCursorPos.y-e.clientY,this.popup_prevSize.height+n.top<this.MIN_HEIGHT&&(n.top=this.MIN_HEIGHT-Math.floor(this.popup_prevSize.height)),this.popup.popupSize.height=this.popup_prevSize.height+n.top,1!==t&&2!==t||(n.top*=-1),1===t||3===t?this.popup.popupCoords.left=this.drag_startPopupPos.left+n.top/this.popup.zoom:this.popup.popupCoords.top=this.drag_startPopupPos.top+n.top/this.popup.zoom),this.anchor.includes("w")&&(n.left=e.clientX-this.drag_startCursorPos.x,this.popup_prevSize.width-n.left<this.MIN_WIDTH&&(n.left=Math.floor(this.popup_prevSize.width)-this.MIN_WIDTH),this.popup.popupSize.width=this.popup_prevSize.width-n.left,2!==t&&3!==t||(n.left*=-1),1===t||3===t?this.popup.popupCoords.top=this.drag_startPopupPos.top+n.left/this.popup.zoom:this.popup.popupCoords.left=this.drag_startPopupPos.left+n.left/this.popup.zoom),this.anchor.includes("e")&&(n.right=e.clientX-this.drag_startCursorPos.x,this.popup_prevSize.width+n.right<this.MIN_WIDTH&&(n.right=this.MIN_WIDTH-Math.floor(this.popup_prevSize.width)),this.popup.popupSize.width=this.popup_prevSize.width+n.right,this.popup.popupCoords.right=this.drag_startPopupPos.right+n.right/this.popup.zoom),this.anchor.includes("s")&&(n.bottom=this.drag_startCursorPos.y-e.clientY,this.popup_prevSize.height-n.bottom<this.MIN_HEIGHT&&(n.bottom=Math.floor(this.popup_prevSize.height)-this.MIN_HEIGHT),this.popup.popupSize.height=this.popup_prevSize.height-n.bottom,this.popup.popupCoords.bottom=this.drag_startPopupPos.bottom+n.bottom/this.popup.zoom),this.popup.popupCoords.right=this.popup.popupCoords.left+this.popup.popupSize.width,this.popup.popupCoords.bottom=this.popup.popupCoords.top-this.popup.popupSize.height,this.detectChange(),!1}},{key:"onMouseUp",value:function(e){e.stopPropagation(),e.preventDefault(),this.destroyMouseListeners(),this.annotService.putModel(this.popup.popup,"modify"),this.detectChange()}},{key:"destroyMouseListeners",value:function(){(this.onMouseMoveListener||E.v.EMPTY_FUNCTION)(),this.onMouseMoveListener=null,(this.onMouseUpListener||E.v.EMPTY_FUNCTION)(),this.onMouseUpListener=null,(this.onTouchMoveListener||E.v.EMPTY_FUNCTION)(),this.onTouchMoveListener=null,(this.onTouchEndListener||E.v.EMPTY_FUNCTION)(),this.onTouchEndListener=null}},{key:"positionCalc",value:function(e,t){var n={};switch(e.includes("n")&&(n.top=-t+"px"),e.includes("w")&&(n.left=-t+"px"),e.includes("e")&&(n.right=-t+"px"),e.includes("s")&&(n.bottom=-t+"px"),e){case"n":case"s":n.left=t+"px";break;case"w":case"e":n.top=t+"px"}return n}},{key:"sizeCalc",value:function(e,t){var n={};if(2===e.length)return n.height=t+"px",n.width=n.height,n;switch(e){case"n":case"s":n.width="calc(100% - ".concat(t,"px)"),n.height=t+"px";break;case"w":case"e":n.height="calc(100% - ".concat(t,"px)"),n.width=t+"px"}return n}},{key:"touchToMouse",value:function(e){return this.popup.touchToMouse(e)}},{key:"detectChange",value:function(){this.changeDetectorRef.destroyed||(this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges())}},{key:"resizerStyles",get:function(){return this._resizerStyles}}]),e}()).\u0275fac=function(e){return new(e||hi)(I.Mb(y.d),I.Mb(I.E),I.Mb(I.h),I.Mb(gi,1))},hi.\u0275cmp=I.Gb({type:hi,selectors:[["sd-popup-resizer"]],inputs:{anchor:"anchor"},features:[I.yb([g.G])],decls:1,vars:1,consts:[[1,"no-scroller",3,"ngStyle","mousedown","pointerdown","pointermove","pointerup","touchstart"]],template:function(e,t){1&e&&(I.Sb(0,"div",0),I.Zb("mousedown",(function(e){return t.onMouseDown(e)}))("pointerdown",(function(e){return e.stopPropagation()}))("pointermove",(function(e){return e.stopPropagation()}))("pointerup",(function(e){return e.stopPropagation()}))("touchstart",(function(e){return t.onMouseDown(t.touchToMouse(e))})),I.Rb()),2&e&&I.jc("ngStyle",t.resizerStyles)},directives:[h.w],styles:[""],changeDetection:0}),hi);function vi(e,t){if(1&e&&I.Nb(0,"sd-popup",1),2&e){var n=t.$implicit,i=I.dc();I.jc("contentViewRoot",i.contentViewRoot)("popupInfo",n)("popupOrder",i.popupOrder)}}var mi,yi,Si,Mi=((mi=function(){function e(t,n,i,o){d(this,e),this.contentService=t,this.changeDetectorRef=n,this.subscriptionService=i,this.store$=o,this.popups=[],this.popupOrder=[]}return p(e,[{key:"ngOnInit",value:function(){var e=this;this.subscriptionService.push(this.store$.pipe(Object(v.c)()).subscribe({next:function(t){return e.annotTool=t}}),this.contentService.popupHolder$.subscribe({next:function(t){return e.toggle(t)}}),this.contentService.reload$.pipe(T.a((function(e){return y.q.type(e,y.g.Annot)}))).subscribe({next:function(){e.clearPopups(),e.changeDetectorRef.markForCheck()}}))}},{key:"ngOnDestroy",value:function(){this.clearPopups()}},{key:"clearPopups",value:function(){this.popups.splice(0),this.popupOrder.splice(0)}},{key:"toggle",value:function(e){var t=e.src,n=e.popup,i=e.pdfPage,o=e.open,r=this.popups.findIndex((function(e){return n.oid===e.popup.oid}));if(r>=0&&(void 0===o||!o))return this.popups.splice(r,1),(r=this.popupOrder.indexOf(n.oid))>-1&&this.popupOrder.splice(r,1),void this.changeDetectorRef.markForCheck();this.annotTool!==m.a.ERASER&&(void 0===o||o)&&(this.popupOrder.push(n.oid),this.popups.push({src:t,popup:n,pdfPage:i}),this.changeDetectorRef.markForCheck())}}]),e}()).\u0275fac=function(e){return new(e||mi)(I.Mb(y.f),I.Mb(I.h),I.Mb(g.G),I.Mb(N.h))},mi.\u0275cmp=I.Gb({type:mi,selectors:[["sd-popups"]],inputs:{contentViewRoot:"contentViewRoot"},features:[I.yb([g.G])],decls:1,vars:1,consts:[[3,"contentViewRoot","popupInfo","popupOrder",4,"ngFor","ngForOf"],[3,"contentViewRoot","popupInfo","popupOrder"]],template:function(e,t){1&e&&I.Dc(0,vi,1,3,"sd-popup",0),2&e&&I.jc("ngForOf",t.popups)},styles:[""],changeDetection:0}),mi),xi=u("nofJ"),Oi=["normal"],Pi=["blackmark"],Ci=((yi=function(){function e(t,n){d(this,e),this.contentService=t,this.subscriptionService=n,this.normalColor=xi.a,this.blackmarkColor=xi.b,this.isViewInit=!1}return p(e,[{key:"ngOnInit",value:function(){var e=this;this.normalPainter=new wi(this.normalElementRef,this.pdfPage.bbox),this.blackmarkPainter=new wi(this.blackmarkElementRef,this.pdfPage.bbox),this.subscriptionService.push(this.contentService.reload$.pipe(T.a((function(t){return y.q.typeAndPage(t,e.pdfPage.i,y.g.TextSearch)}))).subscribe({next:function(){return e.clearRect()}}))}},{key:"ngOnChanges",value:function(e){this.mark(this.isViewInit)}},{key:"ngAfterViewInit",value:function(){this.mark(this.isViewInit=!0)}},{key:"ngOnDestroy",value:function(){this.normalElementRef=null,this.blackmarkElementRef=null,this.normalPainter=null,this.blackmarkPainter=null,E.v.destroy(this)}},{key:"clearRect",value:function(){this.normalPainter.clear(),this.blackmarkPainter.clear()}},{key:"mark",value:function(e){e&&(this.clearRect(),this.result&&this.normalPainter.render(this.result.words.map((function(e){return e.rects}))),this.redactionMarks&&this.blackmarkPainter.render(this.redactionMarks.words.map((function(e){return e.rects}))))}}]),e}()).\u0275fac=function(e){return new(e||yi)(I.Mb(y.f),I.Mb(g.G))},yi.\u0275cmp=I.Gb({type:yi,selectors:[["sd-search-highlight"]],viewQuery:function(e,t){var n;1&e&&(I.zc(Oi,!0),I.zc(Pi,!0)),2&e&&(I.sc(n=I.ac())&&(t.normalElementRef=n.first),I.sc(n=I.ac())&&(t.blackmarkElementRef=n.first))},inputs:{pdfPage:"pdfPage",result:"result",redactionMarks:"redactionMarks"},features:[I.yb([g.G]),I.xb],decls:5,vars:4,consts:[["normal",""],["blackmark",""]],template:function(e,t){1&e&&(I.cc(),I.Sb(0,"svg"),I.Nb(1,"path",null,0),I.Nb(3,"path",null,1),I.Rb()),2&e&&(I.Ab("width",t.pdfPage.bbox.w+t.pdfPage.bbox.x)("height",t.pdfPage.bbox.h+t.pdfPage.bbox.y),I.zb(1),I.Ab("fill",t.normalColor),I.zb(2),I.Ab("fill",t.blackmarkColor))},styles:["svg[_ngcontent-%COMP%]{position:absolute;right:0;top:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"],changeDetection:0}),yi),wi=function(){function e(t,n){d(this,e),this.elementRef=t,this.bbox=n,this.d=[]}return p(e,[{key:"clear",value:function(){this.d.splice(0),this.bindPath()}},{key:"render",value:function(e){var t,n=this,i=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw r}}}}(e);try{var o=function(){var e=t.value,i=void 0,o=e[0];e.forEach((function(t,r){i=t,o.top!==i.top&&(n.d[n.d.length]=n.mergeRects(o,e[r-1]),o=i)})),n.d[n.d.length]=n.mergeRects(o,i)};for(i.s();!(t=i.n()).done;)o()}catch(r){i.e(r)}finally{i.f()}this.bindPath()}},{key:"bindPath",value:function(){this.elementRef.nativeElement.setAttribute("d",this.generatePath())}},{key:"generatePath",value:function(){return this.d.reduce((function(e,t){return"".concat(e,"M ").concat(t.x," ").concat(t.y," L ").concat(t.x+t.w," ").concat(t.y," L ").concat(t.x+t.w," ").concat(t.y+t.h," L ").concat(t.x," ").concat(t.y+t.h," Z ")}),E.v.EMPTY_STRING)}},{key:"mergeRects",value:function(e,t){return{x:e.left,y:this.bbox.h+this.bbox.y-e.top,w:t.right-e.left,h:e.top-e.bottom}}}]),e}(),ki=u("SsqP"),_i=u("cUpR"),Ti=u("xEdf"),Ei=((Si=function(){function e(t,n,i,o){d(this,e),this.sanitizer=t,this.dataService=n,this.contentService=i,this.changeDetectorRef=o}return p(e,[{key:"ngOnInit",value:function(){var e=this;this.contentService.publishSomePageLoaded(!0),this.dataService.getPdfPageScript(this.documentId,this.pdfPage.i).subscribe({next:function(t){e._innerHTML=t.scriptText,e.changeDetectorRef.markForCheck()}})}},{key:"innerHTML",get:function(){return this.sanitizer.sanitize(I.I.HTML,this._innerHTML)}},{key:"pageHeight",get:function(){return this.pdfPage.bbox.h+"px"}}]),e}()).\u0275fac=function(e){return new(e||Si)(I.Mb(_i.b),I.Mb(Ti.b),I.Mb(y.f),I.Mb(I.h))},Si.\u0275cmp=I.Gb({type:Si,selectors:[["sd-tts-script"]],hostVars:3,hostBindings:function(e,t){2&e&&(I.Vb("innerHTML",t.innerHTML,I.vc),I.Bc("height",t.pageHeight))},inputs:{documentId:"documentId",pdfPage:"pdfPage"},features:[I.yb([g.G])],decls:0,vars:0,template:function(e,t){},styles:["[_nghost-%COMP%]{padding-top:30px;margin-left:50px;display:block;overflow:auto;font-size:8px}"],changeDetection:0}),Si),Ii=u("dHvJ"),Ri=u("ttxD"),Ni=u("jgPd"),Ai=u("YhbR"),Di=u("34bx"),Li=u("DKVU"),Fi=u("1G5W"),ji=u("oMJ0");function zi(e,t){if(1&e){var n=I.Tb();I.Sb(0,"div",1),I.Zb("mousedown",(function(){I.uc(n);var e=t.$implicit;return I.dc().onMousedown(e)})),I.Rb()}if(2&e){var i=t.$implicit,o=I.dc();I.jc("ngStyle",o.getLineStyles(i))}}var Vi,Bi=((Vi=function(){function e(t,n,i,o,r){d(this,e),this.elementRef=t,this.changeDetectorRef=n,this.subscriptionService=i,this.store$=o,this.shortcutService=r,this.guideLines=[],this.selectedLine=null,this.trackByGuideLine=function(e,t){return t.id}}return p(e,[{key:"ngOnInit",value:function(){var e=this;this.subscriptionService.push(this.store$.pipe(Object(ji.d)(this.pdfPage.i)).subscribe({next:function(t){e.guideLines=t,e.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(ji.e)(this.pdfPage.i)).subscribe({next:function(t){var n;e.selectedLine=t,(null===(n=e.selectedLine)||void 0===n?void 0:n.offset)<0&&e.listenGuideLineMove(e.selectedLine)}}),this.store$.pipe(Object(P.f)("scale")).subscribe({next:function(t){return e.scale=t}}),this.store$.pipe(Object(P.f)("degree")).subscribe({next:function(t){e.degree=t,e.changeDetectorRef.markForCheck()}}),this.shortcutService.getShortcutEvent(ce.a.DELETE_GUIDELINE).pipe(pt.a(this.store$.pipe(Object(P.f)("currentPageNo"))),T.a((function(t){var n=a(t,2),i=(n[0],n[1]);return e.pdfPage.i===i-1})),T.a((function(){return null!==e.selectedLine}))).subscribe({next:function(){e.store$.dispatch(ji.b.remove({payload:{pageIndex:e.pdfPage.i,guideLine:e.selectedLine}}))}}))}},{key:"onMousedown",value:function(e){this.listenGuideLineMove(e)}},{key:"getLineStyles",value:function(t){var n,i=E.u.normalizeDegree(this.degree+this.pdfPage.r+(t.isVertical?90:0)),o=Math.max(e.LINE_WIDTH/(this.scale/100),1)+"px";return Object.assign({position:"absolute",display:t.offset<0?"none":"block",top:t.isVertical?"0px":t.offset+"px",left:t.isVertical?t.offset+"px":"0px",width:t.isVertical?o:this.pdfPage.bbox.w+"px",height:t.isVertical?this.pdfPage.bbox.h+"px":o,backgroundColor:"#036FFC",backgroundClip:"padding-box",cursor:0===i||180===i?"row-resize":"col-resize",zIndex:String(E.p.GuideLine)},t.id===(null===(n=this.selectedLine)||void 0===n?void 0:n.id)?{backgroundColor:"#FF6100"}:{})}},{key:"listenGuideLineMove",value:function(e){var t=this,n=this.elementRef.nativeElement.parentElement,i=E.u.normalizeDegree(this.degree+this.pdfPage.r+(e.isVertical?90:0)),o=0===i||180===i?"row-resizing":"col-resizing";document.body.classList.add(o),this.selectedLine=e,this.subscriptionService.push(Ht.a(n,"mousemove",{capture:!0}).pipe(Fi.a(ue.a(Ht.a(window,"mouseup",{capture:!0}),Ht.a(n,"mouseleave")))).subscribe({next:function(e){var n,i,o,r=t.getPageOffset(e.target,{offsetX:e.offsetX,offsetY:e.offsetY});t.selectedLine=Object.assign({},t.selectedLine),t.selectedLine.offset=t.selectedLine.isVertical?r.offsetX:r.offsetY,t.guideLines=Object.assign(Object.assign({},t.guideLines),(n={},i=t.selectedLine.id,o=t.selectedLine,i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n)),t.changeDetectorRef.markForCheck()},complete:function(){t.store$.dispatch(t.selectedLine.offset<0?ji.b.remove({payload:{pageIndex:t.pdfPage.i,guideLine:t.selectedLine}}):ji.b.update({payload:{pageIndex:t.pdfPage.i,guideLine:t.selectedLine}})),document.body.classList.remove(o)}}))}},{key:"getPageOffset",value:function(e,t){return e.matches("sd-page")?t:this.getPageOffset(e.parentNode,e.offsetParent&&0!==e.offsetWidth&&0!==e.offsetHeight?{offsetX:t.offsetX+e.offsetLeft,offsetY:t.offsetY+e.offsetTop}:t)}},{key:"guideLineArray",get:function(){var e=this;return Object.keys(this.guideLines).map((function(t){return e.guideLines[t]})).filter((function(e){return null!=e}))}}]),e}()).LINE_WIDTH=1,Vi.\u0275fac=function(e){return new(e||Vi)(I.Mb(I.l),I.Mb(I.h),I.Mb(g.G),I.Mb(N.h),I.Mb(ce.c))},Vi.\u0275cmp=I.Gb({type:Vi,selectors:[["sd-guide-line"]],inputs:{pdfPage:"pdfPage"},features:[I.yb([g.G])],decls:1,vars:2,consts:[[3,"ngStyle","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngStyle","mousedown"]],template:function(e,t){1&e&&I.Dc(0,zi,1,1,"div",0),2&e&&I.jc("ngForOf",t.guideLineArray)("ngForTrackBy",t.trackByGuideLine)},directives:[h.s,h.w],styles:[""]}),Vi),Wi=u("0WlJ"),$i=u("3UWI"),Ui=u("KmMa"),Gi=u("wuT5"),Hi=u("oT1b");function qi(e,t){1&e&&I.Ob(0)}function Zi(e,t){1&e&&I.Ob(0)}function Xi(e,t){if(1&e&&(I.cc(),I.Sb(0,"text"),I.Fc(1),I.Rb()),2&e){var n=t.$implicit,i=I.dc(2);I.Ab("font-size",i.markerFontSize)("x",n.x)("y",n.y),I.zb(1),I.Gc(n.content)}}function Yi(e,t){if(1&e){var n=I.Tb();I.Sb(0,"div",3),I.Zb("click",(function(e){I.uc(n);var i=t.isVertical;return I.dc().onRulerClick(i,e)}))("mousedown",(function(e){I.uc(n);var i=t.isVertical;return I.dc().onRulerMousedown(i,e)})),I.cc(),I.Sb(1,"svg"),I.Nb(2,"path"),I.Nb(3,"path"),I.Dc(4,Xi,2,4,"text",4),I.Rb(),I.Rb()}if(2&e){var i=t.isVertical,o=t.className,r=I.dc();I.Bb(o),I.jc("ngStyle",r.getRulerStyles(i)),I.zb(1),I.Bc("transform",i?"translate(0, "+r.rulerOffset.offsetY+"px)":"translate("+r.rulerOffset.offsetX+"px, 0)"),I.zb(1),I.Ab("d",r.rendered[o].d),I.zb(1),I.Ab("d",r.mousePath[o]),I.zb(1),I.jc("ngForOf",r.rendered[o].texts)}}var Ki,Qi,Ji=function(){return{isVertical:!1,className:"horizontal"}},eo=function(){return{isVertical:!0,className:"vertical"}},to=((Ki=function(){function e(t,n,i,o,r,s,a){d(this,e),this.elementRef=t,this.changeDetectorRef=n,this.subscriptionService=i,this.store$=o,this.pageService=r,this.guideLineService=s,this.unitPipe=a,this.markerFontSize=12,this.mousePath={horizontal:"",vertical:""},this.rulerOffset={offsetX:0,offsetY:0},this.rendered={horizontal:{d:"",texts:[]},vertical:{d:"",texts:[]}},this.cornerStyles={width:Ui.a+"px",height:Ui.a+"px"}}return p(e,[{key:"ngOnInit",value:function(){this.initSubscriptions()}},{key:"getRulerStyles",value:function(e){var t={top:"0px",left:"0px"};return t[e?"top":"left"]=Ui.a+"px",t[e?"width":"height"]=Ui.a+"px",t[e?"height":"width"]="calc(100% - ".concat(Ui.a,"px)"),t}},{key:"render",value:function(e){var t=this;this.rulerOffset=e;var n=E.u.normalizeScale(this.scale),i=function(e){return Wi.b.convert(Wi.a.POINT,t.rulerUnit,e/n)},o=i(e.offsetX),r=i(e.offsetY),s=i(e.width),a=i(e.height),c={horizontal:this.fixRange({min:-o,max:s-o}),vertical:this.fixRange({min:-r,max:a-r})};this.rendered.horizontal=this.renderRuler(this.rulerUnit,c.horizontal,n,!1),this.rendered.vertical=this.renderRuler(this.rulerUnit,c.vertical,n,!0),this.changeDetectorRef.markForCheck()}},{key:"onRulerClick",value:function(e,t){var n=(e?t.offsetY:t.offsetX)/E.u.normalizeScale(this.scale),i=E.u.normalizeDegree(this.pdfPage.r+this.degree+(e?0:90)),o={isVertical:90===i||270===i,offset:n};n<0||(o.isVertical?this.pdfPage.bbox.w:this.pdfPage.bbox.h)<n||(180===i?o.offset=this.pdfPage.bbox.h-o.offset:270===i&&(o.offset=this.pdfPage.bbox.w-o.offset),this.store$.dispatch(ji.b.create({payload:{pageIndex:this.pdfPage.i,guideLine:o}})))}},{key:"onRulerMousedown",value:function(e,t){var n=this,i=E.u.normalizeDegree(this.pdfPage.r+this.degree+(e?90:0)),o={offset:-1,isVertical:90===i||270===i};this.subscriptionService.push(Ht.a(t.currentTarget,"mouseleave").pipe(Fi.a(Ht.a(window,"mouseup",{capture:!0})),Zt.a(1)).subscribe({next:function(){n.store$.dispatch(ji.b.create({payload:{pageIndex:n.pdfPage.i,guideLine:o}}))}}))}},{key:"initSubscriptions",value:function(){var e=this;this.subscriptionService.push(Ht.a(window,"mousemove",{capture:!0}).subscribe({next:function(t){var n=e.elementRef.nativeElement.getBoundingClientRect(),i=(t.clientX-n.left-Ui.a-e.rulerOffset.offsetX).toFixed(3),o=(t.clientY-n.top-Ui.a-e.rulerOffset.offsetY).toFixed(3);e.mousePath={horizontal:"M ".concat(i," 0 L ").concat(i," ").concat(Ui.a),vertical:"M 0 ".concat(o," L ").concat(Ui.a," ").concat(o)},e.changeDetectorRef.markForCheck()}}),$t.b([this.store$.pipe(Object(P.f)("currentPageNo")),this.pageService.pdfPages$.pipe(T.a((function(e){return null!=e})))]).pipe(ot.a({next:function(t){var n=a(t,2),i=n[0],o=n[1];return e.pdfPage=o[i-1]}}),_.a((function(){return $t.b([e.guideLineService.scaleWrapperOffset$,e.guideLineService.scrollOffset$])})),$i.a(1),k.a((function(e){var t=a(e,2),n=t[0],i=t[1];return{offsetX:n.offsetX-i.offsetX,offsetY:n.offsetY-i.offsetY,width:n.width,height:n.height}}))).subscribe({next:function(t){return e.render(t)}}),this.store$.pipe(Object(P.f)("scale")).subscribe({next:function(t){return e.scale=t}}),this.store$.pipe(Object(P.f)("degree")).subscribe({next:function(t){return e.degree=t}}))}},{key:"renderRuler",value:function(e,t,n,i){for(var o={d:"",texts:[]},r=t.min;r<=t.max;++r){var s,a,c=r%10==0?Ui.a:r%5==0?Ui.a/2:Ui.a/4,l=Number(Wi.b.convert(e,Wi.a.POINT,r*n).toFixed(3)),u=l,d=0,h=l,p=c;if(i&&(u=(s=[d,u])[0],d=s[1],h=(a=[p,h])[0],p=a[1]),o.d+="M ".concat(u," ").concat(d," L ").concat(h," ").concat(p),r%10==0){var f,g=l,b=c;i&&(g=(f=[b,g])[0],b=f[1]),g+=3,b-=3,o.texts.push({x:g,y:b,content:r})}}return o}},{key:"fixRange",value:function(e){return{min:Math[e.min>0?"ceil":"floor"](e.min),max:Math[e.min>0?"floor":"ceil"](e.max)}}},{key:"rulerUnit",get:function(){return this.unitPipe.transform(this.scale>=250?Wi.a.MILLIMETER:Wi.a.CENTIMETER)}}]),e}()).\u0275fac=function(e){return new(e||Ki)(I.Mb(I.l),I.Mb(I.h),I.Mb(g.G),I.Mb(N.h),I.Mb(ye.b),I.Mb(Gi.a),I.Mb(Hi.a))},Ki.\u0275cmp=I.Gb({type:Ki,selectors:[["sd-ruler"]],features:[I.yb([g.G])],decls:5,vars:7,consts:[[1,"corner",3,"ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["svgTemplateRef",""],[1,"ruler-container",3,"ngStyle","click","mousedown"],[4,"ngFor","ngForOf"]],template:function(e,t){if(1&e&&(I.Nb(0,"div",0),I.Dc(1,qi,1,0,"ng-container",1),I.Dc(2,Zi,1,0,"ng-container",1),I.Dc(3,Yi,5,8,"ng-template",null,2,I.Ec)),2&e){var n=I.tc(4);I.jc("ngStyle",t.cornerStyles),I.zb(1),I.jc("ngTemplateOutlet",n)("ngTemplateOutletContext",I.mc(5,Ji)),I.zb(1),I.jc("ngTemplateOutlet",n)("ngTemplateOutletContext",I.mc(6,eo))}},directives:[h.w,h.A,h.s],styles:["div.corner[_ngcontent-%COMP%]{top:0;left:0;z-index:2;border-right:1px solid #dadada;border-bottom:1px solid #dadada}.ruler-container[_ngcontent-%COMP%], div.corner[_ngcontent-%COMP%]{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:#fff}.ruler-container.horizontal[_ngcontent-%COMP%]{z-index:1;border-bottom:1px solid #dadada}.ruler-container.vertical[_ngcontent-%COMP%]{border-right:1px solid #dadada}svg[_ngcontent-%COMP%]{width:100%;height:100%;overflow:visible}svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:#1e1e1e;stroke-width:1;fill:transparent}"],changeDetection:0}),Ki),no=u("eXiQ"),io=((Qi=function e(){d(this,e)}).\u0275mod=I.Kb({type:Qi}),Qi.\u0275inj=I.Jb({factory:function(e){return new(e||Qi)},providers:[ae.a],imports:[[v.b,Dt.a,vt,Te.a,Lt.b,Ee.a,At.a,A.b,Xe.d,h.c,f.n,f.B,g.j,g.t,g.h,g.C]]}),Qi);I.xc(Rn,[Ii.a,Ri.a,Ni.a,Ae,Ai.a,Di.a,Li.a,Bi,to,no.a,bt.a,h.q,h.r,h.s,h.t,h.A,h.w,h.x,h.y,h.z,h.u,h.v,f.H,f.w,f.G,f.d,f.x,f.A,f.b,f.D,f.E,f.z,f.r,f.s,f.C,f.p,f.o,f.y,f.c,f.e,f.u,f.v,f.t,f.i,f.l,f.j,f.m,f.f,g.i,g.s,g.g,g.B,Rn,Fn,Ci,ii,_e,Bn,Ei,ki.a,hn,se.b,se.e,se.f,se.d,se.c,Mi,gi,bi,Vt,Nt],[j.a,h.b,h.G,h.p,h.k,h.E,h.g,h.C,h.F,h.d,h.f,h.i,h.j,h.l]),I.xc(Fn,[Ii.a,Ri.a,Ni.a,Ae,Ai.a,Di.a,Li.a,Bi,to,no.a,bt.a,h.q,h.r,h.s,h.t,h.A,h.w,h.x,h.y,h.z,h.u,h.v,f.H,f.w,f.G,f.d,f.x,f.A,f.b,f.D,f.E,f.z,f.r,f.s,f.C,f.p,f.o,f.y,f.c,f.e,f.u,f.v,f.t,f.i,f.l,f.j,f.m,f.f,g.i,g.s,g.g,g.B,Rn,Fn,Ci,ii,_e,Bn,Ei,ki.a,hn,se.b,se.e,se.f,se.d,se.c,Mi,gi,bi,Vt,Nt],[j.a,h.b,h.G,h.p,h.k,h.E,h.g,h.C,h.F,h.d,h.f,h.i,h.j,h.l]),I.xc(ii,[Ii.a,Ri.a,Ni.a,Ae,Ai.a,Di.a,Li.a,Bi,to,no.a,bt.a,h.q,h.r,h.s,h.t,h.A,h.w,h.x,h.y,h.z,h.u,h.v,f.H,f.w,f.G,f.d,f.x,f.A,f.b,f.D,f.E,f.z,f.r,f.s,f.C,f.p,f.o,f.y,f.c,f.e,f.u,f.v,f.t,f.i,f.l,f.j,f.m,f.f,g.i,g.s,g.g,g.B,Rn,Fn,Ci,ii,_e,Bn,Ei,ki.a,hn,se.b,se.e,se.f,se.d,se.c,Mi,gi,bi,Vt,Nt],[j.a,h.b,h.G,h.p,h.k,h.E,h.g,h.C,h.F,h.d,h.f,h.i,h.j,h.l]),I.xc(_e,[Ii.a,Ri.a,Ni.a,Ae,Ai.a,Di.a,Li.a,Bi,to,no.a,bt.a,h.q,h.r,h.s,h.t,h.A,h.w,h.x,h.y,h.z,h.u,h.v,f.H,f.w,f.G,f.d,f.x,f.A,f.b,f.D,f.E,f.z,f.r,f.s,f.C,f.p,f.o,f.y,f.c,f.e,f.u,f.v,f.t,f.i,f.l,f.j,f.m,f.f,g.i,g.s,g.g,g.B,Rn,Fn,Ci,ii,_e,Bn,Ei,ki.a,hn,se.b,se.e,se.f,se.d,se.c,Mi,gi,bi,Vt,Nt],[j.a,h.b,h.G,h.p,h.k,h.E,h.g,h.C,h.F,h.d,h.f,h.i,h.j,h.l]),I.xc(Mi,[Ii.a,Ri.a,Ni.a,Ae,Ai.a,Di.a,Li.a,Bi,to,no.a,bt.a,h.q,h.r,h.s,h.t,h.A,h.w,h.x,h.y,h.z,h.u,h.v,f.H,f.w,f.G,f.d,f.x,f.A,f.b,f.D,f.E,f.z,f.r,f.s,f.C,f.p,f.o,f.y,f.c,f.e,f.u,f.v,f.t,f.i,f.l,f.j,f.m,f.f,g.i,g.s,g.g,g.B,Rn,Fn,Ci,ii,_e,Bn,Ei,ki.a,hn,se.b,se.e,se.f,se.d,se.c,Mi,gi,bi,Vt,Nt],[j.a,h.b,h.G,h.p,h.k,h.E,h.g,h.C,h.F,h.d,h.f,h.i,h.j,h.l]),I.xc(gi,[Ii.a,Ri.a,Ni.a,Ae,Ai.a,Di.a,Li.a,Bi,to,no.a,bt.a,h.q,h.r,h.s,h.t,h.A,h.w,h.x,h.y,h.z,h.u,h.v,f.H,f.w,f.G,f.d,f.x,f.A,f.b,f.D,f.E,f.z,f.r,f.s,f.C,f.p,f.o,f.y,f.c,f.e,f.u,f.v,f.t,f.i,f.l,f.j,f.m,f.f,g.i,g.s,g.g,g.B,Rn,Fn,Ci,ii,_e,Bn,Ei,ki.a,hn,se.b,se.e,se.f,se.d,se.c,Mi,gi,bi,Vt,Nt],[j.a,h.b,h.G,h.p,h.k,h.E,h.g,h.C,h.F,h.d,h.f,h.i,h.j,h.l]);var oo,ro=u("Vs1n"),so=u("Xk1l"),ao=u("cYj5"),co=((oo=function(){function e(t,n,i,o,r,s,a,c,l,u,h,p){var f=this;d(this,e),this.documentService=t,this.translatePipe=n,this.productService=i,this.store$=o,this.customUIService=r,this.annotSelectedService=s,this.actionHistoryService=a,this.modalService=c,this.dialogService=l,this.changeService=u,this.downloadService=h,this.viewerService=p,this.hidableMenus={},this.leftSectionFirstCustomUI=[],this.leftSectionLastCustomUI=[],this.MENU_RESPONSIVE_SIZE=811,this.store$.pipe(Object(P.e)([C.a.TOOLBAR_EBOOK,C.a.TOOLBAR_PREFERENCES,C.a.TOOLBAR_DOCUMENT_INFO,C.a.TOOLBAR_SD_INFO,C.a.TOOLBAR_SAVE,C.a.TOOLBAR_PRINT,C.a.TOOLBAR_DOWNLOAD,C.a.TOOLBAR_SLIDESHOW])).subscribe({next:function(e){var t=e.hiddenViews;f.hidableMenus=Object.assign(Object.assign({},f.hidableMenus),t)}}),this.customUIService.customButtonUI$.subscribe({next:function(e){f.leftSectionFirstCustomUI=e.filter((function(e){return"TOOLBAR.LEFT_SECTION.FIRST"===e.position})),f.leftSectionLastCustomUI=e.filter((function(e){return"TOOLBAR.LEFT_SECTION.LAST"===e.position}))}})}return p(e,[{key:"buildMainMenu",value:function(e){var t=[],n={items:[]};if(w.f.get(w.c.MAIN_MENU)){var i,o,r,s,a,l=this.buildFirstCustomMenu();l.items.length>0&&t.push(l),n={items:[]},E.F.width<=this.MENU_RESPONSIVE_SIZE&&(i=n.items).push.apply(i,c(this.buildActionMenu(e))),(o=n.items).push.apply(o,c(this.buildFileMenu())),(r=n.items).push.apply(r,c(this.buildViewMenu(e))),(s=n.items).push.apply(s,c(this.buildSettingMenu())),(a=n.items).push.apply(a,c(this.buildInfoMenu())),n.items.length>0&&t.push(n);var u=this.buildLastCustomMenu();u.items.length>0&&t.push(u)}return t}},{key:"buildActionMenu",value:function(e){var t=this,n=[];return e.runtimeEnv.get(w.c.UNDO)?(n.push({label:this.translatePipe.transform("UNDO"),command:function(){t.annotSelectedService.unselectAll(),t.actionHistoryService.undo()},disabled:!e.canUndo}),n.push({label:this.translatePipe.transform("REDO"),command:function(){t.annotSelectedService.unselectAll(),t.actionHistoryService.redo()},disabled:!e.canRedo}),n):n}},{key:"buildFileMenu",value:function(){var e=this,t=[];if(this.documentService.checkAuthority(y.j.SAVE_DOCUMENT)&&w.f.get(w.d.FILE_MENUS_UI)&&w.f.get(w.d.MAIN_TOOLBAR_SAVE)&&!this.hidableMenus[C.a.TOOLBAR_SAVE]&&t.push({label:this.translatePipe.transform("SAVE"),command:function(){return e.changeService.saveDocument()}}),this.documentService.checkAuthority(y.j.DOWNLOAD_DOCUMENT)&&w.f.get(w.d.FILE_MENUS_UI)&&w.f.get(w.d.MAIN_MENU_DOWNLOAD)&&!this.hidableMenus[C.a.TOOLBAR_DOWNLOAD])switch(this.productService.getProductType()){case"StreamDocs":t.push({label:this.translatePipe.transform("DOWNLOAD_DOC"),command:function(){return e.downloadService.downloadDocument()}});break;case"StreamDocs Vu!":this.documentService.hasOriginalFile&&t.push({label:this.translatePipe.transform("ORIGINAL_DOWNLOAD"),command:function(){return e.downloadService.downloadOriginalDocument()}}),t.push({label:this.translatePipe.transform("PDF_DOWNLOAD"),command:function(){return e.downloadService.downloadDocument()}})}return w.f.get(w.c.DOCUMENT_INFO)&&!this.hidableMenus[C.a.TOOLBAR_DOCUMENT_INFO]&&t.push({label:this.translatePipe.transform("DOC_PROPERTY_MENU"),command:function(){return e.dialogService.toggleDialogVisibility(S.c.DOCUMENT_INFO,!0)}}),this.documentService.checkAuthority(y.j.PRINT_DOCUMENT)&&w.f.get(w.d.FILE_MENUS_UI)&&w.f.get(w.c.PRINT)&&!this.hidableMenus[C.a.TOOLBAR_PRINT]&&t.push({label:this.translatePipe.transform("PRINT_MENU"),command:function(){return e.dialogService.toggleDialogVisibility(S.c.PRINT)}}),this.addMenuDivisionLine(t),t}},{key:"buildViewMenu",value:function(e){var t=this,n=[];return w.f.get(w.d.MAIN_MENU_SLIDESHOW)&&!this.hidableMenus[C.a.TOOLBAR_SLIDESHOW]&&n.push({label:function(){return t.translatePipe.transform("SLIDESHOW")},command:function(){return t.viewerService.setSlideshow()}}),w.f.get(w.d.MAIN_MENU_EBOOK)&&!this.hidableMenus[C.a.TOOLBAR_EBOOK]&&n.push({label:function(){return e.isEbookMode()?t.translatePipe.transform("CHANGE_TO_THE_READING_MODE"):t.translatePipe.transform("CHANGE_TO_EBOOK_MODE")},command:function(){return t.viewerService.toggleEbookMode()}}),this.addMenuDivisionLine(n),n}},{key:"buildSettingMenu",value:function(){var e=this,t=[];return w.f.get(w.c.PREFERENCES)&&!this.hidableMenus[C.a.TOOLBAR_PREFERENCES]&&t.push({label:this.translatePipe.transform("PREFERENCE_MENU"),command:function(){return e.dialogService.toggleDialogVisibility(S.c.PREFERENCES,!0)}}),this.addMenuDivisionLine(t),t}},{key:"buildInfoMenu",value:function(){var e=this,t=[];return w.f.get(w.d.MAIN_TOOLBAR_SD_INFO)&&!this.hidableMenus[C.a.TOOLBAR_SD_INFO]&&t.push({label:this.translatePipe.transform("SD_INFO"),command:function(){return e.showProductInfo()}}),t}},{key:"showProductInfo",value:function(){var e=this;Ut.a(this.productService.getProductLicenseInfo(),this.productService.getPackageVersion()).subscribe({next:function(t){var n=a(t,2),i=n[0],o=n[1];e.modalService.createCommonModal({type:mt.a.PRODUCT,logo:e.productService.getLogo(),subTitle:"Release Version "+o,content:i,footerContent:e.productService.getCopyRight(),confirmButton:!0,confirmLabel:e.translatePipe.transform("CLOSE")})},error:function(){e.modalService.createCommonModal({type:mt.a.PRODUCT,logo:e.productService.getLogo(),content:e.translatePipe.transform("NO_PRODUCT_INFO"),footerContent:e.productService.getCopyRight(),confirmButton:!0,confirmLabel:e.translatePipe.transform("CLOSE")})}})}},{key:"addMenuDivisionLine",value:function(e){e.length>0&&e.push({type:g.a.LINE,label:"DIVISION_LINE"})}},{key:"buildFirstCustomMenu",value:function(){var e={items:[]};return E.F.width>this.MENU_RESPONSIVE_SIZE||this.leftSectionFirstCustomUI.forEach((function(t){e.items.push({label:t.label,command:function(e){return t.onclick(so.a.simplifyMouseEvent(e))}})})),e}},{key:"buildLastCustomMenu",value:function(){var e={items:[]};return E.F.width>this.MENU_RESPONSIVE_SIZE||this.leftSectionLastCustomUI.forEach((function(t){e.items.push({label:t.label,command:function(e){return t.onclick(so.a.simplifyMouseEvent(e))}})})),e}}]),e}()).\u0275fac=function(e){return new(e||oo)(I.Wb(y.k),I.Wb(A.d),I.Wb(ao.b),I.Wb(N.h),I.Wb(y.i),I.Wb(y.c),I.Wb(y.b),I.Wb(mt.c),I.Wb(S.b),I.Wb(y.e),I.Wb(y.l),I.Wb(y.w))},oo.\u0275prov=I.Ib({token:oo,factory:oo.\u0275fac}),oo),lo=u("YWXW"),uo=u("4pye"),ho=u("l5mm"),po=u("iInd"),fo=u("L7cj"),go=u("Yoju"),bo=["sdToastOutlet"],vo=["sdModalOutlet"],mo=["mainToolbarRef"];function yo(e,t){if(1&e&&I.Nb(0,"sd-annot-toolbar",18),2&e){var n=I.dc(2);I.Bc("display",!n.annotationUse&&!n.isFormToolActive&&!n.isSignatureToolActive||n.isEbookMode()?"none":void 0)("height",n.ToolbarHeightInPixel,"px"),I.jc("formToolActive",n.isFormToolActive)("annotToolActive",n.annotationUse)("signatureToolActive",n.isSignatureToolActive)}}function So(e,t){if(1&e&&(I.Sb(0,"aside",19),I.Nb(1,"sd-side-view",17),I.Rb()),2&e){var n=I.dc(2);I.jc("@sideViewAnimation",n.isSmallWidthScreen),I.zb(1),I.jc("pdfDoc",n.doc)}}function Mo(e,t){if(1&e&&(I.Sb(0,"aside",20),I.Nb(1,"sd-right-side-view",17),I.Rb()),2&e){var n=I.dc(2);I.jc("@sideViewAnimation",n.isSmallWidthScreen),I.zb(1),I.jc("pdfDoc",n.doc)}}function xo(e,t){if(1&e&&I.Nb(0,"sd-content-view",21),2&e){var n=I.dc(2);I.jc("pdfDoc",n.doc)("overWrittenZoom",n.zoomParam)("ngStyle",n.contentViewStyle)}}function Oo(e,t){1&e&&I.Nb(0,"sd-ruler")}function Po(e,t){if(1&e){var n=I.Tb();I.Sb(0,"span",22),I.Zb("contextmenu",(function(e){return I.uc(n),I.dc(2).onContextMenu(e)})),I.Fc(1),I.Rb()}if(2&e){var i=I.dc(2);I.zb(1),I.Ic("",i.currentPageNo,"/",i.pageCount,"")}}function Co(e,t){if(1&e&&(I.Sb(0,"div",29),I.Fc(1),I.Rb()),2&e){var n=I.dc(4);I.zb(1),I.Gc(n.passwordErrorMessage)}}var wo=function(e){return{error:e}};function ko(e,t){if(1&e){var n=I.Tb();I.Sb(0,"div",26),I.Fc(1),I.ec(2,"translate"),I.Rb(),I.Sb(3,"pu-input",27),I.Zb("ngModelChange",(function(e){return I.uc(n),I.dc(3).password=e}))("keydown.enter",(function(){I.uc(n);var e=I.dc(3);return e.password&&!e.passwordChecking?e.checkPassword():null})),I.ec(4,"translate"),I.Rb(),I.Dc(5,Co,2,1,"div",28)}if(2&e){var i=I.dc(3);I.zb(1),I.Gc(I.fc(2,6,"THIS_DOCUMENT_WAS_ENCRYPTED")),I.zb(2),I.jc("ngClass",I.nc(10,wo,i.passwordErrorMessage))("placeholder",I.fc(4,8,"PASSWORD"))("readonly",i.passwordChecking)("ngModel",i.password),I.zb(2),I.jc("ngIf",i.passwordErrorMessage)}}function _o(e,t){if(1&e){var n=I.Tb();I.Sb(0,"button",30),I.Zb("click",(function(){return I.uc(n),I.dc(3).checkPassword()})),I.Fc(1),I.ec(2,"translate"),I.Rb()}if(2&e){var i=I.dc(3);I.jc("disabled",!i.password||i.passwordChecking),I.zb(1),I.Gc(I.fc(2,2,"OK"))}}function To(e,t){if(1&e&&(I.Sb(0,"pu-dialog",23),I.ec(1,"translate"),I.Dc(2,ko,6,12,"ng-template",null,24,I.Ec),I.Dc(4,_o,3,4,"ng-template",null,25,I.Ec),I.Rb()),2&e){var n=I.tc(3),i=I.tc(5);I.jc("bodyTemplate",n)("footerTemplate",i)("header",I.fc(1,4,"ENCRYPTED_DOCUMENT"))("headerIcon","papycon papycon-questionmark")}}function Eo(e,t){if(1&e){var n=I.Tb();I.Sb(0,"sd-print-view",31),I.Zb("finish",(function(){return I.uc(n),I.dc(2).onFinishPrint()})),I.Rb()}if(2&e){var i=I.dc(2);I.jc("doc",i.doc)("immediatePrintConfig",i.immediatePrintConfig)}}function Io(e,t){if(1&e){var n=I.Tb();I.Qb(0),I.Sb(1,"sd-toolbar",1,2),I.Zb("contextmenu",(function(e){return I.uc(n),I.dc().onContextMenu(e)})),I.Rb(),I.Dc(3,yo,1,7,"sd-annot-toolbar",3),I.Sb(4,"div",4),I.Zb("contextmenu",(function(e){return I.uc(n),I.dc().onContextMenu(e)})),I.Dc(5,So,2,2,"aside",5),I.Dc(6,Mo,2,2,"aside",6),I.Sb(7,"section",7),I.Dc(8,xo,1,3,"sd-content-view",8),I.Dc(9,Oo,1,0,"sd-ruler",0),I.Dc(10,Po,2,2,"span",9),I.Sb(11,"div",10),I.Ob(12,null,11),I.Rb(),I.Sb(14,"div",12),I.Ob(15,null,13),I.Rb(),I.Rb(),I.Rb(),I.Sb(17,"section",14),I.Dc(18,To,6,6,"pu-dialog",15),I.Rb(),I.Dc(19,Eo,1,2,"sd-print-view",16),I.Nb(20,"sd-dialog",17),I.Pb()}if(2&e){var i=I.dc();I.zb(1),I.Bc("display",i.runtimeEnv.get(i.MergedRuntimeEnvKey.MAIN_TOOLBAR)?void 0:"none")("height",i.ToolbarHeightInPixel,"px"),I.jc("doc",i.doc),I.zb(2),I.jc("ngIf",!i.supportTTS&&(i.isFormToolActive||i.annotationUse||i.isSignatureToolActive)),I.zb(1),I.Bc("height",i.mainWindowHeight),I.zb(1),I.jc("ngIf",i.sideViewVisible),I.zb(1),I.jc("ngIf",i.runtimeEnv.get(i.MergedRuntimeEnvKey.SIDE_VIEW_RIGHT)&&i.rightSideViewVisible),I.zb(1),I.jc("ngClass",i.DragMode[i.dragMode]),I.zb(1),I.jc("ngIf",i.doc),I.zb(1),I.jc("ngIf",i.rulerActive),I.zb(1),I.jc("ngIf",i.pageCount),I.zb(8),I.jc("ngIf",i.suspendedDocId),I.zb(1),I.jc("ngIf",i.printDialogView||i.immediatePrintConfig),I.zb(1),I.jc("pdfDoc",i.doc)}}var Ro,No=((Ro=function(){function e(t,n,i,o,r,s,a,c,l,u,h,p,f,g,b,v,m,y,S,M,x,O,P,C,k,_,T){d(this,e),this.acroFormService=t,this.contentService=n,this.annotService=i,this.activatedRoute=o,this.modalService=r,this.changeDetectorRef=s,this.textSearchService=a,this.dataService=c,this.toastService=l,this.annotSelectedService=u,this.documentService=h,this.viewerService=p,this.shortcutService=f,this.changeService=g,this.subscriptionService=b,this.sdContextMenuService=v,this.store$=m,this.externalApiService=y,this.dialogService=S,this.printService=M,this.apiEventBridgeService=x,this.translatePipe=O,this.localStorageService=P,this.settingsService=C,this.preferencesService=k,this.router=_,this.muPDFService=T,this.printDialogView=!1,this.suspendedDocId=E.v.EMPTY_STRING,this.password=E.v.EMPTY_STRING,this.passwordChecking=!1,this.passwordErrorMessage=E.v.EMPTY_STRING,this.sideViewVisible=!1,this.searchToolActive=!1,this.rightSideViewVisible=!1,this.isSmallWidthScreen=E.F.isSmallWidth(),this.loading=w.f.get(w.d.DELAY_LOADING),this._doc=null,this.docInfo=null,this._annotationUse=!1,this.formToolsActive=!1,this.signatureToolsActive=!1,this.isFullScreen=E.g.isFullscreenMode(),this.isContextMenuOpened=!1,this.hidableMenus={}}return p(e,[{key:"ngOnInit",value:function(){var e=this;this.contentService.togglePageLoader(!1),this.initializeSetting(),this.subscribe(),this.bindParams(),this.initSearchResult(),this.annotSelectedService.unselectAll(),this.subscriptionService.push(this.shortcutService.getShortcutEvent(ce.a.FULLSCREEN).subscribe({next:function(t){t.preventDefault(),t.stopPropagation(),e.isFullScreen?E.F.exitFullScreen():E.F.enterFullScreen()}}),E.F.windowResize$.pipe(ot.a((function(){return e.isSmallWidthScreen=E.F.isSmallWidth()})),T.a((function(){return e.isFullScreen!==E.g.isFullscreenMode()})),_.a((function(){return ho.a(100).pipe(T.a((function(){return!E.g.isFullscreenMode()})),Zt.a(1))}))).subscribe({next:function(){E.F.exitFullScreen()}}),this.documentService.openedDocument$.subscribe({next:function(t){t?(e._doc=t,e.annotationUse=!1,E.g.isDefined(e.currentPageNoParam)||e.checkLastViewedPage(),e.acroFormService.resetAcroFieldByPage(),e.changeDetectorRef.markForCheck()):e.closeDocument()}}),this.localStorageService.localStorage$.subscribe({next:function(){e.toastService.create({toastStyle:Wt.c.FAILURE,content:e.translatePipe.transform("FAILED_TO_ACCESS_LOCAL_STORAGE")})}})),this.localStorageService.isEnabledLocalStorage||this.toastService.create({toastStyle:Wt.c.FAILURE,content:this.translatePipe.transform("FAILED_TO_ACCESS_LOCAL_STORAGE")})}},{key:"ngOnDestroy",value:function(){this.viewerService.closeDocument()}},{key:"ngAfterViewInit",value:function(){var e=this;this.toastService.registerOutlet(this.sdToastOutlet),this.modalService.registerOutlet(this.sdModalOutlet),this.subscriptionService.push($t.b([this.store$.pipe(Object(P.f)("renderingMode"),T.a((function(e){return e!==et.b.SERVER}))),this.documentService.openedDocument$.pipe(T.a(E.g.isDefined)),this.contentService.reload$.pipe(T.a((function(e){return e.hasOwnProperty("pageInfo")})),ot.a((function(){return e.muPDFService.closeDocument()})),St.a(void 0))]).subscribe({next:function(t){var n=a(t,2),i=n[0],o=n[1];return e.muPDFService.prepareDocument(o.streamdocsId,i===et.b.CLIENT)}}))}},{key:"isEbookMode",value:function(){return 4===this.viewMode}},{key:"isDAP",value:function(){var e;return"DAP"===(null===(e=this.docInfo)||void 0===e?void 0:e.DocumentType)}},{key:"checkPassword",value:function(e){var t=this;this.passwordChecking=!0,this.passwordErrorMessage=E.v.EMPTY_STRING,this.viewerService.openDocument(e||this.suspendedDocId,!yt.c.skipPasswordCheck,this.password).pipe(Ot.a((function(){return t.passwordChecking=!1}))).subscribe({next:function(){t.suspendedDocId=null},error:function(n){if(t.annotationUse=!1,n.fail){var i=["view/error-pages/"+n.log.status,yt.c.skipPasswordCheck&&401===n.log.status?"errorCode="+n.errorCode:""].join(";");t.router.navigateByUrl(i)}else t.suspendedDocId=e||t.suspendedDocId,e||(t.passwordErrorMessage=t.translatePipe.transform("WRONG_PASSWORD"));t.changeDetectorRef.markForCheck()}})}},{key:"toggleRightSideView",value:function(e){this.store$.dispatch(P.a.set((null!=e?e:!this.rightSideViewVisible)?{key:"rightSideViewVisible",value:!0}:{key:"rightSideViewVisible",value:!1}))}},{key:"onSideViewToggleButtonClick",value:function(e){this.doc&&this.store$.dispatch(P.a.toggleSideView())}},{key:"openSideView",value:function(e){this.sideViewMode===e?this.store$.dispatch(P.a.set({key:"sideViewVisible",value:!this.sideViewVisible})):(this.store$.dispatch(P.a.set({key:"sideViewMode",value:e})),this.store$.dispatch(P.a.set({key:"sideViewVisible",value:!0})))}},{key:"onContextMenu",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"isActiveIcon",value:function(e){return this.sideViewMode===e&&this.sideViewVisible?"primary":"dark"}},{key:"onFinishPrint",value:function(){this.immediatePrintConfig&&(this.immediatePrintConfig=null)}},{key:"initSearchResult",value:function(){this.textSearchService.clear(),this.contentService.searchRedactionMark([])}},{key:"bindParams",value:function(){var e=this.activatedRoute.snapshot.params,t=e.streamdocsId,n=e.currentPage,i=e.viewmode,o=e.zoom,r=e.supportTTS,s=e.option,a=Number.parseInt(s,16),c={singlePage:0,singlePageScroll:1,doublePage:2,doublePageScroll:3,eBook:4};""===n||Number.isNaN(Number(n))||(this.currentPageNoParam=Number(n),this.store$.dispatch(P.a.set({key:"currentPageNo",value:Number(n)}))),c.hasOwnProperty(i)&&this.store$.dispatch(P.a.set({key:"viewMode",value:c[i]})),this.zoomParam=o,this.store$.dispatch(P.a.set({key:"supportTTS",value:"true"===r})),this.store$.dispatch(uo.a.set({value:Number.isNaN(a)?0:a})),t&&this.checkPassword(t)}},{key:"checkLastViewedPage",value:function(){var e;if(this.localStorageService.isEnabledLocalStorage&&yt.c.continueFromLastView){var t=JSON.parse(this.localStorageService.get("SD_History"))||{},n=null===(e=t[this._doc.streamdocsId])||void 0===e?void 0:e.lastViewedPage;t[this._doc.streamdocsId]?this.store$.dispatch(P.a.set({key:"currentPageNo",value:n>0?n:1})):Logger.debug("Cannot found history in LocalStorage")}}},{key:"updateLastViewedPage",value:function(e){if(this.localStorageService.isEnabledLocalStorage&&yt.c.continueFromLastView){var t=JSON.parse(this.localStorageService.get("SD_History"))||{};t[this._doc.streamdocsId]?t[this._doc.streamdocsId].lastViewedPage=e>0?e:1:t[this._doc.streamdocsId]={lastViewedPage:e>0?e:1},this.localStorageService.set("SD_History",JSON.stringify(t))}}},{key:"subscribe",value:function(){var e=this;this.subscriptionService.push(Ht.a(window,"mousedown").pipe(T.a((function(){return e.isContextMenuOpened}))).subscribe({next:function(){e.sdContextMenuService.publishContextMenuStatus(!1)}}),this.store$.pipe(Object(P.f)("viewMode")).subscribe({next:function(t){return e.viewMode=t}}),this.store$.pipe(Object(P.f)("pageCount")).subscribe({next:function(t){return e.pageCount=t}}),this.store$.pipe(Object(P.f)("currentPageNo")).subscribe({next:function(t){return e.currentPageNo=t}}),this.store$.pipe(Object(P.f)("supportTTS")).subscribe({next:function(t){return e.supportTTS=t}}),this.store$.pipe(Object(P.f)("dragMode")).subscribe({next:function(t){return e.dragMode=t}}),this.store$.pipe(Object(P.f)("sideViewVisible")).subscribe({next:function(t){e.sideViewVisible=t,e.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(P.f)("rightSideViewVisible")).subscribe({next:function(t){e.rightSideViewVisible=t,e.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(P.f)("sideViewSize")).subscribe({next:function(t){e.sideViewSize=t,e.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(P.f)("rightSideViewSize")).subscribe({next:function(t){e.rightSideViewSize=t,e.changeDetectorRef.markForCheck()}}),this.printService.print$.pipe(T.a((function(e){return null!==e}))).subscribe({next:function(t){e.immediatePrintConfig=t,e.changeDetectorRef.markForCheck()}}),this.dialogService.dialogVisibilityChange$.subscribe({next:function(){if(e.dialogService.dialogVisibility[S.c.PRINT]){if(!e.documentService.checkAuthority(y.j.PRINT_DOCUMENT))return void e.apiEventBridgeService.dialogVisibilityChangedSrc.error("Unauthorized");if(!e.doc)return void e.toastService.create({toastStyle:Wt.c.NOTIFICATION,header:e.translatePipe.transform("PRINT"),content:e.translatePipe.transform("SELECT_FILE")})}e.printDialogView=Boolean(e.dialogService.dialogVisibility[S.c.PRINT]),e.changeDetectorRef.markForCheck(),setTimeout((function(){return e.apiEventBridgeService.dialogVisibilityChangedSrc.next()}))}}),E.F.windowResize$.subscribe({next:function(){e.changeDetectorRef.markForCheck(),E.w.canSideViewBeDisplayed(e.sideViewVisible,e.rightSideViewVisible,e.sideViewSize,e.rightSideViewSize)||(e.sideViewVisible||e.rightSideViewVisible)&&(e.sideViewVisible&&e.store$.dispatch(P.a.set({key:"sideViewVisible",value:!1})),e.rightSideViewVisible&&e.store$.dispatch(P.a.set({key:"rightSideViewVisible",value:!1})))}}),ue.a(E.F.windowResize$,this.store$.pipe(Object(P.f)("sideViewVisible")),this.store$.pipe(Object(P.f)("sideViewSize")),this.store$.pipe(Object(P.f)("rightSideViewVisible")),this.store$.pipe(Object(P.f)("rightSideViewSize"))).subscribe({next:function(){e.changeDetectorRef.detectChanges()}}),this.documentService.pdfInfo$.subscribe({next:function(t){t&&("DAP"===t.DocumentType&&w.f.get(w.d.DAP_VIEW)?E.F.width>2*yt.c.rightSideView.initialSize&&(e.store$.dispatch(P.a.set({key:"rightSideViewMode",value:O.a.DAP})),e.store$.dispatch(P.a.set({key:"rightSideViewVisible",value:!0}))):(e.store$.dispatch(P.a.set({key:"rightSideViewMode",value:O.a.TextSearch})),e.store$.dispatch(P.a.set({key:"rightSideViewVisible",value:!1})))),e.docInfo=t}}),this.contentService.pageNo$.subscribe({next:function(t){return e.updateLastViewedPage(t.pageNo)}}),E.F.fullScreenState$.subscribe({next:function(t){return e.isFullScreen=t}}),this.acroFormService.acroFieldsChange$.pipe(rt.a(300)).subscribe({next:function(){e.acroFormService.updateAcroFieldByPage(e.doc.streamdocsId).subscribe()}}),this.store$.pipe(Object(P.f)("sideViewMode")).subscribe({next:function(t){return e.sideViewMode=t}}),this.store$.pipe(Object(P.f)("rulerActive")).subscribe({next:function(t){e.rulerActive=t,e.changeDetectorRef.markForCheck()}}),this.contentService.reload$.pipe(T.a((function(e){return y.q.type(e,y.g.AcroForm)}))).subscribe({next:function(){e.acroFormService.resetAcroFieldByPage(),e.dataService.getPdfAcroFields(e.doc.streamdocsId).subscribe({next:function(t){var n=t.fields,i=t.props;e.acroFormService.publishAcroFields(n,i),e.acroFormService.updateAcroFieldByPage(e.doc.streamdocsId).subscribe()}})}}),Ht.a(window,"beforeunload").pipe(T.a((function(){return w.f.get(w.d.LEAVE_PAGE)&&Boolean(e.annotService.getActionLog().length)}))).subscribe({next:function(t){t.preventDefault(),t.returnValue=e.translatePipe.transform("BEFOREUNLOAD_MESSAGE")}}),this.sdContextMenuService.contextMenuStatus$.subscribe({next:function(t){return e.isContextMenuOpened=t}})),w.f.get(w.d.FORM_TOOLBAR_RULER)&&this.subscriptionService.push(this.shortcutService.getShortcutEvent(ce.a.RULER_VISIBILITY).subscribe({next:function(){return e.store$.dispatch(P.a.set({key:"rulerActive",value:!e.rulerActive}))}})),w.f.get(w.d.DELAY_LOADING)&&this.subscriptionService.push(this.contentService.pageLoader$.pipe(T.a((function(e){return!e}))).subscribe({next:function(t){e.loading=t,e.changeDetectorRef.markForCheck()}})),this.subscriptionService.push(this.store$.pipe(Object(P.e)([C.a.SIDE_VIEW,C.a.SIDE_VIEW_THUMBNAIL,C.a.SIDE_VIEW_BOOKMARK,C.a.SIDE_VIEW_ANNOTATION,C.a.SIDE_VIEW_REDACTION,C.a.SIDE_VIEW_EMBEDDED_FILE,C.a.SIDE_VIEW_FORM,C.a.SIDE_VIEW_SIGNATURE])).subscribe({next:function(t){var n=t.latestHiddenView,i=t.hiddenViews,o=a(n.split("."),2),r=(o[0],o[1]);Object.assign(e.hidableMenus,i),e.sideViewVisible&&!e.hidableMenus[C.a.SIDE_VIEW]&&e.sideViewMode===r&&(e.hidableMenus[n]&&e.sideViewMode===r&&e.store$.dispatch(P.a.set({key:"sideViewVisible",value:!1})),e.changeDetectorRef.markForCheck())}}))}},{key:"closeDocument",value:function(){this._doc=null,this.store$.dispatch(P.a.set({key:"sideViewVisible",value:!1})),this.store$.dispatch(P.a.set({key:"rightSideViewVisible",value:!1})),this.dialogService.closeAll(),this.contentService.publishFitMode(null),this.changeService.isDocumentChanged=!1,this.changeDetectorRef.detectChanges()}},{key:"updateMainWindowHeight",value:function(){var e=this;setTimeout((function(){return e.changeDetectorRef.markForCheck()}))}},{key:"initializeSetting",value:function(){var e=this,t=this.settingsService.radioConfig;[lo.a.DEFAULT_VIEW_MODE,lo.a.DEFAULT_DRAG_MODE].forEach((function(n){t[n].items.forEach((function(t){if(w.f.get(t.key)){var n=a(t.key.split("."),3),i=(n[0],n[1],n[2]);e.store$.dispatch(P.a.set({key:i,value:t.value}))}}))}));var n=this.preferencesService.savedPreferences,i=et.b.SERVER;w.f.get(w.d.CLIENT_RENDERING)&&(this.muPDFService.initWorker(),E.g.isDefined(null==n?void 0:n.hybridMode)?i=n.hybridMode?et.b.HYBRID:et.b.CLIENT:(i=w.f.get(w.d.CLIENT_RENDERING_HYBRID)?et.b.HYBRID:et.b.CLIENT,this.store$.dispatch(x.a.update({payload:{keys:["hybridMode"],value:i===et.b.HYBRID}})))),this.store$.dispatch(P.a.set({key:"renderingMode",value:i})),[lo.a.DEFAULT_ZOOM,lo.a.RENDERING_OPTION].forEach((function(i){t[i].items.forEach((function(t){var i=a(t.key.split("."),3),o=(i[0],i[1],i[2]);w.f.get(t.key)&&!(null==n?void 0:n.hasOwnProperty(o))&&e.store$.dispatch(x.a.update({payload:{keys:[o],value:t.value}}))}))}))}},{key:"RuntimeEnvKey",get:function(){return w.d}},{key:"MergedRuntimeEnvKey",get:function(){return w.c}},{key:"runtimeEnv",get:function(){return w.f}},{key:"SideViewMode",get:function(){return ro.a}},{key:"DragMode",get:function(){return M.a}},{key:"WindowUtil",get:function(){return E.F}},{key:"contentViewStyle",get:function(){if(!this.rulerActive)return{};var e=Ee.c+"px",t="calc(100% - ".concat(Ee.c,"px)");return{top:e,left:e,width:t,height:t}}},{key:"disableStyle",get:function(){return this.viewerService.disableStyle}},{key:"ToolbarHeightInPixel",get:function(){return 42}},{key:"mainWindowHeight",get:function(){var e,t;return"calc(100%".concat([(null===(e=this.mainToolbarRef)||void 0===e?void 0:e.nativeElement.getBoundingClientRect().height)||0,(E.F.isSmallWidth()?0:null===(t=this.annotToolbarRef)||void 0===t?void 0:t.nativeElement.getBoundingClientRect().height)||0].map((function(e){return" - ".concat(e,"px")})).join(""),")")}},{key:"doc",get:function(){return this._doc}},{key:"isEnabledAnnotation",get:function(){return this.documentService.checkAuthority(y.j.ANNOTATION)}},{key:"isEnabledForm",get:function(){return this.documentService.checkAuthority(y.j.FORM)}},{key:"annotationUse",get:function(){return this._annotationUse},set:function(e){this._annotationUse=e,e&&(this.navtoolbarUse=!1,this.isFormToolActive=!1,this.isSignatureToolActive=!1),this.updateMainWindowHeight()}},{key:"isFormToolActive",get:function(){return this.formToolsActive},set:function(e){this.formToolsActive=e,e&&(this.annotationUse=!1,this.isSignatureToolActive=!1),this.updateMainWindowHeight()}},{key:"isSignatureToolActive",get:function(){return this.signatureToolsActive},set:function(e){this.signatureToolsActive=e,e&&(this.annotationUse=!1,this.isFormToolActive=!1),this.updateMainWindowHeight()}},{key:"navtoolbarUse",set:function(e){e&&(this.annotationUse=!1),E.F.width<=640&&(e?this.toggleRightSideView(!1):this.store$.dispatch(P.a.set({key:"sideViewVisible",value:!1})))}},{key:"HidableView",get:function(){return C.a}},{key:"hidableSideView",get:function(){return!(this.hidableMenus[C.a.SIDE_VIEW]||this.hidableMenus[C.a.SIDE_VIEW_THUMBNAIL]&&this.hidableMenus[C.a.SIDE_VIEW_BOOKMARK]&&this.hidableMenus[C.a.SIDE_VIEW_ANNOTATION]&&this.hidableMenus[C.a.SIDE_VIEW_REDACTION]&&this.hidableMenus[C.a.SIDE_VIEW_EMBEDDED_FILE]&&this.hidableMenus[C.a.SIDE_VIEW_FORM]&&this.hidableMenus[C.a.SIDE_VIEW_SIGNATURE])}}]),e}()).\u0275fac=function(e){return new(e||Ro)(I.Mb(y.a),I.Mb(y.f),I.Mb(y.d),I.Mb(po.a),I.Mb(mt.c),I.Mb(I.h),I.Mb(y.t),I.Mb(Ti.b),I.Mb(Wt.b),I.Mb(y.c),I.Mb(y.k),I.Mb(y.w),I.Mb(ce.c),I.Mb(y.e),I.Mb(g.G),I.Mb(Te.b),I.Mb(N.h),I.Mb(fo.a),I.Mb(S.b),I.Mb(y.p),I.Mb(Pt.a),I.Mb(A.d),I.Mb(go.b),I.Mb(lo.e),I.Mb(x.c),I.Mb(po.c),I.Mb(y.n))},Ro.\u0275cmp=I.Gb({type:Ro,selectors:[["sd-main"]],viewQuery:function(e,t){var n;1&e&&(I.Lc(bo,!0,I.Q),I.Lc(vo,!0,I.Q),I.Lc(mo,!0,I.l),I.Lc(oe,!0,I.l)),2&e&&(I.sc(n=I.ac())&&(t.sdToastOutlet=n.first),I.sc(n=I.ac())&&(t.sdModalOutlet=n.first),I.sc(n=I.ac())&&(t.mainToolbarRef=n.first),I.sc(n=I.ac())&&(t.annotToolbarRef=n.first))},features:[I.yb([g.G])],decls:1,vars:1,consts:[[4,"ngIf"],[3,"doc","contextmenu"],["mainToolbarRef",""],[3,"formToolActive","annotToolActive","signatureToolActive","display","height",4,"ngIf"],[1,"main-window",3,"contextmenu"],["class","side-view",4,"ngIf"],["class","right-side-view",4,"ngIf"],[1,"main-view",3,"ngClass"],[3,"pdfDoc","overWrittenZoom","ngStyle",4,"ngIf"],["class","page",3,"contextmenu",4,"ngIf"],[1,"sd-toast-container"],["sdToastOutlet",""],[1,"sd-modal-container"],["sdModalOutlet",""],[1,"dialogs"],["width","360","height","300",3,"bodyTemplate","footerTemplate","header","headerIcon",4,"ngIf"],[3,"doc","immediatePrintConfig","finish",4,"ngIf"],[3,"pdfDoc"],[3,"formToolActive","annotToolActive","signatureToolActive"],[1,"side-view"],[1,"right-side-view"],[3,"pdfDoc","overWrittenZoom","ngStyle"],[1,"page",3,"contextmenu"],["width","360","height","300",3,"bodyTemplate","footerTemplate","header","headerIcon"],["dialogBody",""],["dialogFooter",""],[1,"password-dialog-label"],["autofocus","true","size","tiny","type","password",3,"ngClass","placeholder","readonly","ngModel","ngModelChange","keydown.enter"],["class","password-dialog-error",4,"ngIf"],[1,"password-dialog-error"],["color","primary","size","small",1,"ep-button",3,"disabled","click"],[3,"doc","immediatePrintConfig","finish"]],template:function(e,t){1&e&&I.Dc(0,Io,21,17,"ng-container",0),2&e&&I.jc("ngIf",!t.loading)},styles:["@media print{[_nghost-%COMP%]   *[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   sd-print-view[_ngcontent-%COMP%]{display:block}}[_nghost-%COMP%]{display:block;width:100%;height:100%}sd-tiny-toolbar[_ngcontent-%COMP%], sd-toolbar[_ngcontent-%COMP%]{z-index:3}.pre-wrap[_ngcontent-%COMP%]{white-space:pre-wrap}.main-window[_ngcontent-%COMP%]{width:100%;-ms-flex-negative:1;flex-shrink:1}.main-view[_ngcontent-%COMP%], .main-window[_ngcontent-%COMP%]{height:100%;overflow:hidden}.main-view[_ngcontent-%COMP%]{display:block;position:relative}sd-content-view[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;display:block}nav[_ngcontent-%COMP%]{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;float:left;-webkit-box-sizing:border-box;box-sizing:border-box;width:56px;height:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding-top:8px;border:1px #d7d7d7;background:#fff;-webkit-box-shadow:1px 0 2px 0 hsla(0,0%,42.4%,.12);box-shadow:1px 0 2px 0 hsla(0,0%,42.4%,.12);z-index:1}nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30px;height:30px;margin:13px}nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-bookmark[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-list[_ngcontent-%COMP%]{font-size:20px}nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-annotation-list[_ngcontent-%COMP%]{font-size:18px}nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-redaction2[_ngcontent-%COMP%]{font-size:20px}nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-clip[_ngcontent-%COMP%]{font-size:19px}nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-formfield[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-sign-list[_ngcontent-%COMP%]{font-size:20px}.side-view[_ngcontent-%COMP%]{display:block;height:100%;position:relative;float:left}aside.side-view-toggle-button[_ngcontent-%COMP%]{color:#363636;display:-webkit-box;display:-ms-flexbox;display:flex;float:left;-webkit-box-sizing:border-box;box-sizing:border-box;width:20px;height:100%;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background-color:#f4f4f4;border:1px solid #dadada;border-left:none;border-top-right-radius:2px;border-bottom-right-radius:2px;font-size:12px;cursor:pointer}aside.side-view-toggle-button.right[_ngcontent-%COMP%]{float:right;border:1px solid #dadada;border-right:none;border-top-left-radius:2px;border-bottom-left-radius:2px}sd-side-view[_ngcontent-%COMP%]{height:100%;position:relative}.side-btn[_ngcontent-%COMP%]{z-index:1;left:0}.dap-btn[_ngcontent-%COMP%], .side-btn[_ngcontent-%COMP%]{position:absolute;bottom:50%;cursor:pointer}.dap-btn[_ngcontent-%COMP%]{z-index:1000;right:0}.right-side-view[_ngcontent-%COMP%]{display:block;height:100%;position:relative;float:right}pu-toast[_ngcontent-%COMP%]{position:absolute;top:0;z-index:5}pu-toast.small-screen[_ngcontent-%COMP%]{top:68px;right:16px;display:none}.sd-toast-container[_ngcontent-%COMP%]{position:absolute;top:40px;right:50px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;pointer-events:none}sd-toast[_ngcontent-%COMP%]{position:fixed;top:102px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}span.page[_ngcontent-%COMP%]{position:absolute;bottom:20px;right:40px;font-size:12px;color:#82959e}p#modal-title[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0}p#modal-title[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{font-size:20px;margin-right:5px}p#modal-title[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:14px;font-weight:700}[_nghost-%COMP%]     .ui-progressbar .ui-progressbar-value-animate{-webkit-transition:initial;transition:initial}button.modal-button[_ngcontent-%COMP%]{height:30px;margin-bottom:0;font-size:12px}.dialog-body[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Regular,sans-serif;color:#6c6c6c;margin-bottom:32px}.dialog-body[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{display:inherit;font-family:inherit;margin:0}pu-progress-bar[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:32px}.password-dialog-label[_ngcontent-%COMP%]{color:#6c6c6c;margin-top:10px}.password-dialog-error[_ngcontent-%COMP%], .password-dialog-label[_ngcontent-%COMP%]{font-size:12px;line-height:20px;font-family:NotoSans-Medium,sans-serif}.password-dialog-error[_ngcontent-%COMP%]{color:#e4002b}pu-input[_ngcontent-%COMP%]{width:100%;margin-top:2px}pu-input.error[_ngcontent-%COMP%]  input{border-color:#e4002b}sd-dialog[_ngcontent-%COMP%]{z-index:4}@media screen and (max-width:548px){aside.side-view-toggle-button[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]{display:none}.right-side-view[_ngcontent-%COMP%], .side-view[_ngcontent-%COMP%]{position:absolute;width:100%;z-index:1}.sd-toast-container[_ngcontent-%COMP%]{top:32px;right:16px}}"],data:{animation:[Object(b.m)("sideViewAnimation",[Object(b.l)("void => true",[Object(b.k)({transform:"translateY(calc(100% - 100px))"}),Object(b.e)("400ms cubic-bezier(0.86, 0, 0.07, 1)",Object(b.k)({transform:"translateY(0)"}))]),Object(b.l)("true => void",[Object(b.k)({zIndex:1,position:"absolute"}),Object(b.e)("400ms cubic-bezier(0.86, 0, 0.07, 1)",Object(b.k)({transform:"translateY(calc(100% - 53px))"}))])])]},changeDetection:0}),Ro),Ao=["mainMenu"],Do=["sideViewMenuRef"],Lo=["iconMenuRef"],Fo=["dragToolMenuRef"],jo=["toolbarMenuRef"],zo=["rightSectionMenu"];function Vo(e,t){if(1&e&&I.Nb(0,"pu-menu",11,12),2&e){var n=I.dc(3);I.jc("menus",n.mainMenus)("ngStyle",n.mainMenuStyle)}}function Bo(e,t){if(1&e){var n=I.Tb();I.Sb(0,"button",13),I.Zb("click",(function(){return I.uc(n),I.dc(3).onMenuImageClick()}))("mousedown",(function(e){return I.uc(n),I.dc(3).stopPropagation(e)}))("touchstart",(function(e){return I.uc(n),I.dc(3).stopPropagation(e)})),I.ec(1,"translate"),I.Nb(2,"i",14),I.Rb()}2&e&&I.jc("title",I.fc(1,1,"MENU"))}function Wo(e,t){if(1&e&&I.Nb(0,"pu-menu",19,20),2&e){var n=I.dc(4);I.jc("menus",n.sideViewMenus)}}function $o(e,t){if(1&e){var n=I.Tb();I.Sb(0,"div",15),I.Sb(1,"button",16),I.Zb("click",(function(){return I.uc(n),I.dc(3).onSideViewMenuClick()}))("mousedown",(function(e){return I.uc(n),I.dc(3).stopPropagation(e)}))("touchstart",(function(e){return I.uc(n),I.dc(3).stopPropagation(e)})),I.Nb(2,"i",17),I.Rb(),I.Dc(3,Wo,2,1,"pu-menu",18),I.Rb()}if(2&e){var i=I.dc(3);I.zb(1),I.Ab("color",i.sideViewVisible?"primary":"dark"),I.zb(2),I.jc("ngIf",i.sideViewMenus.length>0)}}function Uo(e,t){1&e&&I.Nb(0,"div",7)}function Go(e,t){if(1&e){var n=I.Tb();I.Sb(0,"button",24),I.Zb("click",(function(e){I.uc(n);var i=t.$implicit;return I.dc(4).onClickCustomUI(i,e)})),I.Nb(1,"i",25),I.Rb()}if(2&e){var i=t.$implicit;I.jc("title",i.label),I.zb(1),I.jc("ngClass",i.icon)}}function Ho(e,t){if(1&e){var n=I.Tb();I.Sb(0,"button",30),I.Zb("click",(function(){return I.uc(n),I.dc(5).saveDoc()})),I.ec(1,"translate"),I.Nb(2,"i",31),I.Rb()}if(2&e){var i=I.dc(5);I.jc("disabled",!i.doc)("title",I.fc(1,2,"SAVE"))}}function qo(e,t){if(1&e){var n=I.Tb();I.Sb(0,"button",32),I.Zb("click",(function(){return I.uc(n),I.dc(5).printDoc()})),I.ec(1,"translate"),I.Nb(2,"i",33),I.Rb()}if(2&e){var i=I.dc(5);I.jc("disabled",!i.doc)("title",I.fc(1,2,"PRINT"))}}function Zo(e,t){if(1&e){var n=I.Tb();I.Sb(0,"button",34),I.Zb("click",(function(){return I.uc(n),I.dc(5).downloadDoc()})),I.ec(1,"translate"),I.Nb(2,"i",35),I.Rb()}if(2&e){var i=I.dc(5);I.jc("disabled",!i.doc)("title",I.fc(1,2,"DOWNLOAD"))}}function Xo(e,t){if(1&e&&(I.Sb(0,"div",26),I.Dc(1,Ho,3,4,"button",27),I.Dc(2,qo,3,4,"button",28),I.Dc(3,Zo,3,4,"button",29),I.Rb()),2&e){var n=I.dc(4);I.zb(1),I.jc("ngIf",n.runtimeEnv.get(n.RuntimeEnvKey.MAIN_TOOLBAR_SAVE)&&n.hasSavePermission&&!n.isEbookMode()&&!n.hidableMenus[n.HidableView.TOOLBAR_SAVE]),I.zb(1),I.jc("ngIf",(n.runtimeEnv.get(n.RuntimeEnvKey.PRINT_BROWSER)||n.runtimeEnv.get(n.RuntimeEnvKey.PRINT_PLUGIN))&&n.hasPrintPermission&&!n.hidableMenus[n.HidableView.TOOLBAR_PRINT]),I.zb(1),I.jc("ngIf",n.runtimeEnv.get(n.RuntimeEnvKey.MAIN_MENU_DOWNLOAD)&&n.hasDownloadPermission&&!n.isVu&&!n.hidableMenus[n.HidableView.TOOLBAR_DOWNLOAD])}}function Yo(e,t){if(1&e){var n=I.Tb();I.Sb(0,"button",24),I.Zb("click",(function(e){I.uc(n);var i=t.$implicit;return I.dc(4).onClickCustomUI(i,e)})),I.Nb(1,"i",25),I.Rb()}if(2&e){var i=t.$implicit;I.jc("title",i.label),I.zb(1),I.jc("ngClass",i.icon)}}function Ko(e,t){if(1&e&&(I.Sb(0,"section",21),I.Dc(1,Go,2,2,"button",22),I.Dc(2,Xo,4,3,"div",23),I.Dc(3,Yo,2,2,"button",22),I.Rb()),2&e){var n=I.dc(3);I.zb(1),I.jc("ngForOf",n.leftSectionFirstCustomUI),I.zb(1),I.jc("ngIf",!n.runtimeEnv.get(n.RuntimeEnvKey.FILE_MENUS_UI)),I.zb(1),I.jc("ngForOf",n.leftSectionLastCustomUI)}}function Qo(e,t){if(1&e&&(I.Sb(0,"section",4),I.Dc(1,Vo,2,2,"pu-menu",5),I.Dc(2,Bo,3,3,"button",6),I.Nb(3,"div",7),I.Dc(4,$o,4,2,"div",8),I.Dc(5,Uo,1,0,"div",9),I.Dc(6,Ko,4,3,"section",10),I.Rb()),2&e){var n=I.dc(2);I.zb(1),I.jc("ngIf",n.mainMenus.length>0),I.zb(1),I.jc("ngIf",n.mainMenus.length>0&&n.hidableLeftMenus),I.zb(2),I.jc("ngIf",n.isVisibleSideViewButton()),I.zb(1),I.jc("ngIf",!n.runtimeEnv.get(n.RuntimeEnvKey.FILE_MENUS_UI)),I.zb(1),I.jc("ngIf",!n.runtimeEnv.get(n.RuntimeEnvKey.FILE_MENUS_UI)&&!n.leftSectionFirstCustomUI.length)}}function Jo(e,t){if(1&e&&(I.Qb(0),I.Nb(1,"pu-dropdown",42),I.Pb()),2&e){var n=I.dc(3);I.zb(1),I.jc("disabled",!n.doc)("options",n.scaleDropdownOptions)("executableOptions",n.scaleDropdownExecutableOptions)("boxWidth",120)("optionHeight",36)("formControl",n.scaleDropdownFormControl)}}function er(e,t){if(1&e){var n=I.Tb();I.Sb(0,"button",44),I.Zb("click",(function(){I.uc(n);var e=I.dc(4);return e.activeFitMode?e.fitToWidth():e.fitToHeight()})),I.ec(1,"translate"),I.Nb(2,"i",45),I.Rb()}if(2&e){var i=I.dc(4);I.jc("ngClass",i.activeFitMode?"fit-width2":"fit-height2")("disabled",!i.doc)("title",I.fc(1,4,i.activeFitMode?"FIT_TO_WIDTH_2":"FIT_TO_HEIGHT_2")),I.zb(2),I.jc("ngClass",i.activeFitMode?"papycon-fit-width2":"papycon-fit-height2")}}function tr(e,t){if(1&e&&(I.Qb(0),I.Dc(1,er,3,6,"button",43),I.Pb()),2&e){var n=I.dc(3);I.zb(1),I.jc("ngIf",n.fitMenuVisible)}}function nr(e,t){if(1&e){var n=I.Tb();I.Sb(0,"button",46),I.Zb("click",(function(){return I.uc(n),I.dc(3).onMoreMenuButtonClick()}))("mousedown",(function(e){return I.uc(n),I.dc(3).stopPropagation(e)}))("touchstart",(function(e){return I.uc(n),I.dc(3).stopPropagation(e)})),I.Nb(1,"i",25),I.Nb(2,"i",47),I.Rb()}if(2&e){var i=I.dc(3);I.jc("title",null==i.activeMoreMenu?null:i.activeMoreMenu.label),I.zb(1),I.jc("ngClass",null==i.activeMoreMenu?null:i.activeMoreMenu.icon)}}function ir(e,t){if(1&e){var n=I.Tb();I.Sb(0,"button",51),I.Zb("click",(function(){return I.uc(n),I.dc(4).onDragToolMenuExpandClick()}))("mousedown",(function(e){return I.uc(n),I.dc(4).stopPropagation(e)}))("touchstart",(function(e){return I.uc(n),I.dc(4).stopPropagation(e)})),I.Nb(1,"i",45),I.Nb(2,"i",47),I.Rb()}if(2&e){var i=I.dc(4);I.zb(1),I.jc("ngClass","papycon-"+i.getSelectedDragMode().icon)}}function or(e,t){if(1&e&&I.Nb(0,"pu-icon-menu",52,53),2&e){var n=I.dc(4);I.jc("iconMenus",n.dragToolMenus)}}function rr(e,t){if(1&e&&(I.Sb(0,"div",48),I.Dc(1,ir,3,1,"button",49),I.Dc(2,or,2,1,"pu-icon-menu",50),I.Rb()),2&e){var n=I.dc(3);I.zb(1),I.jc("ngIf",n.dragToolMenus.length>0),I.zb(1),I.jc("ngIf",n.dragToolMenus.length>0)}}function sr(e,t){if(1&e&&(I.Sb(0,"section",36),I.Dc(1,Jo,2,6,"ng-container",0),I.Dc(2,tr,2,1,"ng-container",0),I.Sb(3,"div",37),I.Dc(4,nr,3,2,"button",38),I.Nb(5,"pu-icon-menu",39,40),I.Rb(),I.Dc(7,rr,3,2,"div",41),I.Rb()),2&e){var n=I.dc(2);I.zb(1),I.jc("ngIf",n.runtimeEnv.get(n.RuntimeEnvKey.MAIN_TOOLBAR_SCALE)),I.zb(1),I.jc("ngIf",n.runtimeEnv.get(n.RuntimeEnvKey.MAIN_TOOLBAR_FIT)),I.zb(2),I.jc("ngIf",n.runtimeEnv.get(n.MergedRuntimeEnvKey.MORE_MENU)&&0<n.iconMenus.length&&!n.isEbookMode()),I.zb(1),I.jc("iconMenus",n.iconMenus),I.zb(2),I.jc("ngIf",!n.isEbookMode()&&n.runtimeEnv.get(n.MergedRuntimeEnvKey.DRAG_MODE)&&n.hidableDragMode&&n.getSelectedDragMode())}}function ar(e,t){if(1&e){var n=I.Tb();I.Sb(0,"button",61),I.Zb("click",(function(){return I.uc(n),I.dc(4).onToolbarMenuClick()}))("mousedown",(function(e){return I.uc(n),I.dc(4).stopPropagation(e)}))("touchstart",(function(e){return I.uc(n),I.dc(4).stopPropagation(e)})),I.ec(1,"translate"),I.Nb(2,"i",45),I.Rb()}if(2&e){var i=I.dc(4);I.Eb("active",i.isToolbarActive()),I.jc("title",I.fc(1,4,i.activeToolbarMenu.name)),I.zb(2),I.jc("ngClass",i.activeToolbarMenu.icon)}}function cr(e,t){if(1&e){var n=I.Tb();I.Sb(0,"button",62),I.Zb("click",(function(){return I.uc(n),I.dc(4).onToolbarExpandClick()}))("mousedown",(function(e){return I.uc(n),I.dc(4).stopPropagation(e)}))("touchstart",(function(e){return I.uc(n),I.dc(4).stopPropagation(e)})),I.Nb(1,"i",63),I.Rb()}}function lr(e,t){if(1&e&&I.Nb(0,"pu-menu",64,65),2&e){var n=I.dc(4);I.jc("menus",n.toolbarMenus)}}function ur(e,t){if(1&e&&(I.Sb(0,"div",57),I.Dc(1,ar,3,6,"button",58),I.Dc(2,cr,2,0,"button",59),I.Dc(3,lr,2,1,"pu-menu",60),I.Rb()),2&e){var n=I.dc(3);I.zb(1),I.jc("ngIf",n.activeToolbarMenu),I.zb(1),I.jc("ngIf",n.canToolbarExpand),I.zb(1),I.jc("ngIf",n.toolbarMenus.length>0)}}function dr(e,t){if(1&e){var n=I.Tb();I.Sb(0,"button",66),I.Zb("click",(function(e){I.uc(n);var t=I.dc(3);return t.dapMenuItem.command(e,t.dapMenuItem)}))("mousedown",(function(e){return I.uc(n),I.dc(3).stopPropagation(e)}))("touchstart",(function(e){return I.uc(n),I.dc(3).stopPropagation(e)})),I.Nb(1,"i",67),I.Rb()}if(2&e){var i=I.dc(3);I.Ab("color",i.rightSideViewVisible&&i.rightSideViewMode===i.RightSideViewMode.DAP?"primary":"dark")}}function hr(e,t){if(1&e&&(I.Sb(0,"section",54),I.Dc(1,ur,4,3,"div",55),I.Dc(2,dr,2,1,"button",56),I.Rb()),2&e){var n=I.dc(2);I.zb(1),I.jc("ngIf",n.canShowAnnotToolbar||n.canShowFormToolbar||n.canShowSignatureToolbar),I.zb(1),I.jc("ngIf",n.isDAP()&&n.runtimeEnv.get(n.RuntimeEnvKey.DAP_VIEW)&&n.windowResponsiveBasis.width<=n.windowWidth)}}function pr(e,t){if(1&e&&(I.Qb(0),I.Dc(1,Qo,7,5,"section",1),I.Dc(2,sr,8,5,"section",2),I.Dc(3,hr,3,2,"section",3),I.Pb()),2&e){var n=I.dc();I.zb(1),I.jc("ngIf",!n.hidableMenus[n.HidableView.TOOLBAR_LEFT]),I.zb(1),I.jc("ngIf",!n.hidableMenus[n.HidableView.TOOLBAR_CENTER]),I.zb(1),I.jc("ngIf",!n.hidableMenus[n.HidableView.TOOLBAR_RIGHT])}}function fr(e,t){if(1&e&&(I.Qb(0),I.Sb(1,"button",74),I.Zb("click",(function(){return t.$implicit.command()})),I.Nb(2,"i"),I.Rb(),I.Pb()),2&e){var n=t.$implicit,i=I.dc(3);I.zb(1),I.jc("title",n.label)("disabled",!i.doc),I.Ab("color",i.isActiveSideView(n.data)?"primary":"dark"),I.zb(1),I.Bb(n.icon)}}function gr(e,t){if(1&e&&(I.Qb(0),I.Dc(1,fr,3,5,"ng-container",73),I.Pb()),2&e){var n=t.$implicit;I.zb(1),I.jc("ngForOf",n.items)}}function br(e,t){if(1&e){var n=I.Tb();I.Qb(0),I.Sb(1,"section",68),I.Sb(2,"section",69),I.Sb(3,"button",70),I.Zb("click",(function(){return I.uc(n),I.dc().closeSideViewToolbar()})),I.ec(4,"translate"),I.Nb(5,"i",71),I.Rb(),I.Nb(6,"div",7),I.Rb(),I.Sb(7,"section",72),I.Dc(8,gr,2,1,"ng-container",73),I.Rb(),I.Rb(),I.Pb()}if(2&e){var i=I.dc();I.zb(3),I.jc("title",I.fc(4,2,"CLOSE")),I.zb(5),I.jc("ngForOf",i.sideViewMenus)}}var vr,mr,yr,Sr=((mr=function(){function e(t,n,i,o,r,s,a,c,l,u,h,p,b,v,m,y,S,M,x,P,C,w,k){var _=this;d(this,e),this.contentService=n,this.annotService=i,this.dialogService=o,this.changeDetectorRef=r,this.menuService=s,this.documentService=a,this.downloadService=c,this.toastService=l,this.shortcutService=u,this.viewerService=h,this.subscriptionService=p,this.actionHistoryService=b,this.annotSelectedService=v,this.store$=m,this.translatePipe=y,this.acroFormService=S,this.productService=M,this.changeService=x,this.customUIService=P,this.selectTextService=C,this.scrollController=w,this.toolbarService=k,this.RESPONSIVE_SIZE=811,this.canUndo=!1,this.canRedo=!1,this.activeItem=[],this.sideViewVisible=!1,this.moreMenuIconArrayMap=[{label:this.translatePipe.transform("SINGLE_PAGE_VIEW"),icon:"papycon papycon-"+g.p.LIST2},{label:this.translatePipe.transform("SINGLE_PAGE_CONTINUOUS"),icon:"papycon papycon-"+g.p.ONE_PAGE_CONTINUOUS3},{label:this.translatePipe.transform("TWO_PAGE_VIEW"),icon:"papycon papycon-"+g.p.TWO_PAGE3},{label:this.translatePipe.transform("TWO_PAGE_CONTINUOUS"),icon:"papycon papycon-"+g.p.TWO_PAGE_CONTINUOUS3}],this.mainMenus=[],this.sideViewMenus=[],this.iconMenus=[],this.dragToolMenus=[],this.toolbarMenus=[],this.isOpenedSideView=!1,this.hasSignedSignature=!1,this.pageNoFormControl=new f.h(1),this.scaleDropdownFormControl=new f.h,this.mainMenuStyle={left:"0",top:"100%"},this.rightSectionMenus=[{items:[]}],this.isFullScreen=E.g.isFullscreenMode(),this.annotToolMenuItem={label:this.translatePipe.transform("TOOLBAR_ANNOT"),command:function(e,t){_.lastClickedRightSectionMenuItem=t,_.selectedMenuItem=t,_.toggleAnnotToolbar(),_.activeRightSectionMenu(_.parent.annotationUse,t),_.changeDetectorRef.markForCheck()},icon:"papycon papycon-edit"},this.formToolMenuItem={label:this.translatePipe.transform("TOOLBAR_FORM"),command:function(e,t){_.lastClickedRightSectionMenuItem=t,_.selectedMenuItem=t,_.toggleFormToolbar(),_.activeRightSectionMenu(_.parent.isFormToolActive,t),_.changeDetectorRef.markForCheck()},icon:"papycon papycon-formtools"},this.searchMenuItem={label:this.translatePipe.transform("SEARCH"),command:function(e,t){_.lastClickedRightSectionMenuItem=t,_.selectedMenuItem=t,_.toggleSearchTool(),_.activeRightSectionMenu(_.searchToolActive,t),_.changeDetectorRef.markForCheck()},icon:"papycon papycon-search"},this.fullscreenMenuItem={label:this.translatePipe.transform("SLIDESHOW"),command:function(e,t){_.toggleFullScreen(),_.changeDetectorRef.markForCheck()}},this.dapMenuItem={label:this.translatePipe.transform("DAP_DOCUMENT"),command:function(e,t){_.lastClickedRightSectionMenuItem=t,_.selectedMenuItem=t,_.toggleDapView(),_.activeRightSectionMenu(_.rightSideViewVisible&&_.rightSideViewMode===O.a.DAP,t),_.changeDetectorRef.markForCheck()},icon:"papycon papycon-composite-document"},this.hidableMenus={},this.leftSectionFirstCustomUI=[],this.leftSectionLastCustomUI=[],this.parent=t}return p(e,[{key:"ngOnInit",value:function(){var e=this;this.subscriptionService.push(this.store$.pipe(Object(P.f)("pageCount")).subscribe({next:function(t){e.pageCount=t,e.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(P.f)("currentPageNo")).subscribe({next:function(t){e.currentPageNo=t,e.pageNoFormControl.setValue(e.currentPageNo)}}),this.store$.pipe(Object(P.f)("rightSideViewMode")).subscribe({next:function(t){e.rightSideViewMode=t,e.activeRightSectionMenu(e.isActiveTotalSearch(),e.searchMenuItem),e.activeRightSectionMenu(e.isActiveDapPanel(),e.dapMenuItem),e.changeDetectorRef.detectChanges()}}),this.store$.pipe(Object(P.f)("rightSideViewVisible")).subscribe({next:function(t){e.rightSideViewVisible=t,e.activeRightSectionMenu(e.searchToolActive||e.isActiveTotalSearch(),e.searchMenuItem),e.activeRightSectionMenu(e.isActiveDapPanel(),e.dapMenuItem),e.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(P.f)("scaleRatio")).subscribe({next:function(t){return e.scaleRatio=t}}),this.store$.pipe(Object(P.f)("degree")).subscribe({next:function(t){e.degree=t,w.f.get(w.d.MORE_MENU_VIEW_MODE)||(e.activeMoreMenu={label:e.translatePipe.transform("ROTATE_CW"),icon:"papycon papycon-rotate"})}}),this.store$.pipe(Object(P.f)("scale")).subscribe({next:function(t){e.scale=t,e.changeDetectorRef.detectChanges()}}),this.store$.pipe(Object(P.f)("dragMode")).subscribe({next:function(t){t!==M.a.SELECT_ANNOT&&(e.dragMode=t,e.changeDetectorRef.markForCheck())}}),this.store$.pipe(Object(P.f)("viewMode")).subscribe({next:function(t){e.viewMode=t,w.f.get(w.d.MORE_MENU_VIEW_MODE)&&(e.activeMoreMenu=e.moreMenuIconArrayMap[t]),e.initRightSectionMenu(),e.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(P.f)("searchToolActive")).subscribe({next:function(t){e.searchToolActive=t,e.activeRightSectionMenu(e.searchToolActive,e.searchMenuItem),e.changeDetectorRef.markForCheck()}}),E.F.windowResize$.subscribe({next:function(){return e.resize()}}),this.contentService.disableContinuousViewMode$.pipe(rt.a(1),T.a((function(e){return e}))).subscribe({next:function(t){e.changeViewMode(0),e.buildMenu(),e.changeDetectorRef.markForCheck(),e.toastService.create({toastStyle:Wt.c.NOTIFICATION,header:e.translatePipe.transform("INFO"),content:e.translatePipe.transform("MS_BROWSER_CANNOT_USE_CONTINUOUS_VIEW")})}}),this.documentService.authorityUpdate$.subscribe({next:function(){e.initRightSectionMenu(),e.initActiveToolBarName(),e.render(!0)}}),this.documentService.pdfInfo$.subscribe({next:function(t){return e.docInfo=t}}),this.store$.pipe(Object(P.f)("rightSideViewVisible")).pipe(T.a(E.g.isDefined)).subscribe({next:function(){return e.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(P.f)("sideViewVisible")).subscribe({next:function(t){e.sideViewVisible=t,E.t.runAsync((function(){return e.changeDetectorRef.markForCheck()}))}}),this.store$.pipe(Object(P.f)("sideViewMode")).subscribe({next:function(t){e.sideViewMode=t}}),E.F.fullScreenState$.subscribe({next:function(t){e.isFullScreen=t,e.changeDetectorRef.markForCheck()}}),this.scaleDropdownFormControl.valueChanges.pipe(qt.a(0)).subscribe({next:function(t){var n=t.value,i="string"==typeof n?Number.parseFloat(n):n;e.setZoom(Number.isNaN(i)?e.scale:i)}}),this.acroFormService.hasSignedSignature.subscribe({next:function(t){e.hasSignedSignature=t,e.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(P.e)([C.a.TOOLBAR,C.a.TOOLBAR_LEFT,C.a.TOOLBAR_CENTER,C.a.TOOLBAR_RIGHT])).subscribe({next:function(t){var n=t.hiddenViews;Object.assign(e.hidableMenus,n),e.parent.annotationUse=!1,e.parent.isFormToolActive=!1,e.parent.isSignatureToolActive=!1,e.activeItem=[],e.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(P.e)([C.a.TOOLBAR_EBOOK,C.a.TOOLBAR_PREFERENCES,C.a.TOOLBAR_DOCUMENT_INFO,C.a.TOOLBAR_SAVE,C.a.TOOLBAR_PRINT,C.a.TOOLBAR_DOWNLOAD,C.a.TOOLBAR_SLIDESHOW,C.a.TOOLBAR_VIEW_MODE,C.a.TOOLBAR_ROTATE,C.a.TOOLBAR_ZOOM,C.a.TOOLBAR_DRAG_MODE_SELECT_TEXT,C.a.TOOLBAR_DRAG_MODE_MOVE,C.a.TOOLBAR_ANNOTATION,C.a.TOOLBAR_FORM,C.a.TOOLBAR_RIGHT_MENU,C.a.TOOLBAR_SEARCH,C.a.TOOLBAR_FULL_SCREEN])).subscribe({next:function(t){var n,i=t.hiddenViews;Object.assign(e.hidableMenus,i),e.buildMenu(),e.hidableMenus[C.a.TOOLBAR_VIEW_MODE]&&e.hidableMenus[C.a.TOOLBAR_ROTATE]&&e.hidableMenus[C.a.TOOLBAR_ZOOM]&&(null===(n=e.iconMenuRef)||void 0===n||n.closeMenu()),e.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(P.e)([C.a.TOOLBAR_ANNOTATION,C.a.TOOLBAR_FORM,C.a.TOOLBAR_RIGHT_MENU,C.a.TOOLBAR_SEARCH,C.a.TOOLBAR_FULL_SCREEN])).subscribe({next:function(t){var n=t.hiddenViews;Object.assign(e.hidableMenus,n),e.initRightSectionMenu(),e.hidableMenus[C.a.TOOLBAR_ANNOTATION]&&e.parent.annotationUse&&(e.parent.annotationUse=!1,e.activeItem=[]),e.hidableMenus[C.a.TOOLBAR_FORM]&&e.parent.isFormToolActive&&(e.parent.isFormToolActive=!1,e.activeItem=[]),e.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(P.e)([C.a.SIDE_VIEW,C.a.SIDE_VIEW_THUMBNAIL,C.a.SIDE_VIEW_BOOKMARK,C.a.SIDE_VIEW_ANNOTATION,C.a.SIDE_VIEW_REDACTION,C.a.SIDE_VIEW_EMBEDDED_FILE,C.a.SIDE_VIEW_FORM,C.a.SIDE_VIEW_SIGNATURE])).subscribe({next:function(t){var n=t.latestHiddenView,i=t.hiddenViews,o=a(n.split("."),2),r=(o[0],o[1]);Object.assign(e.hidableMenus,i),e.sideViewVisible&&!e.hidableMenus[C.a.SIDE_VIEW]&&e.sideViewMode===r&&(e.hidableMenus[n]&&e.sideViewMode===r&&e.store$.dispatch(P.a.set({key:"sideViewVisible",value:!1})),e.changeDetectorRef.markForCheck())}}),this.documentService.openedDocument$.subscribe({next:function(t){t?e.enableFormControl():(e.parent.isFormToolActive=!1,e.activeItem=[],e.disableFormControl())}}),this.toolbarService.toggleAnnotToolbar$.subscribe({next:function(){e.parent.annotationUse=!1,e.changeDetectorRef.markForCheck()}}),this.toolbarService.toggleFormToolbar$.subscribe({next:function(){e.parent.isFormToolActive=!1,e.changeDetectorRef.markForCheck()}}),this.customUIService.customButtonUI$.subscribe({next:function(t){e.leftSectionFirstCustomUI=t.filter((function(e){return"TOOLBAR.LEFT_SECTION.FIRST"===e.position})),e.leftSectionLastCustomUI=t.filter((function(e){return"TOOLBAR.LEFT_SECTION.LAST"===e.position})),e.render(!0)}})),this.render(!1),this.subscribeZoomScroll(),this.subscribeZoomHotkey(),this.subscribePageNo(),this.subscribeAnnotTool(),this.subscribeUndoRedo(),this.subscribePrint(),this.pageNoFormControl.reset(this.currentPageNo)}},{key:"ngOnChanges",value:function(){this.initRightSectionMenu(),this.render(!0),this.initActiveMenu()}},{key:"stopPropagation",value:function(e){e.stopImmediatePropagation(),e.stopPropagation()}},{key:"isEbookMode",value:function(){return 4===this.viewMode}},{key:"isDAP",value:function(){var e;return"DAP"===(null===(e=this.docInfo)||void 0===e?void 0:e.DocumentType)}},{key:"onMenuImageClick",value:function(){var e;null===(e=this.mainMenu)||void 0===e||e.toggleMenu()}},{key:"onSideViewMenuClick",value:function(){var e,t;null===(e=this.mainMenu)||void 0===e||e.closeMenu(),this.windowWidth<this.windowResponsiveBasis.width?this.openSideViewToolbar():null===(t=this.sideViewMenuRef)||void 0===t||t.toggleMenu()}},{key:"onMoreMenuButtonClick",value:function(){this.iconMenuRef&&this.iconMenuRef.toggleMenu()}},{key:"onDragToolMenuExpandClick",value:function(){var e;null===(e=this.dragToolMenuRef)||void 0===e||e.toggleMenu()}},{key:"onToolbarMenuClick",value:function(){var e,t,n,i,o;switch(null===(e=this.mainMenu)||void 0===e||e.closeMenu(),null===(t=this.iconMenuRef)||void 0===t||t.closeMenu(),null===(n=this.dragToolMenuRef)||void 0===n||n.closeMenu(),null===(i=this.sideViewMenuRef)||void 0===i||i.closeMenu(),null===(o=this.toolbarMenuRef)||void 0===o||o.closeMenu(),this.activeToolbarMenu.name){case"TOOLBAR_ANNOT":this.toggleAnnotToolbar();break;case"TOOLBAR_FORM":this.toggleFormToolbar();break;case"TOOLBAR_SIGNATURE":this.toggleSignatureToolbar()}}},{key:"onToolbarExpandClick",value:function(){var e;null===(e=this.toolbarMenuRef)||void 0===e||e.toggleMenu()}},{key:"onSideViewMenuSelect",value:function(e){this.sideViewMode===e?this.store$.dispatch(P.a.set({key:"sideViewVisible",value:!this.sideViewVisible})):(this.store$.dispatch(P.a.set({key:"sideViewMode",value:e})),this.store$.dispatch(P.a.set({key:"sideViewVisible",value:!0})))}},{key:"toggleAnnotToolbar",value:function(){this.parent.annotationUse=!this.parent.annotationUse,this.activeToolbarMenu.name="TOOLBAR_ANNOT",this.activeToolbarMenu.icon="papycon-edit"}},{key:"toggleFormToolbar",value:function(){this.parent.isFormToolActive=!this.parent.isFormToolActive,this.activeToolbarMenu.name="TOOLBAR_FORM",this.activeToolbarMenu.icon="papycon-formtools"}},{key:"toggleSignatureToolbar",value:function(){this.parent.isSignatureToolActive=!this.parent.isSignatureToolActive,this.activeToolbarMenu.name="TOOLBAR_SIGNATURE",this.activeToolbarMenu.icon="papycon-sign"}},{key:"zoom",value:function(e){this.setZoom(this.scale+e)}},{key:"setZoom",value:function(e){"number"==typeof e&&isFinite(e)&&!isNaN(e)&&this.publishScale(e)}},{key:"fitToWidth",value:function(){this.contentService.publishFitMode(0),this.activeFitMode=0,this.changeDetectorRef.markForCheck()}},{key:"fitToHeight",value:function(){this.contentService.publishFitMode(1),this.activeFitMode=1,this.changeDetectorRef.markForCheck()}},{key:"toggleFullScreen",value:function(){this.isFullScreen?E.F.exitFullScreen():E.F.enterFullScreen()}},{key:"isFullscreenSupport",value:function(){return Boolean(E.g.getFullscreenMethod(Element.prototype))}},{key:"toggleSearchTool",value:function(){this.documentService.checkAuthority(y.j.SEARCH_TEXT)&&!this.simpleSearchDisabled&&this.store$.dispatch(P.a.set(this.rightSideViewVisible&&this.rightSideViewMode===O.a.TextSearch?{key:"rightSideViewVisible",value:!1}:{key:"searchToolActive",value:!this.searchToolActive}))}},{key:"rotate",value:function(e){this.store$.dispatch(P.a.set({key:"degree",value:E.u.normalizeDegree(this.degree+e)}))}},{key:"saveDoc",value:function(e,t){this.changeService.saveDocument(void 0,e,t)}},{key:"downloadDoc",value:function(){this.downloadService.downloadDocument()}},{key:"downloadOriginalDoc",value:function(){this.downloadService.downloadOriginalDocument()}},{key:"printDoc",value:function(){this.dialogService.toggleDialogVisibility(S.c.PRINT,!0)}},{key:"changeViewMode",value:function(e){var t=this;if(4===e)return this.doc?void setTimeout((function(){return window.open("view/sd/ebook/"+t.doc.streamdocsId)})):void alert(this.translatePipe.transform("SELECT_FILE"));this.viewMode!==e&&this.store$.dispatch(P.a.set({key:"viewMode",value:e}))}},{key:"toggleEbookMode",value:function(){this.viewerService.toggleEbookMode()}},{key:"dragModeClicked",value:function(e){e&&(this.store$.dispatch(P.a.set({key:"dragMode",value:e})),this.store$.dispatch(v.a.unselectTool()),this.selectTextService.publishSelectedText(null),this.annotService.closeEditor())}},{key:"getSelectedDragMode",value:function(){var e=this;if(this.dragToolMenus.length>0&&this.dragToolMenus[0].menus.length>0)return this.dragToolMenus[0].menus.find((function(t){return t.mode===e.dragMode}))||(this.dragModeClicked(this.dragToolMenus[0].menus[0].mode),this.dragToolMenus[0].menus[0])}},{key:"isToolbarActive",value:function(){return!!(this.parent.annotationUse||this.parent.isFormToolActive||this.parent.isSignatureToolActive)}},{key:"styleOfDragToolMenuItem",value:function(e){return this.dragMode===e&&null===this.annotTool?"white":"dark"}},{key:"toggleDapView",value:function(){this.rightSideViewMode===O.a.DAP?this.store$.dispatch(P.a.set(this.rightSideViewVisible?{key:"rightSideViewVisible",value:!1}:{key:"rightSideViewVisible",value:!0})):(this.store$.dispatch(P.a.set({key:"rightSideViewVisible",value:!0})),this.store$.dispatch(P.a.set({key:"rightSideViewMode",value:O.a.DAP})))}},{key:"searchBtnClass",value:function(){return this.searchToolActive||this.rightSideViewVisible&&this.rightSideViewMode===O.a.TextSearch?"primary":"dark"}},{key:"dapBtnClass",value:function(){return this.rightSideViewVisible&&this.rightSideViewMode===O.a.DAP?"primary":"dark"}},{key:"isActiveTotalSearch",value:function(){return this.rightSideViewVisible&&this.rightSideViewMode===O.a.TextSearch}},{key:"isActiveDapPanel",value:function(){return this.rightSideViewVisible&&this.rightSideViewMode===O.a.DAP}},{key:"isRightSectionMenuVisible",value:function(e){switch(e){case this.dapMenuItem:return this.isDAP()&&w.f.get(w.d.DAP_VIEW);case this.searchMenuItem:return this.documentService.checkAuthority(y.j.SEARCH_TEXT)&&w.f.get(w.c.TEXT_SEARCH_VIEW)&&!this.isEbookMode();case this.fullscreenMenuItem:return this.isFullscreenSupport()&&w.f.get(w.d.MAIN_TOOLBAR_FULLSCREEN)&&!E.F.isMobile();default:return!0}}},{key:"getRightSectionMenuColor",value:function(e){switch(e){case this.annotToolMenuItem:return this.parent.annotationUse?"primary":"dark";case this.formToolMenuItem:return this.parent.isFormToolActive?"primary":"dark";case this.dapMenuItem:return this.dapBtnClass();case this.searchMenuItem:return this.searchBtnClass();default:return"dark"}}},{key:"getMenuIcon",value:function(e){return"function"==typeof e.icon?e.icon():e.icon}},{key:"onRightSectionMenuExpanderClick",value:function(){void 0!==this.rightSectionMenu&&this.rightSectionMenu.toggleMenu()}},{key:"disableRightSectionMenu",value:function(e){return!this.doc&&this.fullscreenMenuItem.label!==e.label}},{key:"activeRightSectionMenu",value:function(e,t){var n=this;this.parent.annotationUse?this.activeItem=this.activeItem.filter((function(e){return e.label!==n.translatePipe.transform("TOOLBAR_FORM")})):this.parent.isFormToolActive&&(this.activeItem=this.activeItem.filter((function(e){return e.label!==n.translatePipe.transform("TOOLBAR_ANNOT")}))),e?this.activeItem.push(t):this.activeItem=this.activeItem.filter((function(e){return e.label!==t.label}))}},{key:"onClickCustomUI",value:function(e,t){e.onclick(so.a.simplifyMouseEvent(t))}},{key:"subscribeAnnotTool",value:function(){var e=this;this.subscriptionService.push(this.store$.pipe(Object(v.c)()).subscribe({next:function(t){e.annotTool=t,e.changeDetectorRef.markForCheck()}}))}},{key:"resize",value:function(){void 0!==this.mainMenu&&this.mainMenu.closeMenu(),this.initRightSectionMenu(),this.render()}},{key:"render",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.buildMenu(),e&&this.changeDetectorRef.markForCheck()}},{key:"buildMenu",value:function(){this.mainMenus=this.menuService.buildMainMenu(this),this.sideViewMenus=this.buildSideViewMenu(),this.iconMenus=this.buildIconMenu(),this.dragToolMenus=this.buildDragToolMenu(),this.toolbarMenus=this.buildToolbarMenu(),this.disableMenuWhenNoDoc(),this.changeDetectorRef.markForCheck()}},{key:"disableMenuWhenNoDoc",value:function(){var e=this;this.doc||c(this.mainMenus).forEach((function(t){t.items.forEach((function(t){["PREFERENCE","SLIDESHOW"].map((function(t){return e.translatePipe.transform(t)})).includes(t.label)||(t.disabled=!0)}))}))}},{key:"buildSideViewMenu",value:function(){var e=this,t={items:[]};return w.f.get(w.c.SIDE_VIEW_LEFT)&&(w.f.get(w.c.THUMBNAIL_VIEW)&&!this.hidableMenus[C.a.SIDE_VIEW_THUMBNAIL]&&t.items.push({label:this.translatePipe.transform("THUMBNAIL"),icon:"papycon papycon-list",command:function(){return e.onSideViewMenuSelect(ro.a.Thumbnail)},data:ro.a.Thumbnail}),!w.f.get(w.c.OUTLINE_VIEW)||this.isDAP()||this.hidableMenus[C.a.SIDE_VIEW_BOOKMARK]||t.items.push({label:this.translatePipe.transform("OUTLINE"),icon:"papycon papycon-bookmark",command:function(){return e.onSideViewMenuSelect(ro.a.Outline)},data:ro.a.Outline}),this.doc&&(!w.f.get(w.d.ANNOTATION_VIEW)||this.isDAP()||this.isEbookMode()||!this.isEnabledAnnotation||this.hidableMenus[C.a.SIDE_VIEW_ANNOTATION])||t.items.push({label:this.translatePipe.transform("ANNOTATION_LIST"),icon:"papycon papycon-annotation-list",command:function(){return e.onSideViewMenuSelect(ro.a.Annotation)},data:ro.a.Annotation}),this.doc&&(!w.f.get(w.d.REDACTION_VIEW)||this.isDAP()||this.isEbookMode()||!this.isEnabledAnnotation||this.hidableMenus[C.a.SIDE_VIEW_REDACTION])||t.items.push({label:this.translatePipe.transform("REDACT"),icon:"papycon papycon-redaction2",command:function(){return e.onSideViewMenuSelect(ro.a.Redaction)},data:ro.a.Redaction}),!w.f.get(w.c.EMBEDDED_FILE_VIEW)||this.isDAP()||this.hidableMenus[C.a.SIDE_VIEW_EMBEDDED_FILE]||t.items.push({label:this.translatePipe.transform("EMBEDDED_FILE"),icon:"papycon papycon-clip",command:function(){return e.onSideViewMenuSelect(ro.a.EmbeddedFile)},data:ro.a.EmbeddedFile}),this.doc&&(!w.f.get(w.d.ACRO_FORM_VIEW)||this.isDAP()||this.isEbookMode()||!this.isEnabledForm||this.hidableMenus[C.a.SIDE_VIEW_FORM])||t.items.push({label:this.translatePipe.transform("FORM_TOOL"),icon:"papycon papycon-formfield",command:function(){return e.onSideViewMenuSelect(ro.a.Form)},data:ro.a.Form}),!w.f.get(w.d.SIGNATURE_VIEW)||this.isDAP()||this.isEbookMode()||this.hidableMenus[C.a.SIDE_VIEW_SIGNATURE]||t.items.push({label:this.translatePipe.transform("SIGNATURE_LIST"),icon:"papycon papycon-sign-list",command:function(){return e.onSideViewMenuSelect(ro.a.Signature)},data:ro.a.Signature})),[t]}},{key:"buildDragToolMenu",value:function(){var e=this,t=[];return w.f.get(w.d.DRAG_MODE_MOVE)&&!this.hidableMenus[C.a.TOOLBAR_DRAG_MODE_MOVE]&&t.push({mode:M.a.MOVE,icon:g.p.HAND,action:function(){return e.dragModeClicked(M.a.MOVE)},isActive:function(){return e.dragMode===M.a.MOVE},tooltip:this.translatePipe.transform("SCROLL_MODE")}),w.f.get(w.d.DRAG_MODE_SELECT_TEXT)&&!this.hidableMenus[C.a.TOOLBAR_DRAG_MODE_SELECT_TEXT]&&t.push({mode:M.a.SELECT_TEXT,icon:g.p.SELECTION_ANNOTATION_TEXT,action:function(){return e.dragModeClicked(M.a.SELECT_TEXT)},isActive:function(){return e.dragMode===M.a.SELECT_TEXT},tooltip:this.translatePipe.transform("SELECT_TEXT")}),!w.f.get(w.d.MORE_MENU_MAGNIFY)||this.hidableMenus[C.a.TOOLBAR_ZOOM]||E.F.isTouchableDevice()||t.push({mode:M.a.MAGNIFY,icon:g.p.AREA_ZOOM2,action:function(){return e.dragModeClicked(M.a.MAGNIFY)},isActive:function(){return e.dragMode===M.a.MAGNIFY},tooltip:this.translatePipe.transform("MAGNIFY_TOOL")}),[{menus:t,align:"center"}]}},{key:"buildIconMenu",value:function(){var e=this,t=[];return w.f.get(w.d.MORE_MENU_VIEW_MODE)&&!this.hidableMenus[C.a.TOOLBAR_VIEW_MODE]&&t.push({label:this.translatePipe.transform("PAGE_DISPLAY"),align:E.F.isSmallWidth()?"justify":"left",wrap:E.F.isSmallWidth()?"wrap":"nowrap",menus:[{icon:g.p.LIST2,size:18,action:function(){return e.changeViewMode(0),e.iconMenuRef.closeMenu(),!0},isActive:function(){return 0===e.viewMode},tooltip:this.translatePipe.transform("SINGLE_PAGE_VIEW"),disabled:!1},{icon:g.p.ONE_PAGE_CONTINUOUS3,size:16,action:function(){return e.changeViewMode(1),e.iconMenuRef.closeMenu(),!0},isActive:function(){return 1===e.viewMode},tooltip:this.translatePipe.transform("SINGLE_PAGE_CONTINUOUS"),disabled:!1},{icon:g.p.TWO_PAGE3,size:18,action:function(){return e.changeViewMode(2),e.iconMenuRef.closeMenu(),!0},isActive:function(){return 2===e.viewMode},tooltip:this.translatePipe.transform("TWO_PAGE_VIEW"),disabled:!1},{icon:g.p.TWO_PAGE_CONTINUOUS3,size:16,action:function(){return e.changeViewMode(3),e.iconMenuRef.closeMenu(),!0},isActive:function(){return 3===e.viewMode},tooltip:this.translatePipe.transform("TWO_PAGE_CONTINUOUS"),disabled:!1}]}),w.f.get(w.d.MORE_MENU_ROTATION)&&!this.hidableMenus[C.a.TOOLBAR_ROTATE]&&t.push({label:this.translatePipe.transform("ROTATE"),align:E.F.isSmallWidth()?"justify":"left",menus:[{icon:g.p.REVERSE,size:16,action:function(){return e.rotate(-90),!0},tooltip:this.translatePipe.transform("ROTATE_CCW"),disabled:!1},{icon:g.p.ROTATE,size:16,action:function(){return e.rotate(90),!0},tooltip:this.translatePipe.transform("ROTATE_CW"),disabled:!1}]}),this.doc||t.forEach((function(t){["PAGE_DISPLAY"].map((function(t){return e.translatePipe.transform(t)})).includes(t.label)||t.menus.forEach((function(e){return e.disabled=!0}))})),t}},{key:"buildToolbarMenu",value:function(){var e=this,t={items:[]};return this.canShowAnnotToolbar&&t.items.push({label:this.translatePipe.transform("TOOLBAR_ANNOT"),icon:"papycon papycon-edit",command:function(){return e.toggleAnnotToolbar()}}),this.canShowFormToolbar&&t.items.push({label:this.translatePipe.transform("TOOLBAR_FORM"),icon:"papycon papycon-formtools",command:function(){return e.toggleFormToolbar()}}),this.canShowSignatureToolbar&&t.items.push({label:this.translatePipe.transform("TOOLBAR_SIGNATURE"),icon:"papycon papycon-sign",command:function(){return e.toggleSignatureToolbar()}}),this.isDAP()&&w.f.get(w.d.DAP_VIEW)&&E.F.isSmallWidth()&&t.items.push(this.dapMenuItem),[t]}},{key:"publishScale",value:function(e){this.store$.dispatch(P.a.set({key:"scale",value:e})),this.contentService.publishFitMode(null)}},{key:"subscribeZoomScroll",value:function(){var e=this;E.F.windowScrollEvent$.pipe(T.a((function(){return!e.scrollController.stateHolder.isSlideshow})),T.a((function(e){return void 0!==e.srcEvent&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey||e.srcEvent.altKey)}))).subscribe({next:function(t){t.srcEvent.preventDefault(),e.zoom(e.scaleStep*(t.delta>0?1:-1))}})}},{key:"subscribeZoomHotkey",value:function(){var e=this;this.subscriptionService.push(ue.a(this.shortcutService.getShortcutEvent(ce.a.INCREASE_ZOOM),this.shortcutService.getShortcutEvent(ce.a.INCREASE_ZOOM_NUMPAD)).subscribe({next:function(t){t.preventDefault(),t.stopPropagation(),e.zoom(e.scaleStep)}}),ue.a(this.shortcutService.getShortcutEvent(ce.a.DECREASE_ZOOM),this.shortcutService.getShortcutEvent(ce.a.DECREASE_ZOOM_NUMPAD)).subscribe({next:function(t){t.preventDefault(),t.stopPropagation(),e.zoom(-e.scaleStep)}}),ue.a(this.shortcutService.getShortcutEvent(ce.a.RESTORE_ZOOM),this.shortcutService.getShortcutEvent(ce.a.RESTORE_ZOOM_NUMPAD)).subscribe({next:function(t){t.preventDefault(),t.stopPropagation(),e.zoom(100-e.scale)}}))}},{key:"subscribeUndoRedo",value:function(){var e=this;this.subscriptionService.push(this.actionHistoryService.availableUndoCount$.subscribe({next:function(t){e.canUndo=t>0,e.mainMenus.length&&E.F.width<640&&(e.mainMenus[0].items.find((function(t){return t.label===e.translatePipe.transform("UNDO")})).disabled=!e.canUndo)}}),this.actionHistoryService.availableRedoCount$.subscribe({next:function(t){e.canRedo=t>0,e.mainMenus.length&&E.F.width<640&&(e.mainMenus[0].items.find((function(t){return t.label===e.translatePipe.transform("REDO")})).disabled=!e.canRedo)}}),this.shortcutService.getShortcutEvent(ce.a.UNDO_ACTION).pipe(T.a((function(){return w.f.get(w.d.SHORTCUT_UNDO_REDO)}))).subscribe({next:function(t){e.annotSelectedService.unselectAll(),e.actionHistoryService.undo(),t.preventDefault()}}),ue.a(this.shortcutService.getShortcutEvent(ce.a.REDO_ACTION),this.shortcutService.getShortcutEvent(ce.a.REDO_ACTION2)).pipe(T.a((function(){return w.f.get(w.d.SHORTCUT_UNDO_REDO)}))).subscribe({next:function(t){e.annotSelectedService.unselectAll(),e.actionHistoryService.redo(),t.preventDefault()}}))}},{key:"subscribePrint",value:function(){var e=this;this.subscriptionService.push(this.shortcutService.getShortcutEvent(ce.a.PRINT).subscribe({next:function(t){t.preventDefault(),!w.f.get(w.d.PRINT_BROWSER)&&!w.f.get(w.d.PRINT_PLUGIN)||!e.hasPrintPermission||e.hidableMenus[C.a.TOOLBAR_PRINT]?e.toastService.create({toastStyle:Wt.c.FAILURE,header:e.translatePipe.transform("INFO"),content:e.translatePipe.transform("NO_PRINT_PERMISSION")}):e.dialogService.toggleDialogVisibility(S.c.PRINT,!0)}}))}},{key:"subscribePageNo",value:function(){var e=this;this.subscriptionService.push(this.contentService.pageEndNoLoaded$.subscribe({next:function(){return e.changeDetectorRef.markForCheck()}}),this.contentService.pageNo$.subscribe({next:function(t){return e.pageNoFormControl.setValue(t.pageNo)}}))}},{key:"isVisibleSideViewButton",value:function(){return!!(w.f.get(w.c.THUMBNAIL_VIEW)||w.f.get(w.c.OUTLINE_VIEW)||w.f.get(w.c.EMBEDDED_FILE_VIEW)||w.f.get(w.d.ANNOTATION_VIEW)||w.f.get(w.d.SIGNATURE_VIEW)||w.f.get(w.d.ACRO_FORM_VIEW)||w.f.get(w.d.REDACTION_VIEW))}},{key:"initActiveToolBarName",value:function(){this.canShowAnnotToolbar?this.activeToolbarMenu={name:"TOOLBAR_ANNOT",icon:"papycon papycon-edit"}:this.canShowFormToolbar?this.activeToolbarMenu={name:"TOOLBAR_FORM",icon:"papycon papycon-formtools"}:this.canShowSignatureToolbar&&(this.activeToolbarMenu={name:"TOOLBAR_SIGNATURE",icon:"papycon papycon-sign"})}},{key:"initRightSectionMenu",value:function(){this.rightSectionMenus=[{items:[]}],this.isDAP()&&w.f.get(w.d.DAP_VIEW)&&(this.dapMenuItem.disabled=!1,this.rightSectionMenus[0].items.splice(-1,0,this.dapMenuItem)),this.lastClickedRightSectionMenuItem=this.rightSectionMenus[0].items.includes(this.selectedMenuItem)?this.selectedMenuItem:this.rightSectionMenus[0].items[0]}},{key:"initActiveMenu",value:function(){this.isAnnotAvailable?this.activeRightSectionMenu(!0,this.annotToolMenuItem):this.isFormAvailable&&this.activeRightSectionMenu(!0,this.formToolMenuItem)}},{key:"enableFormControl",value:function(){this.pageNoFormControl.enable(),this.scaleDropdownFormControl.enable()}},{key:"disableFormControl",value:function(){this.pageNoFormControl.disable(),this.scaleDropdownFormControl.disable()}},{key:"openSideViewToolbar",value:function(){this.isOpenedSideView=!0}},{key:"closeSideViewToolbar",value:function(){this.isOpenedSideView=!1}},{key:"isActiveSideView",value:function(e){return!!this.isSideViewMode(e)&&this.sideViewVisible&&this.sideViewMode===e}},{key:"isSideViewMode",value:function(e){return e}},{key:"RuntimeEnvKey",get:function(){return w.d}},{key:"MergedRuntimeEnvKey",get:function(){return w.c}},{key:"runtimeEnv",get:function(){return w.f}},{key:"scaleDropdownOptions",get:function(){return Bt.c}},{key:"scaleDropdownExecutableOptions",get:function(){var e=this;return[{label:this.translatePipe.transform("FIT_TO_HEIGHT_2"),icon:"papycon papycon-fit-height2",command:function(){return e.fitToHeight()}},{label:this.translatePipe.transform("FIT_TO_WIDTH_2"),icon:"papycon papycon-fit-width2",command:function(){return e.fitToWidth()}}]}},{key:"isVu",get:function(){return"StreamDocs Vu!"===this.productService.getProductType()}},{key:"simpleSearchDisabled",get:function(){return!this.doc}},{key:"isFormAvailable",get:function(){return w.f.get(w.c.FORM)&&this.documentService.checkAuthority(y.j.FORM)}},{key:"isAnnotAvailable",get:function(){return w.f.get(w.c.ANNOTATION)&&this.documentService.checkAuthority(y.j.ANNOTATION)}},{key:"isFormHighlightAvailable",get:function(){return w.f.get(w.d.MAIN_TOOLBAR_ACRO_FORM_HIGHLIGHT)&&this.documentService.checkAuthority(y.j.FORM)}},{key:"isEnabledForm",get:function(){return this.documentService.checkAuthority(y.j.FORM)}},{key:"isEnabledAnnotation",get:function(){return this.documentService.checkAuthority(y.j.ANNOTATION)}},{key:"isDividerVisible",get:function(){return this.RESPONSIVE_SIZE<this.windowWidth?w.f.get(w.c.ANNOT_TOOLBAR)&&(this.isFormHighlightAvailable||this.isAnnotAvailable):this.isFormHighlightAvailable&&!this.hidableMenus[C.a.TOOLBAR_FORM]}},{key:"RightSideViewMode",get:function(){return O.a}},{key:"fitMenuVisible",get:function(){return w.f.get(w.d.MAIN_TOOLBAR_FIT)&&!this.isEbookMode()}},{key:"scaleStep",get:function(){return 10*this.scaleRatio}},{key:"rightSectionMenuItems",get:function(){return this.rightSectionMenus&&this.rightSectionMenus[0]&&this.rightSectionMenus[0].items||[]}},{key:"scale",get:function(){return this._scale},set:function(e){this._scale=e,this.scaleDropdownFormControl.setValue({label:Math.round(this._scale)+"%",value:this._scale},{emitEvent:!1})}},{key:"hasSavePermission",get:function(){return this.documentService.checkAuthority(y.j.SAVE_DOCUMENT)}},{key:"hasDownloadPermission",get:function(){return this.documentService.checkAuthority(y.j.DOWNLOAD_DOCUMENT)}},{key:"hasPrintPermission",get:function(){return this.documentService.checkAuthority(y.j.PRINT_DOCUMENT)}},{key:"windowWidth",get:function(){return E.F.width}},{key:"windowResponsiveBasis",get:function(){return E.F.responsiveBasis}},{key:"hidableDragMode",get:function(){return!this.hidableMenus[C.a.TOOLBAR_DRAG_MODE_SELECT_ANNOTATION]||!this.hidableMenus[C.a.TOOLBAR_DRAG_MODE_SELECT_TEXT]||!this.hidableMenus[C.a.TOOLBAR_DRAG_MODE_MOVE]}},{key:"hidableTools",get:function(){return!this.hidableMenus[C.a.TOOLBAR_ANNOTATION]||!this.hidableMenus[C.a.TOOLBAR_FORM]}},{key:"hidableLeftMenus",get:function(){return!this.hidableMenus[C.a.TOOLBAR_EBOOK]||!this.hidableMenus[C.a.TOOLBAR_PREFERENCES]||!this.hidableMenus[C.a.TOOLBAR_DOCUMENT_INFO]}},{key:"HidableView",get:function(){return C.a}},{key:"disableStyle",get:function(){return this.viewerService.disableStyle}},{key:"canDrawAnnot",get:function(){return this.documentService.checkAuthority(y.j.DRAW_ANNOTATION)&&this.documentService.checkAuthority(y.j.ANNOTATION)}},{key:"canDrawForm",get:function(){return this.documentService.checkAuthority(y.j.DRAW_ANNOTATION)&&this.documentService.checkAuthority(y.j.FORM)&&!this.documentService.isDAPType()}},{key:"canToolbarExpand",get:function(){var e;return 0!==this.toolbarMenus.length&&(null===(e=this.toolbarMenus[0].items)||void 0===e?void 0:e.length)>1}},{key:"canShowAnnotToolbar",get:function(){return this.canDrawAnnot&&w.f.get(w.c.ANNOTATION)&&!this.isEbookMode()&&!this.hidableMenus[C.a.TOOLBAR_ANNOTATION]}},{key:"canShowFormToolbar",get:function(){return this.canDrawForm&&!this.hasSignedSignature&&w.f.get(w.c.FORM)&&!this.isEbookMode()&&!this.hidableMenus[C.a.TOOLBAR_FORM]}},{key:"canShowSignatureToolbar",get:function(){return this.canDrawAnnot&&w.f.get(w.c.SIGNATURE)&&!this.isEbookMode()}}]),e}()).\u0275fac=function(e){return new(e||mr)(I.Mb(No,1),I.Mb(y.f),I.Mb(y.d),I.Mb(S.b),I.Mb(I.h),I.Mb(co),I.Mb(y.k),I.Mb(y.l),I.Mb(Wt.b),I.Mb(ce.c),I.Mb(y.w),I.Mb(g.G),I.Mb(y.b),I.Mb(y.c),I.Mb(N.h),I.Mb(A.d),I.Mb(y.a),I.Mb(ao.b),I.Mb(y.e),I.Mb(y.i),I.Mb(L.a),I.Mb(ae.a),I.Mb(F.a))},mr.\u0275cmp=I.Gb({type:mr,selectors:[["sd-toolbar"]],viewQuery:function(e,t){var n;1&e&&(I.Lc(Ao,!0),I.Lc(Do,!0),I.Lc(Lo,!0),I.Lc(Fo,!0),I.Lc(jo,!0),I.Lc(zo,!0)),2&e&&(I.sc(n=I.ac())&&(t.mainMenu=n.first),I.sc(n=I.ac())&&(t.sideViewMenuRef=n.first),I.sc(n=I.ac())&&(t.iconMenuRef=n.first),I.sc(n=I.ac())&&(t.dragToolMenuRef=n.first),I.sc(n=I.ac())&&(t.toolbarMenuRef=n.first),I.sc(n=I.ac())&&(t.rightSectionMenu=n.first))},inputs:{doc:"doc"},features:[I.yb([co,g.G]),I.xb],decls:2,vars:2,consts:[[4,"ngIf"],["class","left",4,"ngIf"],["class","center",4,"ngIf"],["class","right",4,"ngIf"],[1,"left"],["class","main-menu","size","small",3,"menus","ngStyle",4,"ngIf"],["class","ep-text-button main-menu-button","color","dark",3,"title","click","mousedown","touchstart",4,"ngIf"],[1,"full","divider"],["class","side-view-menu-container",4,"ngIf"],["class","full divider",4,"ngIf"],["class","menu-toolbar",4,"ngIf"],["size","small",1,"main-menu",3,"menus","ngStyle"],["mainMenu",""],["color","dark",1,"ep-text-button","main-menu-button",3,"title","click","mousedown","touchstart"],[1,"papycon","papycon-hamburger-menu"],[1,"side-view-menu-container"],[1,"ep-text-button","side-view-menu",3,"click","mousedown","touchstart"],[1,"papycon","papycon-show-panel2"],["class","side-view-menu","size","small",3,"menus",4,"ngIf"],["size","small",1,"side-view-menu",3,"menus"],["sideViewMenuRef",""],[1,"menu-toolbar"],["class","ep-text-button custom-ui","color","dark",3,"title","click",4,"ngFor","ngForOf"],["class","file-menus",4,"ngIf"],["color","dark",1,"ep-text-button","custom-ui",3,"title","click"],[3,"ngClass"],[1,"file-menus"],["class","ep-text-button save","color","dark",3,"disabled","title","click",4,"ngIf"],["class","ep-text-button print","color","dark",3,"disabled","title","click",4,"ngIf"],["class","ep-text-button download","color","dark",3,"disabled","title","click",4,"ngIf"],["color","dark",1,"ep-text-button","save",3,"disabled","title","click"],[1,"papycon","papycon-save"],["color","dark",1,"ep-text-button","print",3,"disabled","title","click"],[1,"papycon","papycon-print"],["color","dark",1,"ep-text-button","download",3,"disabled","title","click"],[1,"papycon","papycon-download"],[1,"center"],[1,"more-menu-container"],["class","ep-text-button more-button","color","dark",3,"title","click","mousedown","touchstart",4,"ngIf"],[1,"more-menu",3,"iconMenus"],["iconMenuRef",""],["class","integrated-drag-container",4,"ngIf"],["editable","true","height","28","textAlign","left","size","small",1,"scale",3,"disabled","options","executableOptions","boxWidth","optionHeight","formControl"],["class","fit ep-text-button","color","dark",3,"ngClass","disabled","title","click",4,"ngIf"],["color","dark",1,"fit","ep-text-button",3,"ngClass","disabled","title","click"],[1,"papycon",3,"ngClass"],["color","dark",1,"ep-text-button","more-button",3,"title","click","mousedown","touchstart"],[1,"papycon","papycon-chevron3-down","expand-icon"],[1,"integrated-drag-container"],["class","ep-text-button more-button","color","dark",3,"click","mousedown","touchstart",4,"ngIf"],["class","drag-tool-menu",3,"iconMenus",4,"ngIf"],["color","dark",1,"ep-text-button","more-button",3,"click","mousedown","touchstart"],[1,"drag-tool-menu",3,"iconMenus"],["dragToolMenuRef",""],[1,"right"],["class","toolbar-menu-container",4,"ngIf"],["class","ep-text-button dap-button","color","dark",3,"click","mousedown","touchstart",4,"ngIf"],[1,"toolbar-menu-container"],["class","ep-text-button toolbar-menu-button","color","dark",3,"active","title","click","mousedown","touchstart",4,"ngIf"],["class","ep-text-button expand-button","color","dark",3,"click","mousedown","touchstart",4,"ngIf"],["class","toolbar-menu","size","small",3,"menus",4,"ngIf"],["color","dark",1,"ep-text-button","toolbar-menu-button",3,"title","click","mousedown","touchstart"],["color","dark",1,"ep-text-button","expand-button",3,"click","mousedown","touchstart"],[1,"papycon","papycon-chevron3-down"],["size","small",1,"toolbar-menu",3,"menus"],["toolbarMenuRef",""],["color","dark",1,"ep-text-button","dap-button",3,"click","mousedown","touchstart"],[1,"papycon","papycon-composite-document"],[1,"side-view"],[1,"close"],["color","dark",1,"ep-text-button","close-button",3,"title","click"],[1,"papycon","papycon-cross"],[1,"side-view-container"],[4,"ngFor","ngForOf"],[1,"ep-text-button",3,"title","disabled","click"]],template:function(e,t){1&e&&(I.Dc(0,pr,4,3,"ng-container",0),I.Dc(1,br,9,4,"ng-container",0)),2&e&&(I.jc("ngIf",!t.hidableMenus[t.HidableView.TOOLBAR]),I.zb(1),I.jc("ngIf",t.windowWidth<t.windowResponsiveBasis.width&&t.isOpenedSideView))},directives:[h.t,g.w,h.w,h.s,h.q,g.q,g.k,f.r,f.i],pipes:[j.a],styles:['i[_ngcontent-%COMP%]{line-height:22px}i.papycon-next-symbol2[_ngcontent-%COMP%], i.papycon-previous-symbol2[_ngcontent-%COMP%]{font-size:11px}i.papycon-regular-expression[_ngcontent-%COMP%]{font-size:13px}i.papycon-cross[_ngcontent-%COMP%], i.papycon-hamburger-menu[_ngcontent-%COMP%], i.papycon-minus[_ngcontent-%COMP%], i.papycon-plus2[_ngcontent-%COMP%]{font-size:14px}i.papycon-clip[_ngcontent-%COMP%], i.papycon-edit[_ngcontent-%COMP%], i.papycon-extend[_ngcontent-%COMP%], i.papycon-formtools[_ngcontent-%COMP%], i.papycon-one-page-continuous3[_ngcontent-%COMP%], i.papycon-two-page-continuous3[_ngcontent-%COMP%]{font-size:16px}i.papycon-annotation-list[_ngcontent-%COMP%], i.papycon-area-hide[_ngcontent-%COMP%], i.papycon-area-show[_ngcontent-%COMP%], i.papycon-bookmark[_ngcontent-%COMP%], i.papycon-case-sensitive[_ngcontent-%COMP%], i.papycon-check-mark4[_ngcontent-%COMP%], i.papycon-circle[_ngcontent-%COMP%], i.papycon-dropdown[_ngcontent-%COMP%], i.papycon-fit-height2[_ngcontent-%COMP%], i.papycon-fit-width2[_ngcontent-%COMP%], i.papycon-formfield[_ngcontent-%COMP%], i.papycon-hamburger-menu[_ngcontent-%COMP%], i.papycon-line[_ngcontent-%COMP%], i.papycon-line-measure2[_ngcontent-%COMP%], i.papycon-link[_ngcontent-%COMP%], i.papycon-list[_ngcontent-%COMP%], i.papycon-list-box[_ngcontent-%COMP%], i.papycon-memo3[_ngcontent-%COMP%], i.papycon-pencil[_ngcontent-%COMP%], i.papycon-polygon[_ngcontent-%COMP%], i.papycon-polygon-measure2[_ngcontent-%COMP%], i.papycon-polyline[_ngcontent-%COMP%], i.papycon-polyline-measure2[_ngcontent-%COMP%], i.papycon-radio2-checked[_ngcontent-%COMP%], i.papycon-redaction2[_ngcontent-%COMP%], i.papycon-redo[_ngcontent-%COMP%], i.papycon-revisioncloud[_ngcontent-%COMP%], i.papycon-ruler-hide[_ngcontent-%COMP%], i.papycon-ruler-show[_ngcontent-%COMP%], i.papycon-search[_ngcontent-%COMP%], i.papycon-show-panel[_ngcontent-%COMP%], i.papycon-show-panel2[_ngcontent-%COMP%], i.papycon-sign-list[_ngcontent-%COMP%], i.papycon-square[_ngcontent-%COMP%], i.papycon-text-field[_ngcontent-%COMP%], i.papycon-text-highlight[_ngcontent-%COMP%], i.papycon-text-strikeout[_ngcontent-%COMP%], i.papycon-text-underline[_ngcontent-%COMP%], i.papycon-textbox[_ngcontent-%COMP%], i.papycon-undo[_ngcontent-%COMP%]{font-size:17px}i.papycon-hand[_ngcontent-%COMP%], i.papycon-list2[_ngcontent-%COMP%], i.papycon-two-page3[_ngcontent-%COMP%]{font-size:18px}i.papycon-eraser[_ngcontent-%COMP%], i.papycon-pointer[_ngcontent-%COMP%], i.papycon-selection-annotation-text[_ngcontent-%COMP%], i.papycon-signature[_ngcontent-%COMP%]{font-size:19px}i.papycon-composite-document[_ngcontent-%COMP%], i.papycon-ok[_ngcontent-%COMP%], i.papycon-stamp2[_ngcontent-%COMP%]{font-size:20px}i.papycon-chevron3-down[_ngcontent-%COMP%]{font-size:10px;-webkit-transform:scale(.7);transform:scale(.7);-webkit-transform-origin:50% 50%;transform-origin:50% 50%}i.papycon-chevron3-down.expanded[_ngcontent-%COMP%]{-webkit-transform:scale(.7) rotate(-180deg);transform:scale(.7) rotate(-180deg)}@media screen and (max-width:811px){i.papycon-link[_ngcontent-%COMP%], i.papycon-memo3[_ngcontent-%COMP%]{font-size:14px}i.papycon-eraser[_ngcontent-%COMP%], i.papycon-pointer[_ngcontent-%COMP%], i.papycon-signature[_ngcontent-%COMP%], i.papycon-stamp2[_ngcontent-%COMP%]{font-size:16px}i.papycon-list2[_ngcontent-%COMP%], i.papycon-ok[_ngcontent-%COMP%], i.papycon-one-page-continuous3[_ngcontent-%COMP%]{font-size:17px}i.papycon-callout2[_ngcontent-%COMP%], i.papycon-more-symbol4[_ngcontent-%COMP%]{font-size:19px}}[_nghost-%COMP%]{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;height:42px;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:#fff;border-bottom:1px solid #dadada}.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-4px;width:calc(48px / 2);height:4px;background-color:#f79f1a;border-radius:2px}section[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;-webkit-box-align:center;-ms-flex-align:center;align-items:center}section[_ngcontent-%COMP%] > .divider[_ngcontent-%COMP%]{height:32px;width:1px;background-color:#dadada}section[_ngcontent-%COMP%] > .divider.full[_ngcontent-%COMP%]{height:100%}section.left[_ngcontent-%COMP%]{position:absolute;left:0;top:0}section.left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:calc(48px / 2);height:calc(48px / 2);-webkit-box-sizing:border-box;box-sizing:border-box;margin:calc((42px - (48px / 2)) / 2) calc((48px - (48px / 2)) / 2)}section.left[_ngcontent-%COMP%]   pu-menu.main-menu[_ngcontent-%COMP%]{width:148px}section.left[_ngcontent-%COMP%]   button.custom-ui[_ngcontent-%COMP%]{font-size:17px}section.left[_ngcontent-%COMP%]   section.menu-toolbar[_ngcontent-%COMP%]{margin-left:16px}section.left[_ngcontent-%COMP%]   section.menu-toolbar[_ngcontent-%COMP%]   .file-menus[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}section.left[_ngcontent-%COMP%]   section.menu-toolbar[_ngcontent-%COMP%]   .file-menus[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}section.left[_ngcontent-%COMP%]   section.menu-toolbar[_ngcontent-%COMP%]   .file-menus[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:20px}section.left[_ngcontent-%COMP%]   div.side-view-menu-container[_ngcontent-%COMP%]{position:relative;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}section.left[_ngcontent-%COMP%]   div.side-view-menu-container[_ngcontent-%COMP%]   pu-menu.side-view-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;width:148px}section.center[_ngcontent-%COMP%]{margin-left:20px}section.center[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}section.center[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i.papycon-chevron3-down[_ngcontent-%COMP%]{margin-left:5px}section.center[_ngcontent-%COMP%]   pu-dropdown[_ngcontent-%COMP%]{width:78px}section.center[_ngcontent-%COMP%]   pu-dropdown[_ngcontent-%COMP%]   .select-box[_ngcontent-%COMP%]{height:30px}section.center[_ngcontent-%COMP%]   button.fit[_ngcontent-%COMP%]{height:calc(48px / 2);width:calc(48px / 2);margin-left:10px}section.center[_ngcontent-%COMP%]   div.integrated-drag-container[_ngcontent-%COMP%], section.center[_ngcontent-%COMP%]   div.more-menu-container[_ngcontent-%COMP%]{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%}section.center[_ngcontent-%COMP%]   div.integrated-drag-container[_ngcontent-%COMP%]   button.more-button[_ngcontent-%COMP%], section.center[_ngcontent-%COMP%]   div.more-menu-container[_ngcontent-%COMP%]   button.more-button[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;height:34px;width:41px}section.center[_ngcontent-%COMP%]   div.more-menu-container[_ngcontent-%COMP%]   pu-icon-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;height:105px}section.center[_ngcontent-%COMP%]   div.integrated-drag-container[_ngcontent-%COMP%]   pu-icon-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;height:54px}section.center[_ngcontent-%COMP%]   .more-menu-container[_ngcontent-%COMP%], section.center[_ngcontent-%COMP%]   pu-dropdown[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:20px}section.center[_ngcontent-%COMP%]   .integrated-drag-container[_ngcontent-%COMP%]{margin-left:12px}section.right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;margin-right:12px}section.right[_ngcontent-%COMP%]   div.toolbar-menu-container[_ngcontent-%COMP%]{height:100%}section.right[_ngcontent-%COMP%]   div.toolbar-menu-container[_ngcontent-%COMP%], section.right[_ngcontent-%COMP%]   div.toolbar-menu-container[_ngcontent-%COMP%]   button.toolbar-menu-button[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}section.right[_ngcontent-%COMP%]   div.toolbar-menu-container[_ngcontent-%COMP%]   button.toolbar-menu-button[_ngcontent-%COMP%]{position:relative;width:calc(48px / 2);height:calc(48px / 2);margin:0}section.right[_ngcontent-%COMP%]   div.toolbar-menu-container[_ngcontent-%COMP%]   button.expand-button[_ngcontent-%COMP%]{height:12px;width:12px;margin-left:5px}section.right[_ngcontent-%COMP%]   div.toolbar-menu-container[_ngcontent-%COMP%]   button.expand-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{line-height:inherit}section.right[_ngcontent-%COMP%]   div.toolbar-menu-container[_ngcontent-%COMP%]   pu-menu.toolbar-menu[_ngcontent-%COMP%]{position:absolute;top:100%;right:-12px;min-width:120px}section.right[_ngcontent-%COMP%]   button.dap-button[_ngcontent-%COMP%]{height:28px;width:28px}section.right[_ngcontent-%COMP%]   div.toolbar-menu-container[_ngcontent-%COMP%] + button.dap-button[_ngcontent-%COMP%]{margin-left:20px}.popupmenu-item[_ngcontent-%COMP%]{padding:3px;line-height:16px;display:block;height:auto}@media screen and (max-width:811px){[_nghost-%COMP%]{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start}section.left[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;position:static}section.center[_ngcontent-%COMP%]   button.fit[_ngcontent-%COMP%]{display:none}section.center[_ngcontent-%COMP%]   .integrated-drag-container[_ngcontent-%COMP%]{margin-left:20px}section.side-view[_ngcontent-%COMP%]{background:#fff;position:absolute;width:100%}.close-button[_ngcontent-%COMP%]{margin:calc((42px - (48px / 2)) / 2) calc((48px - (48px / 2)) / 2)}.close-button.ep-text-button[_ngcontent-%COMP%]{width:24px;height:24px}.close-button.expandable[_ngcontent-%COMP%]{margin-right:0}section.side-view-container[_ngcontent-%COMP%]{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;overflow-x:scroll;overflow-y:hidden;-ms-overflow-style:none;scrollbar-width:none}section.side-view-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}section.side-view-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:calc((42px - (48px / 2)) / 2) calc((48px - (48px / 2)) / 2)}section.side-view-container[_ngcontent-%COMP%]   button.ep-text-button[_ngcontent-%COMP%]{width:24px;height:24px}section.side-view-container[_ngcontent-%COMP%]   button.expandable[_ngcontent-%COMP%]{margin-right:0}}@media screen and (max-width:548px){section.center[_ngcontent-%COMP%]   div.integrated-drag-container[_ngcontent-%COMP%]   pu-icon-menu.more-menu[_ngcontent-%COMP%], section.center[_ngcontent-%COMP%]   div.more-menu-container[_ngcontent-%COMP%]   pu-icon-menu.more-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;height:160px;width:114px;-webkit-box-sizing:border-box;box-sizing:border-box}section.center[_ngcontent-%COMP%]   div.integrated-drag-container[_ngcontent-%COMP%]   pu-icon-menu.drag-tool-menu[_ngcontent-%COMP%], section.center[_ngcontent-%COMP%]   div.more-menu-container[_ngcontent-%COMP%]   pu-icon-menu.drag-tool-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;height:58px;-webkit-box-sizing:border-box;box-sizing:border-box}section.side-view[_ngcontent-%COMP%]{top:0;left:0}}'],changeDetection:0}),mr),Mr=((vr=function e(){d(this,e)}).\u0275mod=I.Kb({type:vr}),vr.\u0275inj=I.Jb({factory:function(e){return new(e||vr)},providers:[F.a],imports:[[ro.b,A.b,h.c,f.n,f.B,g.l,g.t,g.x]]}),vr),xr=u("hReJ"),Or=u("nUhZ"),Pr=((yr=function(){function e(t,n,i,o,r){d(this,e),this.modalParam=t,this.modalService=n,this.agentService=i,this.portalRef=o,this.subscriptionService=r}return p(e,[{key:"ngOnInit",value:function(){var e=this;this.subscriptionService.push(Ht.a(window,"keydown",{capture:!0}).pipe(T.a((function(e){return"Escape"===e.key})),T.a((function(){return e.modalService.lastModal===e.portalRef}))).subscribe({next:function(){return e.onButtonClick(!1)}}))}},{key:"onButtonClick",value:function(e){e&&this.agentService.downloadSDAgent(),this.portalRef.dispose()}},{key:"status",get:function(){return this.modalParam.status}}]),e}()).\u0275fac=function(e){return new(e||yr)(I.Mb(un.a),I.Mb(mt.c),I.Mb(Or.a),I.Mb(un.b),I.Mb(g.G))},yr.\u0275cmp=I.Gb({type:yr,selectors:[["sd-module-download"]],features:[I.yb([g.G])],decls:14,vars:12,consts:[["color","grey","size","tiny",1,"ep-button",3,"click"],["color","primary","size","small",1,"ep-button",3,"click"]],template:function(e,t){1&e&&(I.Sb(0,"h3"),I.Fc(1),I.ec(2,"translate"),I.Rb(),I.Sb(3,"main"),I.Sb(4,"div"),I.Fc(5),I.ec(6,"translate"),I.Rb(),I.Sb(7,"button",0),I.Zb("click",(function(){return t.onButtonClick(!0)})),I.Fc(8),I.ec(9,"translate"),I.Rb(),I.Rb(),I.Sb(10,"footer"),I.Sb(11,"button",1),I.Zb("click",(function(){return t.onButtonClick(!1)})),I.Fc(12),I.ec(13,"translate"),I.Rb(),I.Rb()),2&e&&(I.zb(1),I.Gc(I.fc(2,4,"notInstall"===t.status?"INSTALL_PLUGIN":"UPDATE_PLUGIN")),I.zb(4),I.Gc(I.fc(6,6,"notInstall"===t.status?"NO_PRINT_PLUGIN":"NEW_VERSION_AVAILABLE")),I.zb(3),I.Gc(I.fc(9,8,"DOWNLOAD")),I.zb(4),I.Gc(I.fc(13,10,"OK")))},pipes:[j.a],styles:["h3[_ngcontent-%COMP%]{font-size:20px;line-height:28px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e;margin:8px 0}main[_ngcontent-%COMP%]{font-size:13px;line-height:22px;color:#6c6c6c;white-space:pre-wrap}main[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px}footer[_ngcontent-%COMP%]{text-align:right;margin-top:32px}"],changeDetection:0}),yr),Cr=u("Cojq"),wr=u("GyhO"),kr=u("EY2u"),_r=u("HDdC"),Tr=u("cp0P"),Er=u("HUPp"),Ir=u("yqQy");function Rr(e,t){if(1&e){var n=I.Tb();I.Qb(0),I.Nb(1,"div",15),I.Sb(2,"span",16),I.Fc(3),I.ec(4,"translate"),I.Rb(),I.Sb(5,"span",17),I.Fc(6),I.ec(7,"translate"),I.Rb(),I.Sb(8,"nav"),I.Sb(9,"button",18),I.Zb("click",(function(){return I.uc(n),I.dc(4).onConfirm(!1)})),I.Fc(10),I.ec(11,"translate"),I.Rb(),I.Rb(),I.Pb()}2&e&&(I.zb(3),I.Gc(I.fc(4,3,"PLUGIN")),I.zb(3),I.Gc(I.fc(7,5,"DESC_PRINT_PLUGIN")),I.zb(4),I.Gc(I.fc(11,7,"PRINT_USING_PLUGIN")))}function Nr(e,t){if(1&e){var n=I.Tb();I.Sb(0,"section",9),I.Sb(1,"pu-radio-button",10),I.Zb("ngModelChange",(function(e){return I.uc(n),I.dc(3).pageOption=e})),I.ec(2,"translate"),I.Rb(),I.Sb(3,"pu-radio-button",11),I.Zb("ngModelChange",(function(e){return I.uc(n),I.dc(3).pageOption=e})),I.ec(4,"translate"),I.Rb(),I.Sb(5,"span",12),I.Fc(6),I.ec(7,"translate"),I.Rb(),I.Sb(8,"pu-input",13),I.Zb("ngModelChange",(function(e){return I.uc(n),I.dc(3).pageRange=e})),I.Rb(),I.Dc(9,Rr,12,9,"ng-container",14),I.Rb()}if(2&e){var i=I.dc(3);I.zb(1),I.jc("label",I.fc(2,11,"ALL"))("ngModel",i.pageOption),I.zb(2),I.jc("label",I.fc(4,13,"SPECIFY_PRINT_RANGE"))("ngModel",i.pageOption),I.zb(2),I.Eb("disabled","partial"!==i.pageOption),I.zb(1),I.Gc(I.fc(7,15,"RANGE")),I.zb(2),I.jc("disabled","partial"!==i.pageOption)("placeholder",i.pageRangePlaceholder)("ngModel",i.pageRange),I.zb(1),I.jc("ngIf",i.runtimeEnv.get(i.RuntimeEnvKey.PRINT_PLUGIN)||i.openedDialogByApi)}}function Ar(e,t){if(1&e&&(I.Dc(0,Nr,10,17,"section",8),I.ec(1,"async")),2&e){var n=I.dc(2);I.jc("ngIf",!I.fc(1,1,n.donePrint))}}function Dr(e,t){1&e&&(I.Sb(0,"section",9),I.Sb(1,"span",19),I.Fc(2),I.ec(3,"translate"),I.Rb(),I.Rb()),2&e&&(I.zb(2),I.Gc(I.fc(3,1,"DONE_PRINT_MODAL")))}function Lr(e,t){if(1&e){var n=I.Tb();I.Sb(0,"button",20),I.Zb("click",(function(){return I.uc(n),I.dc(2).onClose()})),I.Fc(1),I.ec(2,"translate"),I.Rb(),I.Sb(3,"button",21),I.Zb("click",(function(){return I.uc(n),I.dc(2).onConfirm(!0)})),I.Fc(4),I.ec(5,"translate"),I.Rb()}2&e&&(I.zb(1),I.Gc(I.fc(2,2,"CANCEL")),I.zb(3),I.Gc(I.fc(5,4,"PRINT")))}function Fr(e,t){if(1&e){var n=I.Tb();I.Sb(0,"button",20),I.Zb("click",(function(){return I.uc(n),I.dc(2).onClose(!0)})),I.Fc(1),I.ec(2,"translate"),I.Rb()}2&e&&(I.zb(1),I.Gc(I.fc(2,1,"CLOSE")))}function jr(e,t){if(1&e){var n=I.Tb();I.Sb(0,"pu-dialog",3),I.Zb("close",(function(){return I.uc(n),I.dc().onClose()})),I.ec(1,"async"),I.ec(2,"async"),I.ec(3,"translate"),I.Dc(4,Ar,2,3,"ng-template",null,4,I.Ec),I.Dc(6,Dr,4,3,"ng-template",null,5,I.Ec),I.Dc(8,Lr,6,6,"ng-template",null,6,I.Ec),I.Dc(10,Fr,3,3,"ng-template",null,7,I.Ec),I.Rb()}if(2&e){var i=I.tc(5),o=I.tc(7),r=I.tc(9),s=I.tc(11),a=I.dc();I.jc("bodyTemplate",I.fc(1,3,a.donePrint)?o:i)("footerTemplate",I.fc(2,5,a.donePrint)?s:r)("header",I.fc(3,7,"PRINT"))}}function zr(e,t){if(1&e){var n=I.Tb();I.Sb(0,"div"),I.Sb(1,"img",22),I.Zb("load",(function(){return I.uc(n),I.dc().onLoad()}))("error",(function(e){return I.uc(n),I.dc().onError(e)})),I.Rb(),I.Rb()}if(2&e){var i=t.$implicit,o=t.index,r=I.dc();I.Bc("transform","rotate("+(r.pdfPages[o].r>=180?180:0)+"deg)"),I.zb(1),I.Ab("src",i,I.wc)}}var Vr,Br,Wr,$r=((Br=function(){function e(t,n,i,o,r,s,a,c,l,u,h,p,f,g,b,v,m,y){d(this,e),this.contentService=t,this.changeDetectorRef=n,this.dataService=i,this.modalService=o,this.toastService=r,this.agentService=s,this.pageService=a,this.changeService=c,this.documentService=l,this.subscriptionService=u,this.dapService=h,this.store$=p,this.translatePipe=f,this.dialogService=g,this.downloadService=b,this.apiEventBridgeService=v,this.authService=m,this.printService=y,this.finish=new I.n,this.pageOption="all",this.pageRange=E.v.EMPTY_STRING,this.printImagesDataUrls=[],this._dialogVisible=!0,this.nLoadedImage=0}return p(e,[{key:"ngOnInit",value:function(){var e=this;if(this.subscriptionService.push(this.contentService.docValidation$.subscribe({next:function(t){e.docValidity=t}}),this.store$.pipe(Object(P.f)("currentPageNo")).subscribe({next:function(t){return e.currentPageNo=t}}),this.documentService.pdfInfo$.pipe(T.a(E.g.isDefined)).subscribe({next:function(t){e.pdfInfo=t,"DAP"===e.pdfInfo.DocumentType&&e.initDapInfoSubscription()}})),this.immediatePrintConfig)return this._dialogVisible=!1,void this.immediatePrint();w.f.get(w.d.PRINT_BROWSER)||!w.f.get(w.d.PRINT_PLUGIN)||this.openedDialogByApi||(this._dialogVisible=!1,this.onConfirm(!1))}},{key:"ngOnDestroy",value:function(){this.printImagesDataUrls.splice(0)}},{key:"onConfirm",value:function(e){var t,n=this;if(!window.print||E.F.isKakaoInAppBrowser())return this.onClose(),e&&this.authService.deleteCookie("accessToken"),null===(t=this.modalService.lastModal)||void 0===t||t.dispose(),void this.modalService.createCommonModal({type:mt.a.ERROR,content:this.translatePipe.transform("NOT_SUPPORTED_BROWSER_PRINT"),confirmButton:!0}).addOnDisposeListener((function(){return n.finishPrint()}));this.modalService.createCommonModal({type:mt.a.BASIC,title:this.translatePipe.transform("PRINT"),content:this.translatePipe.transform("PREPARING_TO_PRINT")}),this.subscriptionService.set("mainSub",wr.a(this.isDAP?this.validateDAPInfo():kr.a,e?this.validatePageRange():this.checkLatestModuleInstallation(),this.saveChanges(),e?this.getDejavuToken():kr.a,e?this.printUsingBrowser():this.printUsingModule()).subscribe((function(e){var t;null===(t=n.modalService.lastModal)||void 0===t||t.dispose(),n.modalService.createCommonModal({type:mt.a.INFO,content:e,confirmButton:!0}).addOnDisposeListener((function(){return n.finishPrint()}))}),(function(e){var t,i;n.apiEventBridgeService.immediatePrintStartSrc.error("Failed to print."),null===(t=n.modalService.lastModal)||void 0===t||t.dispose(),n.modalService.createCommonModal({type:mt.a.ERROR,content:null!==(i=null==e?void 0:e.message)&&void 0!==i?i:n.translatePipe.transform("FAILED_TO_PRINT"),confirmButton:!0}).addOnDisposeListener((function(){return n.finishPrint()}))}),(function(){var t;if(e)return n.dataService.getPostPrint(n.tempDocId,n.dejavuToken,n.tempDocId!==n.doc.streamdocsId?n.doc.streamdocsId:void 0).subscribe(),void n.authService.deleteCookie("accessToken");null===(t=n.modalService.lastModal)||void 0===t||t.dispose(),n.toastService.create({toastStyle:Wt.c.SUCCESS,content:n.translatePipe.transform("PRINT_COMPLETED")}).addOnDisposeListener((function(){return n.finishPrint()})),n.onClose()})))}},{key:"onClose",value:function(e){if(this.dialogService.openedDialogByApi=!1,!Boolean(e)&&(E.F.isTablet()||E.F.isMobile()||E.F.isSamsungBrowser()))return this.dialogService.toggleDialogVisibility(S.c.PRINT,!0),void this.printService.finishPrint();this.dialogService.toggleDialogVisibility(S.c.PRINT,!1),this.nLoadedImage=0,this.finish.emit()}},{key:"onLoad",value:function(){var e,t;++this.nLoadedImage,null===(e=this.lastCommonModal)||void 0===e||e.setProgressValue(Math.floor(this.nLoadedImage/this.pages.length*100)),this.nLoadedImage===this.pages.length&&(window.print(),this.apiEventBridgeService.immediatePrintStartSrc.next(),null===(t=this.modalService.lastModal)||void 0===t||t.dispose(),this.onClose())}},{key:"onError",value:function(e){var t,n=this;Logger.error("Could not load image",e),this.changeDetectorRef.markForCheck(),null===(t=this.modalService.lastModal)||void 0===t||t.dispose(),this.modalService.createCommonModal({type:mt.a.ERROR,content:this.translatePipe.transform("FAILED_TO_LOAD_DOC_TO_PRINT"),confirmButton:!0}).addOnDisposeListener((function(){return n.finishPrint()}))}},{key:"trackByImage",value:function(e){return e}},{key:"immediatePrint",value:function(){"BROWSER"===this.immediatePrintConfig.type?(this.immediatePrintConfig.pageRange&&"all"!==this.immediatePrintConfig.pageRange&&(this.pageRange=this.immediatePrintConfig.pageRange,this.pageOption="partial"),this.onConfirm(!0)):this.onConfirm(!1)}},{key:"initDapInfoSubscription",value:function(){var e=this;this.subscriptionService.push(this.documentService.pageDescriptions$.pipe(T.a((function(e){return E.g.isDefined(e)}))).subscribe({next:function(t){e.pageDescriptions=t,e.calcEnablePages()}}))}},{key:"calcEnablePages",value:function(){var e=this,t=[];this.pageService.originalPdfPages.forEach((function(n,i){e.dapService.isDisabled(e.dapService.getPageRefId(n))&&t.push(i)})),this.enablePdfPages=E.g.deepClone(this.pageService.originalPdfPages),t.sort((function(e,t){return t-e})),t.forEach((function(t){return e.enablePdfPages.splice(t,1)}))}},{key:"finishPrint",value:function(){var e;null===(e=this.subscriptionService.get("mainSub"))||void 0===e||e.unsubscribe(),this.dialogVisible||this.onClose()}},{key:"validateDAPInfo",value:function(){var e=this;return new _r.a((function(t){var n,i;return e.pageDescriptions?e.pageDescriptions.reduce((function(e,t){return e.includes(t.refId)?e:e.concat(t.refId)}),[]).every((function(t){return e.dapService.isDisabled(t)}))?(null===(i=e.modalService.lastModal)||void 0===i||i.dispose(),void e.modalService.createCommonModal({type:mt.a.WARN,content:e.translatePipe.transform("ALL_DAP_DISABLED"),confirmButton:!0}).addOnDisposeListener((function(){return e.finishPrint()}))):void t.complete():(null===(n=e.modalService.lastModal)||void 0===n||n.dispose(),void e.modalService.createCommonModal({type:mt.a.WARN,content:e.translatePipe.transform("FAILED_TO_PRINT_TEMPORARILY"),confirmButton:!0}).addOnDisposeListener((function(){return e.finishPrint()})))}))}},{key:"validatePageRange",value:function(){var e=this;return new _r.a((function(t){var n,i,o;if(null===(n=e.modalService.lastModal)||void 0===n||n.dispose(),e.modalService.createCommonModal({type:mt.a.BASIC,title:e.translatePipe.transform("PRINT"),content:e.translatePipe.transform("CHECKING_PAGE_RANGE")}),"all"!==e.pageOption?(e.pages=oi.b.parse(e.pageRange,{min:1,max:e.pdfPages.length}),e.immediatePrintConfig&&(e.pages=e.pages.map((function(e){return e+1})))):e.pages=Array.from({length:e.pdfPages.length}).map((function(e,t){return t+1})),!e.pages||0===e.pages.length||e.pages.filter((function(t){return!t||t>e.pdfPages.length})).length>0)return null===(i=e.modalService.lastModal)||void 0===i||i.dispose(),void e.modalService.createCommonModal({type:mt.a.WARN,content:e.translatePipe.transform("INVALID_PAGE_RANGE"),confirmButton:!0}).addOnDisposeListener((function(){return e.finishPrint()}));e.pages.length>yt.c.printCriticalPageLength?(null===(o=e.modalService.lastModal)||void 0===o||o.dispose(),E.F.isIE()?e.modalService.createCommonModal({type:mt.a.ERROR,content:e.translatePipe.transform("RECOMMEND_PRINT_PLUGIN"),cancelButton:!0}).addOnDisposeListener((function(){return e.finishPrint()})):e.modalService.createCommonModal({type:mt.a.WARN,content:e.translatePipe.transform("RECOMMEND_PRINT_PLUGIN"),confirmButton:!0,confirmLabel:e.translatePipe.transform("CONTINUE"),cancelButton:!0}).addOnDisposeListener((function(n){n?t.complete():e.finishPrint()}))):t.complete()}))}},{key:"checkLatestModuleInstallation",value:function(){var e=this;return new _r.a((function(t){var n;null===(n=e.modalService.lastModal)||void 0===n||n.dispose(),e.modalService.createCommonModal({type:mt.a.BASIC,title:e.translatePipe.transform("PRINT"),content:e.translatePipe.transform("CHECKING_PRINT_PLUGIN")}),e.agentService.checkVersion().subscribe((function(n){var i;e.agentService.isLatestVersion(n.body)?t.complete():(null===(i=e.modalService.lastModal)||void 0===i||i.dispose(),e.modalService.createModal(Pr,{status:"needUpdate"}).addOnDisposeListener((function(){return e.finishPrint()})))}),(function(){var t;null===(t=e.modalService.lastModal)||void 0===t||t.dispose(),e.modalService.createModal(Pr,{status:"notInstall"}).addOnDisposeListener((function(){return e.finishPrint()}))}))}))}},{key:"applyChangesForDap",value:function(){var e=this;return this.store$.pipe(Object(Lt.d)("ALL",!0),Zt.a(1),_.a((function(t){return E.D.hasChanges(t)?e.exportChanges({streamdocsId:e.tempDocId},!0):kr.a})))}},{key:"saveChanges",value:function(){var e=this;return new _r.a((function(t){wr.a(e.exportChanges(e.doc),e.prepareDocument(),e.doc.isDap?e.applyChangesForDap():kr.a,nt.a((function(){return e.docValidity?e.validateDocument():kr.a}))).subscribe((function(e){return t.next(e)}),(function(e){return t.error(e)}),(function(){return t.complete()}))}))}},{key:"validateDocument",value:function(){var e=this,t=[];return Array.isArray(this.docValidity)?this.pdfPages.forEach((function(n){var i=e.pageDescriptions[n.ref].refId,o=e.docValidity.find((function(e){return e.refId===i}));t.push(o?o.validity:"-")})):t.push(this.docValidity),this.changeService.exportExtraCommand({streamdocsId:this.tempDocId},[{command:"changeTsaAppearance",argument:[t]}],{incremental:!1,toTemp:!0}).pipe(ot.a((function(t){return e.tempDocId=t.streamdocsId})),_.a((function(){return kr.a})))}},{key:"prepareDocument",value:function(){var e=this;return new _r.a((function(t){var n;if(e.isDAP)if(null===(n=e.modalService.lastModal)||void 0===n||n.dispose(),e.pageDescriptions.reduce((function(e,t){return e.includes(t.refId)?e:e.concat(t.refId)}),[]).every((function(t){return e.dapService.isDisabled(t)})))t.next(e.translatePipe.transform("PRINT_CANCELLED"));else{e.modalService.createCommonModal({type:mt.a.PROGRESS,title:e.translatePipe.transform("PRINT"),content:e.translatePipe.transform("PREPARING_TO_PRINT")});var i=e.downloadService.makeDownloadId(e.tempDocId,e.pdfInfo);i.pipe(T.a((function(e){return"progress"===e.status}))).subscribe({next:function(t){var n,i;"split"===t.action?null===(n=e.lastCommonModal)||void 0===n||n.setProgressValue(Math.round(50*t.progress)):"merge"===t.action&&(null===(i=e.lastCommonModal)||void 0===i||i.setProgressValue(50+Math.round(50*t.progress)))},error:function(){var t;null===(t=e.modalService.lastModal)||void 0===t||t.dispose(),e.modalService.createCommonModal({type:mt.a.ERROR,content:e.translatePipe.transform("FAILED_TO_SPLIT_MERGE_TO_PRINT"),confirmButton:!0})}}),i.pipe(T.a((function(e){return"complete"===e.status}))).subscribe({next:function(n){e.tempDocId=n.id,t.complete()}})}else t.complete()}))}},{key:"exportChanges",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new _r.a((function(i){var o;null===(o=t.modalService.lastModal)||void 0===o||o.dispose(),t.modalService.createCommonModal({type:mt.a.BASIC,title:t.translatePipe.transform("PRINT"),content:t.translatePipe.transform("SAVING_CHANGE_TO_PRINT_DOC")});var r=t.changeService.exportChange(e,{reload:!1,incremental:!1,toTemp:!0,print:!0,afterMergingDap:n});r?r.subscribe({next:function(e){t.tempDocId=e.streamdocsId,i.complete()},error:function(){return i.error(t.translatePipe.transform("FAILED_TO_SAVE_TO_PRINT"))}}):(t.tempDocId=e.streamdocsId,i.complete())}))}},{key:"getDejavuToken",value:function(){var e=this;return new _r.a((function(t){e.dataService.getDejavuToken(e.tempDocId).subscribe({next:function(n){n&&n.token?(e.dejavuToken=n.token,t.complete()):t.error(e.translatePipe.transform("FAILED_TO_PRINT"))},error:function(){return t.error(e.translatePipe.transform("FAILED_TO_PRINT"))}})}))}},{key:"printUsingBrowser",value:function(){var e=this;return new _r.a((function(t){var n,i;null===(n=e.modalService.lastModal)||void 0===n||n.dispose(),e.modalService.createCommonModal({type:mt.a.PROGRESS,title:e.translatePipe.transform("PRINT"),content:e.translatePipe.transform("PRINTING")}),e.authService.setCookie("accessToken",null===(i=E.o.token)||void 0===i?void 0:i.accessToken),e.subscriptionService.set("fetchImage",Tr.a(e.pages.map((function(t){return Object(Cr.e)(e.dataService.getPagePrintImageURI(e.tempDocId,t-1,yt.c.printImageQuality.jpegQuality,!0,e.dejavuToken),"image/png")}))).subscribe({next:function(n){e.printImagesDataUrls=n.map((function(e){return e.url})),e.changeDetectorRef.markForCheck(),t.complete()},error:function(e){return t.error(e)}}))}))}},{key:"printUsingModule",value:function(){var e=this;return new _r.a((function(t){var n;null===(n=e.modalService.lastModal)||void 0===n||n.dispose(),e.modalService.createCommonModal({type:mt.a.BASIC,title:e.translatePipe.transform("PRINT"),content:e.translatePipe.transform("PRINTING")});var i=E.F.nativeWindow;e.agentService.print(i.location.hostname,e.dataService.getDownloadUrl({docId:e.tempDocId,originalId:e.tempDocId!==e.doc.streamdocsId?e.doc.streamdocsId:void 0}),i.location.port,i.location.protocol,e.docValidity,""+(e.currentPageNo-1)).subscribe((function(n){var i,o=/([a-zA-Z]+#)?(\-?[0-9]+)/;if(o.test(n.body)&&(i=o.exec(n.body)[2]),!i||Number(i)<0)switch(i||(i="Unknown"),i){case"-3":case"23":e.apiEventBridgeService.immediatePrintStartSrc.next({status:"CANCELLED"}),t.next(e.translatePipe.transform("PRINT_CANCELLED"));break;case"-20":t.error(e.translatePipe.transform("FAILED_TO_LOAD_DOC_TO_PRINT"));break;default:t.error("".concat(e.translatePipe.transform("FAILED_TO_PRINT"),"\n(").concat(e.translatePipe.transform("ERROR_CODE"),": ").concat(i,")"))}else e.apiEventBridgeService.immediatePrintStartSrc.next({status:"PRINTED"}),t.complete()}),(function(){return t.error(e.translatePipe.transform("FAILED_TO_PRINT"))}))}))}},{key:"RuntimeEnvKey",get:function(){return w.d}},{key:"runtimeEnv",get:function(){return w.f}},{key:"lastCommonModal",get:function(){var e;return(null===(e=this.modalService.lastModal)||void 0===e?void 0:e.instance).nestedRef.instance}},{key:"dialogVisible",get:function(){return this._dialogVisible}},{key:"pdfPages",get:function(){return this.enablePdfPages||this.pageService.originalPdfPages}},{key:"isDAP",get:function(){var e;return"DAP"===(null===(e=this.pdfInfo)||void 0===e?void 0:e.DocumentType)}},{key:"pageRangePlaceholder",get:function(){return this.translatePipe.transform("EX")+" 1-5, 8, 11-13"}},{key:"openedDialogByApi",get:function(){return this.dialogService.openedDialogByApi}},{key:"donePrint",get:function(){return this.printService.doneEvent$}}]),e}()).\u0275fac=function(e){return new(e||Br)(I.Mb(y.f),I.Mb(I.h),I.Mb(Ti.b),I.Mb(mt.c),I.Mb(Wt.b),I.Mb(Or.a),I.Mb(ye.b),I.Mb(y.e),I.Mb(y.k),I.Mb(g.G),I.Mb(Er.b),I.Mb(N.h),I.Mb(A.d),I.Mb(S.b),I.Mb(y.l),I.Mb(Pt.a),I.Mb(Ir.c),I.Mb(y.p))},Br.\u0275cmp=I.Gb({type:Br,selectors:[["sd-print-view"]],inputs:{doc:"doc",immediatePrintConfig:"immediatePrintConfig"},outputs:{finish:"finish"},features:[I.yb([g.G])],decls:3,vars:3,consts:[["width","360",3,"bodyTemplate","footerTemplate","header","close",4,"ngIf"],["id","print-container"],[3,"transform",4,"ngFor","ngForOf","ngForTrackBy"],["width","360",3,"bodyTemplate","footerTemplate","header","close"],["dialogBody",""],["finishDialogBody",""],["dialogFooter",""],["finishDialogFooter",""],["class","dialog-body",4,"ngIf"],[1,"dialog-body"],["value","all",3,"label","ngModel","ngModelChange"],["value","partial",3,"label","ngModel","ngModelChange"],[1,"range-label"],["size","tiny",3,"disabled","placeholder","ngModel","ngModelChange"],[4,"ngIf"],[1,"horizontal-division-line"],[1,"plugin-label"],[1,"plugin-description"],["color","grey","size","tiny",1,"ep-button",3,"click"],[1,"complete-description"],["color","white","size","small",1,"ep-button",3,"click"],["color","primary","size","small",1,"ep-button",3,"click"],[3,"load","error"]],template:function(e,t){1&e&&(I.Dc(0,jr,12,9,"pu-dialog",0),I.Sb(1,"div",1),I.Dc(2,zr,2,3,"div",2),I.Rb()),2&e&&(I.jc("ngIf",t.dialogVisible),I.zb(2),I.jc("ngForOf",t.printImagesDataUrls)("ngForTrackBy",t.trackByImage))},directives:[h.t,h.s,g.i,g.B,f.r,f.u,g.s],pipes:[h.b,j.a],styles:[".dialog-body[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin-top:24px}.dialog-body[_ngcontent-%COMP%]   pu-radio-button[_ngcontent-%COMP%]{margin-top:16px}.dialog-body[_ngcontent-%COMP%]   pu-radio-button[_ngcontent-%COMP%]:first-child{margin-top:0}.dialog-body[_ngcontent-%COMP%]   .range-label[_ngcontent-%COMP%]{font-size:12px;line-height:20px;font-family:NotoSans-Medium,sans-serif;color:#6c6c6c;margin-top:18px}.dialog-body[_ngcontent-%COMP%]   .range-label.disabled[_ngcontent-%COMP%]{opacity:.5}.dialog-body[_ngcontent-%COMP%]   pu-input[_ngcontent-%COMP%]{width:160px}.dialog-body[_ngcontent-%COMP%]   .horizontal-division-line[_ngcontent-%COMP%]{width:100%;height:1px;margin:16px 0;background-color:#dadada}.dialog-body[_ngcontent-%COMP%]   .plugin-label[_ngcontent-%COMP%]{font-size:14px;line-height:24px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e;display:block}.dialog-body[_ngcontent-%COMP%]   .plugin-description[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Regular,sans-serif;color:#6c6c6c;margin-top:6px}.dialog-body[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:32px}.dialog-body[_ngcontent-%COMP%]   .complete-description[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Regular,sans-serif;color:#6c6c6c}button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:8px}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),Br),Ur=((Vr=function e(){d(this,e)}).\u0275mod=I.Kb({type:Vr}),Vr.\u0275inj=I.Jb({factory:function(e){return new(e||Vr)},imports:[[po.g.forChild([{path:"",component:No},{path:"documents/:streamdocsId",component:No},{path:"ebook/:streamdocsId",component:_e}])],po.g]}),Vr),Gr=u("jbvT"),Hr=u("JqVi"),qr=u("2tvt"),Zr=((Wr=function e(){d(this,e)}).\u0275mod=I.Kb({type:Wr}),Wr.\u0275inj=I.Jb({factory:function(e){return new(e||Wr)},providers:[xr.a,fo.a],imports:[[ro.b,io,re,Mr,O.b,Ur,f.B,S.a,Ee.a,A.b,h.c,f.n,g.j,g.t,g.A,g.C]]}),Wr);I.xc(No,[Gr.a,Rn,Nt,oe,Sr,Hr.a,po.h,po.d,po.f,po.e,po.i,f.H,f.w,f.G,f.d,f.x,f.A,f.b,f.D,f.E,f.z,f.r,f.s,f.C,f.p,f.o,f.y,f.c,f.e,f.i,f.l,f.j,f.m,f.f,qr.a,Bi,to,h.q,h.r,h.s,h.t,h.A,h.w,h.x,h.y,h.z,h.u,h.v,f.u,f.v,f.t,g.i,g.s,g.z,g.B,No,$r,Pr],[j.a,h.b,h.G,h.p,h.k,h.E,h.g,h.C,h.F,h.d,h.f,h.i,h.j,h.l])}}])}();