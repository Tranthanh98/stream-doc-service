(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Jzxn:function(e,t,n){"use strict";n.r(t),n.d(t,"WatermarkSettingsComponent",(function(){return ge})),n.d(t,"WatermarkSettingsGuard",(function(){return pe})),n.d(t,"WatermarkSettingsModule",(function(){return xe})),n.d(t,"WatermarkSettingsService",(function(){return _})),n.d(t,"WatermarkSettingsRoutingModule",(function(){return me}));var i=n("3vOV"),o=n("BNhx"),r=n("B93E"),a=n("Cojq"),c=n("akkN"),l=n("1uah"),s=n("NXyV"),b=n("LRne"),g=n("xgIS"),p=n("PqYM"),d=n("vkgz"),f=n("pLZG"),u=n("Kj3r"),m=n("eIep"),x=n("lJxs"),h=n("CqXF"),C=n("0lfv"),v=n("8Y7J"),k=n("s7LF"),w=n("ey9i"),M=n("ZMf9");let _=(()=>{class e{constructor(e,t){this.watermarkService=e,this.fb=t}createControl(e,t){const n=[],i=t||this.fb.group({type:e,renderTarget:null,name:null,opacity:100,align:0,rotate:0,x:0,y:0,allowView:!0,allowPrint:!0,range:"all",placeOverContent:!0,_repeatWidth:{value:250,disabled:!0},_repeatHeight:{value:250,disabled:!0},text:"",size:null,color:"#000000",fontName:null,bold:!1,italic:!1,textAlignment:"center",scale:100,imageData:null,_repeat:!1,opacityInput:[100,{updateOn:"blur"}],rotateInput:[0,{updateOn:"blur"}]}),o=(e,...t)=>t.map(n=>i.get(n).valueChanges.subscribe({next:n=>{const o=Math.min(Math.max(n,e.min),e.max);t.forEach(e=>{i.get(e).setValue(o,{emitEvent:!1})})}}));return n.push(...o({min:0,max:100},"opacity","opacityInput"),...o({min:0,max:9999},"scale"),...o({min:0,max:360},"rotate","rotateInput"),...o({min:1,max:1e3},"_repeatWidth"),...o({min:1,max:1e3},"_repeatHeight"),i.get("_repeat").valueChanges.subscribe({next:e=>{["_repeatHeight","_repeatWidth"].forEach(t=>i.get(t)[e?"enable":"disable"]())}})),[i,n]}generateName(e,t){const n=("Text"===e?"TXT":"IMG")+"_Watermark_",i=new RegExp(`^${n}(\\d+)`);return`${n}${Math.max(0,...t.map(e=>Number((i.exec(e)||[])[1])||0))+1}`}exportWatermarkChanges(e){return e.map(e=>this.mapControlToWatermark(e)).reduce((e,t)=>this.watermarkService.mergeWatermarkChanges(e,t),[])}importWatermarkChanges(e){return e.reduce((e,t)=>e.concat(...t.text,...t.image),[]).map(e=>this.watermarkService.mapWatermarkToControl(e))}mapControlToWatermark(e){var t,n;let i;const o=e.getRawValue(),r=(null===(t=o.fontName)||void 0===t?void 0:t.value)||null,a=(null===(n=o.size)||void 0===n?void 0:n.value)||null,c=o._repeat,l=o._repeatWidth,s=o._repeatHeight;return C.D.isText(o)?i={id:void 0,type:o.type,renderTarget:o.renderTarget,name:o.name,_repeat:c,_repeatWidth:l,_repeatHeight:s,opacity:Number((o.opacity/100).toFixed(2)),align:c?1:o.align,rotate:o.rotate,x:o.x,y:o.y,allowView:o.allowView,allowPrint:o.allowPrint,range:o.range,placeOverContent:o.placeOverContent,repeatWidth:c?l:0,repeatHeight:c?s:0,text:o.text,size:a,color:o.color,fontName:r,bold:o.bold,italic:o.italic,textAlignment:o.textAlignment}:C.D.isImage(o)&&(i={id:void 0,type:o.type,renderTarget:o.renderTarget,name:o.name,_repeat:c,_repeatWidth:l,_repeatHeight:s,opacity:Number((o.opacity/100).toFixed(2)),align:c?1:o.align,rotate:o.rotate,x:o.x,y:o.y,allowView:o.allowView,allowPrint:o.allowPrint,range:o.range,placeOverContent:o.placeOverContent,repeatWidth:c?l:0,repeatHeight:c?s:0,scale:Number((o.scale/100).toFixed(2)),imageData:o.imageData}),i}}return e.\u0275fac=function(t){return new(t||e)(v.Wb(M.c),v.Wb(k.g))},e.\u0275prov=v.Ib({token:e,factory:e.\u0275fac}),e})();var S=n("+Cyk"),O=n("Ads2"),P=n("Vbab"),R=n("Yoju"),E=n("SVse"),y=n("vUdp"),z=n("DKVU"),T=n("524M"),N=n("V2Em"),W=n("gNdQ");const I=["textAreaElement"];function A(e,t){if(1&e){const e=v.Tb();v.Sb(0,"div",25),v.Zb("click",(function(){v.uc(e);const n=t.$implicit;return v.dc().selectTab(n)})),v.Fc(1),v.ec(2,"translate"),v.Rb()}if(2&e){const e=t.$implicit,n=v.dc();v.Eb("selected",e===n.selectedTab),v.zb(1),v.Gc(v.fc(2,3,n.WatermarkUtils.isFileWatermark(e)?"FILE_WATERMARK":"SCREEN_AND_PRINT_WATERMARK"))}}function F(e,t){1&e&&(v.Sb(0,"section",26),v.Sb(1,"div",27),v.Nb(2,"pu-toggle-button",28),v.Sb(3,"span",29),v.Fc(4),v.ec(5,"translate"),v.Rb(),v.Rb(),v.Rb()),2&e&&(v.zb(4),v.Gc(v.fc(5,1,"FILE_WATERMARK_ENABLED_DESCRIPTION")))}function D(e,t){if(1&e){const e=v.Tb();v.Sb(0,"button",10),v.Zb("click",(function(){return v.uc(e),v.dc().onMoreMenuClick()})),v.Nb(1,"i",30),v.Rb()}if(2&e){const e=v.dc();v.jc("disabled",!e.selectedControl),v.Ab("color",e.previewMenuVisible?"primary":"dark")}}function V(e,t){if(1&e&&(v.Sb(0,"div",31),v.Sb(1,"div",32),v.Sb(2,"div",33),v.Sb(3,"h3"),v.Fc(4),v.ec(5,"translate"),v.Nb(6,"pu-toggle-button",34),v.Rb(),v.Rb(),v.Sb(7,"div",33),v.Sb(8,"h3"),v.Fc(9),v.ec(10,"translate"),v.Nb(11,"pu-toggle-button",35),v.Rb(),v.Rb(),v.Rb(),v.Rb()),2&e){const e=v.dc();v.jc("formGroup",e.previewMenuControls),v.zb(2),v.Eb("disabled",!e.previewMenuControls.value.view),v.zb(2),v.Hc(" ",v.fc(5,7,"PREVIEW_SCREEN_WATERMARK")," "),v.zb(3),v.Eb("disabled",!e.previewMenuControls.value.print),v.zb(2),v.Hc(" ",v.fc(10,9,"PREVIEW_WATERMARK_IN_PRINT")," ")}}function G(e,t){if(1&e){const e=v.Tb();v.Sb(0,"div",36),v.Zb("click",(function(){v.uc(e);const n=t.$implicit;return v.dc().selectWatermark(n)})),v.Nb(1,"i"),v.Sb(2,"span"),v.Fc(3),v.Rb(),v.Sb(4,"i",37),v.Zb("click",(function(n){v.uc(e);const i=t.$implicit;return v.dc().openDeleteWatermarkDialog(i,n)})),v.Rb(),v.Rb()}if(2&e){const e=t.$implicit,n=v.dc();v.Eb("selected",e===n.selectedControl),v.zb(1),v.Cb("papycon papycon-",n.WatermarkUtils.isText(e.value)?"textbox":"image",""),v.zb(2),v.Gc(e.value.name)}}function j(e,t){if(1&e&&v.Nb(0,"div",41),2&e){const e=v.dc().$implicit,t=v.dc(2);v.jc("watermarkControl",e)("pageSize",t.pageSize)}}function L(e,t){if(1&e&&(v.Qb(0),v.Dc(1,j,1,2,"div",40),v.Pb()),2&e){const e=t.$implicit,n=v.dc(2);v.zb(1),v.jc("ngIf",n.previewMenuControls.value.view&&e.value.allowView||n.previewMenuControls.value.print&&e.value.allowPrint)}}function K(e,t){if(1&e&&(v.Sb(0,"div",38),v.Dc(1,L,2,1,"ng-container",39),v.Rb()),2&e){const e=v.dc();v.jc("ngStyle",e.previewWatermarkSizeStyles),v.zb(1),v.jc("ngForOf",e.currentControls)}}function $(e,t){if(1&e&&(v.Sb(0,"div",42),v.Nb(1,"img",43),v.Rb()),2&e){const e=v.dc();v.zb(1),v.jc("sdImage",e.previewImage)}}function U(e,t){1&e&&v.Nb(0,"div",44)}function H(e,t){if(1&e&&(v.Sb(0,"div",33),v.Sb(1,"h3"),v.Fc(2),v.ec(3,"translate"),v.Nb(4,"i",60),v.ec(5,"translate"),v.Nb(6,"pu-toggle-button",67),v.Rb(),v.Rb()),2&e){const e=v.dc(2);v.Eb("disabled",!e.selectedControl.value.allowView),v.zb(2),v.Hc(" ",v.fc(3,4,"DISPLAY_SCREEN_WATERMARK")," "),v.zb(2),v.jc("sdTooltip",v.fc(5,6,"DISPLAY_SCREEN_WATERMARK_TOOLTIP"))}}function Z(e,t){if(1&e&&(v.Sb(0,"div",33),v.Sb(1,"h3"),v.Fc(2),v.ec(3,"translate"),v.Nb(4,"i",60),v.ec(5,"translate"),v.Nb(6,"pu-toggle-button",68),v.Rb(),v.Rb()),2&e){const e=v.dc(2);v.Eb("disabled",!e.selectedControl.value.allowPrint),v.zb(2),v.Hc(" ",v.fc(3,4,"INCLUDE_WATERMARK_IN_PRINT")," "),v.zb(2),v.jc("sdTooltip",v.fc(5,6,"INCLUDE_WATERMARK_IN_PRINT_TOOLTIP"))}}function B(e,t){if(1&e){const e=v.Tb();v.Sb(0,"div",69),v.Zb("click",(function(){v.uc(e);const n=t.$implicit;return v.dc(2).selectedControl.patchValue({align:n})})),v.Rb()}if(2&e){const e=t.$implicit,n=v.dc(2);v.Eb("selected",n.selectedControl.value._repeat||e===n.selectedControl.value.align)}}function J(e,t){if(1&e){const e=v.Tb();v.Sb(0,"div",76),v.Zb("mousedown",(function(n){v.uc(e);const i=t.$implicit;return v.dc(4).onKeywordMousedown(n,i)})),v.Fc(1),v.Rb()}if(2&e){const e=t.$implicit;v.zb(1),v.Gc(e)}}function X(e,t){if(1&e&&(v.Sb(0,"section",74),v.Dc(1,J,2,1,"div",75),v.Rb()),2&e){const e=v.dc(3);v.zb(1),v.jc("ngForOf",e.TextKeywords)}}function Y(e,t){if(1&e&&(v.Sb(0,"div",70),v.Sb(1,"h3"),v.Fc(2),v.ec(3,"translate"),v.Rb(),v.Nb(4,"textarea",71,72),v.ec(6,"translate"),v.Dc(7,X,2,1,"section",73),v.Rb()),2&e){const e=v.dc(2);v.zb(2),v.Gc(v.fc(3,3,"ENTER_TEXT")),v.zb(2),v.jc("placeholder",v.fc(6,5,"TEXT_WATERMARK_SETTINGS_PLACEHOLDER")),v.zb(3),v.jc("ngIf",e.WatermarkUtils.isScreenWatermark(e.selectedTab))}}const q=function(){return{standalone:!0}};function Q(e,t){if(1&e){const e=v.Tb();v.Sb(0,"div",77),v.Sb(1,"h3"),v.Fc(2),v.ec(3,"translate"),v.Rb(),v.Sb(4,"section",78),v.Sb(5,"button",79),v.Zb("click",(function(){return v.uc(e),v.tc(12).click()})),v.Fc(6),v.ec(7,"translate"),v.Rb(),v.Nb(8,"pu-input",80,81),v.ec(10,"translate"),v.Sb(11,"input",82,83),v.Zb("change",(function(){v.uc(e);const t=v.tc(12),n=v.tc(9);return v.dc(2).onFileChange(t,n)})),v.Rb(),v.Rb(),v.Rb()}2&e&&(v.zb(2),v.Gc(v.fc(3,4,"ADD_IMAGE")),v.zb(4),v.Gc(v.fc(7,6,"SEARCH_FILE")),v.zb(2),v.jc("ngModelOptions",v.mc(10,q))("placeholder",v.fc(10,8,"IMAGE_WATERMARK_SETTINGS_PLACEHOLDER")))}function ee(e,t){1&e&&(v.Sb(0,"div",33),v.Sb(1,"h3"),v.Fc(2),v.ec(3,"translate"),v.Rb(),v.Sb(4,"section",63),v.Sb(5,"span",64),v.Fc(6),v.ec(7,"translate"),v.Rb(),v.Nb(8,"pu-input-value",84),v.Rb(),v.Rb()),2&e&&(v.zb(2),v.Gc(v.fc(3,6,"IMAGE_SIZE")),v.zb(4),v.Gc(v.fc(7,8,"IMAGE_SCALE")),v.zb(2),v.jc("max",9999)("min",1)("width",119)("height",30))}function te(e,t){if(1&e){const e=v.Tb();v.Sb(0,"i",96),v.Zb("click",(function(){v.uc(e);const n=t.$implicit;return v.dc(3).selectedControl.patchValue({textAlignment:n})})),v.Rb()}if(2&e){const e=t.$implicit,n=v.dc(3);v.Bb("papycon-text-align-"+e),v.Eb("selected",n.selectedControl.value.textAlignment===e)}}function ne(e,t){1&e&&(v.Nb(0,"pu-color-palette",97),v.ec(1,"translate"),v.ec(2,"translate")),2&e&&v.jc("customColorLabel",v.fc(1,3,"CUSTOM_COLOR"))("defaultColorLabel",v.fc(2,5,"DEFAULT_COLOR"))("defaultColorPanelExpandedd",!0)}const ie=function(){return["left","center","right"]};function oe(e,t){if(1&e){const e=v.Tb();v.Sb(0,"div",85),v.Sb(1,"h3"),v.Fc(2),v.ec(3,"translate"),v.Rb(),v.Sb(4,"section",86),v.Nb(5,"pu-dropdown",87),v.Sb(6,"div",88),v.Zb("click",(function(){v.uc(e);const t=v.dc(2);return t.paletteVisible=!t.paletteVisible})),v.Nb(7,"div",89),v.Rb(),v.Rb(),v.Sb(8,"section",90),v.Dc(9,te,1,4,"i",91),v.Nb(10,"div",92),v.Sb(11,"img",93),v.Zb("click",(function(){v.uc(e);const t=v.dc(2);return t.selectedControl.patchValue({bold:!t.selectedControl.value.bold})})),v.Rb(),v.Sb(12,"img",94),v.Zb("click",(function(){v.uc(e);const t=v.dc(2);return t.selectedControl.patchValue({italic:!t.selectedControl.value.italic})})),v.Rb(),v.Rb(),v.Dc(13,ne,3,7,"pu-color-palette",95),v.Rb()}if(2&e){const e=v.dc(2);v.zb(2),v.Gc(v.fc(3,10,"FONT")),v.zb(3),v.jc("options",e.FontSizeOptions),v.zb(2),v.Bc("background-color",e.selectedControl.value.color),v.zb(2),v.jc("ngForOf",v.mc(12,ie)),v.zb(2),v.Eb("selected",e.selectedControl.value.bold),v.zb(1),v.Eb("selected",e.selectedControl.value.italic),v.zb(1),v.jc("ngIf",e.paletteVisible)}}function re(e,t){if(1&e){const e=v.Tb();v.Sb(0,"section",45),v.Sb(1,"h2"),v.Fc(2),v.ec(3,"translate"),v.Rb(),v.Dc(4,H,7,8,"div",46),v.Dc(5,Z,7,8,"div",46),v.Sb(6,"div",47),v.Sb(7,"h3"),v.Fc(8),v.ec(9,"translate"),v.Rb(),v.Sb(10,"section",48),v.Dc(11,B,1,2,"div",49),v.Rb(),v.Rb(),v.Dc(12,Y,8,7,"div",50),v.Dc(13,Q,13,11,"div",51),v.Sb(14,"div",52),v.Sb(15,"h3"),v.Fc(16),v.ec(17,"translate"),v.Rb(),v.Sb(18,"section",53),v.Nb(19,"pu-slider",54),v.Sb(20,"pu-input",55),v.Zb("keydown.enter",(function(t){return v.uc(e),t.target.blur()})),v.Rb(),v.Rb(),v.Rb(),v.Dc(21,ee,9,10,"div",56),v.Sb(22,"div",52),v.Sb(23,"h3"),v.Fc(24),v.ec(25,"translate"),v.Rb(),v.Sb(26,"section",53),v.Nb(27,"pu-slider",57),v.Sb(28,"pu-input",58),v.Zb("keydown.enter",(function(t){return v.uc(e),t.target.blur()})),v.Rb(),v.Rb(),v.Rb(),v.Dc(29,oe,14,13,"div",59),v.Sb(30,"div",33),v.Sb(31,"h3"),v.Fc(32),v.ec(33,"translate"),v.Nb(34,"i",60),v.ec(35,"translate"),v.Nb(36,"pu-toggle-button",61),v.Rb(),v.Sb(37,"div",62),v.Sb(38,"section",63),v.Sb(39,"span",64),v.Fc(40),v.ec(41,"translate"),v.Rb(),v.Sb(42,"pu-input-value",65),v.Zb("keyup.enter",(function(t){return v.uc(e),t.target.blur()})),v.Rb(),v.Rb(),v.Sb(43,"section",63),v.Sb(44,"span",64),v.Fc(45),v.ec(46,"translate"),v.Rb(),v.Sb(47,"pu-input-value",66),v.Zb("keyup.enter",(function(t){return v.uc(e),t.target.blur()})),v.Rb(),v.Rb(),v.Rb(),v.Rb(),v.Rb()}if(2&e){const e=v.dc();v.jc("formGroup",e.selectedControl),v.zb(2),v.Gc(v.fc(3,30,e.WatermarkUtils.isText(e.selectedControl.value)?"TEXT_WATERMARK":"IMAGE_WATERMARK")),v.zb(2),v.jc("ngIf",e.WatermarkUtils.isScreenWatermark(e.selectedTab)),v.zb(1),v.jc("ngIf",e.WatermarkUtils.isScreenWatermark(e.selectedTab)),v.zb(3),v.Gc(v.fc(9,32,"WATERMARK_POSITION")),v.zb(3),v.jc("ngForOf",e.WatermarkAlignments),v.zb(1),v.jc("ngIf",e.WatermarkUtils.isText(e.selectedControl.value)),v.zb(1),v.jc("ngIf",e.WatermarkUtils.isImage(e.selectedControl.value)),v.zb(3),v.Gc(v.fc(17,34,"OPACITY")),v.zb(3),v.jc("max",100)("min",0),v.zb(2),v.jc("ngIf",e.WatermarkUtils.isImage(e.selectedControl.value)),v.zb(3),v.Gc(v.fc(25,36,"ROTATION")),v.zb(3),v.jc("max",360)("min",0),v.zb(2),v.jc("ngIf",e.WatermarkUtils.isText(e.selectedControl.value)),v.zb(1),v.Eb("disabled",!e.selectedControl.value._repeat),v.zb(2),v.Hc(" ",v.fc(33,38,"REPEAT")," "),v.zb(2),v.jc("sdTooltip",v.fc(35,40,e.WatermarkUtils.isText(e.selectedControl.value)?"TEXT_WATERMARK_REPEAT_DESCRIPTION":"IMAGE_WATERMARK_REPEAT_DESCRIPTION")),v.zb(6),v.Gc(v.fc(41,42,"HEIGHT_INTERVAL")),v.zb(2),v.jc("max",1e3)("min",1)("width",127)("height",30),v.zb(3),v.Gc(v.fc(46,44,"WIDTH_INTERVAL")),v.zb(2),v.jc("max",1e3)("min",1)("width",127)("height",30)}}function ae(e,t){if(1&e&&(v.Sb(0,"div",98),v.Fc(1),v.Rb()),2&e){const e=t.$implicit,n=t.rect;v.Bc("top",n.top-50,"px")("left",n.left-100,"px"),v.zb(1),v.Gc(e)}}const ce=[1,2,3,4,0,5,6,7,8],le=["SCREEN","FILE"],se=["{{date}}","{{ip-address}}"],be=[{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9},{label:"10",value:10},{label:"12",value:12},{label:"14",value:14},{label:"16",value:16},{label:"18",value:18},{label:"20",value:20},{label:"22",value:22},{label:"24",value:24},{label:"26",value:26},{label:"28",value:28},{label:"36",value:36},{label:"48",value:48},{label:"72",value:72}];let ge=(()=>{class e{constructor(e,t,n,i,o,r,a,c,l,s,b,g){this.fb=e,this.subscriptionService=t,this.contentService=n,this.changeDetectorRef=i,this.watermarkService=o,this.watermarkSettingsService=r,this.renderingService=a,this.dialogService=c,this.toastService=l,this.translatePipe=s,this.tooltipService=b,this.localStorageService=g,this.fontNameOptions=[],this.globalForm=this.fb.group({fileEnabled:!0}),this.watermarkControls=this.fb.array([]),this.selectedTab="SCREEN",this.selectedControl=null,this.controlSubscriptionMap=new Map,this.renderingSubscription=null,this.beforeunloadSubscription=null,this.paletteVisible=!1,this.configPanelVisible=!1,this.previewImage=null,this.previewMenuVisible=!1,this.previewMenuControls=this.fb.group({view:!0,print:!0})}get WatermarkUtils(){return C.D}get WatermarkAlignments(){return ce}get WatermarkRenderingTypes(){return le}get TextKeywords(){return se}get FontSizeOptions(){return be}get pageSize(){return{x:0,y:0,h:842*(C.F.width>1480?1:.9),w:595*(C.F.width>1480?1:.9)}}get previewWatermarkSizeStyles(){return C.D.getPreviewWatermarkSizeStyles(this.pageSize)}get currentControls(){return this.filterControls(this.selectedTab)}get formChanged(){return null!==this.beforeunloadSubscription}ngOnInit(){this.localStorageService.get(c.c.watermarkStorage)&&this.previewMenuControls.setValue(JSON.parse(this.localStorageService.get(c.c.watermarkStorage)),{emitEvent:!1}),this.subscriptionService.push(C.F.windowResize$.subscribe({next:()=>{this.changeDetectorRef.markForCheck()}}),this.contentService.fontsResponse$.pipe(d.a({next:e=>{this.fontNameOptions=e.fontList.map(e=>({label:e.label[1042]||e.label[0]||e.name,value:e.name,available:!0}))}})).subscribe({next:()=>this.initWatermarks()}),this.dialogService.dialogEvent$.pipe(f.a(e=>e.dialogType===o.c.DELETE),f.a(e=>"confirm"===e.action)).subscribe({next:e=>{this.deleteWatermark(e.data),this.dialogService.closeCurrentActiveDialog()}}),this.previewMenuControls.valueChanges.subscribe({next:e=>{this.localStorageService.set(c.c.watermarkStorage,JSON.stringify(e))}}))}ngAfterViewInit(){this.tooltipService.registerContainer(this.tooltipContainerDirective)}onKeywordMousedown(e,t){e.preventDefault();const n=this.textAreaElement.nativeElement===document.activeElement,i=this.textAreaElement.nativeElement.selectionStart,o=this.textAreaElement.nativeElement.selectionEnd;if(n){const e=this.selectedControl.value.text,n=e.slice(0,i),r=i!==e.length?e.slice(i-e.length):"";this.selectedControl.patchValue({text:`${n}${t}${r}`}),this.textAreaElement.nativeElement.setSelectionRange(i+t.length,o+t.length)}else this.selectedControl.patchValue({text:`${this.selectedControl.value.text}${t}`})}togglePanelVisible(){0!==this.currentControls.length&&(this.configPanelVisible=!this.configPanelVisible,this.previewMenuVisible=!1)}selectTab(e){this.selectedControl&&!this.validateImageWatermark([this.selectedControl.value])||(this.selectedTab=e,this.selectWatermark(this.currentControls[0]||null),this.subscriptionService.push(this.renderPreview().subscribe()))}createWatermark(e){if(this.selectedControl&&!this.validateImageWatermark([this.selectedControl.value]))return;const[t,n]=this.watermarkSettingsService.createControl(e);t.patchValue({renderTarget:this.selectedTab,name:this.watermarkSettingsService.generateName(e,this.currentControls.map(e=>e.value.name)),size:this.FontSizeOptions.find(e=>16===e.value),fontName:this.fontNameOptions[0]},{emitEvent:!1}),this.watermarkControls.push(t),this.controlSubscriptionMap.set(t,n),this.selectWatermark(t,!0),this.subscribeBeforeunload()}openDeleteWatermarkDialog(e,t){t.stopPropagation(),this.dialogService.toggleDialogVisibility(o.c.DELETE,!0,{title:this.translatePipe.transform("WATERMARK_DELETE_TITLE"),description:this.translatePipe.transform("WATERMARK_DELETE_DESCRIPTION"),size:{width:336,height:280},data:e})}deleteWatermark(e){const t=this.watermarkControls.controls.indexOf(e);this.watermarkControls.removeAt(t),this.controlSubscriptionMap.get(e).forEach(e=>e.unsubscribe()),this.controlSubscriptionMap.delete(e),e===this.selectedControl&&(this.selectWatermark(this.currentControls[this.currentControls.length-1],!0),this.configPanelVisible=!1),this.subscriptionService.push(this.renderPreview().subscribe()),this.subscribeBeforeunload()}selectWatermark(e,t=!1){var n;if(t||!this.selectedControl||this.validateImageWatermark([this.selectedControl.value])){if(this.renderingSubscription&&this.renderingSubscription.unsubscribe(),e){const t=e.value;this.renderingSubscription=e.valueChanges.pipe(f.a((e,n)=>Number.isNaN(e)?Number.isNaN(t):0!==Object.keys(C.g.diff(e,t)).length),d.a({next:()=>this.subscribeBeforeunload()}),u.a(500),f.a(e=>this.validateImageWatermark([e])),m.a(()=>this.renderPreview())).subscribe(),this.subscriptionService.push(this.renderingSubscription)}this.selectedControl=e,this.forceUpdateFormGroupStatus(null===(n=this.selectedControl)||void 0===n?void 0:n.get("_repeat").value,["_repeatWidth","_repeatHeight"]),this.configPanelVisible=Boolean(e),this.paletteVisible=!1,this.previewMenuVisible=!1,this.changeDetectorRef.markForCheck()}}saveWatermarks(){const e=this.watermarkSettingsService.exportWatermarkChanges(this.filterControls("SCREEN")),t=this.watermarkSettingsService.exportWatermarkChanges(this.filterControls("FILE"));this.validateImageWatermark(this.currentControls.map(e=>e.value))&&this.subscriptionService.push(l.a(this.watermarkService.saveChanges("SCREEN",!0,e),this.watermarkService.saveChanges("FILE",this.globalForm.get("fileEnabled").value,t)).subscribe({next:()=>{this.initWatermarks(),this.toastService.showToast({icon:"success",text:"CHANGES_SAVED"})},error:()=>{this.toastService.showToast({icon:"failed",text:"ERROR_PAGES_500"})}}))}clearWatermarks(){this.dialogService.toggleDialogVisibility(o.c.WARNING,!0,{size:{width:336,height:280},title:this.translatePipe.transform("CANCEL"),description:this.translatePipe.transform("WATERMARK_CANCEL_DESCRIPTION")}),this.subscriptionService.push(this.dialogService.dialogEvent$.pipe(f.a(e=>"confirm"===e.action&&e.dialogType===o.c.WARNING)).subscribe({next:()=>{this.dialogService.closeCurrentActiveDialog(),this.initWatermarks()}}))}initWatermarks(){this.subscriptionService.push(l.a(this.watermarkService.fetchChanges("SCREEN"),this.watermarkService.fetchChanges("FILE")).pipe(x.a(e=>e.map(e=>({enabled:e.enabled,controls:this.watermarkSettingsService.importWatermarkChanges(e.changes)})))).subscribe({next:([e,t])=>{var n;this.globalForm=this.fb.group({fileEnabled:t.enabled}),this.subscriptionService.push(this.globalForm.valueChanges.subscribe({next:()=>this.subscribeBeforeunload()})),this.selectedControl=null,this.watermarkControls.controls.forEach(e=>{var t;return null===(t=this.controlSubscriptionMap.get(e))||void 0===t?void 0:t.forEach(e=>e.unsubscribe())}),this.watermarkControls=this.fb.array([]),this.controlSubscriptionMap=new Map,null===(n=this.beforeunloadSubscription)||void 0===n||n.unsubscribe(),this.beforeunloadSubscription=null,[...e.controls,...t.controls].forEach(e=>{const[t,n]=this.watermarkSettingsService.createControl(e.value.type,e);e.patchValue({size:this.FontSizeOptions.find(t=>t.value===e.value.size),fontName:this.fontNameOptions.find(t=>t.value===e.value.fontName)},{emitEvent:!1}),this.watermarkControls.push(e),this.controlSubscriptionMap.set(e,n)}),this.selectWatermark(this.watermarkControls.controls.filter(e=>e.value.renderTarget===this.selectedTab)[0]||null),this.changeDetectorRef.markForCheck(),this.subscriptionService.push(this.renderPreview().subscribe())}}))}onFileChange(e,t){const n=Array.from(e.files||[])[0];e.value="",n&&this.subscriptionService.push(a.b.fromFile(n).pipe(m.a(e=>this.watermarkService.renderAppearance(e))).subscribe({next:e=>{this.selectedControl.get("imageData").setValue(e),t.writeValue(n.name||"")},error:()=>{this.toastService.showToast({icon:"failed",text:"FORMAT_ERROR"})}}))}onMoreMenuClick(){this.previewMenuVisible=!this.previewMenuVisible}filterControls(e){return this.watermarkControls.controls.filter(t=>t.value.renderTarget===e)}renderPreview(){return s.a(()=>(this.previewImage=null,this.changeDetectorRef.markForCheck(),b.a(this.watermarkSettingsService.exportWatermarkChanges(this.currentControls)))).pipe(m.a(e=>this.renderingService.renderWatermarks(e,100)),d.a({next:e=>{this.previewImage=e,this.changeDetectorRef.markForCheck()}}),h.a(void 0))}subscribeBeforeunload(){this.beforeunloadSubscription||(this.beforeunloadSubscription=g.a(window,"beforeunload").subscribe({next:e=>{e.preventDefault(),e.returnValue=!1}}),this.subscriptionService.push(this.beforeunloadSubscription))}validateImageWatermark(e){const t=e.some(e=>C.D.isImage(e)&&!e.imageData);return t&&this.toastService.showToast({icon:"failed",text:"WATERMARK_NEED_IMAGE"}),!t}forceUpdateFormGroupStatus(e,t,n=!1){const i=e?"enable":"disable";p.a(0).subscribe({next:()=>t.forEach(e=>{var t;return null===(t=this.selectedControl)||void 0===t?void 0:t.get(e)[i]({emitEvent:n})})})}}return e.\u0275fac=function(t){return new(t||e)(v.Mb(k.g),v.Mb(i.G),v.Mb(w.f),v.Mb(v.h),v.Mb(M.c),v.Mb(_),v.Mb(S.e),v.Mb(o.b),v.Mb(O.c),v.Mb(P.d),v.Mb(r.d),v.Mb(R.b))},e.\u0275cmp=v.Gb({type:e,selectors:[["sd-watermark-settings"]],viewQuery:function(e,t){var n;1&e&&(v.Lc(r.b,!0),v.Lc(I,!0)),2&e&&(v.sc(n=v.ac())&&(t.tooltipContainerDirective=n.first),v.sc(n=v.ac())&&(t.textAreaElement=n.first))},features:[v.yb([i.G,{provide:r.a,useValue:0}])],decls:41,vars:34,consts:[[1,"tabview"],[1,"tabview-header"],["class","tabview-header-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"tabview-body","config",3,"formGroup"],["class","config-global",4,"ngIf"],[1,"config-toolbar"],["size","tiny","color","dark",1,"ep-button",3,"click"],[1,"papycon","papycon-plus3"],[1,"right-button"],["class","ep-text-button",3,"disabled","click",4,"ngIf"],[1,"ep-text-button",3,"disabled","click"],[1,"papycon","papycon-show-panel"],["class","more-menu-container",3,"formGroup",4,"ngIf"],[1,"config-view"],[1,"config-list"],["class","config-list-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"config-preview"],["class","preview-watermark",3,"ngStyle",4,"ngIf"],["class","preview-watermark",4,"ngIf"],["class","spin-loader",4,"ngIf"],["class","config-panel",3,"formGroup",4,"ngIf"],[1,"config-footer"],["size","small","color","white",1,"ep-button",3,"disabled","click"],["color","primary","size","small",1,"ep-button",3,"disabled","click"],["class","tooltip",3,"top","left",4,"sdTooltipContainer"],[1,"tabview-header-item",3,"click"],[1,"config-global"],[1,"config-global-item"],["formControlName","fileEnabled"],[1,"config-global-item-content"],[1,"papycon","papycon-more-symbol4"],[1,"more-menu-container",3,"formGroup"],[1,"more-menu"],[1,"config-panel-item","input"],["formControlName","view"],["formControlName","print"],[1,"config-list-item",3,"click"],[1,"config-list-item-button","papycon","papycon-minus2",3,"click"],[1,"preview-watermark",3,"ngStyle"],[4,"ngFor","ngForOf"],["sdWatermark","","ondragstart","return false","class","watermark-view",3,"watermarkControl","pageSize",4,"ngIf"],["sdWatermark","","ondragstart","return false",1,"watermark-view",3,"watermarkControl","pageSize"],[1,"preview-watermark"],[3,"sdImage"],[1,"spin-loader"],[1,"config-panel",3,"formGroup"],["class","config-panel-item input",3,"disabled",4,"ngIf"],[1,"config-panel-item","align"],[1,"align-display"],["class","align-display-item",3,"selected","click",4,"ngFor","ngForOf"],["class","config-panel-item text",4,"ngIf"],["class","config-panel-item image",4,"ngIf"],[1,"config-panel-item","slider"],[1,"slider-container"],["formControlName","opacity",1,"slider-slider",3,"max","min"],["size","tiny","formControlName","opacityInput",1,"slider-input",3,"keydown.enter"],["class","config-panel-item input",4,"ngIf"],["formControlName","rotate",1,"slider-slider",3,"max","min"],["size","tiny","formControlName","rotateInput",1,"slider-input",3,"keydown.enter"],["class","config-panel-item font",4,"ngIf"],[1,"papycon","papycon-questionmark",3,"sdTooltip"],["formControlName","_repeat"],[1,"input-section"],[1,"input-container"],[1,"input-title"],["formControlName","_repeatHeight",1,"input-input-value",3,"max","min","width","height","keyup.enter"],["formControlName","_repeatWidth",1,"input-input-value",3,"max","min","width","height","keyup.enter"],["formControlName","allowView"],["formControlName","allowPrint"],[1,"align-display-item",3,"click"],[1,"config-panel-item","text"],["formControlName","text",1,"text-input",3,"placeholder"],["textAreaElement",""],["class","text-button-container",4,"ngIf"],[1,"text-button-container"],["class","text-button",3,"mousedown",4,"ngFor","ngForOf"],[1,"text-button",3,"mousedown"],[1,"config-panel-item","image"],[1,"image-container"],["color","white","size","tiny",1,"ep-button",3,"click"],["disabled","","ngModel","",1,"image-input",3,"ngModelOptions","placeholder"],["fileNameForm",""],["type","file","hidden","",3,"change"],["fileForm",""],["formControlName","scale",1,"input-input-value",3,"max","min","width","height"],[1,"config-panel-item","font"],[1,"font-basic"],["formControlName","size",1,"font-basic-size",3,"options"],[1,"font-basic-color-container",3,"click"],[1,"font-basic-color"],[1,"font-more"],["class","papycon",3,"selected","class","click",4,"ngFor","ngForOf"],[1,"font-divider"],["src","assets/icons/bold-text.svg",3,"click"],["src","assets/icons/italic-text.svg",3,"click"],["formControlName","color",3,"customColorLabel","defaultColorLabel","defaultColorPanelExpandedd",4,"ngIf"],[1,"papycon",3,"click"],["formControlName","color",3,"customColorLabel","defaultColorLabel","defaultColorPanelExpandedd"],[1,"tooltip"]],template:function(e,t){1&e&&(v.Sb(0,"h1"),v.Fc(1),v.ec(2,"translate"),v.Rb(),v.Sb(3,"main",0),v.Sb(4,"header",1),v.Dc(5,A,3,5,"div",2),v.Rb(),v.Sb(6,"main",3),v.Dc(7,F,6,3,"section",4),v.Sb(8,"section",5),v.Sb(9,"button",6),v.Zb("click",(function(){return t.createWatermark("Image")})),v.Nb(10,"i",7),v.Fc(11),v.ec(12,"translate"),v.Rb(),v.Sb(13,"button",6),v.Zb("click",(function(){return t.createWatermark("Text")})),v.Nb(14,"i",7),v.Fc(15),v.ec(16,"translate"),v.Rb(),v.Sb(17,"div",8),v.Dc(18,D,2,2,"button",9),v.Sb(19,"button",10),v.Zb("click",(function(){return t.togglePanelVisible()})),v.Nb(20,"i",11),v.Rb(),v.Rb(),v.Dc(21,V,12,11,"div",12),v.Rb(),v.Sb(22,"section",13),v.Sb(23,"section",14),v.Sb(24,"h2"),v.Fc(25),v.ec(26,"translate"),v.Rb(),v.Dc(27,G,5,6,"div",15),v.Rb(),v.Sb(28,"section",16),v.Dc(29,K,2,2,"div",17),v.Dc(30,$,2,1,"div",18),v.Dc(31,U,1,0,"div",19),v.Rb(),v.Dc(32,re,48,46,"section",20),v.Rb(),v.Sb(33,"footer",21),v.Sb(34,"button",22),v.Zb("click",(function(){return t.clearWatermarks()})),v.Fc(35),v.ec(36,"translate"),v.Rb(),v.Sb(37,"button",23),v.Zb("click",(function(){return t.saveWatermarks()})),v.Fc(38),v.ec(39,"translate"),v.Rb(),v.Rb(),v.Rb(),v.Rb(),v.Dc(40,ae,2,5,"div",24)),2&e&&(v.zb(1),v.Gc(v.fc(2,22,"WATERMARK")),v.zb(4),v.jc("ngForOf",t.WatermarkRenderingTypes),v.zb(1),v.jc("formGroup",t.globalForm),v.zb(1),v.jc("ngIf",t.WatermarkUtils.isFileWatermark(t.selectedTab)),v.zb(1),v.Eb("border-top",t.WatermarkUtils.isFileWatermark(t.selectedTab)),v.zb(3),v.Hc(" ",v.fc(12,24,"IMAGE_WATERMARK")," "),v.zb(4),v.Hc(" ",v.fc(16,26,"TEXT_WATERMARK")," "),v.zb(3),v.jc("ngIf",t.WatermarkUtils.isScreenWatermark(t.selectedTab)),v.zb(1),v.jc("disabled",!t.selectedControl),v.Ab("color",t.configPanelVisible?"primary":"dark"),v.zb(2),v.jc("ngIf",t.previewMenuVisible&&t.WatermarkUtils.isScreenWatermark(t.selectedTab)),v.zb(4),v.Gc(v.fc(26,28,"LIST")),v.zb(2),v.jc("ngForOf",t.currentControls),v.zb(2),v.jc("ngIf",t.selectedControl&&t.WatermarkUtils.isScreenWatermark(t.selectedTab)),v.zb(1),v.jc("ngIf",t.previewImage&&t.WatermarkUtils.isFileWatermark(t.selectedTab)),v.zb(1),v.jc("ngIf",!t.previewImage&&!t.selectedControl),v.zb(1),v.jc("ngIf",t.selectedControl&&t.configPanelVisible),v.zb(2),v.jc("disabled",!t.formChanged),v.zb(1),v.Gc(v.fc(36,30,"CANCEL")),v.zb(2),v.jc("disabled",!t.formChanged),v.zb(1),v.Gc(v.fc(39,32,"SAVE_CHANGES")))},directives:[E.s,k.s,k.l,E.t,y.a,i.L,k.r,k.j,E.w,z.a,T.a,i.E,i.s,N.b,i.u,k.d,k.u,i.k,i.g],pipes:[W.a],styles:["[_nghost-%COMP%]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%;min-width:1165px}h1[_ngcontent-%COMP%]{font-family:NotoSans-Medium,sans-serif;margin-bottom:30px;font-size:28px}h1[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.tabview[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.tabview-header[_ngcontent-%COMP%]{z-index:2;-webkit-box-flex:0;-ms-flex:0 0 40px;flex:0 0 40px}.tabview-header-item[_ngcontent-%COMP%]{display:inline-block;height:100%;padding:13px 40px;-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid #dadada;border-top-left-radius:4px;border-top-right-radius:4px;color:#6c6c6c;font-family:NotoSans-Medium;font-size:14px;line-height:14px;cursor:pointer}.tabview-header-item.selected[_ngcontent-%COMP%]{border-bottom:1px solid transparent;color:#ff6100;background-color:#fff}.tabview-header-item[_ngcontent-%COMP%]:not(.selected){border-top:1px solid transparent;border-right:1px solid transparent;border-left:1px solid transparent}.tabview-body[_ngcontent-%COMP%]{z-index:1;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;margin-top:-1px;-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid #dadada;background-color:#fff}.config[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.config-global[_ngcontent-%COMP%]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;padding:20px 30px}.config-global-item[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:44px}.config-global-item[_ngcontent-%COMP%]   pu-toggle-button[_ngcontent-%COMP%]{margin-right:16px}.config-global-item-title[_ngcontent-%COMP%]{-webkit-box-flex:0;-ms-flex:0 0 127px;flex:0 0 127px;color:#1e1e1e;font-family:NotoSans-Regular;font-size:16px}.config-global-item-content[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;color:#6c6c6c;font-family:NotoSans-Regular;font-size:14px}.config-toolbar[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;padding:12px 16px;-webkit-box-sizing:border-box;box-sizing:border-box;border-bottom:1px solid #dadada}.config-toolbar[_ngcontent-%COMP%]   .ep-button[_ngcontent-%COMP%] + .ep-button[_ngcontent-%COMP%]{margin-left:12px}.config-toolbar[_ngcontent-%COMP%]   .right-button[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;margin-left:auto}.config-toolbar[_ngcontent-%COMP%]   .right-button[_ngcontent-%COMP%]   .ep-text-button[_ngcontent-%COMP%]{-webkit-box-align:normal;-ms-flex-align:normal;align-items:normal;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.config-toolbar[_ngcontent-%COMP%]   .right-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:4px}.config-toolbar[_ngcontent-%COMP%]   .right-button[_ngcontent-%COMP%]   .ep-text-button[_ngcontent-%COMP%] + .ep-text-button[_ngcontent-%COMP%]{margin-left:12px}.config-toolbar[_ngcontent-%COMP%]   .more-menu-container[_ngcontent-%COMP%]{position:relative;height:100%}.config-toolbar[_ngcontent-%COMP%]   .more-menu-container[_ngcontent-%COMP%]   .more-menu[_ngcontent-%COMP%]{z-index:1;width:223px;height:65px;position:absolute;padding:20px 16px;top:27px;right:-17px;background-color:#fff;border:1px solid #dadada}.config-toolbar[_ngcontent-%COMP%]   .more-menu-container[_ngcontent-%COMP%]   .more-menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{margin-top:25px}.config-toolbar[_ngcontent-%COMP%]   .ep-text-button[_ngcontent-%COMP%]{width:30px;height:30px;margin-left:auto;font-size:20px;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.config-toolbar[_ngcontent-%COMP%]   .ep-text-button[_ngcontent-%COMP%], .config-view[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.config-view[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto}.config-list[_ngcontent-%COMP%]{-webkit-box-flex:0;-ms-flex:0 0 240px;flex:0 0 240px;-webkit-box-sizing:border-box;box-sizing:border-box;border-right:1px solid #dadada;color:#1e1e1e}.config-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:38px 16px 22px}.config-list-item[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:10px 16px;cursor:pointer}.config-list-item.selected[_ngcontent-%COMP%], .config-list-item[_ngcontent-%COMP%]:hover{background-color:#f4f4f4}.config-list-item[_ngcontent-%COMP%]:hover   .config-list-item-button[_ngcontent-%COMP%]{display:block}.config-list-item[_ngcontent-%COMP%]   .config-list-item-button[_ngcontent-%COMP%]{display:none;font-size:14px}.config-list-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;font-size:20px}.config-list-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;margin-left:6px;font-family:NotoSans-Regular;font-size:13px}.config-preview[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;min-height:535px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;padding:11px 12px;background-color:#f7f8f9}.config-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background-color:#fff}.config-preview[_ngcontent-%COMP%]   .preview-watermark[_ngcontent-%COMP%]{position:relative;background-color:#fff}.config-preview[_ngcontent-%COMP%]   .watermark-view[_ngcontent-%COMP%]{position:absolute;color:#1e1e1e;top:0;width:100%;height:100%;overflow:hidden}.config-preview[_ngcontent-%COMP%]   .watermark-view[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;width:100%;height:auto}.config-preview[_ngcontent-%COMP%]   .watermark-view[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;white-space:nowrap;font-family:NotoSans-Regular}.config-preview[_ngcontent-%COMP%]   .watermark-view[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute}.config-preview[_ngcontent-%COMP%]   .spin-loader[_ngcontent-%COMP%]{width:56px;height:56px;border-style:solid;border-radius:50%;border-color:#ff6100 rgba(255,97,0,.2) rgba(255,97,0,.2);-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-animation:spin 1s ease-in-out infinite;animation:spin 1s ease-in-out infinite}@-webkit-keyframes spin{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes spin{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.config-panel[_ngcontent-%COMP%]{-webkit-box-flex:0;-ms-flex:0 0 300px;flex:0 0 300px;padding:28px 16px;-webkit-box-sizing:border-box;box-sizing:border-box;border-left:1px solid #dadada;color:#1e1e1e}.config-panel[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:28px}.config-panel-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:20px;font-family:NotoSans-Medium;font-size:13px;line-height:13px}.config-panel-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:3px 0 0 2px;cursor:pointer}.config-panel-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:12px}.config-panel-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   pu-toggle-button[_ngcontent-%COMP%]{margin-left:auto}.config-footer[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;padding:15px;-webkit-box-sizing:border-box;box-sizing:border-box;border-top:1px solid #dadada}.config-footer[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{margin-left:auto}.config-footer[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:10px}.align-display[_ngcontent-%COMP%]{width:122px;height:102px;padding:8px;-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid #dadada;border-radius:2px}.align-display-item[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;margin-left:27px;border-radius:2px;background-color:#dadada;cursor:pointer}.align-display-item[_ngcontent-%COMP%]:nth-child(3n+1){margin-left:0}.align-display-item[_ngcontent-%COMP%]:nth-child(n+4){margin-top:18px}.align-display-item[_ngcontent-%COMP%]:hover{background-color:#e65800}.align-display-item[_ngcontent-%COMP%]:active{background-color:#d95300}.align-display-item.selected[_ngcontent-%COMP%]{background-color:#ff6100}.text-input[_ngcontent-%COMP%]{width:100%;height:80px;overflow:auto}.text-button[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;-webkit-box-sizing:border-box;box-sizing:border-box;border:1px solid #ffdda8;border-radius:10px;color:#6c6c6c;background-color:#fff8ed;font-family:NotoSans-Regular;font-size:13px;line-height:13px;cursor:pointer}.text-button[_ngcontent-%COMP%]:hover{border-color:#f79f1a;color:#ff6100}.text-button[_ngcontent-%COMP%]:active{color:#d95300}.text-button-container[_ngcontent-%COMP%]{margin-top:10px}.text-button-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:10px}.image-container[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.image[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto}.image-input[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;margin-left:10px}.slider-container[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.slider-title[_ngcontent-%COMP%]{color:#1e1e1e;font-family:NotoSans-Regular;font-size:13px}.slider-slider[_ngcontent-%COMP%]{-webkit-box-flex:0;-ms-flex:0 0 170px;flex:0 0 170px}*[_ngcontent-%COMP%] + .slider-slider[_ngcontent-%COMP%]{margin-left:12px}.slider-input[_ngcontent-%COMP%]{-webkit-box-flex:0;-ms-flex:0 0 40px;flex:0 0 40px;margin-left:8px}.slider.disabled[_ngcontent-%COMP%]   .slider-title[_ngcontent-%COMP%]{color:#c4c4c4}.input-section[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.input-container[_ngcontent-%COMP%] + .input-container[_ngcontent-%COMP%]{margin-left:14px}.input-title[_ngcontent-%COMP%]{color:#6c6c6c;font-family:NotoSans-Regular;font-size:12px}.input-input-value[_ngcontent-%COMP%]{-webkit-box-flex:0;-ms-flex:0 0 170px;flex:0 0 170px;margin-top:6px}.input-input[_ngcontent-%COMP%]{-webkit-box-flex:0;-ms-flex:0 0 40px;flex:0 0 40px;margin-left:8px}.input.disabled[_ngcontent-%COMP%]   .input-title[_ngcontent-%COMP%]{color:#6c6c6c;opacity:.5}.font[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(n+2){margin-top:20px}.font-basic[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.font-basic[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:12px}.font-basic-name[_ngcontent-%COMP%]{-webkit-box-flex:0;-ms-flex:0 0 140px;flex:0 0 140px}.font-basic-size[_ngcontent-%COMP%]{-webkit-box-flex:0;-ms-flex:0 0 60px;flex:0 0 60px}.font-basic-color[_ngcontent-%COMP%]{width:100%;height:100%}.font-basic-color-container[_ngcontent-%COMP%]{-webkit-box-flex:0;-ms-flex:0 0 30px;flex:0 0 30px;padding:4px;border:1px solid #dadada;border-radius:2px}.font-more[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.font-more[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .font-more[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{-webkit-box-flex:0;-ms-flex:0 0 28px;flex:0 0 28px;height:28px;border-radius:2px;font-size:20px;line-height:28px;cursor:pointer}.font-more[_ngcontent-%COMP%]   i.selected[_ngcontent-%COMP%], .font-more[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover, .font-more[_ngcontent-%COMP%]   img.selected[_ngcontent-%COMP%], .font-more[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{background-color:#dadada}.font-more[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:14px}.font-divider[_ngcontent-%COMP%]{-webkit-box-flex:0;-ms-flex:0 0 1px;flex:0 0 1px;height:28px;background-color:#dadada}.tooltip[_ngcontent-%COMP%]{background-color:#363636;color:#fff;position:fixed;font-size:14px;font-family:NotoSans-Regular;z-index:1;padding:12px 22px 12px 15px;border-radius:2px;white-space:pre}.border-top[_ngcontent-%COMP%]{border-top:1px solid #dadada}"],changeDetection:0}),e})(),pe=(()=>{class e{constructor(e,t){this.dialogService=e,this.translatePipe=t}canDeactivate(e){return!e.formChanged||(this.dialogService.toggleDialogVisibility(o.c.WARNING,!0,{size:{width:336,height:280},title:this.translatePipe.transform("CANCEL"),description:this.translatePipe.transform("WATERMARK_CANCEL_DESCRIPTION")}),this.dialogService.dialogEvent$.pipe(f.a(e=>e.dialogType===o.c.WARNING&&"confirm"===e.action),x.a(()=>(this.dialogService.closeCurrentActiveDialog(),!0))))}}return e.\u0275fac=function(t){return new(t||e)(v.Wb(o.b),v.Wb(P.d))},e.\u0275prov=v.Ib({token:e,factory:e.\u0275fac}),e})();var de=n("ICc5"),fe=n("iInd");const ue=[{path:"",component:ge,canDeactivate:[pe]}];let me=(()=>{class e{}return e.\u0275mod=v.Kb({type:e}),e.\u0275inj=v.Jb({factory:function(t){return new(t||e)},imports:[[fe.g.forChild(ue)],fe.g]}),e})(),xe=(()=>{class e{}return e.\u0275mod=v.Kb({type:e}),e.\u0275inj=v.Jb({factory:function(t){return new(t||e)},providers:[_,pe],imports:[[E.c,k.n,me,i.M,k.B,i.t,i.v,i.F,i.l,i.h,P.b,S.d,de.a,r.c,i.x]]}),e})()}}]);