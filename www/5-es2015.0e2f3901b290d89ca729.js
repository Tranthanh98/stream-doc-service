(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"24iV":function(e,t,i){var n;!function(t,i){"use strict";"object"==typeof e.exports?e.exports=t.document?i(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}:i(t)}("undefined"!=typeof window?window:this,(function(i,o){"use strict";var s=[],r=i.document,a=Object.getPrototypeOf,c=s.slice,l=s.concat,h=s.push,d=s.indexOf,u={},p=u.toString,g=u.hasOwnProperty,f=g.toString,b=f.call(Object),m={};function v(e,t){var i=(t=t||r).createElement("script");i.text=e,t.head.appendChild(i).parentNode.removeChild(i)}var S="3.2.0",y=function(e,t){return new y.fn.init(e,t)},M=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,x=/^-ms-/,O=/-([a-z])/g,P=function(e,t){return t.toUpperCase()};function C(e){var t=!!e&&"length"in e&&e.length,i=y.type(e);return"function"!==i&&!y.isWindow(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}y.fn=y.prototype={jquery:S,constructor:y,length:0,toArray:function(){return c.call(this)},get:function(e){return null==e?c.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=y.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return y.each(this,e)},map:function(e){return this.pushStack(y.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(c.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:s.sort,splice:s.splice},y.extend=y.fn.extend=function(){var e,t,i,n,o,s,r=arguments[0]||{},a=1,c=arguments.length,l=!1;for("boolean"==typeof r&&(l=r,r=arguments[a]||{},a++),"object"==typeof r||y.isFunction(r)||(r={}),a===c&&(r=this,a--);a<c;a++)if(null!=(e=arguments[a]))for(t in e)i=r[t],r!==(n=e[t])&&(l&&n&&(y.isPlainObject(n)||(o=Array.isArray(n)))?(o?(o=!1,s=i&&Array.isArray(i)?i:[]):s=i&&y.isPlainObject(i)?i:{},r[t]=y.extend(l,s,n)):void 0!==n&&(r[t]=n));return r},y.extend({expando:"jQuery"+(S+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===y.type(e)},isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=y.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==p.call(e)||(t=a(e))&&(i=g.call(t,"constructor")&&t.constructor,"function"!=typeof i||f.call(i)!==b))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[p.call(e)]||"object":typeof e},globalEval:function(e){v(e)},camelCase:function(e){return e.replace(x,"ms-").replace(O,P)},each:function(e,t){var i,n=0;if(C(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(M,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(C(Object(e))?y.merge(i,"string"==typeof e?[e]:e):h.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:d.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,o=e.length;n<i;n++)e[o++]=t[n];return e.length=o,e},grep:function(e,t,i){for(var n=[],o=0,s=e.length,r=!i;o<s;o++)!t(e[o],o)!==r&&n.push(e[o]);return n},map:function(e,t,i){var n,o,s=0,r=[];if(C(e))for(n=e.length;s<n;s++)null!=(o=t(e[s],s,i))&&r.push(o);else for(s in e)null!=(o=t(e[s],s,i))&&r.push(o);return l.apply([],r)},guid:1,proxy:function(e,t){var i,n,o;if("string"==typeof t&&(i=e[t],t=e,e=i),y.isFunction(e))return n=c.call(arguments,2),(o=function(){return e.apply(t||this,n.concat(c.call(arguments)))}).guid=e.guid=e.guid||y.guid++,o},now:Date.now,support:m}),"function"==typeof Symbol&&(y.fn[Symbol.iterator]=s[Symbol.iterator]),y.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){u["[object "+t+"]"]=t.toLowerCase()}));var w=function(e){var t,i,n,o,s,r,a,c,l,h,d,u,p,g,f,b,m,v,S,y="sizzle"+1*new Date,M=e.document,x=0,O=0,P=ae(),C=ae(),w=ae(),_=function(e,t){return e===t&&(d=!0),0},T={}.hasOwnProperty,E=[],I=E.pop,R=E.push,k=E.push,N=E.slice,A=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},D="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",j="\\["+L+"*("+F+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+L+"*\\]",z=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",V=new RegExp(L+"+","g"),B=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),$=new RegExp("^"+L+"*,"+L+"*"),W=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),G=new RegExp(z),H=new RegExp("^"+F+"$"),q={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+D+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Z=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,J=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ee=function(e,t,i){var n="0x"+t-65536;return n!=n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ne=function(){u()},oe=Se((function(e){return!0===e.disabled&&("form"in e||"label"in e)}),{dir:"parentNode",next:"legend"});try{k.apply(E=N.call(M.childNodes),M.childNodes)}catch(se){k={apply:E.length?function(e,t){R.apply(e,N.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function re(e,t,n,o){var s,a,l,h,d,g,m,v=t&&t.ownerDocument,x=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==x&&9!==x&&11!==x)return n;if(!o&&((t?t.ownerDocument||t:M)!==p&&u(t),t=t||p,f)){if(11!==x&&(d=K.exec(e)))if(s=d[1]){if(9===x){if(!(l=t.getElementById(s)))return n;if(l.id===s)return n.push(l),n}else if(v&&(l=v.getElementById(s))&&S(t,l)&&l.id===s)return n.push(l),n}else{if(d[2])return k.apply(n,t.getElementsByTagName(e)),n;if((s=d[3])&&i.getElementsByClassName&&t.getElementsByClassName)return k.apply(n,t.getElementsByClassName(s)),n}if(i.qsa&&!w[e+" "]&&(!b||!b.test(e))){if(1!==x)v=t,m=e;else if("object"!==t.nodeName.toLowerCase()){for((h=t.getAttribute("id"))?h=h.replace(te,ie):t.setAttribute("id",h=y),a=(g=r(e)).length;a--;)g[a]="#"+h+" "+ve(g[a]);m=g.join(","),v=Q.test(e)&&be(t.parentNode)||t}if(m)try{return k.apply(n,v.querySelectorAll(m)),n}catch(O){}finally{h===y&&t.removeAttribute("id")}}}return c(e.replace(B,"$1"),t,n,o)}function ae(){var e=[];return function t(i,o){return e.push(i+" ")>n.cacheLength&&delete t[e.shift()],t[i+" "]=o}}function ce(e){return e[y]=!0,e}function le(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function he(e,t){for(var i=e.split("|"),o=i.length;o--;)n.attrHandle[i[o]]=t}function de(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function ue(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function fe(e){return ce((function(t){return t=+t,ce((function(i,n){for(var o,s=e([],i.length,t),r=s.length;r--;)i[o=s[r]]&&(i[o]=!(n[o]=i[o]))}))}))}function be(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in i=re.support={},s=re.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},u=re.setDocument=function(e){var t,o,r=e?e.ownerDocument||e:M;return r!==p&&9===r.nodeType&&r.documentElement?(g=(p=r).documentElement,f=!s(p),M!==p&&(o=p.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",ne,!1):o.attachEvent&&o.attachEvent("onunload",ne)),i.attributes=le((function(e){return e.className="i",!e.getAttribute("className")})),i.getElementsByTagName=le((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),i.getElementsByClassName=Y.test(p.getElementsByClassName),i.getById=le((function(e){return g.appendChild(e).id=y,!p.getElementsByName||!p.getElementsByName(y).length})),i.getById?(n.filter.ID=function(e){var t=e.replace(J,ee);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&f){var i=t.getElementById(e);return i?[i]:[]}}):(n.filter.ID=function(e){var t=e.replace(J,ee);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&f){var i,n,o,s=t.getElementById(e);if(s){if((i=s.getAttributeNode("id"))&&i.value===e)return[s];for(o=t.getElementsByName(e),n=0;s=o[n++];)if((i=s.getAttributeNode("id"))&&i.value===e)return[s]}return[]}}),n.find.TAG=i.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],o=0,s=t.getElementsByTagName(e);if("*"===e){for(;i=s[o++];)1===i.nodeType&&n.push(i);return n}return s},n.find.CLASS=i.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&f)return t.getElementsByClassName(e)},m=[],b=[],(i.qsa=Y.test(p.querySelectorAll))&&(le((function(e){g.appendChild(e).innerHTML="<a id='"+y+"'></a><select id='"+y+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&b.push("[*^$]="+L+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||b.push("\\["+L+"*(?:value|"+D+")"),e.querySelectorAll("[id~="+y+"-]").length||b.push("~="),e.querySelectorAll(":checked").length||b.push(":checked"),e.querySelectorAll("a#"+y+"+*").length||b.push(".#.+[+~]")})),le((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&b.push("name"+L+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&b.push(":enabled",":disabled"),g.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&b.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),b.push(",.*:")}))),(i.matchesSelector=Y.test(v=g.matches||g.webkitMatchesSelector||g.mozMatchesSelector||g.oMatchesSelector||g.msMatchesSelector))&&le((function(e){i.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),m.push("!=",z)})),b=b.length&&new RegExp(b.join("|")),m=m.length&&new RegExp(m.join("|")),t=Y.test(g.compareDocumentPosition),S=t||Y.test(g.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},_=t?function(e,t){if(e===t)return d=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===n?e===p||e.ownerDocument===M&&S(M,e)?-1:t===p||t.ownerDocument===M&&S(M,t)?1:h?A(h,e)-A(h,t):0:4&n?-1:1)}:function(e,t){if(e===t)return d=!0,0;var i,n=0,o=e.parentNode,s=t.parentNode,r=[e],a=[t];if(!o||!s)return e===p?-1:t===p?1:o?-1:s?1:h?A(h,e)-A(h,t):0;if(o===s)return de(e,t);for(i=e;i=i.parentNode;)r.unshift(i);for(i=t;i=i.parentNode;)a.unshift(i);for(;r[n]===a[n];)n++;return n?de(r[n],a[n]):r[n]===M?-1:a[n]===M?1:0},p):p},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&u(e),t=t.replace(U,"='$1']"),i.matchesSelector&&f&&!w[t+" "]&&(!m||!m.test(t))&&(!b||!b.test(t)))try{var n=v.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(o){}return re(t,p,null,[e]).length>0},re.contains=function(e,t){return(e.ownerDocument||e)!==p&&u(e),S(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!==p&&u(e);var o=n.attrHandle[t.toLowerCase()],s=o&&T.call(n.attrHandle,t.toLowerCase())?o(e,t,!f):void 0;return void 0!==s?s:i.attributes||!f?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},re.escape=function(e){return(e+"").replace(te,ie)},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,n=[],o=0,s=0;if(d=!i.detectDuplicates,h=!i.sortStable&&e.slice(0),e.sort(_),d){for(;t=e[s++];)t===e[s]&&(o=n.push(s));for(;o--;)e.splice(n[o],1)}return h=null,e},o=re.getText=function(e){var t,i="",n=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=o(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[n++];)i+=o(t);return i},(n=re.selectors={cacheLength:50,createPseudo:ce,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(J,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(J,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&G.test(i)&&(t=r(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(J,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=P[e+" "];return t||(t=new RegExp("(^|"+L+")"+e+"("+L+"|$)"))&&P(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,i){return function(n){var o=re.attr(n,e);return null==o?"!="===t:!t||(o+="","="===t?o===i:"!="===t?o!==i:"^="===t?i&&0===o.indexOf(i):"*="===t?i&&o.indexOf(i)>-1:"$="===t?i&&o.slice(-i.length)===i:"~="===t?(" "+o.replace(V," ")+" ").indexOf(i)>-1:"|="===t&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,o){var s="nth"!==e.slice(0,3),r="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,i,c){var l,h,d,u,p,g,f=s!==r?"nextSibling":"previousSibling",b=t.parentNode,m=a&&t.nodeName.toLowerCase(),v=!c&&!a,S=!1;if(b){if(s){for(;f;){for(u=t;u=u[f];)if(a?u.nodeName.toLowerCase()===m:1===u.nodeType)return!1;g=f="only"===e&&!g&&"nextSibling"}return!0}if(g=[r?b.firstChild:b.lastChild],r&&v){for(S=(p=(l=(h=(d=(u=b)[y]||(u[y]={}))[u.uniqueID]||(d[u.uniqueID]={}))[e]||[])[0]===x&&l[1])&&l[2],u=p&&b.childNodes[p];u=++p&&u&&u[f]||(S=p=0)||g.pop();)if(1===u.nodeType&&++S&&u===t){h[e]=[x,p,S];break}}else if(v&&(S=p=(l=(h=(d=(u=t)[y]||(u[y]={}))[u.uniqueID]||(d[u.uniqueID]={}))[e]||[])[0]===x&&l[1]),!1===S)for(;(u=++p&&u&&u[f]||(S=p=0)||g.pop())&&((a?u.nodeName.toLowerCase()!==m:1!==u.nodeType)||!++S||(v&&((h=(d=u[y]||(u[y]={}))[u.uniqueID]||(d[u.uniqueID]={}))[e]=[x,S]),u!==t)););return(S-=o)===n||S%n==0&&S/n>=0}}},PSEUDO:function(e,t){var i,o=n.pseudos[e]||n.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return o[y]?o(t):o.length>1?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,i){for(var n,s=o(e,t),r=s.length;r--;)e[n=A(e,s[r])]=!(i[n]=s[r])})):function(e){return o(e,0,i)}):o}},pseudos:{not:ce((function(e){var t=[],i=[],n=a(e.replace(B,"$1"));return n[y]?ce((function(e,t,i,o){for(var s,r=n(e,null,o,[]),a=e.length;a--;)(s=r[a])&&(e[a]=!(t[a]=s))})):function(e,o,s){return t[0]=e,n(t,null,s,i),t[0]=null,!i.pop()}})),has:ce((function(e){return function(t){return re(e,t).length>0}})),contains:ce((function(e){return e=e.replace(J,ee),function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}})),lang:ce((function(e){return H.test(e||"")||re.error("unsupported lang: "+e),e=e.replace(J,ee).toLowerCase(),function(t){var i;do{if(i=f?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===g},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return Z.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:fe((function(){return[0]})),last:fe((function(e,t){return[t-1]})),eq:fe((function(e,t,i){return[i<0?i+t:i]})),even:fe((function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e})),odd:fe((function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e})),lt:fe((function(e,t,i){for(var n=i<0?i+t:i;--n>=0;)e.push(n);return e})),gt:fe((function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e}))}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=ue(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=pe(t);function me(){}function ve(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function Se(e,t,i){var n=t.dir,o=t.next,s=o||n,r=i&&"parentNode"===s,a=O++;return t.first?function(t,i,o){for(;t=t[n];)if(1===t.nodeType||r)return e(t,i,o);return!1}:function(t,i,c){var l,h,d,u=[x,a];if(c){for(;t=t[n];)if((1===t.nodeType||r)&&e(t,i,c))return!0}else for(;t=t[n];)if(1===t.nodeType||r)if(h=(d=t[y]||(t[y]={}))[t.uniqueID]||(d[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[n]||t;else{if((l=h[s])&&l[0]===x&&l[1]===a)return u[2]=l[2];if(h[s]=u,u[2]=e(t,i,c))return!0}return!1}}function ye(e){return e.length>1?function(t,i,n){for(var o=e.length;o--;)if(!e[o](t,i,n))return!1;return!0}:e[0]}function Me(e,t,i,n,o){for(var s,r=[],a=0,c=e.length,l=null!=t;a<c;a++)(s=e[a])&&(i&&!i(s,n,o)||(r.push(s),l&&t.push(a)));return r}function xe(e,t,i,n,o,s){return n&&!n[y]&&(n=xe(n)),o&&!o[y]&&(o=xe(o,s)),ce((function(s,r,a,c){var l,h,d,u=[],p=[],g=r.length,f=s||function(e,t,i){for(var n=0,o=t.length;n<o;n++)re(e,t[n],i);return i}(t||"*",a.nodeType?[a]:a,[]),b=!e||!s&&t?f:Me(f,u,e,a,c),m=i?o||(s?e:g||n)?[]:r:b;if(i&&i(b,m,a,c),n)for(l=Me(m,p),n(l,[],a,c),h=l.length;h--;)(d=l[h])&&(m[p[h]]=!(b[p[h]]=d));if(s){if(o||e){if(o){for(l=[],h=m.length;h--;)(d=m[h])&&l.push(b[h]=d);o(null,m=[],l,c)}for(h=m.length;h--;)(d=m[h])&&(l=o?A(s,d):u[h])>-1&&(s[l]=!(r[l]=d))}}else m=Me(m===r?m.splice(g,m.length):m),o?o(null,r,m,c):k.apply(r,m)}))}function Oe(e){for(var t,i,o,s=e.length,r=n.relative[e[0].type],a=r||n.relative[" "],c=r?1:0,h=Se((function(e){return e===t}),a,!0),d=Se((function(e){return A(t,e)>-1}),a,!0),u=[function(e,i,n){var o=!r&&(n||i!==l)||((t=i).nodeType?h(e,i,n):d(e,i,n));return t=null,o}];c<s;c++)if(i=n.relative[e[c].type])u=[Se(ye(u),i)];else{if((i=n.filter[e[c].type].apply(null,e[c].matches))[y]){for(o=++c;o<s&&!n.relative[e[o].type];o++);return xe(c>1&&ye(u),c>1&&ve(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(B,"$1"),i,c<o&&Oe(e.slice(c,o)),o<s&&Oe(e=e.slice(o)),o<s&&ve(e))}u.push(i)}return ye(u)}function Pe(e,t){var i=t.length>0,o=e.length>0,s=function(s,r,a,c,h){var d,g,b,m=0,v="0",S=s&&[],y=[],M=l,O=s||o&&n.find.TAG("*",h),P=x+=null==M?1:Math.random()||.1,C=O.length;for(h&&(l=r===p||r||h);v!==C&&null!=(d=O[v]);v++){if(o&&d){for(g=0,r||d.ownerDocument===p||(u(d),a=!f);b=e[g++];)if(b(d,r||p,a)){c.push(d);break}h&&(x=P)}i&&((d=!b&&d)&&m--,s&&S.push(d))}if(m+=v,i&&v!==m){for(g=0;b=t[g++];)b(S,y,r,a);if(s){if(m>0)for(;v--;)S[v]||y[v]||(y[v]=I.call(c));y=Me(y)}k.apply(c,y),h&&!s&&y.length>0&&m+t.length>1&&re.uniqueSort(c)}return h&&(x=P,l=M),S};return i?ce(s):s}return me.prototype=n.filters=n.pseudos,n.setFilters=new me,r=re.tokenize=function(e,t){var i,o,s,r,a,c,l,h=C[e+" "];if(h)return t?0:h.slice(0);for(a=e,c=[],l=n.preFilter;a;){for(r in i&&!(o=$.exec(a))||(o&&(a=a.slice(o[0].length)||a),c.push(s=[])),i=!1,(o=W.exec(a))&&(i=o.shift(),s.push({value:i,type:o[0].replace(B," ")}),a=a.slice(i.length)),n.filter)!(o=q[r].exec(a))||l[r]&&!(o=l[r](o))||(i=o.shift(),s.push({value:i,type:r,matches:o}),a=a.slice(i.length));if(!i)break}return t?a.length:a?re.error(e):C(e,c).slice(0)},a=re.compile=function(e,t){var i,n=[],o=[],s=w[e+" "];if(!s){for(t||(t=r(e)),i=t.length;i--;)(s=Oe(t[i]))[y]?n.push(s):o.push(s);(s=w(e,Pe(o,n))).selector=e}return s},c=re.select=function(e,t,i,o){var s,c,l,h,d,u="function"==typeof e&&e,p=!o&&r(e=u.selector||e);if(i=i||[],1===p.length){if((c=p[0]=p[0].slice(0)).length>2&&"ID"===(l=c[0]).type&&9===t.nodeType&&f&&n.relative[c[1].type]){if(!(t=(n.find.ID(l.matches[0].replace(J,ee),t)||[])[0]))return i;u&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(s=q.needsContext.test(e)?0:c.length;s--&&!n.relative[h=(l=c[s]).type];)if((d=n.find[h])&&(o=d(l.matches[0].replace(J,ee),Q.test(c[0].type)&&be(t.parentNode)||t))){if(c.splice(s,1),!(e=o.length&&ve(c)))return k.apply(i,o),i;break}}return(u||a(e,p))(o,t,!f,i,!t||Q.test(e)&&be(t.parentNode)||t),i},i.sortStable=y.split("").sort(_).join("")===y,i.detectDuplicates=!!d,u(),i.sortDetached=le((function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))})),le((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||he("type|href|height|width",(function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),i.attributes&&le((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||he("value",(function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),le((function(e){return null==e.getAttribute("disabled")}))||he(D,(function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null})),re}(i);y.find=w,y.expr=w.selectors,y.expr[":"]=y.expr.pseudos,y.uniqueSort=y.unique=w.uniqueSort,y.text=w.getText,y.isXMLDoc=w.isXML,y.contains=w.contains,y.escapeSelector=w.escape;var _=function(e,t,i){for(var n=[],o=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&y(e).is(i))break;n.push(e)}return n},T=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},E=y.expr.match.needsContext;function I(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var R=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,k=/^.[^:#\[\.,]*$/;function N(e,t,i){return y.isFunction(t)?y.grep(e,(function(e,n){return!!t.call(e,n,e)!==i})):t.nodeType?y.grep(e,(function(e){return e===t!==i})):"string"!=typeof t?y.grep(e,(function(e){return d.call(t,e)>-1!==i})):k.test(t)?y.filter(t,e,i):(t=y.filter(t,e),y.grep(e,(function(e){return d.call(t,e)>-1!==i&&1===e.nodeType})))}y.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?y.find.matchesSelector(n,e)?[n]:[]:y.find.matches(e,y.grep(t,(function(e){return 1===e.nodeType})))},y.fn.extend({find:function(e){var t,i,n=this.length,o=this;if("string"!=typeof e)return this.pushStack(y(e).filter((function(){for(t=0;t<n;t++)if(y.contains(o[t],this))return!0})));for(i=this.pushStack([]),t=0;t<n;t++)y.find(e,o[t],i);return n>1?y.uniqueSort(i):i},filter:function(e){return this.pushStack(N(this,e||[],!1))},not:function(e){return this.pushStack(N(this,e||[],!0))},is:function(e){return!!N(this,"string"==typeof e&&E.test(e)?y(e):e||[],!1).length}});var A,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(y.fn.init=function(e,t,i){var n,o;if(!e)return this;if(i=i||A,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:D.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(y.merge(this,y.parseHTML(n[1],(t=t instanceof y?t[0]:t)&&t.nodeType?t.ownerDocument||t:r,!0)),R.test(n[1])&&y.isPlainObject(t))for(n in t)y.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(o=r.getElementById(n[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y.isFunction(e)?void 0!==i.ready?i.ready(e):e(y):y.makeArray(e,this)}).prototype=y.fn,A=y(r);var L=/^(?:parents|prev(?:Until|All))/,F={children:!0,contents:!0,next:!0,prev:!0};function j(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}y.fn.extend({has:function(e){var t=y(e,this),i=t.length;return this.filter((function(){for(var e=0;e<i;e++)if(y.contains(this,t[e]))return!0}))},closest:function(e,t){var i,n=0,o=this.length,s=[],r="string"!=typeof e&&y(e);if(!E.test(e))for(;n<o;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&y.find.matchesSelector(i,e))){s.push(i);break}return this.pushStack(s.length>1?y.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?d.call(y(e),this[0]):d.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(y.uniqueSort(y.merge(this.get(),y(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),y.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return _(e,"parentNode")},parentsUntil:function(e,t,i){return _(e,"parentNode",i)},next:function(e){return j(e,"nextSibling")},prev:function(e){return j(e,"previousSibling")},nextAll:function(e){return _(e,"nextSibling")},prevAll:function(e){return _(e,"previousSibling")},nextUntil:function(e,t,i){return _(e,"nextSibling",i)},prevUntil:function(e,t,i){return _(e,"previousSibling",i)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return I(e,"iframe")?e.contentDocument:(I(e,"template")&&(e=e.content||e),y.merge([],e.childNodes))}},(function(e,t){y.fn[e]=function(i,n){var o=y.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=y.filter(n,o)),this.length>1&&(F[e]||y.uniqueSort(o),L.test(e)&&o.reverse()),this.pushStack(o)}}));var z=/[^\x20\t\r\n\f]+/g;function V(e){return e}function B(e){throw e}function $(e,t,i,n){var o;try{e&&y.isFunction(o=e.promise)?o.call(e).done(t).fail(i):e&&y.isFunction(o=e.then)?o.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}y.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return y.each(e.match(z)||[],(function(e,i){t[i]=!0})),t}(e):y.extend({},e);var t,i,n,o,s=[],r=[],a=-1,c=function(){for(o=o||e.once,n=t=!0;r.length;a=-1)for(i=r.shift();++a<s.length;)!1===s[a].apply(i[0],i[1])&&e.stopOnFalse&&(a=s.length,i=!1);e.memory||(i=!1),t=!1,o&&(s=i?[]:"")},l={add:function(){return s&&(i&&!t&&(a=s.length-1,r.push(i)),function t(i){y.each(i,(function(i,n){y.isFunction(n)?e.unique&&l.has(n)||s.push(n):n&&n.length&&"string"!==y.type(n)&&t(n)}))}(arguments),i&&!t&&c()),this},remove:function(){return y.each(arguments,(function(e,t){for(var i;(i=y.inArray(t,s,i))>-1;)s.splice(i,1),i<=a&&a--})),this},has:function(e){return e?y.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return o=r=[],s=i="",this},disabled:function(){return!s},lock:function(){return o=r=[],i||t||(s=i=""),this},locked:function(){return!!o},fireWith:function(e,i){return o||(i=[e,(i=i||[]).slice?i.slice():i],r.push(i),t||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!n}};return l},y.extend({Deferred:function(e){var t=[["notify","progress",y.Callbacks("memory"),y.Callbacks("memory"),2],["resolve","done",y.Callbacks("once memory"),y.Callbacks("once memory"),0,"resolved"],["reject","fail",y.Callbacks("once memory"),y.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return y.Deferred((function(i){y.each(t,(function(t,n){var o=y.isFunction(e[n[4]])&&e[n[4]];s[n[1]]((function(){var e=o&&o.apply(this,arguments);e&&y.isFunction(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[n[0]+"With"](this,o?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,o){var s=0;function r(e,t,n,o){return function(){var a=this,c=arguments,l=function(){var i,l;if(!(e<s)){if((i=n.apply(a,c))===t.promise())throw new TypeError("Thenable self-resolution");y.isFunction(l=i&&("object"==typeof i||"function"==typeof i)&&i.then)?o?l.call(i,r(s,t,V,o),r(s,t,B,o)):(s++,l.call(i,r(s,t,V,o),r(s,t,B,o),r(s,t,V,t.notifyWith))):(n!==V&&(a=void 0,c=[i]),(o||t.resolveWith)(a,c))}},h=o?l:function(){try{l()}catch(i){y.Deferred.exceptionHook&&y.Deferred.exceptionHook(i,h.stackTrace),e+1>=s&&(n!==B&&(a=void 0,c=[i]),t.rejectWith(a,c))}};e?h():(y.Deferred.getStackHook&&(h.stackTrace=y.Deferred.getStackHook()),i.setTimeout(h))}}return y.Deferred((function(i){t[0][3].add(r(0,i,y.isFunction(o)?o:V,i.notifyWith)),t[1][3].add(r(0,i,y.isFunction(e)?e:V)),t[2][3].add(r(0,i,y.isFunction(n)?n:B))})).promise()},promise:function(e){return null!=e?y.extend(e,o):o}},s={};return y.each(t,(function(e,i){var r=i[2],a=i[5];o[i[1]]=r.add,a&&r.add((function(){n=a}),t[3-e][2].disable,t[0][2].lock),r.add(i[3].fire),s[i[0]]=function(){return s[i[0]+"With"](this===s?void 0:this,arguments),this},s[i[0]+"With"]=r.fireWith})),o.promise(s),e&&e.call(s,s),s},when:function(e){var t=arguments.length,i=t,n=Array(i),o=c.call(arguments),s=y.Deferred(),r=function(e){return function(i){n[e]=this,o[e]=arguments.length>1?c.call(arguments):i,--t||s.resolveWith(n,o)}};if(t<=1&&($(e,s.done(r(i)).resolve,s.reject,!t),"pending"===s.state()||y.isFunction(o[i]&&o[i].then)))return s.then();for(;i--;)$(o[i],r(i),s.reject);return s.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;y.Deferred.exceptionHook=function(e,t){i.console&&i.console.warn&&e&&W.test(e.name)&&i.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},y.readyException=function(e){i.setTimeout((function(){throw e}))};var U=y.Deferred();function G(){r.removeEventListener("DOMContentLoaded",G),i.removeEventListener("load",G),y.ready()}y.fn.ready=function(e){return U.then(e).catch((function(e){y.readyException(e)})),this},y.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--y.readyWait:y.isReady)||(y.isReady=!0,!0!==e&&--y.readyWait>0||U.resolveWith(r,[y]))}}),y.ready.then=U.then,"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?i.setTimeout(y.ready):(r.addEventListener("DOMContentLoaded",G),i.addEventListener("load",G));var H=function(e,t,i,n,o,s,r){var a=0,c=e.length,l=null==i;if("object"===y.type(i))for(a in o=!0,i)H(e,t,a,i[a],!0,s,r);else if(void 0!==n&&(o=!0,y.isFunction(n)||(r=!0),l&&(r?(t.call(e,n),t=null):(l=t,t=function(e,t,i){return l.call(y(e),i)})),t))for(;a<c;a++)t(e[a],i,r?n:n.call(e[a],a,t(e[a],i)));return o?e:l?t.call(e):c?t(e[0],i):s},q=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Z(){this.expando=y.expando+Z.uid++}Z.uid=1,Z.prototype={cache:function(e){var t=e[this.expando];return t||(t={},q(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,o=this.cache(e);if("string"==typeof t)o[y.camelCase(t)]=i;else for(n in t)o[y.camelCase(n)]=t[n];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][y.camelCase(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(y.camelCase):(t=y.camelCase(t))in n?[t]:t.match(z)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||y.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!y.isEmptyObject(t)}};var X=new Z,Y=new Z,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function J(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(Q,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:K.test(e)?JSON.parse(e):e)}(i)}catch(a){}Y.set(e,t,i)}else i=void 0;return i}y.extend({hasData:function(e){return Y.hasData(e)||X.hasData(e)},data:function(e,t,i){return Y.access(e,t,i)},removeData:function(e,t){Y.remove(e,t)},_data:function(e,t,i){return X.access(e,t,i)},_removeData:function(e,t){X.remove(e,t)}}),y.fn.extend({data:function(e,t){var i,n,o,s=this[0],r=s&&s.attributes;if(void 0===e){if(this.length&&(o=Y.get(s),1===s.nodeType&&!X.get(s,"hasDataAttrs"))){for(i=r.length;i--;)r[i]&&0===(n=r[i].name).indexOf("data-")&&(n=y.camelCase(n.slice(5)),J(s,n,o[n]));X.set(s,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each((function(){Y.set(this,e)})):H(this,(function(t){var i;if(s&&void 0===t){if(void 0!==(i=Y.get(s,e)))return i;if(void 0!==(i=J(s,e)))return i}else this.each((function(){Y.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){Y.remove(this,e)}))}}),y.extend({queue:function(e,t,i){var n;if(e)return n=X.get(e,t=(t||"fx")+"queue"),i&&(!n||Array.isArray(i)?n=X.access(e,t,y.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){var i=y.queue(e,t=t||"fx"),n=i.length,o=i.shift(),s=y._queueHooks(e,t);"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===t&&i.unshift("inprogress"),delete s.stop,o.call(e,(function(){y.dequeue(e,t)}),s)),!n&&s&&s.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return X.get(e,i)||X.access(e,i,{empty:y.Callbacks("once memory").add((function(){X.remove(e,[t+"queue",i])}))})}}),y.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?y.queue(this[0],e):void 0===t?this:this.each((function(){var i=y.queue(this,e,t);y._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&y.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){y.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,o=y.Deferred(),s=this,r=this.length,a=function(){--n||o.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";r--;)(i=X.get(s[r],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),o.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ie=["Top","Right","Bottom","Left"],ne=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&y.contains(e.ownerDocument,e)&&"none"===y.css(e,"display")},oe=function(e,t,i,n){var o,s,r={};for(s in t)r[s]=e.style[s],e.style[s]=t[s];for(s in o=i.apply(e,n||[]),t)e.style[s]=r[s];return o};function se(e,t,i,n){var o,s=1,r=20,a=n?function(){return n.cur()}:function(){return y.css(e,t,"")},c=a(),l=i&&i[3]||(y.cssNumber[t]?"":"px"),h=(y.cssNumber[t]||"px"!==l&&+c)&&te.exec(y.css(e,t));if(h&&h[3]!==l){l=l||h[3],i=i||[],h=+c||1;do{y.style(e,t,(h/=s=s||".5")+l)}while(s!==(s=a()/c)&&1!==s&&--r)}return i&&(h=+h||+c||0,o=i[1]?h+(i[1]+1)*i[2]:+i[2],n&&(n.unit=l,n.start=h,n.end=o)),o}var re={};function ae(e){var t,i=e.ownerDocument,n=e.nodeName,o=re[n];return o||(t=i.body.appendChild(i.createElement(n)),o=y.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),re[n]=o,o)}function ce(e,t){for(var i,n,o=[],s=0,r=e.length;s<r;s++)(n=e[s]).style&&(i=n.style.display,t?("none"===i&&(o[s]=X.get(n,"display")||null,o[s]||(n.style.display="")),""===n.style.display&&ne(n)&&(o[s]=ae(n))):"none"!==i&&(o[s]="none",X.set(n,"display",i)));for(s=0;s<r;s++)null!=o[s]&&(e[s].style.display=o[s]);return e}y.fn.extend({show:function(){return ce(this,!0)},hide:function(){return ce(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ne(this)?y(this).show():y(this).hide()}))}});var le=/^(?:checkbox|radio)$/i,he=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,de=/^$|\/(?:java|ecma)script/i,ue={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function pe(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&I(e,t)?y.merge([e],i):i}function ge(e,t){for(var i=0,n=e.length;i<n;i++)X.set(e[i],"globalEval",!t||X.get(t[i],"globalEval"))}ue.optgroup=ue.option,ue.tbody=ue.tfoot=ue.colgroup=ue.caption=ue.thead,ue.th=ue.td;var fe=/<|&#?\w+;/;function be(e,t,i,n,o){for(var s,r,a,c,l,h,d=t.createDocumentFragment(),u=[],p=0,g=e.length;p<g;p++)if((s=e[p])||0===s)if("object"===y.type(s))y.merge(u,s.nodeType?[s]:s);else if(fe.test(s)){for(r=r||d.appendChild(t.createElement("div")),a=(he.exec(s)||["",""])[1].toLowerCase(),r.innerHTML=(c=ue[a]||ue._default)[1]+y.htmlPrefilter(s)+c[2],h=c[0];h--;)r=r.lastChild;y.merge(u,r.childNodes),(r=d.firstChild).textContent=""}else u.push(t.createTextNode(s));for(d.textContent="",p=0;s=u[p++];)if(n&&y.inArray(s,n)>-1)o&&o.push(s);else if(l=y.contains(s.ownerDocument,s),r=pe(d.appendChild(s),"script"),l&&ge(r),i)for(h=0;s=r[h++];)de.test(s.type||"")&&i.push(s);return d}!function(){var e=r.createDocumentFragment().appendChild(r.createElement("div")),t=r.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),m.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var me=r.documentElement,ve=/^key/,Se=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ye=/^([^.]*)(?:\.(.+)|)/;function Me(){return!0}function xe(){return!1}function Oe(){try{return r.activeElement}catch(i){}}function Pe(e,t,i,n,o,s){var r,a;if("object"==typeof t){for(a in"string"!=typeof i&&(n=n||i,i=void 0),t)Pe(e,a,i,n,t[a],s);return e}if(null==n&&null==o?(o=i,n=i=void 0):null==o&&("string"==typeof i?(o=n,n=void 0):(o=n,n=i,i=void 0)),!1===o)o=xe;else if(!o)return e;return 1===s&&(r=o,(o=function(e){return y().off(e),r.apply(this,arguments)}).guid=r.guid||(r.guid=y.guid++)),e.each((function(){y.event.add(this,t,o,n,i)}))}y.event={global:{},add:function(e,t,i,n,o){var s,r,a,c,l,h,d,u,p,g,f,b=X.get(e);if(b)for(i.handler&&(i=(s=i).handler,o=s.selector),o&&y.find.matchesSelector(me,o),i.guid||(i.guid=y.guid++),(c=b.events)||(c=b.events={}),(r=b.handle)||(r=b.handle=function(t){return void 0!==y&&y.event.triggered!==t.type?y.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(z)||[""]).length;l--;)p=f=(a=ye.exec(t[l])||[])[1],g=(a[2]||"").split(".").sort(),p&&(d=y.event.special[p]||{},d=y.event.special[p=(o?d.delegateType:d.bindType)||p]||{},h=y.extend({type:p,origType:f,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&y.expr.match.needsContext.test(o),namespace:g.join(".")},s),(u=c[p])||((u=c[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,n,g,r)||e.addEventListener&&e.addEventListener(p,r)),d.add&&(d.add.call(e,h),h.handler.guid||(h.handler.guid=i.guid)),o?u.splice(u.delegateCount++,0,h):u.push(h),y.event.global[p]=!0)},remove:function(e,t,i,n,o){var s,r,a,c,l,h,d,u,p,g,f,b=X.hasData(e)&&X.get(e);if(b&&(c=b.events)){for(l=(t=(t||"").match(z)||[""]).length;l--;)if(p=f=(a=ye.exec(t[l])||[])[1],g=(a[2]||"").split(".").sort(),p){for(d=y.event.special[p]||{},u=c[p=(n?d.delegateType:d.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=s=u.length;s--;)h=u[s],!o&&f!==h.origType||i&&i.guid!==h.guid||a&&!a.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(u.splice(s,1),h.selector&&u.delegateCount--,d.remove&&d.remove.call(e,h));r&&!u.length&&(d.teardown&&!1!==d.teardown.call(e,g,b.handle)||y.removeEvent(e,p,b.handle),delete c[p])}else for(p in c)y.event.remove(e,p+t[l],i,n,!0);y.isEmptyObject(c)&&X.remove(e,"handle events")}},dispatch:function(e){var t,i,n,o,s,r,a=y.event.fix(e),c=new Array(arguments.length),l=(X.get(this,"events")||{})[a.type]||[],h=y.event.special[a.type]||{};for(c[0]=a,t=1;t<arguments.length;t++)c[t]=arguments[t];if(a.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,a)){for(r=y.event.handlers.call(this,a,l),t=0;(o=r[t++])&&!a.isPropagationStopped();)for(a.currentTarget=o.elem,i=0;(s=o.handlers[i++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(s.namespace)||(a.handleObj=s,a.data=s.data,void 0!==(n=((y.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,c))&&!1===(a.result=n)&&(a.preventDefault(),a.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,a),a.result}},handlers:function(e,t){var i,n,o,s,r,a=[],c=t.delegateCount,l=e.target;if(c&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(s=[],r={},i=0;i<c;i++)void 0===r[o=(n=t[i]).selector+" "]&&(r[o]=n.needsContext?y(o,this).index(l)>-1:y.find(o,this,null,[l]).length),r[o]&&s.push(n);s.length&&a.push({elem:l,handlers:s})}return l=this,c<t.length&&a.push({elem:l,handlers:t.slice(c)}),a},addProp:function(e,t){Object.defineProperty(y.Event.prototype,e,{enumerable:!0,configurable:!0,get:y.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[y.expando]?e:new y.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Oe()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Oe()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(le.test(this.type)&&this.click&&I(this,"input"))return this.click(),!1},_default:function(e){return I(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},y.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},y.Event=function(e,t){return this instanceof y.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Me:xe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&y.extend(this,t),this.timeStamp=e&&e.timeStamp||y.now(),void(this[y.expando]=!0)):new y.Event(e,t)},y.Event.prototype={constructor:y.Event,isDefaultPrevented:xe,isPropagationStopped:xe,isImmediatePropagationStopped:xe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Me,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Me,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Me,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},y.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&ve.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Se.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},y.event.addProp),y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){y.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,o=e.relatedTarget,s=e.handleObj;return o&&(o===n||y.contains(n,o))||(e.type=s.origType,i=s.handler.apply(this,arguments),e.type=t),i}}})),y.fn.extend({on:function(e,t,i,n){return Pe(this,e,t,i,n)},one:function(e,t,i,n){return Pe(this,e,t,i,n,1)},off:function(e,t,i){var n,o;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,y(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=xe),this.each((function(){y.event.remove(this,e,i,t)}))}});var Ce=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,we=/<script|<style|<link/i,_e=/checked\s*(?:[^=]|=\s*.checked.)/i,Te=/^true\/(.*)/,Ee=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ie(e,t){return I(e,"table")&&I(11!==t.nodeType?t:t.firstChild,"tr")&&y(">tbody",e)[0]||e}function Re(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ke(e){var t=Te.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Ne(e,t){var i,n,o,s,r,a,c,l;if(1===t.nodeType){if(X.hasData(e)&&(s=X.access(e),r=X.set(t,s),l=s.events))for(o in delete r.handle,r.events={},l)for(i=0,n=l[o].length;i<n;i++)y.event.add(t,o,l[o][i]);Y.hasData(e)&&(a=Y.access(e),c=y.extend({},a),Y.set(t,c))}}function Ae(e,t){var i=t.nodeName.toLowerCase();"input"===i&&le.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function De(e,t,i,n){t=l.apply([],t);var o,s,r,a,c,h,d=0,u=e.length,p=u-1,g=t[0],f=y.isFunction(g);if(f||u>1&&"string"==typeof g&&!m.checkClone&&_e.test(g))return e.each((function(o){var s=e.eq(o);f&&(t[0]=g.call(this,o,s.html())),De(s,t,i,n)}));if(u&&(s=(o=be(t,e[0].ownerDocument,!1,e,n)).firstChild,1===o.childNodes.length&&(o=s),s||n)){for(a=(r=y.map(pe(o,"script"),Re)).length;d<u;d++)c=o,d!==p&&(c=y.clone(c,!0,!0),a&&y.merge(r,pe(c,"script"))),i.call(e[d],c,d);if(a)for(h=r[r.length-1].ownerDocument,y.map(r,ke),d=0;d<a;d++)de.test((c=r[d]).type||"")&&!X.access(c,"globalEval")&&y.contains(h,c)&&(c.src?y._evalUrl&&y._evalUrl(c.src):v(c.textContent.replace(Ee,""),h))}return e}function Le(e,t,i){for(var n,o=t?y.filter(t,e):e,s=0;null!=(n=o[s]);s++)i||1!==n.nodeType||y.cleanData(pe(n)),n.parentNode&&(i&&y.contains(n.ownerDocument,n)&&ge(pe(n,"script")),n.parentNode.removeChild(n));return e}y.extend({htmlPrefilter:function(e){return e.replace(Ce,"<$1></$2>")},clone:function(e,t,i){var n,o,s,r,a=e.cloneNode(!0),c=y.contains(e.ownerDocument,e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||y.isXMLDoc(e)))for(r=pe(a),n=0,o=(s=pe(e)).length;n<o;n++)Ae(s[n],r[n]);if(t)if(i)for(s=s||pe(e),r=r||pe(a),n=0,o=s.length;n<o;n++)Ne(s[n],r[n]);else Ne(e,a);return(r=pe(a,"script")).length>0&&ge(r,!c&&pe(e,"script")),a},cleanData:function(e){for(var t,i,n,o=y.event.special,s=0;void 0!==(i=e[s]);s++)if(q(i)){if(t=i[X.expando]){if(t.events)for(n in t.events)o[n]?y.event.remove(i,n):y.removeEvent(i,n,t.handle);i[X.expando]=void 0}i[Y.expando]&&(i[Y.expando]=void 0)}}}),y.fn.extend({detach:function(e){return Le(this,e,!0)},remove:function(e){return Le(this,e)},text:function(e){return H(this,(function(e){return void 0===e?y.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return De(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ie(this,e).appendChild(e)}))},prepend:function(){return De(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ie(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return De(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return De(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(y.cleanData(pe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return y.clone(this,e,t)}))},html:function(e){return H(this,(function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!we.test(e)&&!ue[(he.exec(e)||["",""])[1].toLowerCase()]){e=y.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(y.cleanData(pe(t,!1)),t.innerHTML=e);t=0}catch(a){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return De(this,arguments,(function(t){var i=this.parentNode;y.inArray(this,e)<0&&(y.cleanData(pe(this)),i&&i.replaceChild(t,this))}),e)}}),y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){y.fn[e]=function(e){for(var i,n=[],o=y(e),s=o.length-1,r=0;r<=s;r++)i=r===s?this:this.clone(!0),y(o[r])[t](i),h.apply(n,i.get());return this.pushStack(n)}}));var Fe=/^margin/,je=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),ze=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(e)};function Ve(e,t,i){var n,o,s,r,a=e.style;return(i=i||ze(e))&&(""!==(r=i.getPropertyValue(t)||i[t])||y.contains(e.ownerDocument,e)||(r=y.style(e,t)),!m.pixelMarginRight()&&je.test(r)&&Fe.test(t)&&(n=a.width,o=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=i.width,a.width=n,a.minWidth=o,a.maxWidth=s)),void 0!==r?r+"":r}function Be(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}!function(){function e(){if(c){c.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",c.innerHTML="",me.appendChild(a);var e=i.getComputedStyle(c);t="1%"!==e.top,s="2px"===e.marginLeft,n="4px"===e.width,c.style.marginRight="50%",o="4px"===e.marginRight,me.removeChild(a),c=null}}var t,n,o,s,a=r.createElement("div"),c=r.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===c.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(c),y.extend(m,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return e(),n},pixelMarginRight:function(){return e(),o},reliableMarginLeft:function(){return e(),s}}))}();var $e=/^(none|table(?!-c[ea]).+)/,We=/^--/,Ue={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"},He=["Webkit","Moz","ms"],qe=r.createElement("div").style;function Ze(e){var t=y.cssProps[e];return t||(t=y.cssProps[e]=function(e){if(e in qe)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=He.length;i--;)if((e=He[i]+t)in qe)return e}(e)||e),t}function Xe(e,t,i){var n=te.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function Ye(e,t,i,n,o){var s,r=0;for(s=i===(n?"border":"content")?4:"width"===t?1:0;s<4;s+=2)"margin"===i&&(r+=y.css(e,i+ie[s],!0,o)),n?("content"===i&&(r-=y.css(e,"padding"+ie[s],!0,o)),"margin"!==i&&(r-=y.css(e,"border"+ie[s]+"Width",!0,o))):(r+=y.css(e,"padding"+ie[s],!0,o),"padding"!==i&&(r+=y.css(e,"border"+ie[s]+"Width",!0,o)));return r}function Ke(e,t,i){var n,o=ze(e),s=Ve(e,t,o),r="border-box"===y.css(e,"boxSizing",!1,o);return je.test(s)?s:(n=r&&(m.boxSizingReliable()||s===e.style[t]),(s=parseFloat(s)||0)+Ye(e,t,i||(r?"border":"content"),n,o)+"px")}function Qe(e,t,i,n,o){return new Qe.prototype.init(e,t,i,n,o)}y.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ve(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,s,r,a=y.camelCase(t),c=We.test(t),l=e.style;return c||(t=Ze(a)),r=y.cssHooks[t]||y.cssHooks[a],void 0===i?r&&"get"in r&&void 0!==(o=r.get(e,!1,n))?o:l[t]:("string"==(s=typeof i)&&(o=te.exec(i))&&o[1]&&(i=se(e,t,o),s="number"),void(null!=i&&i==i&&("number"===s&&(i+=o&&o[3]||(y.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),r&&"set"in r&&void 0===(i=r.set(e,i,n))||(c?l.setProperty(t,i):l[t]=i))))}},css:function(e,t,i,n){var o,s,r,a=y.camelCase(t);return We.test(t)||(t=Ze(a)),(r=y.cssHooks[t]||y.cssHooks[a])&&"get"in r&&(o=r.get(e,!0,i)),void 0===o&&(o=Ve(e,t,n)),"normal"===o&&t in Ge&&(o=Ge[t]),""===i||i?(s=parseFloat(o),!0===i||isFinite(s)?s||0:o):o}}),y.each(["height","width"],(function(e,t){y.cssHooks[t]={get:function(e,i,n){if(i)return!$e.test(y.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ke(e,t,n):oe(e,Ue,(function(){return Ke(e,t,n)}))},set:function(e,i,n){var o,s=n&&ze(e),r=n&&Ye(e,t,n,"border-box"===y.css(e,"boxSizing",!1,s),s);return r&&(o=te.exec(i))&&"px"!==(o[3]||"px")&&(e.style[t]=i,i=y.css(e,t)),Xe(0,i,r)}}})),y.cssHooks.marginLeft=Be(m.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ve(e,"marginLeft"))||e.getBoundingClientRect().left-oe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),y.each({margin:"",padding:"",border:"Width"},(function(e,t){y.cssHooks[e+t]={expand:function(i){for(var n=0,o={},s="string"==typeof i?i.split(" "):[i];n<4;n++)o[e+ie[n]+t]=s[n]||s[n-2]||s[0];return o}},Fe.test(e)||(y.cssHooks[e+t].set=Xe)})),y.fn.extend({css:function(e,t){return H(this,(function(e,t,i){var n,o,s={},r=0;if(Array.isArray(t)){for(n=ze(e),o=t.length;r<o;r++)s[t[r]]=y.css(e,t[r],!1,n);return s}return void 0!==i?y.style(e,t,i):y.css(e,t)}),e,t,arguments.length>1)}}),y.Tween=Qe,(Qe.prototype={constructor:Qe,init:function(e,t,i,n,o,s){this.elem=e,this.prop=i,this.easing=o||y.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=s||(y.cssNumber[i]?"":"px")},cur:function(){var e=Qe.propHooks[this.prop];return e&&e.get?e.get(this):Qe.propHooks._default.get(this)},run:function(e){var t,i=Qe.propHooks[this.prop];return this.pos=t=this.options.duration?y.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Qe.propHooks._default.set(this),this}}).init.prototype=Qe.prototype,(Qe.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=y.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){y.fx.step[e.prop]?y.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[y.cssProps[e.prop]]&&!y.cssHooks[e.prop]?e.elem[e.prop]=e.now:y.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Qe.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},y.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},y.fx=Qe.prototype.init,y.fx.step={};var Je,et,tt=/^(?:toggle|show|hide)$/,it=/queueHooks$/;function nt(){et&&(!1===r.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(nt):i.setTimeout(nt,y.fx.interval),y.fx.tick())}function ot(){return i.setTimeout((function(){Je=void 0})),Je=y.now()}function st(e,t){var i,n=0,o={height:e};for(t=t?1:0;n<4;n+=2-t)o["margin"+(i=ie[n])]=o["padding"+i]=e;return t&&(o.opacity=o.width=e),o}function rt(e,t,i){for(var n,o=(at.tweeners[t]||[]).concat(at.tweeners["*"]),s=0,r=o.length;s<r;s++)if(n=o[s].call(i,t,e))return n}function at(e,t,i){var n,o,s=0,r=at.prefilters.length,a=y.Deferred().always((function(){delete c.elem})),c=function(){if(o)return!1;for(var t=Je||ot(),i=Math.max(0,l.startTime+l.duration-t),n=1-(i/l.duration||0),s=0,r=l.tweens.length;s<r;s++)l.tweens[s].run(n);return a.notifyWith(e,[l,n,i]),n<1&&r?i:(r||a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:y.extend({},t),opts:y.extend(!0,{specialEasing:{},easing:y.easing._default},i),originalProperties:t,originalOptions:i,startTime:Je||ot(),duration:i.duration,tweens:[],createTween:function(t,i){var n=y.Tween(e,l.opts,t,i,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(n),n},stop:function(t){var i=0,n=t?l.tweens.length:0;if(o)return this;for(o=!0;i<n;i++)l.tweens[i].run(1);return t?(a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l,t])):a.rejectWith(e,[l,t]),this}}),h=l.props;for(function(e,t){var i,n,o,s,r;for(i in e)if(o=t[n=y.camelCase(i)],s=e[i],Array.isArray(s)&&(o=s[1],s=e[i]=s[0]),i!==n&&(e[n]=s,delete e[i]),(r=y.cssHooks[n])&&"expand"in r)for(i in s=r.expand(s),delete e[n],s)i in e||(e[i]=s[i],t[i]=o);else t[n]=o}(h,l.opts.specialEasing);s<r;s++)if(n=at.prefilters[s].call(l,e,h,l.opts))return y.isFunction(n.stop)&&(y._queueHooks(l.elem,l.opts.queue).stop=y.proxy(n.stop,n)),n;return y.map(h,rt,l),y.isFunction(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),y.fx.timer(y.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l}y.Animation=y.extend(at,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return se(i.elem,e,te.exec(t),i),i}]},tweener:function(e,t){y.isFunction(e)?(t=e,e=["*"]):e=e.match(z);for(var i,n=0,o=e.length;n<o;n++)(at.tweeners[i=e[n]]=at.tweeners[i]||[]).unshift(t)},prefilters:[function(e,t,i){var n,o,s,r,a,c,l,h,d="width"in t||"height"in t,u=this,p={},g=e.style,f=e.nodeType&&ne(e),b=X.get(e,"fxshow");for(n in i.queue||(null==(r=y._queueHooks(e,"fx")).unqueued&&(r.unqueued=0,a=r.empty.fire,r.empty.fire=function(){r.unqueued||a()}),r.unqueued++,u.always((function(){u.always((function(){r.unqueued--,y.queue(e,"fx").length||r.empty.fire()}))}))),t)if(tt.test(o=t[n])){if(delete t[n],s=s||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!b||void 0===b[n])continue;f=!0}p[n]=b&&b[n]||y.style(e,n)}if((c=!y.isEmptyObject(t))||!y.isEmptyObject(p))for(n in d&&1===e.nodeType&&(i.overflow=[g.overflow,g.overflowX,g.overflowY],null==(l=b&&b.display)&&(l=X.get(e,"display")),"none"===(h=y.css(e,"display"))&&(l?h=l:(ce([e],!0),l=e.style.display||l,h=y.css(e,"display"),ce([e]))),("inline"===h||"inline-block"===h&&null!=l)&&"none"===y.css(e,"float")&&(c||(u.done((function(){g.display=l})),null==l&&(l="none"===(h=g.display)?"":h)),g.display="inline-block")),i.overflow&&(g.overflow="hidden",u.always((function(){g.overflow=i.overflow[0],g.overflowX=i.overflow[1],g.overflowY=i.overflow[2]}))),c=!1,p)c||(b?"hidden"in b&&(f=b.hidden):b=X.access(e,"fxshow",{display:l}),s&&(b.hidden=!f),f&&ce([e],!0),u.done((function(){for(n in f||ce([e]),X.remove(e,"fxshow"),p)y.style(e,n,p[n])}))),c=rt(f?b[n]:0,n,u),n in b||(b[n]=c.start,f&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?at.prefilters.unshift(e):at.prefilters.push(e)}}),y.speed=function(e,t,i){var n=e&&"object"==typeof e?y.extend({},e):{complete:i||!i&&t||y.isFunction(e)&&e,duration:e,easing:i&&t||t&&!y.isFunction(t)&&t};return y.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration=n.duration in y.fx.speeds?y.fx.speeds[n.duration]:y.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){y.isFunction(n.old)&&n.old.call(this),n.queue&&y.dequeue(this,n.queue)},n},y.fn.extend({fadeTo:function(e,t,i,n){return this.filter(ne).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var o=y.isEmptyObject(e),s=y.speed(t,i,n),r=function(){var t=at(this,y.extend({},e),s);(o||X.get(this,"finish"))&&t.stop(!0)};return r.finish=r,o||!1===s.queue?this.each(r):this.queue(s.queue,r)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,o=null!=e&&e+"queueHooks",s=y.timers,r=X.get(this);if(o)r[o]&&r[o].stop&&n(r[o]);else for(o in r)r[o]&&r[o].stop&&it.test(o)&&n(r[o]);for(o=s.length;o--;)s[o].elem!==this||null!=e&&s[o].queue!==e||(s[o].anim.stop(i),t=!1,s.splice(o,1));!t&&i||y.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,i=X.get(this),n=i[e+"queue"],o=i[e+"queueHooks"],s=y.timers,r=n?n.length:0;for(i.finish=!0,y.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<r;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish}))}}),y.each(["toggle","show","hide"],(function(e,t){var i=y.fn[t];y.fn[t]=function(e,n,o){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(st(t,!0),e,n,o)}})),y.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){y.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}})),y.timers=[],y.fx.tick=function(){var e,t=0,i=y.timers;for(Je=y.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||y.fx.stop(),Je=void 0},y.fx.timer=function(e){y.timers.push(e),y.fx.start()},y.fx.interval=13,y.fx.start=function(){et||(et=!0,nt())},y.fx.stop=function(){et=null},y.fx.speeds={slow:600,fast:200,_default:400},y.fn.delay=function(e,t){return e=y.fx&&y.fx.speeds[e]||e,this.queue(t=t||"fx",(function(t,n){var o=i.setTimeout(t,e);n.stop=function(){i.clearTimeout(o)}}))},function(){var e=r.createElement("input"),t=r.createElement("select").appendChild(r.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=r.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var ct,lt=y.expr.attrHandle;y.fn.extend({attr:function(e,t){return H(this,y.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){y.removeAttr(this,e)}))}}),y.extend({attr:function(e,t,i){var n,o,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?y.prop(e,t,i):(1===s&&y.isXMLDoc(e)||(o=y.attrHooks[t.toLowerCase()]||(y.expr.match.bool.test(t)?ct:void 0)),void 0!==i?null===i?void y.removeAttr(e,t):o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:(e.setAttribute(t,i+""),i):o&&"get"in o&&null!==(n=o.get(e,t))?n:null==(n=y.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&I(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,o=t&&t.match(z);if(o&&1===e.nodeType)for(;i=o[n++];)e.removeAttribute(i)}}),ct={set:function(e,t,i){return!1===t?y.removeAttr(e,i):e.setAttribute(i,i),i}},y.each(y.expr.match.bool.source.match(/\w+/g),(function(e,t){var i=lt[t]||y.find.attr;lt[t]=function(e,t,n){var o,s,r=t.toLowerCase();return n||(s=lt[r],lt[r]=o,o=null!=i(e,t,n)?r:null,lt[r]=s),o}}));var ht=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ut(e){return(e.match(z)||[]).join(" ")}function pt(e){return e.getAttribute&&e.getAttribute("class")||""}y.fn.extend({prop:function(e,t){return H(this,y.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[y.propFix[e]||e]}))}}),y.extend({prop:function(e,t,i){var n,o,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&y.isXMLDoc(e)||(o=y.propHooks[t=y.propFix[t]||t]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:e[t]=i:o&&"get"in o&&null!==(n=o.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=y.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(y.propHooks.selected={get:function(e){return null},set:function(e){}}),y.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){y.propFix[this.toLowerCase()]=this})),y.fn.extend({addClass:function(e){var t,i,n,o,s,r,a,c=0;if(y.isFunction(e))return this.each((function(t){y(this).addClass(e.call(this,t,pt(this)))}));if("string"==typeof e&&e)for(t=e.match(z)||[];i=this[c++];)if(o=pt(i),n=1===i.nodeType&&" "+ut(o)+" "){for(r=0;s=t[r++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");o!==(a=ut(n))&&i.setAttribute("class",a)}return this},removeClass:function(e){var t,i,n,o,s,r,a,c=0;if(y.isFunction(e))return this.each((function(t){y(this).removeClass(e.call(this,t,pt(this)))}));if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(z)||[];i=this[c++];)if(o=pt(i),n=1===i.nodeType&&" "+ut(o)+" "){for(r=0;s=t[r++];)for(;n.indexOf(" "+s+" ")>-1;)n=n.replace(" "+s+" "," ");o!==(a=ut(n))&&i.setAttribute("class",a)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):y.isFunction(e)?this.each((function(i){y(this).toggleClass(e.call(this,i,pt(this),t),t)})):this.each((function(){var t,n,o,s;if("string"===i)for(n=0,o=y(this),s=e.match(z)||[];t=s[n++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==i||((t=pt(this))&&X.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":X.get(this,"__className__")||""))}))},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+ut(pt(i))+" ").indexOf(t)>-1)return!0;return!1}});var gt=/\r/g;y.fn.extend({val:function(e){var t,i,n,o=this[0];return arguments.length?(n=y.isFunction(e),this.each((function(i){var o;1===this.nodeType&&(null==(o=n?e.call(this,i,y(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=y.map(o,(function(e){return null==e?"":e+""}))),(t=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))}))):o?(t=y.valHooks[o.type]||y.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(o,"value"))?i:"string"==typeof(i=o.value)?i.replace(gt,""):null==i?"":i:void 0}}),y.extend({valHooks:{option:{get:function(e){var t=y.find.attr(e,"value");return null!=t?t:ut(y.text(e))}},select:{get:function(e){var t,i,n,o=e.options,s=e.selectedIndex,r="select-one"===e.type,a=r?null:[],c=r?s+1:o.length;for(n=s<0?c:r?s:0;n<c;n++)if(((i=o[n]).selected||n===s)&&!i.disabled&&(!i.parentNode.disabled||!I(i.parentNode,"optgroup"))){if(t=y(i).val(),r)return t;a.push(t)}return a},set:function(e,t){for(var i,n,o=e.options,s=y.makeArray(t),r=o.length;r--;)((n=o[r]).selected=y.inArray(y.valHooks.option.get(n),s)>-1)&&(i=!0);return i||(e.selectedIndex=-1),s}}}}),y.each(["radio","checkbox"],(function(){y.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=y.inArray(y(e).val(),t)>-1}},m.checkOn||(y.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var ft=/^(?:focusinfocus|focusoutblur)$/;y.extend(y.event,{trigger:function(e,t,n,o){var s,a,c,l,h,d,u,p=[n||r],f=g.call(e,"type")?e.type:e,b=g.call(e,"namespace")?e.namespace.split("."):[];if(a=c=n=n||r,3!==n.nodeType&&8!==n.nodeType&&!ft.test(f+y.event.triggered)&&(f.indexOf(".")>-1&&(b=f.split("."),f=b.shift(),b.sort()),h=f.indexOf(":")<0&&"on"+f,(e=e[y.expando]?e:new y.Event(f,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=b.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:y.makeArray(t,[e]),u=y.event.special[f]||{},o||!u.trigger||!1!==u.trigger.apply(n,t))){if(!o&&!u.noBubble&&!y.isWindow(n)){for(ft.test((l=u.delegateType||f)+f)||(a=a.parentNode);a;a=a.parentNode)p.push(a),c=a;c===(n.ownerDocument||r)&&p.push(c.defaultView||c.parentWindow||i)}for(s=0;(a=p[s++])&&!e.isPropagationStopped();)e.type=s>1?l:u.bindType||f,(d=(X.get(a,"events")||{})[e.type]&&X.get(a,"handle"))&&d.apply(a,t),(d=h&&a[h])&&d.apply&&q(a)&&(e.result=d.apply(a,t),!1===e.result&&e.preventDefault());return e.type=f,o||e.isDefaultPrevented()||u._default&&!1!==u._default.apply(p.pop(),t)||!q(n)||h&&y.isFunction(n[f])&&!y.isWindow(n)&&((c=n[h])&&(n[h]=null),y.event.triggered=f,n[f](),y.event.triggered=void 0,c&&(n[h]=c)),e.result}},simulate:function(e,t,i){var n=y.extend(new y.Event,i,{type:e,isSimulated:!0});y.event.trigger(n,null,t)}}),y.fn.extend({trigger:function(e,t){return this.each((function(){y.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var i=this[0];if(i)return y.event.trigger(e,t,i,!0)}}),y.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){y.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}})),y.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),m.focusin="onfocusin"in i,m.focusin||y.each({focus:"focusin",blur:"focusout"},(function(e,t){var i=function(e){y.event.simulate(t,e.target,y.event.fix(e))};y.event.special[t]={setup:function(){var n=this.ownerDocument||this,o=X.access(n,t);o||n.addEventListener(e,i,!0),X.access(n,t,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=X.access(n,t)-1;o?X.access(n,t,o):(n.removeEventListener(e,i,!0),X.remove(n,t))}}}));var bt=i.location,mt=y.now(),vt=/\?/;y.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new i.DOMParser).parseFromString(e,"text/xml")}catch(r){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||y.error("Invalid XML: "+e),t};var St=/\[\]$/,yt=/\r?\n/g,Mt=/^(?:submit|button|image|reset|file)$/i,xt=/^(?:input|select|textarea|keygen)/i;function Ot(e,t,i,n){var o;if(Array.isArray(t))y.each(t,(function(t,o){i||St.test(e)?n(e,o):Ot(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,i,n)}));else if(i||"object"!==y.type(t))n(e,t);else for(o in t)Ot(e+"["+o+"]",t[o],i,n)}y.param=function(e,t){var i,n=[],o=function(e,t){var i=y.isFunction(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(e)||e.jquery&&!y.isPlainObject(e))y.each(e,(function(){o(this.name,this.value)}));else for(i in e)Ot(i,e[i],t,o);return n.join("&")},y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=y.prop(this,"elements");return e?y.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!y(this).is(":disabled")&&xt.test(this.nodeName)&&!Mt.test(e)&&(this.checked||!le.test(e))})).map((function(e,t){var i=y(this).val();return null==i?null:Array.isArray(i)?y.map(i,(function(e){return{name:t.name,value:e.replace(yt,"\r\n")}})):{name:t.name,value:i.replace(yt,"\r\n")}})).get()}});var Pt=/%20/g,Ct=/#.*$/,wt=/([?&])_=[^&]*/,_t=/^(.*?):[ \t]*([^\r\n]*)$/gm,Tt=/^(?:GET|HEAD)$/,Et=/^\/\//,It={},Rt={},kt="*/".concat("*"),Nt=r.createElement("a");function At(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,o=0,s=t.toLowerCase().match(z)||[];if(y.isFunction(i))for(;n=s[o++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function Dt(e,t,i,n){var o={},s=e===Rt;function r(a){var c;return o[a]=!0,y.each(e[a]||[],(function(e,a){var l=a(t,i,n);return"string"!=typeof l||s||o[l]?s?!(c=l):void 0:(t.dataTypes.unshift(l),r(l),!1)})),c}return r(t.dataTypes[0])||!o["*"]&&r("*")}function Lt(e,t){var i,n,o=y.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((o[i]?e:n||(n={}))[i]=t[i]);return n&&y.extend(!0,e,n),e}Nt.href=bt.href,y.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(bt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":kt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":y.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Lt(Lt(e,y.ajaxSettings),t):Lt(y.ajaxSettings,e)},ajaxPrefilter:At(It),ajaxTransport:At(Rt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var n,o,s,a,c,l,h,d,u,p,g=y.ajaxSetup({},t=t||{}),f=g.context||g,b=g.context&&(f.nodeType||f.jquery)?y(f):y.event,m=y.Deferred(),v=y.Callbacks("once memory"),S=g.statusCode||{},M={},x={},O="canceled",P={readyState:0,getResponseHeader:function(e){var t;if(h){if(!a)for(a={};t=_t.exec(s);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return h?s:null},setRequestHeader:function(e,t){return null==h&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,M[e]=t),this},overrideMimeType:function(e){return null==h&&(g.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)P.always(e[P.status]);else for(t in e)S[t]=[S[t],e[t]];return this},abort:function(e){var t=e||O;return n&&n.abort(t),C(0,t),this}};if(m.promise(P),g.url=((e||g.url||bt.href)+"").replace(Et,bt.protocol+"//"),g.type=t.method||t.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(z)||[""],null==g.crossDomain){l=r.createElement("a");try{l.href=g.url,l.href=l.href,g.crossDomain=Nt.protocol+"//"+Nt.host!=l.protocol+"//"+l.host}catch(T){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=y.param(g.data,g.traditional)),Dt(It,g,t,P),h)return P;for(u in(d=y.event&&g.global)&&0==y.active++&&y.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!Tt.test(g.type),o=g.url.replace(Ct,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(Pt,"+")):(p=g.url.slice(o.length),g.data&&(o+=(vt.test(o)?"&":"?")+g.data,delete g.data),!1===g.cache&&(o=o.replace(wt,"$1"),p=(vt.test(o)?"&":"?")+"_="+mt+++p),g.url=o+p),g.ifModified&&(y.lastModified[o]&&P.setRequestHeader("If-Modified-Since",y.lastModified[o]),y.etag[o]&&P.setRequestHeader("If-None-Match",y.etag[o])),(g.data&&g.hasContent&&!1!==g.contentType||t.contentType)&&P.setRequestHeader("Content-Type",g.contentType),P.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+kt+"; q=0.01":""):g.accepts["*"]),g.headers)P.setRequestHeader(u,g.headers[u]);if(g.beforeSend&&(!1===g.beforeSend.call(f,P,g)||h))return P.abort();if(O="abort",v.add(g.complete),P.done(g.success),P.fail(g.error),n=Dt(Rt,g,t,P)){if(P.readyState=1,d&&b.trigger("ajaxSend",[P,g]),h)return P;g.async&&g.timeout>0&&(c=i.setTimeout((function(){P.abort("timeout")}),g.timeout));try{h=!1,n.send(M,C)}catch(T){if(h)throw T;C(-1,T)}}else C(-1,"No Transport");function C(e,t,r,a){var l,u,p,M,x,O=t;h||(h=!0,c&&i.clearTimeout(c),n=void 0,s=a||"",P.readyState=e>0?4:0,l=e>=200&&e<300||304===e,r&&(M=function(e,t,i){for(var n,o,s,r,a=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(o in a)if(a[o]&&a[o].test(n)){c.unshift(o);break}if(c[0]in i)s=c[0];else{for(o in i){if(!c[0]||e.converters[o+" "+c[0]]){s=o;break}r||(r=o)}s=s||r}if(s)return s!==c[0]&&c.unshift(s),i[s]}(g,P,r)),M=function(e,t,i,n){var o,s,r,a,c,l={},h=e.dataTypes.slice();if(h[1])for(r in e.converters)l[r.toLowerCase()]=e.converters[r];for(s=h.shift();s;)if(e.responseFields[s]&&(i[e.responseFields[s]]=t),!c&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=s,s=h.shift())if("*"===s)s=c;else if("*"!==c&&c!==s){if(!(r=l[c+" "+s]||l["* "+s]))for(o in l)if((a=o.split(" "))[1]===s&&(r=l[c+" "+a[0]]||l["* "+a[0]])){!0===r?r=l[o]:!0!==l[o]&&(s=a[0],h.unshift(a[1]));break}if(!0!==r)if(r&&e.throws)t=r(t);else try{t=r(t)}catch(d){return{state:"parsererror",error:r?d:"No conversion from "+c+" to "+s}}}return{state:"success",data:t}}(g,M,P,l),l?(g.ifModified&&((x=P.getResponseHeader("Last-Modified"))&&(y.lastModified[o]=x),(x=P.getResponseHeader("etag"))&&(y.etag[o]=x)),204===e||"HEAD"===g.type?O="nocontent":304===e?O="notmodified":(O=M.state,u=M.data,l=!(p=M.error))):(p=O,!e&&O||(O="error",e<0&&(e=0))),P.status=e,P.statusText=(t||O)+"",l?m.resolveWith(f,[u,O,P]):m.rejectWith(f,[P,O,p]),P.statusCode(S),S=void 0,d&&b.trigger(l?"ajaxSuccess":"ajaxError",[P,g,l?u:p]),v.fireWith(f,[P,O]),d&&(b.trigger("ajaxComplete",[P,g]),--y.active||y.event.trigger("ajaxStop")))}return P},getJSON:function(e,t,i){return y.get(e,t,i,"json")},getScript:function(e,t){return y.get(e,void 0,t,"script")}}),y.each(["get","post"],(function(e,t){y[t]=function(e,i,n,o){return y.isFunction(i)&&(o=o||n,n=i,i=void 0),y.ajax(y.extend({url:e,type:t,dataType:o,data:i,success:n},y.isPlainObject(e)&&e))}})),y._evalUrl=function(e){return y.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},y.fn.extend({wrapAll:function(e){var t;return this[0]&&(y.isFunction(e)&&(e=e.call(this[0])),t=y(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return y.isFunction(e)?this.each((function(t){y(this).wrapInner(e.call(this,t))})):this.each((function(){var t=y(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)}))},wrap:function(e){var t=y.isFunction(e);return this.each((function(i){y(this).wrapAll(t?e.call(this,i):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){y(this).replaceWith(this.childNodes)})),this}}),y.expr.pseudos.hidden=function(e){return!y.expr.pseudos.visible(e)},y.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},y.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(o){}};var Ft={0:200,1223:204},jt=y.ajaxSettings.xhr();m.cors=!!jt&&"withCredentials"in jt,m.ajax=jt=!!jt,y.ajaxTransport((function(e){var t,n;if(m.cors||jt&&!e.crossDomain)return{send:function(o,s){var r,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)a[r]=e.xhrFields[r];for(r in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)a.setRequestHeader(r,o[r]);t=function(e){return function(){t&&(t=n=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(Ft[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),n=a.onerror=t("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout((function(){t&&n()}))},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(d){if(t)throw d}},abort:function(){t&&t()}}})),y.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return y.globalEval(e),e}}}),y.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),y.ajaxTransport("script",(function(e){var t,i;if(e.crossDomain)return{send:function(n,o){t=y("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&o("error"===e.type?404:200,e.type)}),r.head.appendChild(t[0])},abort:function(){i&&i()}}}));var zt=[],Vt=/(=)\?(?=&|$)|\?\?/;y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zt.pop()||y.expando+"_"+mt++;return this[e]=!0,e}}),y.ajaxPrefilter("json jsonp",(function(e,t,n){var o,s,r,a=!1!==e.jsonp&&(Vt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=y.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Vt,"$1"+o):!1!==e.jsonp&&(e.url+=(vt.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return r||y.error(o+" was not called"),r[0]},e.dataTypes[0]="json",s=i[o],i[o]=function(){r=arguments},n.always((function(){void 0===s?y(i).removeProp(o):i[o]=s,e[o]&&(e.jsonpCallback=t.jsonpCallback,zt.push(o)),r&&y.isFunction(s)&&s(r[0]),r=s=void 0})),"script"})),m.createHTMLDocument=function(){var e=r.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),y.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(m.createHTMLDocument?((n=(t=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,t.head.appendChild(n)):t=r),s=!i&&[],(o=R.exec(e))?[t.createElement(o[1])]:(o=be([e],t,s),s&&s.length&&y(s).remove(),y.merge([],o.childNodes)));var n,o,s},y.fn.load=function(e,t,i){var n,o,s,r=this,a=e.indexOf(" ");return a>-1&&(n=ut(e.slice(a)),e=e.slice(0,a)),y.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(o="POST"),r.length>0&&y.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done((function(e){s=arguments,r.html(n?y("<div>").append(y.parseHTML(e)).find(n):e)})).always(i&&function(e,t){r.each((function(){i.apply(this,s||[e.responseText,t,e])}))}),this},y.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){y.fn[t]=function(e){return this.on(t,e)}})),y.expr.pseudos.animated=function(e){return y.grep(y.timers,(function(t){return e===t.elem})).length},y.offset={setOffset:function(e,t,i){var n,o,s,r,a,c,l=y.css(e,"position"),h=y(e),d={};"static"===l&&(e.style.position="relative"),a=h.offset(),s=y.css(e,"top"),c=y.css(e,"left"),("absolute"===l||"fixed"===l)&&(s+c).indexOf("auto")>-1?(r=(n=h.position()).top,o=n.left):(r=parseFloat(s)||0,o=parseFloat(c)||0),y.isFunction(t)&&(t=t.call(e,i,y.extend({},a))),null!=t.top&&(d.top=t.top-a.top+r),null!=t.left&&(d.left=t.left-a.left+o),"using"in t?t.using.call(e,d):h.css(d)}},y.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){y.offset.setOffset(this,e,t)}));var t,i,n,o,s=this[0];return s?s.getClientRects().length?{top:(n=s.getBoundingClientRect()).top+(o=(t=s.ownerDocument).defaultView).pageYOffset-(i=t.documentElement).clientTop,left:n.left+o.pageXOffset-i.clientLeft}:{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===y.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),I(e[0],"html")||(n=e.offset()),n={top:n.top+y.css(e[0],"borderTopWidth",!0),left:n.left+y.css(e[0],"borderLeftWidth",!0)}),{top:t.top-n.top-y.css(i,"marginTop",!0),left:t.left-n.left-y.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===y.css(e,"position");)e=e.offsetParent;return e||me}))}}),y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var i="pageYOffset"===t;y.fn[e]=function(n){return H(this,(function(e,n,o){var s;return y.isWindow(e)?s=e:9===e.nodeType&&(s=e.defaultView),void 0===o?s?s[t]:e[n]:void(s?s.scrollTo(i?s.pageXOffset:o,i?o:s.pageYOffset):e[n]=o)}),e,n,arguments.length)}})),y.each(["top","left"],(function(e,t){y.cssHooks[t]=Be(m.pixelPosition,(function(e,i){if(i)return i=Ve(e,t),je.test(i)?y(e).position()[t]+"px":i}))})),y.each({Height:"height",Width:"width"},(function(e,t){y.each({padding:"inner"+e,content:t,"":"outer"+e},(function(i,n){y.fn[n]=function(o,s){var r=arguments.length&&(i||"boolean"!=typeof o),a=i||(!0===o||!0===s?"margin":"border");return H(this,(function(t,i,o){var s;return y.isWindow(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===o?y.css(t,i,a):y.style(t,i,o,a)}),t,r?o:void 0,r)}}))})),y.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},holdReady:function(e){e?y.readyWait++:y.ready(!0)}}),y.isArray=Array.isArray,y.parseJSON=JSON.parse,y.nodeName=I,void 0===(n=(function(){return y}).apply(t,[]))||(e.exports=n);var Bt=i.jQuery,$t=i.$;return y.noConflict=function(e){return i.$===y&&(i.$=$t),e&&i.jQuery===y&&(i.jQuery=Bt),y},o||(i.jQuery=i.$=y),y})),jQuery=e.exports,function(e){function t(e,t,i){if(!i[0]||"object"==typeof i[0])return t.init.apply(e,i);if(t[i[0]])return t[i[0]].apply(e,Array.prototype.slice.call(i,1));throw d(i[0]+" is not a method or property")}function i(e,t,i,n){return{css:{position:"absolute",top:e,left:t,overflow:n||"hidden",zIndex:i||"auto"}}}function n(e,t,i,n,s){var r=1-s,a=r*r*r,c=s*s*s;return o(Math.round(a*e.x+3*s*r*r*t.x+3*s*s*r*i.x+c*n.x),Math.round(a*e.y+3*s*r*r*t.y+3*s*s*r*i.y+c*n.y))}function o(e,t){return{x:e,y:t}}function s(e,t,i){return p&&i?" translate3d("+e+"px,"+t+"px, 0px) ":" translate("+e+"px, "+t+"px) "}function r(e){return" rotate("+e+"deg) "}function a(e,t){return Object.prototype.hasOwnProperty.call(t,e)}function c(){for(var e=["Moz","Webkit","Khtml","O","ms"],t=e.length,i="";t--;)e[t]+"Transform"in document.body.style&&(i="-"+e[t].toLowerCase()+"-");return i}function l(e,t,i,n,s){var r,a=[];if("-webkit-"==f){for(r=0;r<s;r++)a.push("color-stop("+n[r][0]+", "+n[r][1]+")");e.css({"background-image":"-webkit-gradient(linear, "+t.x+"% "+t.y+"%,"+i.x+"% "+i.y+"%, "+a.join(",")+" )"})}else{t={x:t.x/100*e.width(),y:t.y/100*e.height()};var c=(i={x:i.x/100*e.width(),y:i.y/100*e.height()}).x-t.x;r=i.y-t.y;var l=Math.atan2(r,c),h=l-Math.PI/2,d=(h=Math.abs(e.width()*Math.sin(h))+Math.abs(e.height()*Math.cos(h)),c=Math.sqrt(r*r+c*c),i=o(i.x<t.x?e.width():0,i.y<t.y?e.height():0),Math.tan(l));for(i=(r=-1/d)*(d=(r*i.x-i.y-d*t.x+t.y)/(r-d))-r*i.x+i.y,t=Math.sqrt(Math.pow(d-t.x,2)+Math.pow(i-t.y,2)),r=0;r<s;r++)a.push(" "+n[r][1]+" "+100*(t+c*n[r][0])/h+"%");e.css({"background-image":f+"linear-gradient("+-l+"rad,"+a.join(",")+")"})}}function h(t,i,n){return t=e.Event(t),i.trigger(t,n),t.isDefaultPrevented()?"prevented":t.isPropagationStopped()?"stopped":""}function d(e){function t(e){this.name="TurnJsError",this.message=e}return(t.prototype=Error()).constructor=t,new t(e)}function u(e){var t={top:0,left:0};do{t.left+=e.offsetLeft,t.top+=e.offsetTop}while(e=e.offsetParent);return t}var p,g,f="",b=Math.PI,m=b/2,v="ontouchstart"in window,S=v?{down:"touchstart",move:"touchmove",up:"touchend",over:"touchstart",out:"touchend"}:{down:"mousedown",move:"mousemove",up:"mouseup",over:"mouseover",out:"mouseout"},y={backward:["bl","tl"],forward:["br","tr"],all:"tl bl tr br l r".split(" ")},M=["single","double"],x=["ltr","rtl"],O={acceleration:!0,display:"double",duration:600,page:1,gradients:!0,turnCorners:"bl,br",when:null},P={cornerSize:100},C={init:function(t){var i,n;p="WebKitCSSMatrix"in window||"MozPerspective"in document.body.style,g=!(i=/AppleWebkit\/([0-9\.]+)/i.exec(navigator.userAgent))||534.3<parseFloat(i[1]),f=c(),i=0;var o=this.data(),r=this.children();if(t=e.extend({width:this.width(),height:this.height(),direction:this.attr("dir")||this.css("direction")||"ltr"},O,t),o.opts=t,o.pageObjs={},o.pages={},o.pageWrap={},o.pageZoom={},o.pagePlace={},o.pageMv=[],o.zoom=1,o.totalPages=t.pages||0,o.eventHandlers={touchStart:e.proxy(C._touchStart,this),touchMove:e.proxy(C._touchMove,this),touchEnd:e.proxy(C._touchEnd,this),start:e.proxy(C._eventStart,this)},t.when)for(n in t.when)a(n,t.when)&&this.bind(n,t.when[n]);for(this.css({position:"relative",width:t.width,height:t.height}),this.turn("display",t.display),""!==t.direction&&this.turn("direction",t.direction),p&&!v&&t.acceleration&&this.transform(s(0,0,!0)),n=0;n<r.length;n++)"1"!=e(r[n]).attr("ignore")&&this.turn("addPage",r[n],++i);return e(this).bind(S.down,o.eventHandlers.touchStart).bind("end",C._eventEnd).bind("pressed",C._eventPressed).bind("released",C._eventReleased).bind("flip",C._flip),e(this).parent().bind("start",o.eventHandlers.start),e(document).bind(S.move,o.eventHandlers.touchMove).bind(S.up,o.eventHandlers.touchEnd),this.turn("page",t.page),o.done=!0,this},addPage:function(t,i){var n,o=!1,s=this.data(),r=s.totalPages+1;if(s.destroying)return!1;if((n=/\bp([0-9]+)\b/.exec(e(t).attr("class")))&&(i=parseInt(n[1],10)),i){if(i==r)o=!0;else if(i>r)throw d('Page "'+i+'" cannot be inserted')}else i=r,o=!0;return 1<=i&&i<=r&&(n="double"==s.display?i%2?" odd":" even":"",s.done&&this.turn("stop"),i in s.pageObjs&&C._movePages.call(this,i,1),o&&(s.totalPages=r),s.pageObjs[i]=e(t).css({float:"left"}).addClass("page p"+i+n),-1!=navigator.userAgent.indexOf("MSIE 9.0")&&s.pageObjs[i].hasClass("hard")&&s.pageObjs[i].removeClass("hard"),C._addPage.call(this,i),C._removeFromDOM.call(this)),this},_addPage:function(t){var i=this.data(),n=i.pageObjs[t];if(n)if(C._necessPage.call(this,t)){if(!i.pageWrap[t]){i.pageWrap[t]=e("<div/>",{class:"page-wrapper",page:t,css:{position:"absolute",overflow:"hidden"}}),this.append(i.pageWrap[t]),i.pagePlace[t]||(i.pagePlace[t]=t,i.pageObjs[t].appendTo(i.pageWrap[t]));var o=C._pageSize.call(this,t,!0);n.css({width:o.width,height:o.height}),i.pageWrap[t].css(o)}i.pagePlace[t]==t&&C._makeFlip.call(this,t)}else i.pagePlace[t]=0,i.pageObjs[t]&&i.pageObjs[t].remove()},hasPage:function(e){return a(e,this.data().pageObjs)},center:function(t){var i=this.data(),n=e(this).turn("size"),o=0;return i.noCenter||("double"==i.display&&(t=this.turn("view",t||i.tpage||i.page),"ltr"==i.direction?t[0]?t[1]||(o+=n.width/4):o-=n.width/4:t[0]?t[1]||(o-=n.width/4):o+=n.width/4),e(this).css({marginLeft:o})),this},destroy:function(){var t=this,i=this.data(),n="end first flip last pressed released start turning turned zooming missing".split(" ");if("prevented"!=h("destroying",this)){for(i.destroying=!0,e.each(n,(function(e,i){t.unbind(i)})),this.parent().unbind("start",i.eventHandlers.start),e(document).unbind(S.move,i.eventHandlers.touchMove).unbind(S.up,i.eventHandlers.touchEnd);0!==i.totalPages;)this.turn("removePage",i.totalPages);return i.fparent&&i.fparent.remove(),i.shadow&&i.shadow.remove(),this.removeData(),i=null,this}},is:function(){return"object"==typeof this.data().pages},zoom:function(t){var i=this.data();if("number"==typeof t){if(.001>t||100<t)throw d(t+" is not a value for zoom");if("prevented"==h("zooming",this,[t,i.zoom]))return this;var n=this.turn("size"),o=this.turn("view"),s=1/i.zoom,r=Math.round(n.width*s*t);for(n=Math.round(n.height*s*t),i.zoom=t,e(this).turn("stop").turn("size",r,n),i.opts.autoCenter&&this.turn("center"),C._updateShadow.call(this),t=0;t<o.length;t++)o[t]&&i.pageZoom[o[t]]!=i.zoom&&(this.trigger("zoomed",[o[t],o,i.pageZoom[o[t]],i.zoom]),i.pageZoom[o[t]]=i.zoom);return this}return i.zoom},_pageSize:function(e,t){var i=this.data(),n={};if("single"==i.display)n.width=this.width(),n.height=this.height(),t&&(n.top=0,n.left=0,n.right="auto");else{var o=this.width()/2,s=this.height();if(i.pageObjs[e].hasClass("own-size")?(n.width=i.pageObjs[e].width(),n.height=i.pageObjs[e].height()):(n.width=o,n.height=s),t){var r=e%2;n.top=(s-n.height)/2,"ltr"==i.direction?(n[r?"right":"left"]=o-n.width,n[r?"left":"right"]="auto"):(n[r?"left":"right"]=o-n.width,n[r?"right":"left"]="auto")}}return n},_makeFlip:function(e){var t=this.data();if(!t.pages[e]&&t.pagePlace[e]==e){var i="single"==t.display,n=e%2;t.pages[e]=t.pageObjs[e].css(C._pageSize.call(this,e)).flip({page:e,next:n||i?e+1:e-1,turn:this}).flip("disable",t.disabled),C._setPageLoc.call(this,e),t.pageZoom[e]=t.zoom}return t.pages[e]},_makeRange:function(){var e,t;if(!(1>this.data().totalPages))for(e=(t=this.turn("range"))[0];e<=t[1];e++)C._addPage.call(this,e)},range:function(e){var t,i,n,o=this.data();if(n=C._view.call(this,e=e||o.tpage||o.page||1),1>e||e>o.totalPages)throw d('"'+e+'" is not a valid page');return n[1]=n[1]||n[0],1<=n[0]&&n[1]<=o.totalPages?(e=Math.floor(2),o.totalPages-n[1]>n[0]?i=2*e-(t=Math.min(n[0]-1,e)):t=2*e-(i=Math.min(o.totalPages-n[1],e))):i=t=5,[Math.max(1,n[0]-t),Math.min(o.totalPages,n[1]+i)]},_necessPage:function(e){if(0===e)return!0;var t=this.turn("range");return this.data().pageObjs[e].hasClass("fixed")||e>=t[0]&&e<=t[1]},_removeFromDOM:function(){var e,t=this.data();for(e in t.pageWrap)a(e,t.pageWrap)&&!C._necessPage.call(this,e)&&C._removePageFromDOM.call(this,e)},_removePageFromDOM:function(e){var t=this.data();if(t.pages[e]){var i=t.pages[e].data();w._moveFoldingPage.call(t.pages[e],!1),i.f&&i.f.fwrapper&&i.f.fwrapper.remove(),t.pages[e].removeData(),t.pages[e].remove(),delete t.pages[e]}t.pageObjs[e]&&t.pageObjs[e].remove(),t.pageWrap[e]&&(t.pageWrap[e].remove(),delete t.pageWrap[e]),C._removeMv.call(this,e),delete t.pagePlace[e],delete t.pageZoom[e]},removePage:function(e){var t=this.data();if("*"==e)for(;0!==t.totalPages;)this.turn("removePage",t.totalPages);else{if(1>e||e>t.totalPages)throw d("The page "+e+" doesn't exist");t.pageObjs[e]&&(this.turn("stop"),C._removePageFromDOM.call(this,e),delete t.pageObjs[e]),C._movePages.call(this,e,-1),t.totalPages-=1,t.page>t.totalPages?(t.page=null,C._fitPage.call(this,t.totalPages)):(C._makeRange.call(this),this.turn("update"))}return this},_movePages:function(e,t){var i,n=this,o=this.data(),s="single"==o.display,r=function(e){var i=e+t,r=i%2,a=r?" odd ":" even ";o.pageObjs[e]&&(o.pageObjs[i]=o.pageObjs[e].removeClass("p"+e+" odd even").addClass("p"+i+a)),o.pagePlace[e]&&o.pageWrap[e]&&(o.pagePlace[i]=i,o.pageWrap[i]=o.pageObjs[i].hasClass("fixed")?o.pageWrap[e].attr("page",i):o.pageWrap[e].css(C._pageSize.call(n,i,!0)).attr("page",i),o.pages[e]&&(o.pages[i]=o.pages[e].flip("options",{page:i,next:s||r?i+1:i-1})),t&&(delete o.pages[e],delete o.pagePlace[e],delete o.pageZoom[e],delete o.pageObjs[e],delete o.pageWrap[e]))};if(0<t)for(i=o.totalPages;i>=e;i--)r(i);else for(i=e;i<=o.totalPages;i++)r(i)},display:function(t){var i=this.data(),n=i.display;if(void 0===t)return n;if(-1==e.inArray(t,M))throw d('"'+t+'" is not a value for display');switch(t){case"single":i.pageObjs[0]||(this.turn("stop").css({overflow:"hidden"}),i.pageObjs[0]=e("<div />",{class:"page p-temporal"}).css({width:this.width(),height:this.height()}).appendTo(this)),this.addClass("shadow");break;case"double":i.pageObjs[0]&&(this.turn("stop").css({overflow:""}),i.pageObjs[0].remove(),delete i.pageObjs[0]),this.removeClass("shadow")}return i.display=t,n&&(t=this.turn("size"),C._movePages.call(this,1,0),this.turn("size",t.width,t.height).turn("update")),this},direction:function(t){var i=this.data();if(void 0===t)return i.direction;if(t=t.toLowerCase(),-1==e.inArray(t,x))throw d('"'+t+'" is not a value for direction');return"rtl"==t&&e(this).attr("dir","ltr").css({direction:"ltr"}),i.direction=t,i.done&&this.turn("size",e(this).width(),e(this).height()),this},animating:function(){return 0<this.data().pageMv.length},corner:function(){var e,t,i=this.data();for(t in i.pages)if(a(t,i.pages)&&(e=i.pages[t].flip("corner")))return e;return!1},data:function(){return this.data()},disable:function(t){var i,n=this.data(),o=this.turn("view");for(i in n.disabled=void 0===t||!0===t,n.pages)a(i,n.pages)&&n.pages[i].flip("disable",!!n.disabled||-1==e.inArray(parseInt(i,10),o));return this},disabled:function(e){return void 0===e?!0===this.data().disabled:this.turn("disable",e)},size:function(e,t){if(void 0===e||void 0===t)return{width:this.width(),height:this.height()};this.turn("stop");var i,n,o=this.data();for(i in n="double"==o.display?e/2:e,this.css({width:e,height:t}),o.pageObjs[0]&&o.pageObjs[0].css({width:n,height:t}),o.pageWrap)a(i,o.pageWrap)&&(n=C._pageSize.call(this,i,!0),o.pageObjs[i].css({width:n.width,height:n.height}),o.pageWrap[i].css(n),o.pages[i]&&o.pages[i].css({width:n.width,height:n.height}));return this.turn("resize"),this},resize:function(){var e,t=this.data();for(t.pages[0]&&(t.pageWrap[0].css({left:-this.width()}),t.pages[0].flip("resize",!0)),e=1;e<=t.totalPages;e++)t.pages[e]&&t.pages[e].flip("resize",!0);C._updateShadow.call(this),t.opts.autoCenter&&this.turn("center")},_removeMv:function(e){var t,i=this.data();for(t=0;t<i.pageMv.length;t++)if(i.pageMv[t]==e)return i.pageMv.splice(t,1),!0;return!1},_addMv:function(e){var t=this.data();C._removeMv.call(this,e),t.pageMv.push(e)},_view:function(e){var t=this.data();return e=e||t.page,"double"==t.display?e%2?[e-1,e]:[e,e+1]:[e]},view:function(e){var t=this.data();return e=C._view.call(this,e),"double"==t.display?[0<e[0]?e[0]:0,e[1]<=t.totalPages?e[1]:0]:[0<e[0]&&e[0]<=t.totalPages?e[0]:0]},stop:function(e,t){if(this.turn("animating")){var i,n,o,s=this.data();for(s.tpage&&(s.page=s.tpage,delete s.tpage),i=0;i<s.pageMv.length;i++)s.pageMv[i]&&s.pageMv[i]!==e&&(n=(o=s.pages[s.pageMv[i]]).data().f.opts,o.flip("hideFoldedPage",t),t||w._moveFoldingPage.call(o,!1),n.force&&(n.next=0==n.page%2?n.page-1:n.page+1,delete n.force))}return this.turn("update"),this},pages:function(e){var t=this.data();if(e){if(e<t.totalPages)for(var i=t.totalPages;i>e;i--)this.turn("removePage",i);return t.totalPages=e,C._fitPage.call(this,t.page),this}return t.totalPages},_missing:function(e){var t=this.data();if(!(1>t.totalPages)){var i=this.turn("range",e),n=[];for(e=i[0];e<=i[1];e++)t.pageObjs[e]||n.push(e);0<n.length&&this.trigger("missing",[n])}},_fitPage:function(e){var t=this.data(),i=this.turn("view",e);if(C._missing.call(this,e),t.pageObjs[e]){t.page=e,this.turn("stop");for(var n=0;n<i.length;n++)i[n]&&t.pageZoom[i[n]]!=t.zoom&&(this.trigger("zoomed",[i[n],i,t.pageZoom[i[n]],t.zoom]),t.pageZoom[i[n]]=t.zoom);C._removeFromDOM.call(this),C._makeRange.call(this),C._updateShadow.call(this),this.trigger("turned",[e,i]),this.turn("update"),t.opts.autoCenter&&this.turn("center")}},_turnPage:function(t){var i,n,o=this.data(),s=o.pagePlace[t],r=this.turn("view"),a=this.turn("view",t);if(o.page!=t){var c=o.page;if("prevented"==h("turning",this,[t,a]))return void(c==o.page&&-1!=e.inArray(s,o.pageMv)&&o.pages[s].flip("hideFoldedPage",!0));-1!=e.inArray(1,a)&&this.trigger("first"),-1!=e.inArray(o.totalPages,a)&&this.trigger("last")}"single"==o.display?(i=r[0],n=a[0]):r[1]&&t>r[1]?(i=r[1],n=a[0]):r[0]&&t<r[0]&&(i=r[0],n=a[1]),s=o.opts.turnCorners.split(","),a=(r=o.pages[i].data().f).opts,c=r.point,C._missing.call(this,t),o.pageObjs[t]&&(this.turn("stop"),o.page=t,C._makeRange.call(this),o.tpage=n,a.next!=n&&(a.next=n,a.force=!0),this.turn("update"),r.point=c,o.pages[i].flip("turnPage","hard"==r.effect?"ltr"==o.direction?t>i?"r":"l":t>i?"l":"r":"ltr"==o.direction?s[t>i?1:0]:s[t>i?0:1]))},page:function(t){var i=this.data();if(void 0===t)return i.page;if(!i.disabled&&!i.destroying){if(0<(t=parseInt(t,10))&&t<=i.totalPages)return t!=i.page&&(i.done&&-1==e.inArray(t,this.turn("view"))?C._turnPage.call(this,t):C._fitPage.call(this,t)),this;throw d("The page "+t+" does not exist")}},next:function(){return this.turn("page",Math.min(this.data().totalPages,C._view.call(this,this.data().page).pop()+1))},previous:function(){return this.turn("page",Math.max(1,C._view.call(this,this.data().page).shift()-1))},peel:function(e,t){var i=this.data(),n=this.turn("view");return t=void 0===t||!0===t,!1===e?this.turn("stop",null,t):"single"==i.display?i.pages[i.page].flip("peel",e,t):(n="ltr"==i.direction?-1!=e.indexOf("l")?n[0]:n[1]:-1!=e.indexOf("l")?n[1]:n[0],i.pages[n]&&i.pages[n].flip("peel",e,t)),this},_addMotionPage:function(){var t=e(this).data().f.opts,i=t.turn;i.data(),C._addMv.call(i,t.page)},_eventStart:function(e,t,i){var n=t.turn.data(),o=n.pageZoom[t.page];e.isDefaultPrevented()||(o&&o!=n.zoom&&(t.turn.trigger("zoomed",[t.page,t.turn.turn("view",t.page),o,n.zoom]),n.pageZoom[t.page]=n.zoom),"single"==n.display&&i&&("l"==i.charAt(1)&&"ltr"==n.direction||"r"==i.charAt(1)&&"rtl"==n.direction?(t.next=t.next<t.page?t.next:t.page-1,t.force=!0):t.next=t.next>t.page?t.next:t.page+1),C._addMotionPage.call(e.target)),C._updateShadow.call(t.turn)},_eventEnd:function(t,i,n){e(t.target).data();var o=(t=i.turn).data();n?((n=o.tpage||o.page)==i.next||n==i.page)&&(delete o.tpage,C._fitPage.call(t,n||i.next,!0)):(C._removeMv.call(t,i.page),C._updateShadow.call(t),t.turn("update"))},_eventPressed:function(t){var i=(t=e(t.target).data().f).opts.turn;return i.data().mouseAction=!0,i.turn("update"),t.time=(new Date).getTime()},_eventReleased:function(t,i){var n,o=(n=e(t.target)).data().f,s=o.opts.turn,r=s.data();n="single"==r.display?"br"==i.corner||"tr"==i.corner?i.x<n.width()/2:i.x>n.width()/2:0>i.x||i.x>n.width(),(200>(new Date).getTime()-o.time||n)&&(t.preventDefault(),C._turnPage.call(s,o.opts.next)),r.mouseAction=!1},_flip:function(t){t.stopPropagation(),(t=e(t.target).data().f.opts).turn.trigger("turn",[t.next]),t.turn.data().opts.autoCenter&&t.turn.turn("center",t.next)},_touchStart:function(){var e,t=this.data();for(e in t.pages)if(a(e,t.pages)&&!1===w._eventStart.apply(t.pages[e],arguments))return!1},_touchMove:function(){var e,t=this.data();for(e in t.pages)a(e,t.pages)&&w._eventMove.apply(t.pages[e],arguments)},_touchEnd:function(){var e,t=this.data();for(e in t.pages)a(e,t.pages)&&w._eventEnd.apply(t.pages[e],arguments)},calculateZ:function(e){var t,i,n,o,s=this,r=this.data(),a=(t=this.turn("view"))[0]||t[1],c=e.length-1,l={pageZ:{},partZ:{},pageV:{}},h=function(e){(e=s.turn("view",e))[0]&&(l.pageV[e[0]]=!0),e[1]&&(l.pageV[e[1]]=!0)};for(t=0;t<=c;t++)n=r.pages[i=e[t]].data().f.opts.next,o=r.pagePlace[i],h(i),h(n),l.pageZ[i=r.pagePlace[n]==n?n:i]=r.totalPages-Math.abs(a-i),l.partZ[o]=2*r.totalPages-c+t;return l},update:function(){var t,i=this.data();if(this.turn("animating")&&0!==i.pageMv[0]){var n,o=this.turn("calculateZ",i.pageMv),s=this.turn("corner"),r=this.turn("view"),c=this.turn("view",i.tpage);for(t in i.pageWrap)a(t,i.pageWrap)&&(n=i.pageObjs[t].hasClass("fixed"),i.pageWrap[t].css({display:o.pageV[t]||n?"":"none",zIndex:(i.pageObjs[t].hasClass("hard")?o.partZ[t]:o.pageZ[t])||(n?-1:0)}),n=i.pages[t])&&(n.flip("z",o.partZ[t]||null),o.pageV[t]&&n.flip("resize"),i.tpage?n.flip("hover",!1).flip("disable",-1==e.inArray(parseInt(t,10),i.pageMv)&&t!=c[0]&&t!=c[1]):n.flip("hover",!1===s).flip("disable",t!=r[0]&&t!=r[1]))}else for(t in i.pageWrap)a(t,i.pageWrap)&&(o=C._setPageLoc.call(this,t),i.pages[t]&&i.pages[t].flip("disable",i.disabled||1!=o).flip("hover",!0).flip("z",null));return this},_updateShadow:function(){var t,n,o=this.data(),s=this.width(),r=this.height(),a="single"==o.display?s:s/2;t=this.turn("view"),o.shadow||(o.shadow=e("<div />",{class:"shadow",css:i(0,0,0).css}).appendTo(this));for(var c=0;c<o.pageMv.length&&t[0]&&t[1];c++)t=this.turn("view",o.pages[o.pageMv[c]].data().f.opts.next),n=this.turn("view",o.pageMv[c]),t[0]=t[0]&&n[0],t[1]=t[1]&&n[1];switch(t[0]?t[1]?3:"ltr"==o.direction?2:1:"ltr"==o.direction?1:2){case 1:o.shadow.css({width:a,height:r,top:0,left:a});break;case 2:o.shadow.css({width:a,height:r,top:0,left:0});break;case 3:o.shadow.css({width:s,height:r,top:0,left:0})}},_setPageLoc:function(e){var t=this.data(),i=this.turn("view"),n=0;if(e==i[0]||e==i[1]?n=1:("single"==t.display&&e==i[0]+1||"double"==t.display&&e==i[0]-2||e==i[1]+2)&&(n=2),!this.turn("animating"))switch(n){case 1:t.pageWrap[e].css({zIndex:t.totalPages,display:""});break;case 2:t.pageWrap[e].css({zIndex:t.totalPages-1,display:""});break;case 0:t.pageWrap[e].css({zIndex:0,display:t.pageObjs[e].hasClass("fixed")?"":"none"})}return n},options:function(t){if(void 0===t)return this.data().opts;var i=this.data();if(e.extend(i.opts,t),t.pages&&this.turn("pages",t.pages),t.page&&this.turn("page",t.page),t.display&&this.turn("display",t.display),t.direction&&this.turn("direction",t.direction),t.width&&t.height&&this.turn("size",t.width,t.height),t.when)for(var n in t.when)a(n,t.when)&&this.unbind(n).bind(n,t.when[n]);return this},version:function(){return"4.1.0"}},w={init:function(e){return this.data({f:{disabled:!1,hover:!1,effect:this.hasClass("hard")?"hard":"sheet"}}),this.flip("options",e),w._addPageWrapper.call(this),this},setData:function(t){var i=this.data();return i.f=e.extend(i.f,t),this},options:function(t){var i=this.data().f;return t?(w.setData.call(this,{opts:e.extend({},i.opts||P,t)}),this):i.opts},z:function(e){var t=this.data().f;return t.opts["z-index"]=e,t.fwrapper&&t.fwrapper.css({zIndex:e||parseInt(t.parent.css("z-index"),10)||0}),this},_cAllowed:function(){var e=this.data().f,t=e.opts.page,i=e.opts.turn.data(),n=t%2;return"hard"==e.effect?"ltr"==i.direction?[n?"r":"l"]:[n?"l":"r"]:"single"==i.display?1==t?"ltr"==i.direction?y.forward:y.backward:t==i.totalPages?"ltr"==i.direction?y.backward:y.forward:y.all:"ltr"==i.direction?y[n?"forward":"backward"]:y[n?"backward":"forward"]},_cornerActivated:function(t){var i=this.data().f,n=this.width(),o=this.height(),s=i.opts.cornerSize;if(0>=(t={x:t.x,y:t.y,corner:""}).x||0>=t.y||t.x>=n||t.y>=o)return!1;var r=w._cAllowed.call(this);switch(i.effect){case"hard":if(t.x>n-s)t.corner="r";else{if(!(t.x<s))return!1;t.corner="l"}break;case"sheet":if(t.y<s)t.corner+="t";else{if(!(t.y>=o-s))return!1;t.corner+="b"}if(t.x<=s)t.corner+="l";else{if(!(t.x>=n-s))return!1;t.corner+="r"}}return!(!t.corner||-1==e.inArray(t.corner,r))&&t},_isIArea:function(e){var t=this.data().f.parent.offset();return w._cornerActivated.call(this,{x:(e=v&&e.originalEvent?e.originalEvent.touches[0]:e).pageX-t.left,y:e.pageY-t.top})},_c:function(e,t){switch(t=t||0,e){case"tl":return o(t,t);case"tr":return o(this.width()-t,t);case"bl":return o(t,this.height()-t);case"br":return o(this.width()-t,this.height()-t);case"l":return o(t,0);case"r":return o(this.width()-t,0)}},_c2:function(e){switch(e){case"tl":return o(2*this.width(),0);case"tr":return o(-this.width(),0);case"bl":return o(2*this.width(),this.height());case"br":return o(-this.width(),this.height());case"l":return o(2*this.width(),0);case"r":return o(-this.width(),0)}},_foldingPage:function(){var e=this.data().f;if(e){var t=e.opts;if(t.turn)return"single"==(e=t.turn.data()).display?1<t.next||1<t.page?e.pageObjs[0]:null:e.pageObjs[t.next]}},_backGradient:function(){var t=this.data().f,n=t.opts.turn.data();return(n=n.opts.gradients&&("single"==n.display||2!=t.opts.page&&t.opts.page!=n.totalPages-1))&&!t.bshadow&&(t.bshadow=e("<div/>",i(0,0,1)).css({position:"",width:this.width(),height:this.height()}).appendTo(t.parent)),n},type:function(){return this.data().f.effect},resize:function(e){var t=this.data().f,i=t.opts.turn.data(),n=this.width(),o=this.height();switch(t.effect){case"hard":e&&(t.wrapper.css({width:n,height:o}),t.fpage.css({width:n,height:o}),i.opts.gradients&&(t.ashadow.css({width:n,height:o}),t.bshadow.css({width:n,height:o})));break;case"sheet":e&&(e=Math.round(Math.sqrt(Math.pow(n,2)+Math.pow(o,2))),t.wrapper.css({width:e,height:e}),t.fwrapper.css({width:e,height:e}).children(":first-child").css({width:n,height:o}),t.fpage.css({width:n,height:o}),i.opts.gradients&&t.ashadow.css({width:n,height:o}),w._backGradient.call(this)&&t.bshadow.css({width:n,height:o})),t.parent.is(":visible")&&(i=u(t.parent[0]),t.fwrapper.css({top:i.top,left:i.left}),i=u(t.opts.turn[0]),t.fparent.css({top:-i.top,left:-i.left})),this.flip("z",t.opts["z-index"])}},_addPageWrapper:function(){var t=this.data().f,n=t.opts.turn.data(),o=this.parent();if(t.parent=o,!t.wrapper)switch(t.effect){case"hard":(s={})[f+"transform-style"]="preserve-3d",s[f+"backface-visibility"]="hidden",t.wrapper=e("<div/>",i(0,0,2)).css(s).appendTo(o).prepend(this),t.fpage=e("<div/>",i(0,0,1)).css(s).appendTo(o),n.opts.gradients&&(t.ashadow=e("<div/>",i(0,0,0)).hide().appendTo(o),t.bshadow=e("<div/>",i(0,0,0)));break;case"sheet":var s=this.width(),r=this.height();Math.round(Math.sqrt(Math.pow(s,2)+Math.pow(r,2))),t.fparent=t.opts.turn.data().fparent,t.fparent||((s=e("<div/>",{css:{"pointer-events":"none"}}).hide()).data().flips=0,s.css(i(0,0,"auto","visible").css).appendTo(t.opts.turn),t.opts.turn.data().fparent=s,t.fparent=s),this.css({position:"absolute",top:0,left:0,bottom:"auto",right:"auto"}),t.wrapper=e("<div/>",i(0,0,this.css("z-index"))).appendTo(o).prepend(this),t.fwrapper=e("<div/>",i(o.offset().top,o.offset().left)).hide().appendTo(t.fparent),t.fpage=e("<div/>",i(0,0,0,"visible")).css({cursor:"default"}).appendTo(t.fwrapper),n.opts.gradients&&(t.ashadow=e("<div/>",i(0,0,1)).appendTo(t.fpage)),w.setData.call(this,t)}w.resize.call(this,!0)},_fold:function(e){var t=this.data().f,i=t.opts.turn.data(),n=w._c.call(this,e.corner),a=this.width(),c=this.height();switch(t.effect){case"hard":e.x="l"==e.corner?Math.min(Math.max(e.x,0),2*a):Math.max(Math.min(e.x,a),-a);var h,d,u,p,v,S=i.totalPages,y=t.opts["z-index"]||S,M={overflow:"visible"},x=n.x?(n.x-e.x)/a:e.x/a,O=90*x,P=90>O;switch(e.corner){case"l":p="0% 50%",v="100% 50%",P?(h=0,d=0<t.opts.next-1,u=1):(h="100%",d=t.opts.page+1<S,u=0);break;case"r":p="100% 50%",v="0% 50%",O=-O,a=-a,P?(h=0,d=t.opts.next+1<S,u=0):(h="-100%",d=1!=t.opts.page,u=1)}M[f+"perspective-origin"]=v,t.wrapper.transform("rotateY("+O+"deg)translate3d(0px, 0px, "+(this.attr("depth")||0)+"px)",v),t.fpage.transform("translateX("+a+"px) rotateY("+(180+O)+"deg)",p),t.parent.css(M),P?(x=1-x,t.wrapper.css({zIndex:y+1}),t.fpage.css({zIndex:y})):(x-=1,t.wrapper.css({zIndex:y}),t.fpage.css({zIndex:y+1})),i.opts.gradients&&(d?t.ashadow.css({display:"",left:h,backgroundColor:"rgba(0,0,0,"+.5*x+")"}).transform("rotateY(0deg)"):t.ashadow.hide(),t.bshadow.css({opacity:1-x}),P?t.bshadow.parent()[0]!=t.wrapper[0]&&t.bshadow.appendTo(t.wrapper):t.bshadow.parent()[0]!=t.fpage[0]&&t.bshadow.appendTo(t.fpage),l(t.bshadow,o(100*u,0),o(100*(1-u),0),[[0,"rgba(0,0,0,0.3)"],[1,"rgba(0,0,0,0)"]],2));break;case"sheet":var C,_,T,E,I,R,k,N=this,A=0,D=o(0,0),L=o(0,0),F=o(0,0),j=w._foldingPage.call(this);Math.tan(0);var z=i.opts.acceleration,V=t.wrapper.height(),B="t"==e.corner.substr(0,1),$="l"==e.corner.substr(1,1),W=function(){var t=o(0,0),s=o(0,0);t.x=n.x?n.x-e.x:e.x,t.y=g?n.y?n.y-e.y:e.y:0,s.x=$?a-t.x/2:e.x+t.x/2,s.y=t.y/2;var r=m-Math.atan2(t.y,t.x),l=r-Math.atan2(s.y,s.x);return l=Math.max(0,Math.sin(l)*Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2))),A=r/b*180,F=o(l*Math.sin(r),l*Math.cos(r)),r>m&&(F.x+=Math.abs(F.y*t.y/t.x),F.y=0,Math.round(F.x*Math.tan(b-r))<c)?(e.y=Math.sqrt(Math.pow(c,2)+2*s.x*t.x),B&&(e.y=c-e.y),W()):(r>m&&(t=b-r,s=V-c/Math.sin(t),D=o(Math.round(s*Math.cos(t)),Math.round(s*Math.sin(t))),$&&(D.x=-D.x),B&&(D.y=-D.y)),C=Math.round(F.y/Math.tan(r)+F.x),s=(t=a-C)*Math.cos(2*r),l=t*Math.sin(2*r),L=o(Math.round($?t-s:C+s),Math.round(B?l:c-l)),i.opts.gradients&&(I=t*Math.sin(r),t=w._c2.call(N,e.corner),t=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))/a,k=Math.sin(m*(1<t?2-t:t)),R=Math.min(t,1),E=100<I?(I-100)/I:0,_=o(I*Math.sin(r)/a*100,I*Math.cos(r)/c*100),w._backGradient.call(N)&&(T=o(1.2*I*Math.sin(r)/a*100,1.2*I*Math.cos(r)/c*100),$||(T.x=100-T.x),B||(T.y=100-T.y))),F.x=Math.round(F.x),F.y=Math.round(F.y),!0)};switch(h=function(e,n,h,d){var u=(a-V)*h[0]/100,p=(c-V)*h[1]/100,g=(n={left:(g=["0","auto"])[n[0]],top:g[n[1]],right:g[n[2]],bottom:g[n[3]]},{}),f=90!=d&&-90!=d?$?-1:1:0,b=h[0]+"% "+h[1]+"%";N.css(n).transform(r(d)+s(e.x+f,e.y,z),b),t.fpage.css(n).transform(r(d)+s(e.x+L.x-D.x-a*h[0]/100,e.y+L.y-D.y-c*h[1]/100,z)+r((180/d-2)*d),b),t.wrapper.transform(s(-e.x+u-f,-e.y+p,z)+r(-d),b),t.fwrapper.transform(s(-e.x+D.x+u,-e.y+D.y+p,z)+r(-d),b),i.opts.gradients&&(h[0]&&(_.x=100-_.x),h[1]&&(_.y=100-_.y),g["box-shadow"]="0 0 20px rgba(0,0,0,"+.5*k+")",j.css(g),l(t.ashadow,o($?100:0,B?0:100),o(_.x,_.y),[[E,"rgba(0,0,0,0)"],[.8*(1-E)+E,"rgba(0,0,0,"+.2*R+")"],[1,"rgba(255,255,255,"+.2*R+")"]],3),w._backGradient.call(N)&&l(t.bshadow,o($?0:100,B?0:100),o(T.x,T.y),[[.6,"rgba(0,0,0,0)"],[.8,"rgba(0,0,0,"+.3*R+")"],[1,"rgba(0,0,0,0)"]],3))},e.corner){case"tl":e.x=Math.max(e.x,1),W(),h(F,[1,0,0,1],[100,0],A);break;case"tr":e.x=Math.min(e.x,a-1),W(),h(o(-F.x,F.y),[0,0,0,1],[0,0],-A);break;case"bl":e.x=Math.max(e.x,1),W(),h(o(F.x,-F.y),[1,1,0,0],[100,100],-A);break;case"br":e.x=Math.min(e.x,a-1),W(),h(o(-F.x,-F.y),[0,1,1,0],[0,100],A)}}t.point=e},_moveFoldingPage:function(e){var t=this.data().f;if(t){var i=t.opts.turn,n=i.data(),o=n.pagePlace;e?(o[n=t.opts.next]!=t.opts.page&&(t.folding&&w._moveFoldingPage.call(this,!1),w._foldingPage.call(this).appendTo(t.fpage),o[n]=t.opts.page,t.folding=n),i.turn("update")):t.folding&&(n.pages[t.folding]?(i=n.pages[t.folding].data().f,n.pageObjs[t.folding].appendTo(i.wrapper)):n.pageWrap[t.folding]&&n.pageObjs[t.folding].appendTo(n.pageWrap[t.folding]),t.folding in o&&(o[t.folding]=t.folding),delete t.folding)}},_showFoldedPage:function(e,t){var i=w._foldingPage.call(this),n=(r=this.data()).f,o=n.visible;if(i){if(!(o&&n.point&&n.point.corner==e.corner||(i="hover"==n.status||"peel"==n.status||n.opts.turn.data().mouseAction?e.corner:null,o=!1,"prevented"!=h("start",this,[n.opts,i]))))return!1;if(t){var s=this,r=n.point&&n.point.corner==e.corner?n.point:w._c.call(this,e.corner,1);this.animatef({from:[r.x,r.y],to:[e.x,e.y],duration:500,frame:function(t){e.x=Math.round(t[0]),e.y=Math.round(t[1]),w._fold.call(s,e)}})}else w._fold.call(this,e),r.effect&&!r.effect.turning&&this.animatef(!1);if(!o)switch(n.effect){case"hard":n.visible=!0,w._moveFoldingPage.call(this,!0),n.fpage.show(),n.opts.shadows&&n.bshadow.show();break;case"sheet":n.visible=!0,n.fparent.show().data().flips++,w._moveFoldingPage.call(this,!0),n.fwrapper.show(),n.bshadow&&n.bshadow.show()}return!0}return!1},hide:function(){var e=this.data().f,t=e.opts.turn.data(),i=w._foldingPage.call(this);switch(e.effect){case"hard":t.opts.gradients&&(e.bshadowLoc=0,e.bshadow.remove(),e.ashadow.hide()),e.wrapper.transform(""),e.fpage.hide();break;case"sheet":0==--e.fparent.data().flips&&e.fparent.hide(),this.css({left:0,top:0,right:"auto",bottom:"auto"}).transform(""),e.wrapper.transform(""),e.fwrapper.hide(),e.bshadow&&e.bshadow.hide(),i.transform("")}return e.visible=!1,this},hideFoldedPage:function(e){var t=this.data().f;if(t.point){var i=this,s=t.point,r=function(){t.point=null,t.status="",i.flip("hide"),i.trigger("end",[t.opts,!1])};if(e){var a=w._c.call(this,s.corner),c=(e="t"==s.corner.substr(0,1)?Math.min(0,s.y-a.y)/2:Math.max(0,s.y-a.y)/2,o(s.x,s.y+e)),l=o(a.x,a.y-e);this.animatef({from:0,to:1,frame:function(e){e=n(s,c,l,a,e),s.x=e.x,s.y=e.y,w._fold.call(i,s)},complete:r,duration:800,hiding:!0})}else this.animatef(!1),r()}},turnPage:function(e){var t=this,i=this.data().f,o=i.opts.turn.data(),s=(e={corner:i.corner?i.corner.corner:e||w._cAllowed.call(this)[0]},i.point||w._c.call(this,e.corner,i.opts.turn?o.opts.elevation:0)),r=w._c2.call(this,e.corner);this.trigger("flip").animatef({from:0,to:1,frame:function(i){i=n(s,s,r,r,i),e.x=i.x,e.y=i.y,w._showFoldedPage.call(t,e)},complete:function(){t.trigger("end",[i.opts,!0])},duration:o.opts.duration,turning:!0}),i.corner=null},moving:function(){return"effect"in this.data()},isTurning:function(){return this.flip("moving")&&this.data().effect.turning},corner:function(){return this.data().f.corner},_eventStart:function(e){var t=this.data().f,i=t.opts.turn;if(!t.corner&&!t.disabled&&!this.flip("isTurning")&&t.opts.page==i.data().pagePlace[t.opts.page]){if(t.corner=w._isIArea.call(this,e),t.corner&&w._foldingPage.call(this))return this.trigger("pressed",[t.point]),w._showFoldedPage.call(this,t.corner),!1;t.corner=null}},_eventMove:function(e){var t=this.data().f;if(!t.disabled)if(e=v?e.originalEvent.touches:[e],t.corner){var i=t.parent.offset();t.corner.x=e[0].pageX-i.left,t.corner.y=e[0].pageY-i.top,w._showFoldedPage.call(this,t.corner)}else t.hover&&!this.data().effect&&this.is(":visible")&&((e=w._isIArea.call(this,e[0]))?("sheet"==t.effect&&2==e.corner.length||"hard"==t.effect)&&(t.status="hover",t=w._c.call(this,e.corner,t.opts.cornerSize/2),e.x=t.x,e.y=t.y,w._showFoldedPage.call(this,e,!0)):"hover"==t.status&&(t.status="",w.hideFoldedPage.call(this,!0)))},_eventEnd:function(){var e=this.data().f,t=e.corner;!e.disabled&&t&&"prevented"!=h("released",this,[e.point||t])&&w.hideFoldedPage.call(this,!0),e.corner=null},disable:function(e){return w.setData.call(this,{disabled:e}),this},hover:function(e){return w.setData.call(this,{hover:e}),this},peel:function(t,i){var n=this.data().f;if(t){if(-1==e.inArray(t,y.all))throw d("Corner "+t+" is not permitted");if(-1!=e.inArray(t,w._cAllowed.call(this))){var o=w._c.call(this,t,n.opts.cornerSize/2);n.status="peel",w._showFoldedPage.call(this,{corner:t,x:o.x,y:o.y},i)}}else n.status="",w.hideFoldedPage.call(this,i);return this}};window.requestAnim=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},e.extend(e.fn,{flip:function(){return t(e(this[0]),w,arguments)},turn:function(){return t(e(this[0]),C,arguments)},transform:function(e,t){var i={};return t&&(i[f+"transform-origin"]=t),i[f+"transform"]=e,this.css(i)},animatef:function(t){var i=this.data();if(i.effect&&i.effect.stop(),t){t.to.length||(t.to=[t.to]),t.from.length||(t.from=[t.from]);for(var n=[],o=t.to.length,s=!0,r=this,a=(new Date).getTime(),c=function(){if(i.effect&&s){for(var e=[],l=Math.min(t.duration,(new Date).getTime()-a),h=0;h<o;h++)e.push(i.effect.easing(1,l,t.from[h],n[h],t.duration));t.frame(1==o?e[0]:e),l==t.duration?(delete i.effect,r.data(i),t.complete&&t.complete()):window.requestAnim(c)}},l=0;l<o;l++)n.push(t.to[l]-t.from[l]);i.effect=e.extend({stop:function(){s=!1},easing:function(e,t,i,n,o){return n*Math.sqrt(1-(t=t/o-1)*t)+i}},t),this.data(i),c()}else delete i.effect}}),e.isTouch=v,e.mouseEvents=S,e.cssPrefix=c,e.cssTransitionEnd=function(){var e,t=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MSTransition:"transitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(void 0!==t.style[e])return i[e]},e.findPos=u}(jQuery)},Fu2j:function(e,t,i){"use strict";i.r(t),i.d(t,"SDModule",(function(){return is}));var n=i("SVse"),o=i("s7LF"),s=i("3vOV"),r=i("GS7A"),a=i("P9HX"),c=i("I2Si"),l=i("ey9i"),h=i("boWW"),d=i("Clfw"),u=i("qgV2"),p=i("97pD"),g=i("IfHC"),f=i("ULA1"),b=i("nDMq"),m=i("lJxs"),v=i("eIep"),S=i("pLZG"),y=i("0lfv"),M=i("8Y7J"),x=i("WmZK"),O=i("tqRt"),P=i("Vbab"),C=i("QMcV"),w=i("4yJm"),_=i("Gf8t"),T=i("gNdQ");function E(e,t){if(1&e){const e=M.Tb();M.Qb(0),M.Sb(1,"button",8),M.Zb("click",(function(){return M.uc(e),M.dc().onClickUndo()})),M.Nb(2,"i",9),M.Rb(),M.Sb(3,"button",8),M.Zb("click",(function(){return M.uc(e),M.dc().onClickRedo()})),M.Nb(4,"i",10),M.Rb(),M.Pb()}if(2&e){const e=M.dc();M.zb(1),M.jc("disabled",!e.canUndo),M.zb(2),M.jc("disabled",!e.canRedo)}}function I(e,t){if(1&e){const e=M.Tb();M.Sb(0,"button",18),M.Zb("click",(function(t){M.uc(e);const i=M.dc(),n=i.$implicit,o=i.index,s=M.dc(3);return s.activateLastTool(n,o),s.activateTool(t,n.tool)})),M.Nb(1,"i",19),M.Rb()}if(2&e){const e=M.dc().$implicit,t=M.dc(3);M.jc("title",e.alt),M.Ab("color",t.styleOfMenuTool(e)),M.zb(1),M.jc("ngClass",e.iconClass)}}function R(e,t){if(1&e&&(M.Qb(0),M.Dc(1,I,2,3,"button",17),M.Pb()),2&e){const e=t.$implicit;M.zb(1),M.jc("ngIf",e.use)}}function k(e,t){if(1&e&&(M.Sb(0,"section",15),M.Sb(1,"div"),M.Dc(2,R,2,1,"ng-container",16),M.Rb(),M.Rb()),2&e){const e=M.dc(2);M.zb(2),M.jc("ngForOf",e.selectedSubtools)}}function N(e,t){if(1&e){const e=M.Tb();M.Qb(0),M.Sb(1,"section",11),M.Sb(2,"button",12),M.Zb("click",(function(){return M.uc(e),M.dc().closeAnnotationToolbar()})),M.ec(3,"translate"),M.Nb(4,"i",13),M.Rb(),M.Nb(5,"div",5),M.Rb(),M.Dc(6,k,3,1,"section",14),M.Pb()}if(2&e){const e=M.dc();M.zb(2),M.jc("title",M.fc(3,2,"CLOSE")),M.zb(4),M.jc("ngIf",e.selectedSubtools.length>0)}}function A(e,t){if(1&e){const e=M.Tb();M.Sb(0,"button",25),M.Zb("click",(function(){M.uc(e);const t=M.dc(2).$implicit;return M.dc(2).expanderClicked(t)})),M.Nb(1,"i",26),M.Rb()}}function D(e,t){1&e&&M.Nb(0,"div",27)}function L(e,t){if(1&e){const e=M.Tb();M.Qb(0),M.Sb(1,"button",30),M.Zb("click",(function(t){M.uc(e);const i=M.dc(),n=i.index,o=i.$implicit,s=M.dc(3).$implicit,r=M.dc(2);return s.lastUsed=n,r.activateTool(t,o.tool)})),M.Nb(2,"i",19),M.Rb(),M.Pb()}if(2&e){const e=M.dc().$implicit,t=M.dc(5);M.zb(1),M.jc("title",e.alt),M.Ab("color",t.styleOfMenuTool(e)),M.zb(1),M.jc("ngClass",e.iconClass)}}function F(e,t){if(1&e&&(M.Qb(0),M.Dc(1,L,3,3,"ng-container",2),M.Pb()),2&e){const e=t.$implicit;M.zb(1),M.jc("ngIf",e.use)}}function j(e,t){if(1&e&&(M.Sb(0,"div",28),M.Sb(1,"div",29),M.Dc(2,F,2,1,"ng-container",16),M.Rb(),M.Rb()),2&e){const e=M.dc(2).$implicit;M.jc("@menuState",e.menuState),M.zb(2),M.jc("ngForOf",e.subtools)}}function z(e,t){if(1&e){const e=M.Tb();M.Qb(0),M.Sb(1,"div",20),M.Sb(2,"button",21),M.Zb("click",(function(t){M.uc(e);const i=M.dc().$implicit;return M.dc(2).activateTool(t,i.tool||i.lastTool.tool)})),M.Nb(3,"i",19),M.Fc(4),M.Rb(),M.Dc(5,A,2,0,"button",22),M.Dc(6,D,1,0,"div",23),M.Dc(7,j,3,2,"div",24),M.Rb(),M.Pb()}if(2&e){const e=M.dc().$implicit,t=M.dc(2);M.zb(2),M.Eb("ep-text-button",!e.text)("ep-button",e.text)("expandable",t.subtoolsLength(e)>1),M.jc("title",e.alt),M.Ab("color",e.text?"white":"dark")("size",e.text?"tiny":null),M.zb(1),M.jc("ngClass",e.iconClass),M.zb(1),M.Hc(" ",e.text||""," "),M.zb(1),M.jc("ngIf",t.subtoolsLength(e)>1),M.zb(1),M.jc("ngIf",!e.text&&t.isActivated(e.tool||e.lastTool.tool)),M.zb(1),M.jc("ngIf",t.subtoolsLength(e)>1&&t.windowResponsiveBasis.width<=t.windowWidth)}}function V(e,t){if(1&e&&(M.Qb(0),M.Dc(1,z,8,14,"ng-container",2),M.Pb()),2&e){const e=t.$implicit;M.zb(1),M.jc("ngIf",e.use)}}function B(e,t){if(1&e&&(M.Qb(0),M.Dc(1,V,2,1,"ng-container",16),M.Pb()),2&e){const e=M.dc();M.zb(1),M.jc("ngForOf",e.getActiveMenus())}}function $(e,t){if(1&e){const e=M.Tb();M.Sb(0,"button",18),M.Zb("click",(function(){return M.uc(e),M.dc(2).toggleRuler()})),M.ec(1,"translate"),M.Nb(2,"i",19),M.Rb()}if(2&e){const e=M.dc(2);M.jc("title",M.fc(1,3,"SHOW_RULER")),M.Ab("color",e.rulerActive?"primary":"dark"),M.zb(2),M.jc("ngClass",e.rulerActive?"papycon-ruler-show":"papycon-ruler-hide")}}function W(e,t){if(1&e){const e=M.Tb();M.Sb(0,"button",33),M.Zb("click",(function(){return M.uc(e),M.dc(2).toggleFormFieldHighlight()})),M.ec(1,"translate"),M.Nb(2,"i",19),M.Rb()}if(2&e){const e=M.dc(2);M.jc("title",M.fc(1,3,"FORMFIELD_HIGHLIGHTED")),M.Ab("color",e.formFieldHighlighted?"primary":"dark"),M.zb(2),M.jc("ngClass",e.formFieldHighlighted?"papycon-area-show":"papycon-area-hide")}}function U(e,t){if(1&e&&(M.Sb(0,"section"),M.Nb(1,"div",31),M.Dc(2,$,3,5,"button",17),M.Dc(3,W,3,5,"button",32),M.Rb()),2&e){const e=M.dc();M.zb(2),M.jc("ngIf",e.runtimeEnv.get(e.RuntimeEnvKey.FORM_TOOLBAR_RULER)&&e.windowResponsiveBasis.width<=e.windowWidth),M.zb(1),M.jc("ngIf",e.isFormHighlightAvailable&&!e.hidableMenus[e.HidableView.TOOLBAR_FORM])}}function G(e,t){if(1&e){const e=M.Tb();M.Sb(0,"button",34),M.Zb("click",(function(){return M.uc(e),M.dc().toggleRightSideView()})),M.ec(1,"translate"),M.Nb(2,"i",35),M.Rb()}if(2&e){const e=M.dc();M.jc("title",M.fc(1,2,"PROPERTIES_PANEL")),M.Ab("color",e.isAnnotPropertyViewActive()?"primary":"dark")}}let H=(()=>{class e{constructor(e,t,i,n,o,s,r,a,l,h,d,u,p,g,f){this.annotService=e,this.contentService=t,this.dialogService=i,this.changeDetectorRef=n,this.defaultAnnot=o,this.annotSelectedService=s,this.documentService=r,this.subscriptionService=a,this.preferenceService=l,this.actionHistoryService=h,this.store$=d,this.translatePipe=u,this.signatureService=p,this.selectTextService=g,this.toolbarService=f,this.unExportableTools=[c.a.REDACTION,c.a.POPUP,c.a.SEARCH,c.a.COPY,c.a.EDIT,c.a.CLOUD_CROSS_SHAPE,c.a.CLOUD_T_SHAPE],this.contextAnnotMenus=[],this.formFieldHighlighted=!0,this.canUndo=!1,this.canRedo=!1,this.hidableMenus={},this.variableMenus=this.initVariableMenus(),this.formVariableMenus=this.initFormVariableMenus(),this.signatureVariableMenus=[{tool:c.a.INSTANT_SIGNATURE,alt:this.translatePipe.transform("SIGN"),text:this.translatePipe.transform("INSTANT_SIGNATURE"),iconClass:"papycon-signature",use:b.f.get(b.d.SIGNATURE_INSTANT_SIGNATURE),priority:6,mobileStatus:{display:"block"}}],this.tempTool=null,this.isDeepCopy=!1,this.selectedSubtools=[]}get RuntimeEnvKey(){return b.d}get runtimeEnv(){return b.f}get DocumentAction(){return l.j}get windowWidth(){return y.F.width}get windowResponsiveBasis(){return y.F.responsiveBasis}get isVisiblePropertyButton(){return this.annotToolActive&&this.runtimeEnv.get(b.d.ANNOT_TOOLBAR_ANNOT_PROPERTY)||this.formToolActive&&this.runtimeEnv.get(b.d.FORM_TOOLBAR_ANNOT_PROPERTY)}get HidableView(){return f.a}get isFormHighlightAvailable(){return b.f.get(b.d.MAIN_TOOLBAR_ACRO_FORM_HIGHLIGHT)&&this.documentService.checkAuthority(l.j.FORM)}initVariableMenus(){return[{tool:d.a.SELECT_ANNOT,alt:this.translatePipe.transform("SELECT_ANNOT_TOOL"),iconClass:"papycon-pointer",use:this.canUseAnnotSelect(),priority:1,mobileStatus:{display:"block"}},{lastUsed:0,menuState:"off",menuStyle:{},mobileStatus:{display:"block"},subtools:[{tool:c.a.INK,alt:this.translatePipe.transform("INK_TOOL"),iconClass:"papycon-pencil",use:b.f.get(b.d.ANNOTATION_BASIC_INK)},{tool:c.a.LINE,alt:this.translatePipe.transform("LINE_TOOL"),iconClass:"papycon-line",use:b.f.get(b.d.ANNOTATION_BASIC_LINE)},{tool:c.a.SQUARE,alt:this.translatePipe.transform("SQUARE_TOOL"),iconClass:"papycon-square",use:b.f.get(b.d.ANNOTATION_BASIC_SQUARE)},{tool:c.a.CIRCLE,alt:this.translatePipe.transform("CIRCLE_TOOL"),iconClass:"papycon-circle",use:b.f.get(b.d.ANNOTATION_BASIC_CIRCLE)},{tool:c.a.POLYGON,alt:this.translatePipe.transform("POLYGON_TOOL"),iconClass:"papycon-polygon",use:b.f.get(b.d.ANNOTATION_BASIC_POLYGON)},{tool:c.a.POLYLINE,alt:this.translatePipe.transform("POLYLINE_TOOL"),iconClass:"papycon-polyline",use:b.f.get(b.d.ANNOTATION_BASIC_POLYLINE)},{tool:c.a.CLOUD,alt:this.translatePipe.transform("POLYGON_CLOUD_TOOL"),iconClass:"papycon-revisioncloud",use:b.f.get(b.d.ANNOTATION_BASIC_CLOUD)}].filter(e=>e.use),get lastTool(){return this.subtools[this.lastUsed]},get tool(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.tool},get iconClass(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.iconClass},get alt(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.alt},priority:1,use:b.f.get(b.c.ANNOTATION_BASIC)},{lastUsed:0,menuState:"off",menuStyle:{},mobileStatus:{display:"block"},subtools:[{tool:c.a.TEXT_FREE,alt:this.translatePipe.transform("FREE_TEXT_TOOL"),iconClass:"papycon-textbox",use:b.f.get(b.d.ANNOTATION_TEXT_TEXT_FREE)},{tool:c.a.TEXT_CALLOUT,alt:this.translatePipe.transform("FREE_TEXT_CALLOUT_TOOL"),iconClass:"papycon-callout2",use:b.f.get(b.d.ANNOTATION_TEXT_TEXT_CALLOUT)}].filter(e=>e.use),get lastTool(){return this.subtools[this.lastUsed]},get tool(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.tool},get iconClass(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.iconClass},get alt(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.alt},priority:1,use:b.f.get(b.c.ANNOTATION_TEXT)},{tool:c.a.TEXT_POPUP,alt:this.translatePipe.transform("TEXT_TOOL"),iconClass:"papycon-memo3",use:b.f.get(b.d.ANNOTATION_MEMO),priority:2,mobileStatus:{display:"block"}},{lastUsed:0,menuState:"off",menuStyle:{},mobileStatus:{display:"block"},subtools:[{tool:c.a.LINE_DIMENSION,alt:this.translatePipe.transform("DISTANCE_TOOL"),iconClass:"papycon-line-measure2",use:b.f.get(b.d.ANNOTATION_MEASURE_LINE_DIMENSION)},{tool:c.a.POLYLINE_DIMENSION,alt:this.translatePipe.transform("PERIMETER_TOOL"),iconClass:"papycon-polyline-measure2",use:b.f.get(b.d.ANNOTATION_MEASURE_POLYLINE_DIMENSION)},{tool:c.a.POLYGON_DIMENSION,alt:this.translatePipe.transform("AREA_TOOL"),iconClass:"papycon-polygon-measure2",use:b.f.get(b.d.ANNOTATION_MEASURE_POLYGON_DIMENSION)}].filter(e=>e.use),get lastTool(){return this.subtools[this.lastUsed]},get tool(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.tool},get iconClass(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.iconClass},get alt(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.alt},priority:1,use:b.f.get(b.c.ANNOTATION_MEASURE)},{tool:c.a.STAMP,alt:this.translatePipe.transform("STAMP_TOOL"),iconClass:"papycon-stamp2",use:b.f.get(b.d.ANNOTATION_STAMP),priority:3,mobileStatus:{display:"block"}},{lastUsed:0,menuState:"off",menuStyle:{},mobileStatus:{display:"block"},subtools:[{tool:c.a.HIGHLIGHT,alt:this.translatePipe.transform("HIGHLIGHT"),iconClass:"papycon-text-highlight",use:b.f.get(b.d.ANNOTATION_TEXT_MARKUP_HIGHLIGHT)},{tool:c.a.STRIKE,alt:this.translatePipe.transform("STRIKEOUT"),iconClass:"papycon-text-strikeout",use:b.f.get(b.d.ANNOTATION_TEXT_MARKUP_STRIKE)},{tool:c.a.UNDERLINE,alt:this.translatePipe.transform("UNDERLINE"),iconClass:"papycon-text-underline",use:b.f.get(b.d.ANNOTATION_TEXT_MARKUP_UNDERLINE)}].filter(e=>e.use),get lastTool(){return this.subtools[this.lastUsed]},get tool(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.tool},get iconClass(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.iconClass},get alt(){var e;return null===(e=this.lastTool)||void 0===e?void 0:e.alt},priority:4,use:b.f.get(b.c.ANNOTATION_TEXT_MARKUP)},{tool:c.a.LINK,alt:this.translatePipe.transform("CREATE_LINK"),iconClass:"papycon-link",use:b.f.get(b.d.ANNOTATION_LINK),priority:5,mobileStatus:{display:"block"}},{tool:c.a.ERASER,alt:this.translatePipe.transform("ERASER"),iconClass:"papycon-eraser",use:b.f.get(b.d.ANNOTATION_ERASER),priority:3,mobileStatus:{display:"block"}},{tool:c.a.SIGNATURE,alt:this.translatePipe.transform("SIGN"),iconClass:"papycon-signature",use:b.f.get(b.d.FORM_SIGNATURE),priority:6,mobileStatus:{display:"block"}}]}initFormVariableMenus(){return[{tool:d.a.SELECT_ANNOT,alt:this.translatePipe.transform("SELECT_ANNOT_TOOL"),iconClass:"papycon-pointer",use:this.canUseAnnotSelect(),priority:6,mobileStatus:{display:"block"}},{tool:c.a.TEXT_FIELD,alt:this.translatePipe.transform("TEXT_FIELD"),iconClass:"papycon-text-field",use:b.f.get(b.d.FORM_TEXT_FIELD),priority:6,mobileStatus:{display:"block"}},{tool:c.a.COMBO_BOX,alt:this.translatePipe.transform("COMBO_BOX"),iconClass:"papycon-dropdown",use:b.f.get(b.d.FORM_COMBO_BOX),priority:6,mobileStatus:{display:"block"}},{tool:c.a.LIST_BOX,alt:this.translatePipe.transform("LIST_BOX"),iconClass:"papycon-list-box",use:b.f.get(b.d.FORM_LIST_BOX),priority:6,mobileStatus:{display:"block"}},{tool:c.a.CHECK_BUTTON,alt:this.translatePipe.transform("CHECK_BUTTON"),iconClass:"papycon-check-mark4",use:b.f.get(b.d.FORM_CHECK_BUTTON),priority:6,mobileStatus:{display:"block"}},{tool:c.a.RADIO_BUTTON,alt:this.translatePipe.transform("RADIO_BUTTON"),iconClass:"papycon-radio2-checked",use:b.f.get(b.d.FORM_RADIO_BUTTON),priority:6,mobileStatus:{display:"block"}},{tool:c.a.BUTTON,alt:this.translatePipe.transform("BUTTON"),iconClass:"papycon-ok",use:b.f.get(b.d.FORM_BUTTON),priority:6,mobileStatus:{display:"block"}}]}ngOnInit(){this.initSubscriptions(),this.resize(),this.subscribeSubtoolMenuCloser()}onClickUndo(){this.annotSelectedService.unselectAll(),this.actionHistoryService.undo()}onClickRedo(){this.annotSelectedService.unselectAll(),this.actionHistoryService.redo()}activateTool(e,t){if("number"==typeof t)return this.store$.dispatch(g.a.set({key:"dragMode",value:t})),this.store$.dispatch(a.a.unselectTool()),this.selectTextService.publishSelectedText(null),this.annotService.closeEditor(),!1;if(this.unExportableTools.indexOf(t)>-1||!this.documentService.checkAuthority(l.j.DRAW_ANNOTATION))return!1;this.menuItems.forEach(e=>{e.menuState="off"});const i=this.currentTool;return c.a.STAMP===t?(this.dialogService.toggleDialogVisibility(h.c.STAMP_CREATION,!0),!1):c.a.INSTANT_SIGNATURE===t?(this.signatureService.prepareSignature().subscribe({next:()=>{this.signatureService.toggleOverlay(!1),this.signatureService.toggleSignatureModuleLoadingDialog(!1),this.store$.dispatch(a.a.selectTool({payload:t})),this.changeDetectorRef.markForCheck()}}),!1):c.a.INVISIBLE_SIGNATURE===t?(this.store$.dispatch(a.a.selectTool({payload:null})),this.signatureService.prepareSignature().pipe(m.a(()=>this.signatureService.createEmptySignatureAnnot(0)),v.a(e=>this.signatureService.injectSignature(e,"create")),S.a(e=>Boolean(e))).subscribe(),!1):(t!==i&&(this.store$.dispatch(a.a.selectTool({payload:t})),this.changeDetectorRef.markForCheck()),this.windowWidth<this.windowResponsiveBasis.width&&(this.selectedSubtools=[]),this.annotService.closeEditor(),!1)}getActiveMenus(){if(this.annotToolActive)return this.variableMenus;if(this.formToolActive)return this.formVariableMenus;if(this.signatureToolActive)return this.signatureVariableMenus;throw new Error("not supported active menu")}expanderClicked(e){e.menuState="off"===e.menuState?"on":"off",this.menuItems.forEach(t=>{t.hasOwnProperty("subtools")&&t!==e&&(t.menuState="off")}),e.hasOwnProperty("subtools")&&(this.selectedSubtools="off"===e.menuState?[]:[...e.subtools])}isEbookMode(){return 4===this.viewMode&&this.documentService.eBookStatus}isActivated(e){return"number"==typeof e?this.dragMode===e&&null===this.currentTool:this.currentTool===e}isTemped(e){return this.tempTool===e}styleOfMenuTool(e){return this.isActivated(e.tool)||this.isTemped(e.tool)?"white":"dark"}toggleRightSideView(){this.rightSideViewMode!==p.a.AnnotProperty&&this.store$.dispatch(g.a.set({key:"rightSideViewMode",value:p.a.AnnotProperty})),this.store$.dispatch(g.a.set({key:"rightSideViewVisible",value:!this.visibleRightSideView}))}toggleFormFieldHighlight(){this.preferenceService.updatePreferences(["formFieldHighlighted"],!this.formFieldHighlighted)}toggleRuler(){this.store$.dispatch(g.a.set({key:"rulerActive",value:!this.rulerActive}))}isAnnotPropertyViewActive(){return this.visibleRightSideView&&this.rightSideViewMode===p.a.AnnotProperty}canUseAnnotSelect(){return!this.isEbookMode()&&b.f.get(b.c.DRAG_MODE)&&b.f.get(b.d.DRAG_MODE_SELECT_ANNOT)&&!this.hidableMenus[f.a.TOOLBAR_DRAG_MODE_SELECT_ANNOTATION]}createMenus(){const e=[...this.variableMenus];if(!y.F.isMobile())return e;const t=[c.a.HIGHLIGHT,c.a.STRIKE,c.a.UNDERLINE];return e.filter(e=>!t.includes(e.tool))}subscribeAnnotContext(){this.subscriptionService.push(this.store$.pipe(Object(a.c)()).subscribe({next:e=>{if(this.currentTool=e,!this.isUnExportableTool(e)&&e!==c.a.ERASER){if(null!==e){this.isDeepCopy=!1;const t=this.defaultAnnot.getAnnot(e,this.isDeepCopy);if(!t)return;this.annotSelectedService.unselectAll(),this.annotSelectedService.add({data:t,elementRef:void 0})}else this.annotSelectedService.unselectAll();this.changeDetectorRef.markForCheck()}}}))}initSubscriptions(){this.subscribeAnnotContext(),this.subscriptionService.push(this.store$.pipe(Object(g.f)("rightSideViewMode")).subscribe({next:e=>{this.rightSideViewMode=e,this.changeDetectorRef.detectChanges()}}),this.store$.pipe(Object(g.e)([f.a.TOOLBAR_DRAG_MODE_SELECT_ANNOTATION,f.a.ANNOTATION_INK,f.a.ANNOTATION_LINE,f.a.ANNOTATION_SQUARE,f.a.ANNOTATION_POLYLINE,f.a.ANNOTATION_CLOUD,f.a.ANNOTATION_TEXT_FREE,f.a.ANNOTATION_TEXT_CALLOUT,f.a.ANNOTATION_TEXT_POPUP,f.a.ANNOTATION_LINE_DIMENSION,f.a.ANNOTATION_POLYLINE_DIMENSION,f.a.ANNOTATION_POLYGON_DIMENSION,f.a.ANNOTATION_STAMP,f.a.ANNOTATION_HIGHLIGHT,f.a.ANNOTATION_STRIKE,f.a.ANNOTATION_UNDERLINE,f.a.ANNOTATION_LINK,f.a.ANNOTATION_SIGNATURE,f.a.ANNOTATION_TEXT_FIELD,f.a.ANNOTATION_COMBO_BOX,f.a.ANNOTATION_LIST_BOX,f.a.ANNOTATION_CHECK_BUTTON,f.a.ANNOTATION_RADIO_BUTTON,f.a.ANNOTATION_BUTTON,f.a.ANNOTATION_ERASER,f.a.FORM_SIGNATURE,f.a.FORM_TEXT_FIELD,f.a.FORM_COMBO_BOX,f.a.FORM_LIST_BOX,f.a.FORM_CHECK_BUTTON,f.a.FORM_RADIO_BUTTON,f.a.FORM_BUTTON])).subscribe({next:({hiddenViews:e})=>{Object.assign(this.hidableMenus,e),this.variableMenus=this.initVariableMenus(),this.formVariableMenus=this.initFormVariableMenus(),Object.keys(this.hidableMenus).forEach(e=>{if(!this.hidableMenus[e])return;const[t,i]=e.split(".");this.hideAnnotTool(t,i)}),this.changeDetectorRef.markForCheck()}}),y.F.windowResize$.subscribe({next:e=>this.resize(e)}),this.documentService.authorityUpdate$.subscribe({next:()=>this.changeDetectorRef.markForCheck()}),this.contentService.annotEvent$.pipe(S.a(e=>null!==e)).subscribe({next:()=>this.changeDetectorRef.markForCheck()}),this.contentService.annotListEvent$.pipe(S.a(e=>null!==e)).subscribe({next:()=>this.changeDetectorRef.markForCheck()}),this.annotSelectedService.selectionInfoChange$.subscribe({next:()=>{this.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(g.f)("rightSideViewVisible")).subscribe({next:e=>{this.visibleRightSideView=e,this.selectedSubtools=[],this.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(u.e)("formFieldHighlighted")).subscribe({next:e=>{this.formFieldHighlighted=e,this.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(g.f)("rulerActive")).subscribe({next:e=>{this.rulerActive=e,this.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(g.f)("dragMode")).subscribe({next:e=>{this.dragMode=e,this.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(g.f)("viewMode")).subscribe({next:e=>this.viewMode=e}),this.actionHistoryService.availableUndoCount$.subscribe({next:e=>{this.canUndo=e>0,this.changeDetectorRef.detectChanges()}}),this.actionHistoryService.availableRedoCount$.subscribe({next:e=>{this.canRedo=e>0,this.changeDetectorRef.detectChanges()}}),this.signatureService.module$.subscribe({next:e=>{e&&this.signatureVariableMenus.push({tool:c.a.INVISIBLE_SIGNATURE,alt:this.translatePipe.transform("SIGN"),text:this.translatePipe.transform("INVISIBLE_SIGNATURE"),iconClass:"papycon-memo2",use:b.f.get(b.d.SIGNATURE_INVISIBLE_SIGNATURE)&&Boolean(e),priority:6,mobileStatus:{display:"block"}})}}))}isNestedMenuItem(e){return"subtools"in e}subtoolsLength(e){return e.subtools?e.subtools.filter(e=>e.use).length:1}hideAnnotTool(e,t){let i;i="ANNOTATION"===e?this.variableMenus:this.formVariableMenus;let n=-1;const o=i.findIndex(e=>this.isNestedMenuItem(e)?(n=e.subtools.findIndex(e=>e.tool===t),-1!==n):e.tool===t),s=i[o];if(y.g.isDefined(s))if(this.isNestedMenuItem(s)){if(s.subtools[n].use=!1,n===s.lastUsed){const e=s.subtools.findIndex(e=>e.use);-1===e&&(s.use=!1),s.lastUsed=e,this.store$.dispatch(a.a.unselectTool())}}else s.use=!1}resize(e){this.menuItems=this.buildMenu(e),e&&this.changeDetectorRef.markForCheck()}buildMenu(e){let t;t=this.menuItems?this.menuItems:this.createMenus();const i=(544-y.F.width)/48;for(;i>=this.contextAnnotMenus.length&&this.contextAnnotMenus.length<0;)this.splicePriorityMenuItem(t),1===this.contextAnnotMenus.length&&this.splicePriorityMenuItem(t);return i+1<this.contextAnnotMenus.length&&(i>1?this.appendPriorityMenuItem(t):i<=0&&(this.appendPriorityMenuItem(t),this.appendPriorityMenuItem(t))),t}splicePriorityMenuItem(e){let t=0,i=0;e.forEach((e,n)=>{e.priority>t&&"none"!==e.mobileStatus.display&&(t=e.priority,i=n)}),this.contextAnnotMenus.splice(this.contextAnnotMenus.length,0,e[i]),e[i].mobileStatus.display="none"}appendPriorityMenuItem(e){let t=10,i=0;e.forEach((e,n)=>{e.priority<t&&"none"===e.mobileStatus.display&&(t=e.priority,i=n)}),this.contextAnnotMenus.splice(this.contextAnnotMenus.length-1,1),e[i].mobileStatus.display="block"}subscribeSubtoolMenuCloser(){this.subscriptionService.push()}isUnExportableTool(e){let t=!1;return this.unExportableTools.forEach(i=>{i===e&&(t=!0)}),t}closeAnnotationToolbar(){this.toolbarService.toggleAnnotToolbar(!1),this.toolbarService.toggleFormToolbar(!1)}activateLastTool(e,t){this.menuItems.forEach(i=>{if(!this.isNestedMenuItem(i))return;const n=i.subtools.find(t=>t.tool===e.tool);y.g.isDefined(n)&&(i.lastUsed=t)})}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(l.d),M.Mb(l.f),M.Mb(h.b),M.Mb(M.h),M.Mb(x.b),M.Mb(l.c),M.Mb(l.k),M.Mb(s.G),M.Mb(u.c),M.Mb(l.b),M.Mb(O.h),M.Mb(P.d),M.Mb(C.b),M.Mb(w.a),M.Mb(_.a))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-annot-toolbar"]],inputs:{annotToolActive:"annotToolActive",formToolActive:"formToolActive",signatureToolActive:"signatureToolActive"},features:[M.yb([s.G])],decls:11,vars:7,consts:[[1,"responsive-group"],[1,"left"],[4,"ngIf"],[1,"right"],[1,"annotation"],[1,"full","divider"],[1,"panel"],["class","ep-text-button annot-property-toggle tool-button",3,"title","click",4,"ngIf"],["size","tiny","color","white",1,"ep-button",3,"disabled","click"],[1,"papycon","papycon-undo"],[1,"papycon","papycon-redo"],[1,"close"],["color","dark",1,"ep-text-button","close-button",3,"title","click"],[1,"papycon","papycon-cross"],["class","subtool-container",4,"ngIf"],[1,"subtool-container"],[4,"ngFor","ngForOf"],["class","ep-text-button tool-button",3,"title","click",4,"ngIf"],[1,"ep-text-button","tool-button",3,"title","click"],[1,"papycon",3,"ngClass"],[1,"tool-container"],[1,"tool-button",3,"title","click"],["class","ep-text-button expand-button","color","dark",3,"click",4,"ngIf"],["class","active-indicator",4,"ngIf"],["class","subtool-menu",4,"ngIf"],["color","dark",1,"ep-text-button","expand-button",3,"click"],[1,"papycon","papycon-chevron3-down"],[1,"active-indicator"],[1,"subtool-menu"],[1,"menu-container"],[1,"ep-text-button",3,"title","click"],[1,"center","divider"],["class","ep-text-button form-field-highlight tool-button",3,"title","click",4,"ngIf"],[1,"ep-text-button","form-field-highlight","tool-button",3,"title","click"],[1,"ep-text-button","annot-property-toggle","tool-button",3,"title","click"],[1,"papycon","papycon-show-panel"]],template:function(e,t){1&e&&(M.Sb(0,"div",0),M.Sb(1,"section",1),M.Dc(2,E,5,2,"ng-container",2),M.Rb(),M.Rb(),M.Sb(3,"section",3),M.Dc(4,N,7,4,"ng-container",2),M.Sb(5,"section",4),M.Dc(6,B,2,1,"ng-container",2),M.Rb(),M.Dc(7,U,4,2,"section",2),M.Nb(8,"div",5),M.Sb(9,"section",6),M.Dc(10,G,3,4,"button",7),M.Rb(),M.Rb()),2&e&&(M.zb(2),M.jc("ngIf",t.annotToolActive&&t.runtimeEnv.get(t.RuntimeEnvKey.ANNOTATION_UNDO)||t.formToolActive&&t.runtimeEnv.get(t.RuntimeEnvKey.FORM_UNDO)),M.zb(2),M.jc("ngIf",t.windowWidth<t.windowResponsiveBasis.width),M.zb(1),M.Eb("form-tool",!t.annotToolActive),M.zb(1),M.jc("ngIf",t.documentService.checkAuthority(t.DocumentAction.DRAW_ANNOTATION)&&(t.annotToolActive||t.formToolActive||t.signatureToolActive)),M.zb(1),M.jc("ngIf",!t.annotToolActive),M.zb(3),M.jc("ngIf",t.isVisiblePropertyButton))},directives:[n.t,n.s,n.q],pipes:[T.a],styles:["i[_ngcontent-%COMP%]{line-height:22px}i.papycon-next-symbol2[_ngcontent-%COMP%], i.papycon-previous-symbol2[_ngcontent-%COMP%]{font-size:11px}i.papycon-regular-expression[_ngcontent-%COMP%]{font-size:13px}i.papycon-cross[_ngcontent-%COMP%], i.papycon-hamburger-menu[_ngcontent-%COMP%], i.papycon-minus[_ngcontent-%COMP%], i.papycon-plus2[_ngcontent-%COMP%]{font-size:14px}i.papycon-clip[_ngcontent-%COMP%], i.papycon-edit[_ngcontent-%COMP%], i.papycon-extend[_ngcontent-%COMP%], i.papycon-formtools[_ngcontent-%COMP%], i.papycon-one-page-continuous3[_ngcontent-%COMP%], i.papycon-two-page-continuous3[_ngcontent-%COMP%]{font-size:16px}i.papycon-annotation-list[_ngcontent-%COMP%], i.papycon-area-hide[_ngcontent-%COMP%], i.papycon-area-show[_ngcontent-%COMP%], i.papycon-bookmark[_ngcontent-%COMP%], i.papycon-case-sensitive[_ngcontent-%COMP%], i.papycon-check-mark4[_ngcontent-%COMP%], i.papycon-circle[_ngcontent-%COMP%], i.papycon-dropdown[_ngcontent-%COMP%], i.papycon-fit-height2[_ngcontent-%COMP%], i.papycon-fit-width2[_ngcontent-%COMP%], i.papycon-formfield[_ngcontent-%COMP%], i.papycon-hamburger-menu[_ngcontent-%COMP%], i.papycon-line[_ngcontent-%COMP%], i.papycon-line-measure2[_ngcontent-%COMP%], i.papycon-link[_ngcontent-%COMP%], i.papycon-list[_ngcontent-%COMP%], i.papycon-list-box[_ngcontent-%COMP%], i.papycon-memo3[_ngcontent-%COMP%], i.papycon-pencil[_ngcontent-%COMP%], i.papycon-polygon[_ngcontent-%COMP%], i.papycon-polygon-measure2[_ngcontent-%COMP%], i.papycon-polyline[_ngcontent-%COMP%], i.papycon-polyline-measure2[_ngcontent-%COMP%], i.papycon-radio2-checked[_ngcontent-%COMP%], i.papycon-redaction2[_ngcontent-%COMP%], i.papycon-redo[_ngcontent-%COMP%], i.papycon-revisioncloud[_ngcontent-%COMP%], i.papycon-ruler-hide[_ngcontent-%COMP%], i.papycon-ruler-show[_ngcontent-%COMP%], i.papycon-search[_ngcontent-%COMP%], i.papycon-show-panel[_ngcontent-%COMP%], i.papycon-show-panel2[_ngcontent-%COMP%], i.papycon-sign-list[_ngcontent-%COMP%], i.papycon-square[_ngcontent-%COMP%], i.papycon-text-field[_ngcontent-%COMP%], i.papycon-text-highlight[_ngcontent-%COMP%], i.papycon-text-strikeout[_ngcontent-%COMP%], i.papycon-text-underline[_ngcontent-%COMP%], i.papycon-textbox[_ngcontent-%COMP%], i.papycon-undo[_ngcontent-%COMP%]{font-size:17px}i.papycon-hand[_ngcontent-%COMP%], i.papycon-list2[_ngcontent-%COMP%], i.papycon-two-page3[_ngcontent-%COMP%]{font-size:18px}i.papycon-eraser[_ngcontent-%COMP%], i.papycon-pointer[_ngcontent-%COMP%], i.papycon-selection-annotation-text[_ngcontent-%COMP%], i.papycon-signature[_ngcontent-%COMP%]{font-size:19px}i.papycon-composite-document[_ngcontent-%COMP%], i.papycon-ok[_ngcontent-%COMP%], i.papycon-stamp2[_ngcontent-%COMP%]{font-size:20px}i.papycon-chevron3-down[_ngcontent-%COMP%]{font-size:10px;-webkit-transform:scale(.7);transform:scale(.7);-webkit-transform-origin:50% 50%;transform-origin:50% 50%}i.papycon-chevron3-down.expanded[_ngcontent-%COMP%]{-webkit-transform:scale(.7) rotate(-180deg);transform:scale(.7) rotate(-180deg)}@media screen and (max-width:811px){i.papycon-link[_ngcontent-%COMP%], i.papycon-memo3[_ngcontent-%COMP%]{font-size:14px}i.papycon-eraser[_ngcontent-%COMP%], i.papycon-pointer[_ngcontent-%COMP%], i.papycon-signature[_ngcontent-%COMP%], i.papycon-stamp2[_ngcontent-%COMP%]{font-size:16px}i.papycon-list2[_ngcontent-%COMP%], i.papycon-ok[_ngcontent-%COMP%], i.papycon-one-page-continuous3[_ngcontent-%COMP%]{font-size:17px}i.papycon-callout2[_ngcontent-%COMP%], i.papycon-more-symbol4[_ngcontent-%COMP%]{font-size:19px}}[_nghost-%COMP%]{position:relative;width:100%;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;background-color:#f4f4f4;border-bottom:1px solid #dadada;z-index:2}[_nghost-%COMP%], section[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}section[_ngcontent-%COMP%]{height:100%}section[_ngcontent-%COMP%] > .divider[_ngcontent-%COMP%]{height:32px;width:1px;background-color:#dadada}section[_ngcontent-%COMP%] > .divider.full[_ngcontent-%COMP%]{height:100%}.responsive-group[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%}section.left[_ngcontent-%COMP%]{padding-left:8px}section.left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:8px}section.left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:17px}section.right[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}section.right[_ngcontent-%COMP%]   section.annotation[_ngcontent-%COMP%]{padding:0 12px}section.right[_ngcontent-%COMP%]   div.tool-container[_ngcontent-%COMP%]{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;height:calc(48px / 2)}section.right[_ngcontent-%COMP%]   div.tool-container[_ngcontent-%COMP%]   button.tool-button[_ngcontent-%COMP%]{margin:0}section.right[_ngcontent-%COMP%]   div.tool-container[_ngcontent-%COMP%] + div.tool-container[_ngcontent-%COMP%]{margin-left:20px}section.right[_ngcontent-%COMP%]   button.close-button[_ngcontent-%COMP%], section.right[_ngcontent-%COMP%]   button.tool-button[_ngcontent-%COMP%]{margin:calc((42px - (48px / 2)) / 2) calc((48px - (48px / 2)) / 2);width:calc(48px / 2);height:calc(48px / 2)}section.right[_ngcontent-%COMP%]   button.close-button.expandable[_ngcontent-%COMP%], section.right[_ngcontent-%COMP%]   button.tool-button.expandable[_ngcontent-%COMP%]{margin-right:0}section.right[_ngcontent-%COMP%]   .expand-button[_ngcontent-%COMP%]{margin-left:2px;font-size:10px;line-height:10px}section.right[_ngcontent-%COMP%]   .expand-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{-webkit-transform:scale(.7);transform:scale(.7)}section.right[_ngcontent-%COMP%]   .active-indicator[_ngcontent-%COMP%]{position:absolute;left:0;bottom:-8px;width:100%;height:4px;background-color:#f79f1a;border-radius:2px}.subtool-menu[_ngcontent-%COMP%]{-webkit-box-shadow:0 4px 32px 0 hsla(0,0%,42.4%,.12);box-shadow:0 4px 32px 0 hsla(0,0%,42.4%,.12);position:absolute;height:44px;top:100%;left:5px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box;padding:6px 12px;margin-top:5px;border:1px solid #dadada;border-radius:2px;background-color:#fff;white-space:nowrap;z-index:3}.subtool-menu[_ngcontent-%COMP%], .subtool-menu[_ngcontent-%COMP%]   .menu-container[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.subtool-menu[_ngcontent-%COMP%]   .menu-container[_ngcontent-%COMP%]{min-width:100%}.subtool-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .subtool-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30px;height:30px}.subtool-container[_ngcontent-%COMP%]   button[color=white][_ngcontent-%COMP%], .subtool-menu[_ngcontent-%COMP%]   button[color=white][_ngcontent-%COMP%]{background-color:#f79f1a}.subtool-container[_ngcontent-%COMP%]   button[color=white][_ngcontent-%COMP%]:focus, .subtool-menu[_ngcontent-%COMP%]   button[color=white][_ngcontent-%COMP%]:focus{border-color:#fff}.subtool-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%], .subtool-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:12px}.subtool-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .subtool-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:17px}@media screen and (max-width:1200px){[_nghost-%COMP%]{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start}section.left[_ngcontent-%COMP%]{position:static}section.left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-right:10px}section.right[_ngcontent-%COMP%]{position:absolute;right:0;top:0}}@media screen and (max-width:811px){section.left[_ngcontent-%COMP%]   button.ep-button[_ngcontent-%COMP%]{display:none}}@media screen and (max-width:768px){section.left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:0}section.left[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}@media screen and (max-width:639px){section.left[_ngcontent-%COMP%]{display:none}}@media screen and (max-width:548px){[_nghost-%COMP%]{background:#fff;position:absolute;top:0;z-index:3}section.right[_ngcontent-%COMP%]{width:100%;position:relative}section.right[_ngcontent-%COMP%]   section.subtool-container[_ngcontent-%COMP%]{position:absolute;top:calc(42px + 1px);left:0;background-color:#f4f4f4;-webkit-box-shadow:0 2px 1px 0 hsla(0,0%,42.4%,.12);box-shadow:0 2px 1px 0 hsla(0,0%,42.4%,.12);border-bottom:1px solid #dadada;width:100%}section.right[_ngcontent-%COMP%]   section.subtool-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;padding:0 12px}section.right[_ngcontent-%COMP%]   section.subtool-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}section.right[_ngcontent-%COMP%]   section.subtool-container[_ngcontent-%COMP%]   button.tool-button[_ngcontent-%COMP%]{width:32px;height:32px}section.right[_ngcontent-%COMP%]   section.subtool-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:12px}section.close[_ngcontent-%COMP%], section.panel[_ngcontent-%COMP%]{width:48px}section.annotation[_ngcontent-%COMP%]{width:calc(100% - (48px * 2));white-space:nowrap;overflow-x:scroll;overflow-y:hidden;-ms-overflow-style:none;scrollbar-width:none}section.annotation[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}section.annotation[_ngcontent-%COMP%]   div.tool-container[_ngcontent-%COMP%]{display:inline-block}section.annotation[_ngcontent-%COMP%]   div.tool-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{vertical-align:middle}button.close-button[_ngcontent-%COMP%], button.expand-button[_ngcontent-%COMP%], button.tool-button[_ngcontent-%COMP%]{overflow:visible}}"],data:{animation:[y.a.expandSubTool(),Object(r.m)("hostState",[Object(r.j)("off",Object(r.k)({left:"5%"})),Object(r.j)("on",Object(r.k)({left:"calc(48% - 220px)"})),Object(r.l)("off <=> on",Object(r.e)("250ms linear"))])]},changeDetection:0}),e})(),q=(()=>{class e{}return e.\u0275mod=M.Kb({type:e}),e.\u0275inj=M.Jb({factory:function(t){return new(t||e)},providers:[_.a],imports:[[P.b,n.c]]}),e})();var Z=i("OIqU"),X=i("WNJb"),Y=i("DOh9"),K=i("24iV"),Q=i("VRyK"),J=i("7o/Q"),ee=i("D0XW");i("zx2A");const te={leading:!0,trailing:!1};function ie(e,t=ee.a,i=te){return n=>n.lift(new ne(e,t,i.leading,i.trailing))}class ne{constructor(e,t,i,n){this.duration=e,this.scheduler=t,this.leading=i,this.trailing=n}call(e,t){return t.subscribe(new oe(e,this.duration,this.scheduler,this.leading,this.trailing))}}class oe extends J.a{constructor(e,t,i,n,o){super(e),this.duration=t,this.scheduler=i,this.leading=n,this.trailing=o,this._hasTrailingValue=!1,this._trailingValue=null}_next(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(se,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)}}function se(e){const{subscriber:t}=e;t.clearThrottle()}var re=i("/uUt"),ae=i("K38v");const ce=["containerWrapperRef"];function le(e,t){1&e&&M.Nb(0,"div",8)}const he=function(){return{"object-fit":"contain"}};function de(e,t){if(1&e){const e=M.Tb();M.Sb(0,"sd-image",9),M.Zb("rendered",(function(){M.uc(e);const t=M.dc().$implicit;return M.dc(2).onImageRendered(t)})),M.Rb()}if(2&e){const e=M.dc().$implicit,t=M.dc(2);M.jc("pdfPage",e)("documentId",t.documentId)("imgStyle",M.mc(3,he))}}function ue(e,t){if(1&e&&(M.Sb(0,"div",5),M.Dc(1,le,1,0,"div",6),M.Dc(2,de,1,4,"sd-image",7),M.Rb()),2&e){const e=t.$implicit,i=M.dc(2);M.zb(1),M.jc("ngIf",!i.isLoadedPage(e)),M.zb(1),M.jc("ngIf",i.isVisiblePage(e))}}function pe(e,t){if(1&e&&(M.Sb(0,"div",3),M.Dc(1,ue,3,2,"div",4),M.Rb()),2&e){const e=M.dc();M.Bc("visibility",e.eBookReady?"visible":"hidden"),M.jc("ngStyle",e.eBookContainerStyle()),M.zb(1),M.jc("ngForOf",e.pdfPages)}}var ge=function(e){return e.SINGLE="single",e.DOUBLE="double",e}({});let fe=(()=>{class e{constructor(e,t,i,n,o,s,r,a,c,l){this.contentService=e,this.documentService=t,this.elementRef=i,this.changeDetectorRef=n,this.shortcutService=o,this.subscriptionService=s,this.renderer=r,this.scrollController=a,this.store$=c,this.pageService=l,this.eBookReady=!1,this.containerWrapperStyle={},this.WIDTH_MARGIN=64,this.HEIGHT_MARGIN=64,this.viewerDirection=0,this.isR2L=!1,this.bookSize={width:0,height:0},this.containerStyle={},this.loadedPageNoArr=[],this.scale=100,this.dragListeners=[],this.pdfPages=[]}get isDragging(){return this.dragListeners.length>0}get scrollContainer(){return this.elementRef.nativeElement.parentElement}ngOnInit(){this.initSubscriptions()}ngOnChanges(){this.eBookReady=!1,this.calcBookPageRatio(),this.eBook&&(this.eBook.turn("destroy"),this.eBook=void 0),setTimeout(()=>{this.bindEbook()})}onWrapperMousedown(e){this.prevDragEvent=e,this.dragListeners.push(this.renderer.listen(this.containerWrapperRef.nativeElement,"mousemove",e=>this.onMoveEvent(e)),this.renderer.listen(this.containerWrapperRef.nativeElement,"mouseup",()=>this.onEndDragEvent()),this.renderer.listen(this.containerWrapperRef.nativeElement,"mouseleave",()=>this.onEndDragEvent()))}eBookContainerStyle(){return this.containerStyle}isLoadedPage(e){return Boolean(this.loadedPageNoArr[e.i+1])}isVisiblePage(e){return(this.prevPageNoRange||[]).includes(e.i+1)}onImageRendered(e){this.loadedPageNoArr[e.i+1]=!0,this.contentService.publishSomePageLoaded(!0),this.changeDetectorRef.markForCheck()}initSubscriptions(){this.subscriptionService.push(this.store$.pipe(Object(g.f)("currentPageNo")).subscribe({next:e=>this.currentPageNo=e}),this.store$.pipe(Object(g.f)("pageCount")).subscribe({next:e=>this.pageCount=e}),this.shortcutService.getShortcutEvent(Y.a.EBOOK_LAST_PAGE).pipe(ie(100),S.a(()=>this.eBook)).subscribe({next:()=>this.eBook.turn("previous")}),this.shortcutService.getShortcutEvent(Y.a.EBOOK_NEXT_PAGE).pipe(ie(100),S.a(()=>this.eBook)).subscribe({next:()=>this.eBook.turn("next")}),this.contentService.pageNo$.pipe(m.a(e=>e.pageNo),m.a(e=>g.d.getEbookPageNo(e)),re.a(),S.a(()=>this.eBook)).subscribe({next:e=>{this.eBook.turn("page",e)}}),Q.a(y.F.windowResize$,this.store$.pipe(Object(g.f)("sideViewVisible")),this.store$.pipe(Object(g.f)("sideViewSize")),this.store$.pipe(Object(g.f)("rightSideViewVisible")),this.store$.pipe(Object(g.f)("rightSideViewSize"))).subscribe({next:()=>{this.eBook&&this.safeCallTurnJS(()=>{this.decideDisplayMode(),this.calcBookSize(),this.eBook.turn("size",this.bookSize.width,this.bookSize.height)})}}),this.documentService.pdfInfo$.subscribe({next:e=>{this.pdfInfo=e,this.decideR2L()}}),this.store$.pipe(Object(u.e)("viewerDirection")).subscribe({next:e=>{this.viewerDirection=e,this.decideR2L()}}),this.store$.pipe(Object(g.f)("scale")).subscribe({next:e=>{if(this.scale=e,this.eBook){let e=1;const t=this.bookSize.width;this.safeCallTurnJS(()=>{this.decideDisplayMode(),this.calcBookSize(),e=this.bookSize.width/t,this.eBook.turn("size",this.bookSize.width,this.bookSize.height)});const i=this.scrollController.jumpingOrigin;i.x>0&&(this.scrollContainer.scrollLeft=(this.scrollContainer.scrollLeft+i.x)*e-i.x),i.y>0&&(this.scrollContainer.scrollTop=(this.scrollContainer.scrollTop+i.y)*e-i.y)}}}),this.pageService.pdfPages$.subscribe({next:e=>this.pdfPages=e}))}calcBookPageRatio(){if(!this.pdfPages)return;const e={};let t,i=0;this.pdfPages.forEach(t=>{const i=(t.bbox.h/t.bbox.w).toFixed(5);e[i]?e[i]++:e[i]=1});for(const n in e)e[n]>i&&(i=e[n],t=Number(n));this.bookPageRatio=t}decideDisplayMode(){const e=this.bookDisplayMode||null;this.bookDisplayMode=ge.DOUBLE,y.F.isMobile()&&this.bookPageRatio<this.scrollContainer.clientHeight/this.scrollContainer.clientWidth*2&&(this.bookDisplayMode=ge.SINGLE),e&&e!==this.bookDisplayMode&&this.eBook.turn("display",this.bookDisplayMode)}calcBookSize(){this.bookPageRatio||this.calcBookPageRatio();const e=this.scrollContainer.clientWidth-(y.F.isMobile()?0:2*this.WIDTH_MARGIN),t=this.scrollContainer.clientHeight-(y.F.isMobile()?0:2*this.HEIGHT_MARGIN),i=this.bookDisplayMode===ge.SINGLE?this.bookPageRatio:this.bookPageRatio/2;let n,o;i>t/e?(o=t,n=o/i):(n=e,o=n*i),this.bookSize.width=n*(this.scale/100),this.bookSize.height=o*(this.scale/100),this.containerWrapperStyle.width=this.bookSize.width+"px",this.containerWrapperStyle.height=this.bookSize.height+"px";let s="0",r="0";return this.bookSize.width<this.scrollContainer.clientWidth&&(s=((this.scrollContainer.clientWidth-this.bookSize.width)/2).toFixed(2)+"px"),this.bookSize.height<this.scrollContainer.clientHeight&&(r=((this.scrollContainer.clientHeight-this.bookSize.height)/2).toFixed(2)+"px"),this.containerWrapperStyle.transform=`translate(${s}, ${r})`,this.bookSize}bindEbook(){this.decideDisplayMode(),this.calcBookSize(),this.updateEbookStyle(),this.eBook=K("#ebook"),this.eBook.turn({display:this.bookDisplayMode,elevation:50,gradients:!0,autoCenter:!1,acceleration:!0,pages:this.pdfPages.length,duration:500,page:this.currentPageNo,width:this.bookSize.width,height:this.bookSize.height,direction:this.isR2L?"rtl":"ltr",when:{turning:(e,t,i)=>{const n=g.d.getEbookPageNo(t);this.updateEbookStyle(n),this.contentService.movePage({pageNo:n,pageMoveEvent:1}),this.scrollController.updateReadStatus(),this.changeDetectorRef.markForCheck()},end:(e,t,i)=>{const[n,o]=this.eBook.turn("range"),s=Array.from(new Array(o-n+1),(e,t)=>t+n);this.prevPageNoRange&&this.prevPageNoRange.forEach(e=>{s.includes(e)||(this.loadedPageNoArr[e]=!1)}),this.prevPageNoRange=s,this.changeDetectorRef.markForCheck()}}});const[e,t]=this.eBook.turn("range");this.prevPageNoRange=Array.from(new Array(t-e+1),(t,i)=>i+e),this.eBookReady=!0,this.changeDetectorRef.markForCheck()}updateEbookStyle(e){if(this.bookDisplayMode===ge.SINGLE)return;let t=e;y.g.isDefined(t)||(t=this.currentPageNo);const i=parseInt(this.containerWrapperStyle.width,10),n=Math.min(i-this.bookSize.width,this.bookSize.width/2)+(i-this.bookSize.width<this.bookSize.width/2?(this.bookSize.width/2-(i-this.bookSize.width))/2:0);this.containerStyle["margin-left"]=1===t||t===this.pageCount?`${this.isR2L!==(1===t)?"-":""}${n.toFixed(3)}px`:null}decideR2L(){var e,t;let i=Boolean("R2L"===(null===(t=null===(e=this.pdfInfo)||void 0===e?void 0:e.ViewerPreferences)||void 0===t?void 0:t.Direction));i=0===this.viewerDirection?i:2===this.viewerDirection,this.store$.dispatch(g.a.set({key:"isR2L",value:i})),this.changeDirection(this.isR2L?"rtl":"ltr")}changeDirection(e){this.eBook&&this.eBook.turn("direction")!==e&&this.safeCallTurnJS(()=>{this.eBook.turn("direction",e)})}safeCallTurnJS(e){this.containerStyle.transition="none",this.containerStyle["margin-left"]=null,this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges(),e(),this.updateEbookStyle(),this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges(),this.containerStyle.transition=null}onMoveEvent(e){const t=e.clientX-this.prevDragEvent.clientX,i=e.clientY-this.prevDragEvent.clientY;t&&(this.scrollContainer.scrollLeft-=t),i&&(this.scrollContainer.scrollTop-=i),(i||t)&&(this.prevDragEvent=e)}onEndDragEvent(){this.dragListeners.forEach(e=>e()),this.dragListeners.splice(0),this.changeDetectorRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(l.f),M.Mb(l.k),M.Mb(M.l),M.Mb(M.h),M.Mb(Y.c),M.Mb(s.G),M.Mb(M.E),M.Mb(X.a),M.Mb(O.h),M.Mb(ae.b))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-ebook-view"]],viewQuery:function(e,t){var i;1&e&&M.zc(ce,!0),2&e&&M.sc(i=M.ac())&&(t.containerWrapperRef=i.first)},inputs:{documentId:"documentId"},features:[M.yb([s.G]),M.xb],decls:3,vars:4,consts:[[1,"container-wrapper",3,"ngStyle","mousedown"],["containerWrapperRef",""],["id","ebook","class","animated",3,"visibility","ngStyle",4,"ngIf"],["id","ebook",1,"animated",3,"ngStyle"],["class","pdf-page",4,"ngFor","ngForOf"],[1,"pdf-page"],["class","spin-loader",4,"ngIf"],[3,"pdfPage","documentId","imgStyle","rendered",4,"ngIf"],[1,"spin-loader"],[3,"pdfPage","documentId","imgStyle","rendered"]],template:function(e,t){1&e&&(M.Sb(0,"div",0,1),M.Zb("mousedown",(function(e){return t.onWrapperMousedown(e)})),M.Dc(2,pe,2,4,"div",2),M.Rb()),2&e&&(M.Eb("dragging",t.isDragging),M.jc("ngStyle",t.containerWrapperStyle),M.zb(2),M.jc("ngIf",(null==t.pdfPages?null:t.pdfPages.length)>0))},styles:[".container-wrapper[_ngcontent-%COMP%]{cursor:url(grab.ff66d0e16708a8387706.cur),default;overflow:hidden}.container-wrapper.dragging[_ngcontent-%COMP%]{cursor:url(grabbing.64a865afeb83429aea35.cur),default}#ebook[_ngcontent-%COMP%]{width:100%;height:100%;z-index:0;overflow:initial!important}.animated[_ngcontent-%COMP%]{-webkit-transition:margin-left .2s ease-in-out;transition:margin-left .2s ease-in-out}.pdf-page[_ngcontent-%COMP%]{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;background-color:#fff}.pdf-page[_ngcontent-%COMP%]   .spin-loader[_ngcontent-%COMP%]{width:56px;height:56px;border-width:3px}.pdf-page[_ngcontent-%COMP%]   sd-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]  .page.p-temporal{background-color:#fff}"],changeDetection:0}),e})();var be=i("K/4z"),me=i("rebN");function ve(e,t){1&e&&M.Nb(0,"sd-bottom-right-indicator")}function Se(e,t){1&e&&M.Nb(0,"sd-scale-indicator")}let ye=(()=>{class e{constructor(e,t,i){this.changeDetectorRef=e,this.subscriptionService=t,this.store$=i}get RuntimeEnvKey(){return b.d}get runtimeEnv(){return b.f}get isEbookMode(){return 4===this.viewMode}ngOnInit(){this.subscriptionService.push(this.store$.pipe(Object(g.f)("viewMode")).subscribe({next:e=>{this.viewMode=e,this.changeDetectorRef.markForCheck()}}))}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(M.h),M.Mb(s.G),M.Mb(O.h))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-indicator"]],features:[M.yb([s.G])],decls:2,vars:2,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(M.Dc(0,ve,1,0,"sd-bottom-right-indicator",0),M.Dc(1,Se,1,0,"sd-scale-indicator",0)),2&e&&(M.jc("ngIf",!t.isEbookMode),M.zb(1),M.jc("ngIf",t.runtimeEnv.get(t.RuntimeEnvKey.SCALE_INDICATOR)))},styles:["[_nghost-%COMP%]{pointer-events:none}"],changeDetection:0}),e})();const Me=["viewComp"];function xe(e,t){if(1&e&&M.Nb(0,"sd-measure-body",2,3),2&e){const e=M.dc();M.jc("model",e.model)}}let Oe=(()=>{class e{constructor(e,t,i,n){this.contentService=e,this.annotSelectedService=t,this.changeDetectorRef=i,this.subscriptionService=n,this.indicatorState="off",this.indicatorStyle={},this.model=null}ngOnInit(){this.subscriptionService.push(Q.a(this.annotSelectedService.selectionInfoChange$,Q.a(this.contentService.annotListEvent$,this.contentService.annotEvent$).pipe(S.a(e=>(null==e?void 0:e.sdEventType)===l.r.SELECTED)),this.contentService.measureIndicatorEvent$.pipe(S.a(e=>"create"===(null==e?void 0:e.action)))).subscribe({next:e=>{let t=e;if(0===this.annotSelectedService.selectedComponents.length)return this.turnOffIndicator(),void this.detectChanges();y.g.isDefined(t)||(t={annot:this.annotSelectedService.selectedComponents[0].data}),y.b.isLineDimension(t.annot)||y.b.isPolyLineDimension(t.annot)||y.b.isPolygonDimension(t.annot)?(this.model=t.annot,this.turnOnIndicator()):this.turnOffIndicator(),this.detectChanges()}}),this.contentService.measureIndicatorEvent$.pipe(S.a(e=>"edit"===(null==e?void 0:e.action))).subscribe({next:()=>this.detectChanges()}))}detectChanges(){var e;this.changeDetectorRef.destroyed||(this.changeDetectorRef.markForCheck(),(null===(e=this.viewComp)||void 0===e?void 0:e.detectChanges)&&this.viewComp.detectChanges())}indicatorChanged(e,t){y.g.animDispChange(e,t,"block",null,()=>{"off"===this.indicatorState&&(this.model=null)})}turnOnIndicator(){this.indicatorState="on"}turnOffIndicator(){this.indicatorState="off"}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(l.f),M.Mb(l.c),M.Mb(M.h),M.Mb(s.G))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-measure-indicator"]],viewQuery:function(e,t){var i;1&e&&M.Lc(Me,!0),2&e&&M.sc(i=M.ac())&&(t.viewComp=i.first)},features:[M.yb([s.G])],decls:2,vars:3,consts:[[1,"container",3,"ngStyle"],[3,"model",4,"ngIf"],[3,"model"],["viewComp",""]],template:function(e,t){1&e&&(M.Sb(0,"div",0),M.Zb("@indicatorState.done",(function(e){return t.indicatorChanged(e,t.indicatorStyle)}))("@indicatorState.start",(function(e){return t.indicatorChanged(e,t.indicatorStyle)})),M.Dc(1,xe,2,1,"sd-measure-body",1),M.Rb()),2&e&&(M.jc("@indicatorState",t.indicatorState)("ngStyle",t.indicatorStyle),M.zb(1),M.jc("ngIf",t.model))},styles:[".container[_ngcontent-%COMP%]{-webkit-box-shadow:0 4px 32px 0 hsla(0,0%,42.4%,.12);box-shadow:0 4px 32px 0 hsla(0,0%,42.4%,.12);-webkit-box-sizing:border-box;box-sizing:border-box;min-width:192px;min-height:144px;position:relative;float:right;border:1px solid #dadada;border-radius:2px;background-color:#f4f4f4;opacity:0;display:none;margin-right:35px;padding:16px;pointer-events:none}"],data:{animation:[Object(r.m)("indicatorState",[Object(r.j)("off",Object(r.k)({opacity:0})),Object(r.j)("on",Object(r.k)({opacity:1})),Object(r.l)("off <=> on",Object(r.e)("250ms linear"))])]},changeDetection:0}),e})();function Pe(e,t){1&e&&(M.Sb(0,"div"),M.Fc(1),M.ec(2,"translate"),M.Rb()),2&e&&(M.zb(1),M.Gc(M.fc(2,1,"RATIO")))}function Ce(e,t){1&e&&(M.Sb(0,"div"),M.Fc(1),M.ec(2,"translate"),M.Rb()),2&e&&(M.zb(1),M.Gc(M.fc(2,1,"PRECISION")))}function we(e,t){1&e&&(M.Sb(0,"div"),M.Fc(1),M.ec(2,"translate"),M.Rb()),2&e&&(M.zb(1),M.Gc(M.fc(2,1,"ROTATION")))}function _e(e,t){if(1&e&&(M.Sb(0,"div"),M.Fc(1),M.Rb()),2&e){const e=M.dc();M.zb(1),M.Gc(e.model.attributes.Measure.R)}}function Te(e,t){if(1&e&&(M.Sb(0,"div"),M.Fc(1),M.Rb()),2&e){const e=M.dc();M.zb(1),M.Gc(1/e.precision)}}function Ee(e,t){if(1&e&&(M.Sb(0,"div"),M.Fc(1),M.Rb()),2&e){const e=M.dc();M.zb(1),M.Gc(e.lineDegree)}}let Ie=(()=>{class e{constructor(e,t){this.changeDetectorRef=e,this.translatePipe=t}get precision(){return this.model.attributes.Measure?this.model.attributes.Measure.X[0].D:2}get lineDegree(){if(!this.isLineDimension())return null;const{sp:e,ep:t}=this.model.attributes.coordinates;return y.g.getTheta2(e.x,e.y,t.x,t.y).toFixed(Math.log10(this.precision))}get toolName(){return this.isLineDimension()?this.translatePipe.transform("DISTANCE"):this.isPolyLineDimension()?this.translatePipe.transform("PERIMETER"):this.isPolygonDimension()?this.translatePipe.transform("AREA"):this.translatePipe.transform("UNKNOWN")}get toolValue(){let e=y.r.calcMeasurement(this.model);return y.g.isDefined(e)?(y.b.isPolygonDimension(this.model)&&(e+=this.translatePipe.transform("SQUARE_OF")),e):"0"}isLineDimension(){return y.b.isLineDimension(this.model)}isPolyLineDimension(){return y.b.isPolyLineDimension(this.model)}isPolygonDimension(){return y.b.isPolygonDimension(this.model)}detectChanges(){this.changeDetectorRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(M.h),M.Mb(P.d))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-measure-body"]],inputs:{model:"model"},features:[M.yb([s.G])],decls:16,vars:12,consts:[[1,"title"],[1,"property"],[1,"keys"],[4,"ngIf"],[1,"values"]],template:function(e,t){1&e&&(M.Sb(0,"div",0),M.Fc(1),M.ec(2,"translate"),M.Rb(),M.Sb(3,"div",1),M.Sb(4,"div",2),M.Sb(5,"div"),M.Fc(6),M.Rb(),M.Dc(7,Pe,3,3,"div",3),M.Dc(8,Ce,3,3,"div",3),M.Dc(9,we,3,3,"div",3),M.Rb(),M.Sb(10,"div",4),M.Sb(11,"div"),M.Fc(12),M.Rb(),M.Dc(13,_e,2,1,"div",3),M.Dc(14,Te,2,1,"div",3),M.Dc(15,Ee,2,1,"div",3),M.Rb(),M.Rb()),2&e&&(M.zb(1),M.Ic("",t.toolName," ",M.fc(2,10,"TOOL"),""),M.zb(5),M.Gc(t.toolName),M.zb(1),M.jc("ngIf",t.model.attributes.Measure),M.zb(1),M.jc("ngIf",t.model.attributes.Measure),M.zb(1),M.jc("ngIf",t.isLineDimension()),M.zb(3),M.Gc(t.toolValue),M.zb(1),M.jc("ngIf",t.model.attributes.Measure),M.zb(1),M.jc("ngIf",t.model.attributes.Measure),M.zb(1),M.jc("ngIf",t.isLineDimension()))},directives:[n.t],pipes:[T.a],styles:[".title[_ngcontent-%COMP%]{font-size:14px;line-height:24px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e;margin-bottom:14px}.property[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.property[_ngcontent-%COMP%]   div.keys[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e;margin-right:16px}.property[_ngcontent-%COMP%]   div.keys[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(:first-child){margin-top:2px}.property[_ngcontent-%COMP%]   div.values[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Regular,sans-serif;color:#6c6c6c;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.property[_ngcontent-%COMP%]   div.values[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(:first-child){margin-top:2px}"],changeDetection:0}),e})(),Re=(()=>{class e{}return e.\u0275mod=M.Kb({type:e}),e.\u0275inj=M.Jb({factory:function(t){return new(t||e)},imports:[[P.b,n.c]]}),e})();M.xc(Oe,[n.q,n.r,n.s,n.t,n.A,n.w,n.x,n.y,n.z,n.u,n.v,Oe,Ie],[T.a,n.b,n.G,n.p,n.k,n.E,n.g,n.C,n.F,n.d,n.f,n.i,n.j,n.l]);var ke=i("+Cyk");function Ne(e,t){1&e&&M.Nb(0,"sd-measure-indicator")}function Ae(e,t){1&e&&M.Nb(0,"sd-page-indicator")}let De=(()=>{class e{get RuntimeEnvKey(){return b.d}get runtimeEnv(){return b.f}get WindowUtil(){return y.F}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-bottom-right-indicator"]],features:[M.yb([s.G])],decls:2,vars:2,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(M.Dc(0,Ne,1,0,"sd-measure-indicator",0),M.Dc(1,Ae,1,0,"sd-page-indicator",0)),2&e&&(M.jc("ngIf",t.runtimeEnv.get(t.RuntimeEnvKey.MEASURE_INDICATOR)),M.zb(1),M.jc("ngIf",!t.WindowUtil.isMobile()&&t.runtimeEnv.get(t.RuntimeEnvKey.PAGE_INDICATOR)))},styles:["[_nghost-%COMP%]{position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;bottom:0;right:0;padding-bottom:40px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}"],changeDetection:0}),e})();var Le=i("QLCq"),Fe=i("XNiG"),je=i("NXyV"),ze=i("LRne"),Ve=i("vkgz"),Be=i("Kj3r");const $e=["img"];function We(e,t){1&e&&M.Nb(0,"div",10)}var Ue=function(e){return e.VISIBLE="visible",e.INVISIBLE="invisible",e}({});let Ge=(()=>{class e{constructor(e,t,i,n,o,s,r,a,c,l){this.pageService=e,this.changeDetectorRef=t,this.scrollController=i,this.renderer=n,this.documentService=o,this.contentService=s,this.subscriptionService=r,this.renderingService=a,this.store$=c,this.muPDFService=l,this.MAX_WIDTH=200,this.MAX_HEIGHT=200,this.MARGIN=12,this.containerStyles={},this.imgStyles={},this.changesSrc=new Fe.a,this.currentRotation=0,this._pageIndicatorVisible=Ue.INVISIBLE}get pageIndicatorVisible(){var e;return(null===(e=this.pdfPages)||void 0===e?void 0:e.length)&&this._pageIndicatorVisible||Ue.INVISIBLE}set pageIndicatorVisible(e){this._pageIndicatorVisible=e}ngOnInit(){this.initSubscription()}initSubscription(){this.subscriptionService.push(this.store$.pipe(Object(g.f)("currentPageNo")).pipe(re.a(),S.a(e=>this.currentPageNo!==e)).subscribe({next:e=>{this.currentPageNo=e,this.imgEl&&y.u.setVisibility(this.imgEl.nativeElement,!1,this.renderer,!0),this.changesSrc.next()}}),this.pageService.pdfPages$.subscribe({next:e=>{this.pdfPages=e,this.changesSrc.next()}}),this.documentService.openedDocument$.subscribe({next:e=>{this.doc=e,this.changesSrc.next()}}),this.store$.pipe(Object(g.f)("degree")).subscribe({next:e=>{this.currentRotation=e,this.changesSrc.next()}}),this.pageService.pageArrangeEvt$.subscribe({next:()=>{y.u.setVisibility(this.imgEl.nativeElement,!1,this.renderer,!0),this.renderedPageNo=-1,this.cachedImageData=null,this.changesSrc.next()}}),this.store$.pipe(Object(g.f)("renderingMode"),S.a(e=>e===Le.b.HYBRID),v.a(()=>this.muPDFService.document$.pipe(S.a(e=>2===e.status)))).subscribe({next:()=>{this.renderedPageNo=-1,this.cachedImageData=null,this.fetch(),this.updatePage()}}),this.scrollController.currentViewRect$.pipe(S.a(y.g.isDefined),Ve.a(e=>{this.currentViewRect=e.rect,this.updatePage()})).subscribe({next:e=>this.changesSrc.next()}),this.changesSrc.pipe(Ve.a(()=>{this.detectChanges(),this.pageIndicatorVisible=Ue.VISIBLE}),Be.a(50)).subscribe({next:()=>this.fetch()}),this.changesSrc.pipe(Be.a(2e3)).subscribe({next:()=>{this.pageIndicatorVisible=Ue.INVISIBLE,this.renderedPageNo=-1,this.detectChanges()}}),this.contentService.reload$.pipe(S.a(e=>e.pageInfo&&e.pageInfo[this.pageNo-1]),v.a(()=>this.store$),Object(g.f)("renderingMode"),v.a(e=>je.a(()=>e!==Le.b.CLIENT?ze.a(void 0):this.muPDFService.document$.pipe(S.a(e=>2===e.status))))).subscribe({next:()=>{this.renderedPageNo=-1,this.cachedImageData=null,this.fetch()}}))}get pageNo(){return this.currentPageNo}get highlightRect(){return this.currentViewRect&&this.thumbnailRatio?{x:this.MARGIN+this.currentViewRect.x*this.thumbnailRatio,y:this.MARGIN+this.currentViewRect.y*this.thumbnailRatio,w:this.currentViewRect.w*this.thumbnailRatio,h:this.currentViewRect.h*this.thumbnailRatio}:{x:this.MARGIN,y:this.MARGIN,w:Number(this.imgStyles.width)||0,h:Number(this.imgStyles.height)||0}}updatePage(){if(!this.pageNo||!this.pdfPages||!this.pdfPages.length)return;const{bbox:e,r:t}=this.pdfPages[this.pageNo-1];let i=this.MAX_WIDTH-2*this.MARGIN,n=this.MAX_HEIGHT-2*this.MARGIN,o=e.w,s=e.h;const r=(t+this.currentRotation)/90%2==1;r&&([o,s]=[s,o]),o<s?(this.thumbnailRatio=n/s,i=o*this.thumbnailRatio):(this.thumbnailRatio=i/o,n=s*this.thumbnailRatio),this.imgWidth=i,this.imgHeight=n,this.imgStyles.display="block",this.imgStyles.width=(r?n:i)+"px",this.imgStyles.height=(r?i:n)+"px",this.imgStyles.transform=`rotate(${t+this.currentRotation}deg)`,this.containerStyles.width=i+2*this.MARGIN+"px",this.containerStyles.height=n+2*this.MARGIN+"px",this.detectChanges()}fetch(){var e,t;const i=this.pageNo;if(this.doc&&this.renderedPageNo!==i&&(null===(e=this.pdfPages)||void 0===e?void 0:e.length))if((null===(t=this.cachedImageData)||void 0===t?void 0:t.pageNo)!==i)this.subscriptionService.set("httpSubscription",this.renderingService.fetchThumbnail(this.doc.streamdocsId,this.pdfPages[i-1].ref).subscribe({next:e=>{this.pageIndicatorVisible&&(this.cachedImageData={pageNo:i,imageData:Object.assign({},e)},this.renderedPageNo=i,this.imgData=e,y.u.setVisibility(this.imgEl.nativeElement,!0,this.renderer,!0),this.detectChanges())}}));else{if(!this.pageIndicatorVisible)return;setTimeout(()=>{this.renderedPageNo=i,this.imgData=Object.assign({},this.cachedImageData.imageData),y.u.setVisibility(this.imgEl.nativeElement,!0,this.renderer,!0),this.detectChanges()})}}detectChanges(){this.changeDetectorRef.destroyed||this.changeDetectorRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(ae.b),M.Mb(M.h),M.Mb(X.a),M.Mb(M.E),M.Mb(l.k),M.Mb(l.f),M.Mb(s.G),M.Mb(ke.e),M.Mb(O.h),M.Mb(l.n))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-page-indicator"]],viewQuery:function(e,t){var i;1&e&&M.Lc($e,!0),2&e&&M.sc(i=M.ac())&&(t.imgEl=i.first)},features:[M.yb([s.G])],decls:12,vars:22,consts:[[3,"ngStyle"],["id","img-container",3,"ngStyle"],["class","spin-loader",4,"ngIf"],[3,"sdImage"],["img",""],["id","page-ind-mask"],["fill","white"],["fill","black"],["fill","black","stroke","none","opacity","0.1","mask","url(#page-ind-mask)"],["fill","none","stroke","#ff2635","stroke-width","3"],[1,"spin-loader"]],template:function(e,t){1&e&&(M.Sb(0,"div",0),M.Sb(1,"div",1),M.Dc(2,We,1,0,"div",2),M.Nb(3,"img",3,4),M.Rb(),M.cc(),M.Sb(5,"svg",0),M.Sb(6,"defs"),M.Sb(7,"mask",5),M.Nb(8,"rect",6),M.Nb(9,"rect",7),M.Rb(),M.Rb(),M.Nb(10,"rect",8),M.Nb(11,"rect",9),M.Rb(),M.Rb()),2&e&&(M.jc("@showState",t.pageIndicatorVisible)("ngStyle",t.containerStyles),M.zb(1),M.jc("ngStyle",t.imgStyles),M.zb(1),M.jc("ngIf",!t.imgData),M.zb(1),M.jc("sdImage",t.imgData),M.zb(2),M.jc("ngStyle",t.containerStyles),M.zb(3),M.Ab("x",t.MARGIN)("y",t.MARGIN)("width",t.imgWidth)("height",t.imgHeight),M.zb(1),M.Ab("x",t.highlightRect.x)("y",t.highlightRect.y)("width",t.highlightRect.w)("height",t.highlightRect.h),M.zb(1),M.Ab("x",t.MARGIN)("y",t.MARGIN)("width",t.imgWidth)("height",t.imgHeight),M.zb(1),M.Ab("x",t.highlightRect.x)("y",t.highlightRect.y)("width",t.highlightRect.w)("height",t.highlightRect.h))},styles:["*[_ngcontent-%COMP%]{pointer-events:none}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{position:relative;background:#c8c8c8;border-radius:2px;display:-webkit-box;display:-ms-flexbox;display:flex;float:right;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin:12px 35px 0 0}div#img-container[_ngcontent-%COMP%]{display:none;background:#fff;position:relative}div#img-container[_ngcontent-%COMP%]   .spin-loader[_ngcontent-%COMP%]{z-index:1;position:absolute;top:calc(50% - 28px);left:calc(50% - 28px);display:inline-block;width:56px;height:56px;border-width:3px}div#img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;top:0;left:0;z-index:2}img[_ngcontent-%COMP%]{width:100%;height:auto;visibility:hidden}svg[_ngcontent-%COMP%]{position:absolute;left:0;top:0}"],data:{animation:[Object(r.m)("showState",[Object(r.j)(Ue.INVISIBLE,Object(r.k)({opacity:0,display:"none"})),Object(r.j)(Ue.VISIBLE,Object(r.k)({opacity:1,display:"flex"})),Object(r.l)(`${Ue.VISIBLE} => ${Ue.INVISIBLE}`,Object(r.e)("400ms linear"))])]},changeDetection:0}),e})();var He=i("zp1y"),qe=function(e){return e.VISIBLE="visible",e.INVISIBLE="invisible",e}({});let Ze=(()=>{class e{constructor(e,t,i,n){this.changeDetectorRef=e,this.subscriptionService=t,this.translatePipe=i,this.store$=n,this.labelMap={0:{icon:"papycon papycon-list2",label:this.translatePipe.transform("SINGLE_PAGE_VIEW")},1:{icon:"papycon papycon-one-page-continuous3",label:this.translatePipe.transform("SINGLE_PAGE_CONTINUOUS")},2:{icon:"papycon papycon-two-page3",label:this.translatePipe.transform("TWO_PAGE_VIEW")},3:{icon:"papycon papycon-two-page-continuous3",label:this.translatePipe.transform("TWO_PAGE_CONTINUOUS")},4:{icon:"papycon papycon-one-page",label:this.translatePipe.transform("LAYOUT_INDICATOR_EBOOK")}},this.showScale=qe.INVISIBLE,this.showLayout=qe.INVISIBLE,this.visibilitySrc=new Fe.a}ngOnInit(){this.subscriptionService.push(this.visibilitySrc.pipe(Be.a(800)).subscribe({next:e=>{this.showScale=e,this.showLayout=e,this.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(g.f)("scale"),He.a(this.store$.pipe(Object(g.f)("scaleRatio"))),m.a(([e,t])=>Math.round(e/t)),re.a()).subscribe({next:e=>{this.scale=Number(e.toFixed(0)),this.showScale=qe.VISIBLE,this.changeDetectorRef.markForCheck(),this.visibilitySrc.next(qe.INVISIBLE)}}),this.store$.pipe(Object(g.f)("viewMode")).subscribe({next:e=>{this.viewMode=e,this.showLayout=qe.VISIBLE,this.changeDetectorRef.markForCheck(),this.visibilitySrc.next(qe.INVISIBLE)}}))}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(M.h),M.Mb(s.G),M.Mb(P.d),M.Mb(O.h))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-scale-indicator"]],features:[M.yb([s.G])],decls:7,vars:6,consts:[[1,"page-layout"],[1,"page-scale"]],template:function(e,t){1&e&&(M.Sb(0,"div",0),M.Nb(1,"i"),M.Sb(2,"span"),M.Fc(3),M.Rb(),M.Rb(),M.Sb(4,"div",1),M.Sb(5,"span"),M.Fc(6),M.Rb(),M.Rb()),2&e&&(M.jc("@showState",t.showLayout),M.zb(1),M.Bb(null==t.labelMap[t.viewMode]?null:t.labelMap[t.viewMode].icon),M.zb(2),M.Gc(null==t.labelMap[t.viewMode]?null:t.labelMap[t.viewMode].label),M.zb(1),M.jc("@showState",t.showScale),M.zb(2),M.Hc("",t.scale,"%"))},styles:["[_nghost-%COMP%]{position:absolute;left:50%;top:50%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);pointer-events:none}[_nghost-%COMP%], div[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}div[_ngcontent-%COMP%]{font-size:20px;line-height:28px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e;-webkit-box-shadow:0 4px 8px 0 hsla(0,0%,42.4%,.12);box-shadow:0 4px 8px 0 hsla(0,0%,42.4%,.12);-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#f4f4f4;border:1px solid #dadada;border-radius:4px;text-align:center;cursor:default;z-index:1}div.page-layout[_ngcontent-%COMP%]{width:168px;height:168px;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin-bottom:20px}div.page-layout[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{width:80px;height:80px;line-height:80px;font-size:63px;margin-bottom:19px}div.page-scale[_ngcontent-%COMP%]{width:100px;height:50px}"],data:{animation:[Object(r.m)("showState",[Object(r.j)(qe.INVISIBLE,Object(r.k)({opacity:0,display:"none"})),Object(r.j)(qe.VISIBLE,Object(r.k)({opacity:1,display:"flex"})),Object(r.l)(`${qe.VISIBLE} => ${qe.INVISIBLE}`,Object(r.e)("400ms linear"))])]},changeDetection:0}),e})();var Xe=i("524M");let Ye=(()=>{class e{}return e.\u0275mod=M.Kb({type:e}),e.\u0275inj=M.Jb({factory:function(t){return new(t||e)},imports:[[n.c,Re,ke.d]]}),e})();M.xc(De,[n.q,n.r,n.s,n.t,n.A,n.w,n.x,n.y,n.z,n.u,n.v,Oe,Xe.a,De,ye,Ze,Ge],[n.b,n.G,n.p,n.k,n.E,n.g,n.C,n.F,n.d,n.f,n.i,n.j,n.l]),M.xc(ye,[n.q,n.r,n.s,n.t,n.A,n.w,n.x,n.y,n.z,n.u,n.v,Oe,Xe.a,De,ye,Ze,Ge],[n.b,n.G,n.p,n.k,n.E,n.g,n.C,n.F,n.d,n.f,n.i,n.j,n.l]),M.xc(Ge,[n.q,n.r,n.s,n.t,n.A,n.w,n.x,n.y,n.z,n.u,n.v,Oe,Xe.a,De,ye,Ze,Ge],[n.b,n.G,n.p,n.k,n.E,n.g,n.C,n.F,n.d,n.f,n.i,n.j,n.l]);var Ke=i("mgza"),Qe=i("akkN"),Je=i("JX91"),et=i("FQpF"),tt=i("GJmQ"),it=i("nYR2"),nt=i("wvpq");const ot=["searchComp"];function st(e,t){1&e&&M.Nb(0,"div",19)}function rt(e,t){if(1&e&&(M.Sb(0,"span",20),M.Fc(1),M.Rb()),2&e){const e=M.dc();M.zb(1),M.Ic("",e.currentSelectedWord," / ",e.totalSearchedWord,"")}}function at(e,t){if(1&e){const e=M.Tb();M.Sb(0,"img",21),M.Zb("click",(function(){return M.uc(e),M.dc().onClearWord()})),M.Rb()}}function ct(e,t){if(1&e){const e=M.Tb();M.Sb(0,"button",13),M.Zb("click",(function(){M.uc(e);const t=M.dc();return t.useRegex=!t.useRegex})),M.Nb(1,"i",22),M.Rb()}if(2&e){const e=M.dc();M.zb(1),M.Eb("active",e.useRegex)}}const lt=function(e){return{"padding-right.px":e}},ht=function(){return{standalone:!0}};let dt=(()=>{class e{constructor(e,t,i,n,o,s,r,a,c){this.contentService=e,this.pageService=t,this.searchService=i,this.modalService=n,this.changeDetectorRef=o,this.subscriptionService=s,this.store$=r,this.apiEventBridgeService=a,this.translatePipe=c,this.searchedPage=new Set,this.searchCaseSensitive=!1,this.useRegex=!1,this.keyword="",this.currentSelectedWord=0,this.totalSearchedWord=0,this.indicatorVisibility=!1,this.paddingRight=35,this.searchResult=[],this.isDestroying=!1,this.findSearchWordSrc=new Fe.a,this.countTotalSearchWordSrc=new Fe.a,this.keepSearchState=!1,this.checkWordCounting=!1}get RuntimeEnvKey(){return b.d}get runtimeEnv(){return b.f}get environment(){return Qe.c}ngOnInit(){this.subscriptionService.push(this.store$.pipe(Object(g.f)("pageCount")).subscribe({next:e=>this.pageCount=e}),this.store$.pipe(Object(g.f)("currentPageNo")).subscribe({next:e=>this.currentPageNo=e}),this.pageService.pdfPages$.subscribe({next:e=>{var t;this.pages=e,this.pagesLength=null!==(t=null==e?void 0:e.length)&&void 0!==t?t:0}}),this.findSearchWordSrc.pipe(Be.a(10)).subscribe({next:e=>this.initSearch(e)})),this.searchService.searchState.keyword&&(this.keyword=this.searchService.searchState.keyword,this.searchCaseSensitive=this.searchService.searchState.searchCaseSensitive,this.useRegex=this.searchService.searchState.useRegex,-1===this.searchService.searchState.startPageIndex&&(this.searchService.searchState.startPageIndex=this.searchService.searchState.pageIndex),-1!==this.searchService.searchState.wordIndex&&this.searchService.searchState.pageIndex===this.currentPageNo-1||(this.searchService.initSearchState(),this.searchService.bundle.bundle.splice(0))),this.apiEventBridgeService.searchToolVisibilityChangedSrc.next()}resubscribeSearchEvent(){let e=5;const t=Math.max(Math.min(Math.ceil(this.pagesLength/10),100),10);let i=0;this.subscriptionService.set("searchSub",this.countTotalSearchWordSrc.pipe(Je.a({keyword:y.v.EMPTY_STRING,caseSensitive:this.searchCaseSensitive,regex:this.useRegex,streamdocsId:this.pdfDoc.streamdocsId,isForwardSearch:!0}),Be.a(100),re.a((e,t)=>e.keyword===t.keyword&&e.caseSensitive===t.caseSensitive&&e.regex===t.regex&&e.streamdocsId===t.streamdocsId&&(this.bundleState.bundle[0].numOfItem&&this.findSearchWordSrc.next(t.isForwardSearch),!0)),S.a(e=>e.keyword!==y.v.EMPTY_STRING),Ve.a(e=>{this.bundleState||(this.bundleState={bundle:[],activeIndex:0},this.searchService.bundle=this.bundleState),this.searchService.searchState.keyword!==e.keyword&&(this.contentService.clearSearchHighlight(),this.searchService.initSearchState(),this.searchService.searchState.keyword=e.keyword),this.isSearching=!0,this.indicatorVisibility=!0,this.checkWordCounting=!1,this.totalSearchedWord=0,this.currentSelectedWord=0,this.searchService.searchState.streamdocsId=e.streamdocsId,this.searchService.searchState.searchCaseSensitive=e.caseSensitive,this.searchService.searchState.useRegex=e.regex,this.contentService.searchRedactionMark([]),this.bundleState.bundle=[],this.bundleState.activeIndex=0,this.pushNewBundle(),this.changeDetectorRef.markForCheck()}),v.a(n=>this.searchService.getSearchResult(n.streamdocsId,n.keyword,n.caseSensitive,n.regex,this.getPageIndexes(0,10)).pipe(et.a((o,s)=>{const r=--e>0?10:t,a=e>0?(s+1)*r:i;return a>=this.pagesLength?ze.a(null):(i=a+r,this.searchService.getSearchResult(n.streamdocsId,n.keyword,n.caseSensitive,n.regex,this.getPageIndexes(a,r)))}),tt.a(e=>null!==e||(this.checkWordCounting=!0,!1)),it.a(()=>{!this.totalSearchedWord&&this.checkWordCounting&&(this.indicatorVisibility=!0),this.isSearching=!1,this.searchComp.focus(),this.changeDetectorRef.markForCheck()})))).subscribe({next:e=>{let t=this.bundleState.bundle[this.bundleState.bundle.length-1];const i=e.length;for(let n=0;n<i;n++)t.numOfItem>100&&(t=this.pushNewBundle()),t.results.push(e[n]),t.numOfItem+=e[n].words.length,0===this.currentSelectedWord&&(this.currentSelectedWord=1,this.indicatorVisibility=!0),this.totalSearchedWord+=e[n].words.length;this.bundleState.bundle[this.bundleState.bundle.length-1]=Object.assign({},t),this.changeDetectorRef.markForCheck()},error:()=>{this.clear(),this.modalService.createCommonModal({type:Ke.a.ERROR,title:this.translatePipe.transform("SERVER_ERROR_TITLE"),content:this.translatePipe.transform("SERVER_ERROR_MESSAGE"),confirmButton:!0,confirmLabel:this.translatePipe.transform("CLOSE")})}}))}onKeyDown(e){"Enter"===e.key&&e.shiftKey?this.searchStart(!1):"Enter"===e.key&&this.searchStart(!0)}clear(){this.resubscribeSearchEvent(),this.bundleState&&(this.bundleState.bundle=[],this.bundleState.activeIndex=0),this.keyword=y.v.EMPTY_STRING,this.contentService.clearSearchHighlight(),this.contentService.searchRedactionMark([])}getPageIndexes(e,t){const i=[],n=Math.min(e+t,this.pages.length);for(let o=e;o<n;++o)i.push(o);return i}pushNewBundle(){return this.bundleState.bundle[this.bundleState.bundle.push({numOfItem:0,results:[]})-1]}ngOnDestroy(){this.isDestroying=!0,this.keepSearchState||(this.contentService.clearSearchHighlight(),this.searchService.initSearchState()),this.searchResult.splice(0),this.apiEventBridgeService.searchToolVisibilityChangedSrc.next()}ngAfterViewInit(){this.resubscribeSearchEvent(),this.searchComp.focus()}searchStart(e){this.searchService.searchState.keyword&&this.searchService.searchState.keyword===this.keyword||this.findSearchWordSrc.next(e),this.countTotalSearchWordSrc.next({keyword:this.keyword,caseSensitive:this.searchCaseSensitive,regex:this.useRegex,streamdocsId:this.pdfDoc.streamdocsId,isForwardSearch:e})}onClearWord(){this.paddingRight=35,this.indicatorVisibility=!1,this.isSearching=!1,this.currentSelectedWord=0,this.totalSearchedWord=0,this.searchService.searchState.keyword="",this.searchComp.focus(),this.clear()}onClickDetail(){""===this.keyword&&(this.searchService.bundle=null),this.keepSearchState=!0,this.close(),this.store$.dispatch(g.a.set({key:"rightSideViewMode",value:p.a.TextSearch})),this.store$.dispatch(g.a.set({key:"rightSideViewVisible",value:!0}))}initSearch(e){if(this.pdfDoc){if(this.changeDetectorRef.markForCheck(),0===this.keyword.length)return this.isSearching=!1,void this.changeDetectorRef.markForCheck();this.keyword===this.searchService.searchState.keyword&&this.searchCaseSensitive===this.searchService.searchState.searchCaseSensitive&&this.useRegex===this.searchService.searchState.useRegex&&this.pdfDoc.streamdocsId===this.searchService.searchState.streamdocsId&&this.searchResult[this.searchService.searchState.pageIndex]?this.gotoNextWord(e):(this.searchResult.splice(0),this.searchService.searchState.searchCaseSensitive=this.searchCaseSensitive,this.searchService.searchState.useRegex=this.useRegex,this.searchService.searchState.keyword=this.keyword,this.searchService.searchState.pageIndex=this.currentPageNo-1,this.searchService.searchState.wordIndex=-1,this.searchService.searchState.streamdocsId=this.pdfDoc.streamdocsId,this.searchService.searchState.startPageIndex=this.searchService.searchState.pageIndex,this.findWord(e))}}close(){this.store$.dispatch(g.a.set({key:"searchToolActive",value:!1}))}gotoNextWord(e){const t=this.searchResult[this.searchService.searchState.pageIndex].length;if(e){if(this.currentSelectedWord++,this.currentSelectedWord>this.totalSearchedWord&&(this.currentSelectedWord=1),this.searchService.searchState.wordIndex+1===t)return void this.gotoNextPage(e);this.searchService.searchState.wordIndex++}else{if(this.currentSelectedWord--,0===this.currentSelectedWord&&(this.currentSelectedWord=this.totalSearchedWord),this.searchService.searchState.wordIndex-1<0)return void this.gotoNextPage(e);this.searchService.searchState.wordIndex--}this.activateWord()}gotoNextPage(e){if(this.searchedPage.add(this.searchService.searchState.pageIndex),e?(this.searchService.searchState.pageIndex++,this.searchService.searchState.pageIndex%=this.pageCount):(this.searchService.searchState.pageIndex--,-1===this.searchService.searchState.pageIndex&&(this.searchService.searchState.pageIndex=this.pageCount-1)),this.searchedPage.size===this.pageCount)return this.isSearching=!1,this.searchService.searchState.wordIndex=-1,this.searchService.searchState.startPageIndex!==this.searchService.searchState.pageIndex&&this.findWord(e),this.searchedPage.clear(),void this.changeDetectorRef.markForCheck();this.searchService.searchState.wordIndex=-1,this.findWord(e)}findWord(e){this.isDestroying||(this.searchResult[this.searchService.searchState.pageIndex]?this.validateWord(e):this.subscriptionService.set("dataSub",this.searchService.getSearchResult(this.pdfDoc.streamdocsId,this.searchService.searchState.keyword,this.searchService.searchState.searchCaseSensitive,this.searchService.searchState.useRegex,[this.searchService.searchState.pageIndex]).subscribe({next:t=>{this.isDestroying||(this.searchResult[this.searchService.searchState.pageIndex]=t.length?t[0].words:[],this.validateWord(e))},error:()=>{this.searchService.searchState.keyword=y.v.EMPTY_STRING,this.isSearching=!1,this.modalService.createCommonModal({type:Ke.a.ERROR,title:this.translatePipe.transform("SERVER_ERROR_TITLE"),content:this.translatePipe.transform("SERVER_ERROR_MESSAGE"),confirmButton:!0})}})))}validateWord(e){if(this.searchResult[this.searchService.searchState.pageIndex].length>0){if(-1!==this.searchService.searchState.wordIndex)return void this.gotoNextWord(e);this.searchService.searchState.wordIndex=e?0:this.searchResult[this.searchService.searchState.pageIndex].length-1,this.activateWord()}else this.gotoNextPage(e)}activateWord(){const e=this.searchService.searchState.pageIndex;this.searchService.activateWord(this.searchResult[e][this.searchService.searchState.wordIndex],this.pages[e]),this.changeDetectorRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(l.f),M.Mb(ae.b),M.Mb(l.t),M.Mb(Ke.c),M.Mb(M.h),M.Mb(s.G),M.Mb(O.h),M.Mb(nt.a),M.Mb(P.d))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-search-tool"]],viewQuery:function(e,t){var i;1&e&&M.zc(ot,!0),2&e&&M.sc(i=M.ac())&&(t.searchComp=i.first)},inputs:{pdfDoc:"pdfDoc"},features:[M.yb([s.G])],decls:29,vars:27,consts:[[1,"header"],["class","spin-loader",4,"ngIf"],[1,"right"],["color","dark",1,"ep-text-button",3,"click"],[1,"papycon","papycon-extend"],[1,"papycon","papycon-cross"],[1,"input-row"],["size","small",3,"maxLength","placeholder","inputStyle","ngModelOptions","ngModel","ngModelChange","keydown"],["searchComp",""],["class","indicator",4,"ngIf"],["class","clear","src","assets/images/clear.svg",3,"click",4,"ngIf"],[1,"buttons"],[1,"left"],["size","tiny","color","white",1,"ep-button",3,"click"],[1,"papycon","papycon-case-sensitive"],["class","ep-button","size","tiny","color","white",3,"click",4,"ngIf"],["size","tiny","color","white",1,"ep-button",3,"title","disabled","click"],[1,"papycon","papycon-previous-symbol2"],[1,"papycon","papycon-next-symbol2"],[1,"spin-loader"],[1,"indicator"],["src","assets/images/clear.svg",1,"clear",3,"click"],[1,"papycon","papycon-regular-expression"]],template:function(e,t){1&e&&(M.Sb(0,"nav",0),M.Sb(1,"span"),M.Fc(2),M.ec(3,"translate"),M.Rb(),M.Dc(4,st,1,0,"div",1),M.Sb(5,"section",2),M.Sb(6,"button",3),M.Zb("click",(function(){return t.onClickDetail()})),M.Nb(7,"i",4),M.Rb(),M.Sb(8,"button",3),M.Zb("click",(function(){return t.close()})),M.Nb(9,"i",5),M.Rb(),M.Rb(),M.Rb(),M.Sb(10,"nav",6),M.Sb(11,"form"),M.Sb(12,"pu-input",7,8),M.Zb("ngModelChange",(function(e){return t.keyword=e}))("keydown",(function(e){return t.onKeyDown(e)})),M.ec(14,"translate"),M.Rb(),M.Dc(15,rt,2,2,"span",9),M.Dc(16,at,1,0,"img",10),M.Rb(),M.Rb(),M.Sb(17,"nav",11),M.Sb(18,"section",12),M.Sb(19,"button",13),M.Zb("click",(function(){return t.searchCaseSensitive=!t.searchCaseSensitive})),M.Nb(20,"i",14),M.Rb(),M.Dc(21,ct,2,2,"button",15),M.Rb(),M.Sb(22,"section",2),M.Sb(23,"button",16),M.Zb("click",(function(){return t.searchStart(!1)})),M.ec(24,"translate"),M.Nb(25,"i",17),M.Rb(),M.Sb(26,"button",16),M.Zb("click",(function(){return t.searchStart(!0)})),M.ec(27,"translate"),M.Nb(28,"i",18),M.Rb(),M.Rb(),M.Rb()),2&e&&(M.zb(2),M.Gc(M.fc(3,16,"QUICK_SEARCH")),M.zb(2),M.jc("ngIf",t.isSearching),M.zb(8),M.jc("maxLength",t.environment.textSearchLengthLimit)("placeholder",M.fc(14,18,"SEARCH"))("inputStyle",M.nc(24,lt,t.paddingRight))("ngModelOptions",M.mc(26,ht))("ngModel",t.keyword),M.zb(3),M.jc("ngIf",t.indicatorVisibility),M.zb(1),M.jc("ngIf",t.keyword),M.zb(4),M.Eb("active",t.searchCaseSensitive),M.zb(1),M.jc("ngIf",t.runtimeEnv.get(t.RuntimeEnvKey.TEXT_SEARCH_VIEW_REGEX)),M.zb(2),M.jc("title",M.fc(24,20,"BACKWARD_SEARCH"))("disabled",!t.totalSearchedWord||!t.keyword),M.zb(3),M.jc("title",M.fc(27,22,"FORWARD_SEARCH"))("disabled",!t.totalSearchedWord||!t.keyword))},directives:[n.t,o.H,o.s,o.t,s.s,o.r,o.u],pipes:[T.a],styles:["[_nghost-%COMP%]{-webkit-box-shadow:0 4px 32px 0 hsla(0,0%,42.4%,.12);box-shadow:0 4px 32px 0 hsla(0,0%,42.4%,.12);position:absolute;bottom:8px;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:300px;height:auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-sizing:border-box;box-sizing:border-box;padding:16px;border-radius:2px;background:#fff;z-index:1}.header[_ngcontent-%COMP%], [_nghost-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.header[_ngcontent-%COMP%]{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;line-height:24px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e}.header[_ngcontent-%COMP%]   .spin-loader[_ngcontent-%COMP%]{margin-right:auto;margin-left:10px;width:22px;height:22px;pointer-events:none}.header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:24px;height:24px}.header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:12px}.header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-extend[_ngcontent-%COMP%]{font-size:16px}.header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-cross[_ngcontent-%COMP%]{font-size:14px}.input-row[_ngcontent-%COMP%], .input-row[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{position:relative}.input-row[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;margin-top:8px}.input-row[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   pu-input[_ngcontent-%COMP%]{width:100%}.input-row[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Medium,sans-serif;color:#6c6c6c;right:34px;opacity:.5}.input-row[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%], .input-row[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.input-row[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]{width:20px;height:20px;-o-object-fit:contain;object-fit:contain;right:4px}.input-row[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]:hover{cursor:pointer}.buttons[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-top:12px}.buttons[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:8px}.buttons[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-case-sensitive[_ngcontent-%COMP%]{font-size:17px}.buttons[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-.regular-expression[_ngcontent-%COMP%]{font-size:15px}.buttons[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#f79f1a}.buttons[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:8px}.buttons[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon[_ngcontent-%COMP%]{font-size:11px}"],changeDetection:0}),e})();var ut=i("QZky"),pt=i("yjpQ"),gt=i("ZMf9"),ft=i("bj6Y");function bt(e,t){if(1&e&&(M.cc(),M.Nb(0,"path")),2&e){const e=t.$implicit;M.Ab("d",e.path)("fill",e.color)}}let mt=(()=>{class e{constructor(e,t,i){this.apiHighlightService=e,this.changeDetectorRef=t,this.subscriptionService=i,this.renderingInfo=[]}ngOnInit(){this.subscriptionService.push(this.apiHighlightService.highlightInfoMapChange$.pipe(S.a(e=>e.pageIndex===this.pdfPage.i)).subscribe({next:e=>this.updatePath()})),this.updatePath()}updatePath(){const e=this.apiHighlightService.highlightInfoMap[this.pdfPage.i];if(!e)return;const t={};e.forEach(e=>{t[e.color]?t[e.color]+=" "+e.path:t[e.color]=e.path}),this.renderingInfo.splice(0),Object.keys(t).forEach(e=>{this.renderingInfo.push({color:e,path:t[e]})}),this.changeDetectorRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(ft.b),M.Mb(M.h),M.Mb(s.G))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-api-highlight"]],inputs:{pdfPage:"pdfPage"},features:[M.yb([s.G])],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(M.cc(),M.Sb(0,"svg"),M.Dc(1,bt,1,2,"path",0),M.Rb()),2&e&&(M.zb(1),M.jc("ngForOf",t.renderingInfo))},directives:[n.s],styles:["svg[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0}svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill-opacity:.5}"],changeDetection:0}),e})();var vt=i("l207"),St=i("rb3Q"),yt=i("itXk"),Mt=i("1uah"),xt=i("Cfvw"),Ot=i("xgIS"),Pt=i("3E0/"),Ct=i("IzEk"),wt=i("5+tZ"),_t=i("z+Ro");class Tt{constructor(e,t,i,n){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=i,this.scheduler=n}call(e,t){return t.subscribe(new It(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))}}class Et{constructor(){this.buffer=[]}}class It extends J.a{constructor(e,t,i,n,o){super(e),this.bufferTimeSpan=t,this.bufferCreationInterval=i,this.maxBufferSize=n,this.scheduler=o,this.contexts=[];const s=this.openContext();if(this.timespanOnly=null==i||i<0,this.timespanOnly)this.add(s.closeAction=o.schedule(Rt,t,{subscriber:this,context:s,bufferTimeSpan:t}));else{const e={bufferTimeSpan:t,bufferCreationInterval:i,subscriber:this,scheduler:o};this.add(s.closeAction=o.schedule(Nt,t,{subscriber:this,context:s})),this.add(o.schedule(kt,i,e))}}_next(e){const t=this.contexts,i=t.length;let n;for(let o=0;o<i;o++){const i=t[o],s=i.buffer;s.push(e),s.length==this.maxBufferSize&&(n=i)}n&&this.onBufferFull(n)}_error(e){this.contexts.length=0,super._error(e)}_complete(){const{contexts:e,destination:t}=this;for(;e.length>0;){const i=e.shift();t.next(i.buffer)}super._complete()}_unsubscribe(){this.contexts=null}onBufferFull(e){this.closeContext(e);const t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();const t=this.bufferTimeSpan;this.add(e.closeAction=this.scheduler.schedule(Rt,t,{subscriber:this,context:e,bufferTimeSpan:t}))}}openContext(){const e=new Et;return this.contexts.push(e),e}closeContext(e){this.destination.next(e.buffer);const t=this.contexts;(t?t.indexOf(e):-1)>=0&&t.splice(t.indexOf(e),1)}}function Rt(e){const t=e.subscriber,i=e.context;i&&t.closeContext(i),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function kt(e){const{bufferCreationInterval:t,bufferTimeSpan:i,subscriber:n,scheduler:o}=e,s=n.openContext();n.closed||(n.add(s.closeAction=o.schedule(Nt,i,{subscriber:n,context:s})),this.schedule(e,t))}function Nt(e){const{subscriber:t,context:i}=e;t.closeContext(i)}class At{constructor(e,t){this.comp=e,this.scrollEl=t,this.listeners=[],this.trigger=Ot.a(this.scrollEl,"mousedown").subscribe({next:e=>this.start(e)})}destroy(){return this.destroyMoveListener(),this.trigger.unsubscribe(),y.v.destroy(this),null}isDragging(){return Boolean(this.listeners.length)}start(e){e.target.classList.contains("no-scroller")||(this.prevEvent=e,this.prevEvent.dataTransfer&&(this.prevEvent.dataTransfer.clearData(),this.prevEvent.dataTransfer.setDragImage(this.scrollEl.children[1],0,0),this.prevEvent.dataTransfer.effectAllowed="none"),this.buildMoveListener(),this.comp.markForCheck())}scroll(e){const t=e.clientX-this.prevEvent.clientX,i=e.clientY-this.prevEvent.clientY;return t&&(this.scrollEl.scrollLeft-=t),i&&(this.scrollEl.scrollTop-=i),!(!i&&!t||(this.prevEvent=e,1))}buildMoveListener(){this.destroyMoveListener(),this.listeners.push(Ot.a(this.scrollEl,"mousemove").subscribe({next:e=>this.scroll(e)}),Ot.a(this.scrollEl,"mouseup").subscribe({next:()=>this.destroyMoveListener()}),Ot.a(this.scrollEl,"mouseleave").subscribe({next:()=>this.destroyMoveListener()}))}destroyMoveListener(){this.listeners.length&&(this.listeners.forEach(e=>e.unsubscribe()),this.listeners.length=0)}}class Dt{constructor(e,t,i){this.comp=e,this.element=t,this.scrollController=i,this.touchListeners=[],this.isPinchStart=!1,this.touchListeners.push(Ot.a(this.element,"touchstart").subscribe({next:e=>{!this.isPinchStart&&e.touches.length>1&&(e.preventDefault(),this.isPinchStart=!0,this.pinchStart(e))}}),Ot.a(this.element,"touchmove").subscribe({next:e=>{this.isPinchStart&&e.touches.length>1&&this.pinchChange(e)}}),Ot.a(this.element,"touchend").subscribe({next:e=>{this.isPinchStart=!1,this.pinchEnd(e)}}),Ot.a(this.element,"touchcancel").subscribe({next:e=>{this.isPinchStart=!1,this.pinchEnd(e)}}))}get scale(){return this.comp.scale}destroy(){this.touchListeners.forEach(e=>e.unsubscribe())}changeScale(e){this.comp.store$.dispatch(g.a.set({key:"scale",value:Number((this.baseScale*e).toFixed(2))})),Logger.debug("Changing scale",this.scale)}pinchStart(e){this.baseScale=this.scale,this.baseEvent=e}pinchEnd(e){this.scrollController.jumpingOrigin={x:0,y:0}}pinchChange(e){this.scrollController.jumpingOrigin={x:(e.touches[0].clientX+e.touches[1].clientX)/2,y:(e.touches[0].clientY+e.touches[1].clientY)/2};const t=Math.hypot(this.baseEvent.touches[0].clientX-this.baseEvent.touches[1].clientX,this.baseEvent.touches[0].clientY-this.baseEvent.touches[1].clientY),i=Math.hypot(e.touches[0].clientX-e.touches[1].clientX,e.touches[0].clientY-e.touches[1].clientY);this.changeScale(i/t)}}let Lt=(()=>{class e{constructor(e){this.scrollController=e}createScroller(e,t){return new At(e,t)}createZoomer(e,t){return y.F.isTouchableDevice()?new Dt(e,t,this.scrollController):null}}return e.\u0275fac=function(t){return new(t||e)(M.Wb(X.a))},e.\u0275prov=M.Ib({token:e,factory:e.\u0275fac}),e})(),Ft=(()=>{class e{constructor(e){this.store$=e,this.screenSize=y.F.screenSize,this.orientationType=y.F.orientationType,this.store$.pipe(Object(g.f)("scale")).subscribe({next:e=>this.scale=e}),this.store$.pipe(Object(g.f)("viewMode")).subscribe({next:e=>this.viewMode=e}),this.store$.pipe(Object(g.f)("currentPageNo")).subscribe({next:e=>this.currentPageNo=e}),this.store$.pipe(Object(g.f)("degree")).subscribe({next:e=>this.degree=e})}fit(e,t,i){if(!y.g.isDefined(e))return!1;if(!e.pdfPages||!e.pdfPages.length)return!1;const n=this.scale,o=this.calculateFitSize(e,t,i)/vt.b;return this.store$.dispatch(g.a.set({key:"scale",value:e.isSlideshow?o:Math.floor(o)})),n!==this.scale}calculateFitSize(e,t,i){const{pdfPages:n}=e,o=g.d.isTwoPageMode(this.viewMode)?2:1,s=this.currentPageNo-1,r=s-s%o,[a,c]=n.slice(r,r+2),[l,h]=y.q.calculateMaxArea(a,this.degree),[d,u]=c?y.q.calculateMaxArea(c,this.degree):[0,0],p=t.offsetWidth,f=t.offsetHeight,b=this.selectFitMode(i,l,h,p,f),m=g.d.isTwoPageMode(this.viewMode)&&(n.length%2!=1||this.currentPageNo!==n.length);let v,S=0;const M=p/f,x=e.getPageContainerSize(this.viewMode,s),O=x.width/x.height;if(0===b)S=p,M>O&&(S-=y.F.scrollbarSize.vertical),v=l+2*Z.a.MARGIN+(m?d+2*Z.a.MARGIN:0);else if(1===b)S=f,M<O&&(S-=y.F.scrollbarSize.horizontal),v=(m?Math.max(h,u):h)+2*Z.a.MARGIN;else{if(4===b)return Math.ceil(100*vt.b);if(6===b){const e=this.selectFitMode(3,l,h,p,f);return v=0===e?l:h,S=y.F.isLandscape()&&this.screenSize.height>this.screenSize.width?0===e?this.screenSize.height:this.screenSize.width:0===e?this.screenSize.width:this.screenSize.height,S/v*100}Logger.warn("Unsupported fitMode=",b)}return Math.floor(S/v*100)}selectFitMode(e,t,i,n,o){switch(e){case 2:return y.F.isSmallDevice()||t>i?0:1;case 3:return t/i>n/o?0:1;case 5:return t*vt.b>n?0:4;default:return e}}}return e.\u0275fac=function(t){return new(t||e)(M.Wb(O.h))},e.\u0275prov=M.Ib({token:e,factory:e.\u0275fac}),e})();var jt=i("7ezp");i("lt0f");let zt=(()=>{class e{constructor(e,t,i,n,o,s,r,a,c){this.link=e,this.portalRef=t,this.elementRef=i,this.annotService=n,this.contentService=o,this.modalService=s,this.subscriptionService=r,this.translatePipe=a,this.store$=c,this.pageIdx="",this.url="",this.radioOption="GoTo"}ngOnInit(){this.subscriptionService.push(this.store$.pipe(Object(g.f)("pageCount")).subscribe({next:e=>this.pageCount=e}),Ot.a(window,"keydown",{capture:!0}).pipe(S.a(e=>"Escape"===e.key),S.a(()=>this.modalService.lastModal===this.portalRef)).subscribe({next:()=>this.close()})),this.elementRef.nativeElement.parentElement.style.minWidth="375px"}close(){this.portalRef.dispose()}createLink(){if(this.link.attributes.type=this.radioOption,"GoTo"===this.radioOption){if(0===this.pageIdx.length||isNaN(Number(this.pageIdx)))return void this.modalService.createCommonModal({type:Ke.a.WARN,title:this.translatePipe.transform("CREATE_LINK"),content:this.translatePipe.transform("ONLY_NUMBER_CAN_BE_PAGE_INDEX"),confirmButton:!0,confirmLabel:this.translatePipe.transform("CLOSE")});if(parseInt(this.pageIdx,10)>this.pageCount||parseInt(this.pageIdx,10)<1)return void this.modalService.createCommonModal({type:Ke.a.WARN,title:this.translatePipe.transform("CREATE_LINK"),content:this.translatePipe.transform("INVALID_PAGE_INDEX"),confirmButton:!0});this.link.attributes.dest=""+(parseInt(this.pageIdx,10)-1),this.link.attributes.contents=this.translatePipe.transform("GO_TO_PAGE").replace("%s",""+parseInt(this.pageIdx,10))}else{if(0===this.url.length)return void this.modalService.createCommonModal({type:Ke.a.WARN,title:this.translatePipe.transform("CREATE_LINK"),content:this.translatePipe.transform("URL_CANNOT_BE_BLANK"),confirmButton:!0,confirmLabel:this.translatePipe.transform("CLOSE")});this.link.attributes.dest=this.url,this.link.attributes.contents=this.translatePipe.transform("GO_TO_SITE").replace("%s",this.link.attributes.dest)}this.annotService.putModel(this.link),this.contentService.fireAnnotEvent({sdEventType:l.r.CREATE,annot:this.link}),this.contentService.fireAnnotListEvent({from:"AnnotComponent",sdEventType:l.r.CREATE,annot:this.link}),this.close()}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(jt.a),M.Mb(jt.b),M.Mb(M.l),M.Mb(l.d),M.Mb(l.f),M.Mb(Ke.c),M.Mb(s.G),M.Mb(P.d),M.Mb(O.h))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-link-creation-dialog"]],features:[M.yb([s.G])],decls:19,vars:28,consts:[["value","GoTo",3,"label","ngModel","ngModelChange"],["size","tiny","type","text",3,"disabled","placeholder","ngModel","autofocus","ngModelChange"],["value","URI",3,"label","ngModel","ngModelChange"],["size","tiny","type","text",3,"disabled","placeholder","ngModel","ngModelChange"],["color","white","size","small",1,"ep-button",3,"click"],["color","primary","size","small",1,"ep-button",3,"click"]],template:function(e,t){1&e&&(M.Sb(0,"h3"),M.Fc(1),M.ec(2,"translate"),M.Rb(),M.Sb(3,"main"),M.Sb(4,"pu-radio-button",0),M.Zb("ngModelChange",(function(e){return t.radioOption=e})),M.ec(5,"translate"),M.Rb(),M.Sb(6,"pu-input",1),M.Zb("ngModelChange",(function(e){return t.pageIdx=e})),M.ec(7,"translate"),M.Rb(),M.Sb(8,"pu-radio-button",2),M.Zb("ngModelChange",(function(e){return t.radioOption=e})),M.ec(9,"translate"),M.Rb(),M.Sb(10,"pu-input",3),M.Zb("ngModelChange",(function(e){return t.url=e})),M.ec(11,"translate"),M.Rb(),M.Rb(),M.Sb(12,"footer"),M.Sb(13,"button",4),M.Zb("click",(function(){return t.close()})),M.Fc(14),M.ec(15,"translate"),M.Rb(),M.Sb(16,"button",5),M.Zb("click",(function(){return t.createLink()})),M.Fc(17),M.ec(18,"translate"),M.Rb(),M.Rb()),2&e&&(M.zb(1),M.Gc(M.fc(2,14,"CREATE_LINK")),M.zb(3),M.jc("label",M.fc(5,16,"GO_TO_SPECIFIC_PAGE"))("ngModel",t.radioOption),M.zb(2),M.jc("disabled","GoTo"!==t.radioOption)("placeholder",M.fc(7,18,"PLEASE_ENTER_PAGE_NUMBER"))("ngModel",t.pageIdx)("autofocus",!0),M.zb(2),M.jc("label",M.fc(9,20,"OPEN_WEB_PAGE"))("ngModel",t.radioOption),M.zb(2),M.jc("disabled","URI"!==t.radioOption)("placeholder",M.fc(11,22,"PLEASE_ENTER_URL"))("ngModel",t.url),M.zb(4),M.Gc(M.fc(15,24,"CANCEL")),M.zb(3),M.Gc(M.fc(18,26,"CREATE")))},directives:[s.B,o.r,o.u,s.s],pipes:[T.a],styles:["h3[_ngcontent-%COMP%]{font-size:20px;line-height:28px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e;margin:8px 0}main[_ngcontent-%COMP%]{font-size:13px;line-height:22px;color:#6c6c6c;white-space:pre-wrap;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}main[_ngcontent-%COMP%]   pu-input[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   pu-radio-button[_ngcontent-%COMP%]{margin:8px 0}footer[_ngcontent-%COMP%]{text-align:right;margin-top:32px}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:12px}"],changeDetection:0}),e})();const Vt=["preScrollable"],Bt=["scaleWrapper"],$t=["slideshowOverlay"];function Wt(e,t){if(1&e&&M.Nb(0,"sd-popups",9),2&e){M.dc(2);const e=M.tc(1);M.jc("contentViewRoot",e)}}function Ut(e,t){if(1&e){const e=M.Tb();M.Sb(0,"div",15),M.Sb(1,"sd-page",16),M.Zb("mousedown",(function(i){M.uc(e);const n=t.$implicit;return M.dc(3).onPageMouseDown(i,n)})),M.Rb(),M.Rb()}if(2&e){const e=t.$implicit,i=M.dc(3);M.jc("page",e),M.zb(1),M.Eb("hide-outline",i.isSlideshow),M.jc("priority",i.renderPriorityOf(e))("page",e)("documentId",i.documentId)}}function Gt(e,t){if(1&e&&M.Nb(0,"sd-contextmenu",17),2&e){const e=M.dc(3);M.jc("eventInfo",e.contextMenuEventInfo)("isClickOnGrayArea",e.isClickOnGrayArea)}}function Ht(e,t){if(1&e&&(M.Sb(0,"div",10,11),M.Sb(2,"div",12),M.Dc(3,Ut,2,6,"div",13),M.Rb(),M.Dc(4,Gt,1,2,"sd-contextmenu",14),M.Rb()),2&e){const e=M.dc(2);M.zb(3),M.jc("ngForOf",e.pdfPages)("ngForTrackBy",e.trackByIndex),M.zb(1),M.jc("ngIf",e.shouldShowContextMenu&&e.runtimeEnv.get(e.MergedRuntimeEnvKey.CONTEXT_MENU))}}function qt(e,t){if(1&e&&(M.Qb(0),M.Dc(1,Wt,1,1,"sd-popups",7),M.Dc(2,Ht,5,3,"div",8),M.Pb()),2&e){const e=M.dc();M.zb(1),M.jc("ngIf",e.pdfPages.length),M.zb(1),M.jc("ngIf",e.pdfPages.length)}}function Zt(e,t){if(1&e&&M.Nb(0,"sd-ebook-view",18),2&e){const e=M.dc();M.jc("documentId",e.documentId)}}function Xt(e,t){1&e&&M.Nb(0,"div",19,20)}function Yt(e,t){if(1&e){const e=M.Tb();M.Qb(0),M.Sb(1,"div",23),M.Sb(2,"pu-input",24),M.Zb("keydown.enter",(function(){M.uc(e);const t=M.dc(2);return t.goToPage(t.pageNoFormControl.value)})),M.Rb(),M.Sb(3,"div",25),M.Fc(4),M.Rb(),M.Rb(),M.Pb()}if(2&e){const e=M.dc(2);M.zb(2),M.Bc("max-width",e.pageNoFormControl.value.toString().length<=3?29:null,"px"),M.jc("autoResize",e.pageNoFormControl.value.toString().length>=3)("maxLength",e.pageCount.toString().length)("formControl",e.pageNoFormControl),M.zb(1),M.jc("ngStyle",e.pdfDoc?null:e.viewerService.disableStyle),M.zb(1),M.Hc(" /\xa0",e.pageCount,"")}}function Kt(e,t){if(1&e){const e=M.Tb();M.Qb(0),M.Sb(1,"div",26),M.Sb(2,"button",27),M.Zb("click",(function(){M.uc(e);const t=M.dc(2);return t.previousPage(t.currentPageNo)})),M.ec(3,"translate"),M.Nb(4,"i",28),M.Rb(),M.Sb(5,"button",29),M.Zb("click",(function(){M.uc(e);const t=M.dc(2);return t.nextPage(t.currentPageNo)})),M.ec(6,"translate"),M.Nb(7,"i",30),M.Rb(),M.Rb(),M.Pb()}if(2&e){const e=M.dc(2);M.zb(2),M.jc("disabled",e.prevButtonDisabled)("title",M.fc(3,4,"PREVIOUS_PAGE")),M.zb(3),M.jc("disabled",e.nextButtonDisabled)("title",M.fc(6,6,"NEXT_PAGE"))}}function Qt(e,t){if(1&e){const e=M.Tb();M.Qb(0),M.Sb(1,"div",31),M.Sb(2,"button",32),M.Zb("click",(function(){M.uc(e);const t=M.dc(2);return t.zoom(-t.scaleStep)})),M.ec(3,"translate"),M.Nb(4,"i",33),M.Rb(),M.Sb(5,"button",34),M.Zb("click",(function(){M.uc(e);const t=M.dc(2);return t.zoom(t.scaleStep)})),M.ec(6,"translate"),M.Nb(7,"i",35),M.Rb(),M.Rb(),M.Pb()}if(2&e){const e=M.dc(2);M.zb(2),M.jc("disabled",!e.pdfDoc)("title",M.fc(3,4,"ZOOM_OUT")),M.zb(3),M.jc("disabled",!e.pdfDoc)("title",M.fc(6,6,"ZOOM_IN"))}}function Jt(e,t){if(1&e){const e=M.Tb();M.Qb(0),M.Sb(1,"div",36),M.Sb(2,"button",37),M.Zb("click",(function(){return M.uc(e),M.dc(2).toggleSearchTool()})),M.ec(3,"translate"),M.Nb(4,"i",38),M.Rb(),M.Rb(),M.Pb()}if(2&e){const e=M.dc(2);M.zb(2),M.jc("disabled",!e.pdfDoc)("title",M.fc(3,2,"SEARCH"))}}function ei(e,t){if(1&e&&(M.Sb(0,"div",21),M.Dc(1,Yt,5,7,"ng-container",2),M.Dc(2,Kt,8,8,"ng-container",2),M.Nb(3,"div",22),M.Dc(4,Qt,8,8,"ng-container",2),M.Nb(5,"div",22),M.Dc(6,Jt,5,4,"ng-container",2),M.Rb()),2&e){const e=M.dc();M.zb(1),M.jc("ngIf",e.runtimeEnv.get(e.RuntimeEnvKey.MAIN_TOOLBAR_PAGE_NAVIGATION)),M.zb(1),M.jc("ngIf",e.runtimeEnv.get(e.RuntimeEnvKey.MAIN_TOOLBAR_PAGINATION)),M.zb(2),M.jc("ngIf",e.runtimeEnv.get(e.RuntimeEnvKey.MAIN_TOOLBAR_SCALE)),M.zb(2),M.jc("ngIf",e.runtimeEnv.get(e.MergedRuntimeEnvKey.TEXT_SEARCH_VIEW)&&!e.hidableMenus[e.HidableView.TOOLBAR_SEARCH])}}function ti(e,t){if(1&e&&M.Nb(0,"sd-search-tool",39),2&e){const e=M.dc();M.jc("pdfDoc",e.pdfDoc)}}function ii(e,t){1&e&&M.Nb(0,"sd-indicator")}let ni=(()=>{class e{constructor(e,t,i,n,s,r,a,c,l,h,d,u,p,g,f,b,m,v,S,y,M,x){this.acroFormService=e,this.annotService=t,this.changeDetectorRef=i,this.contentEventsFactory=n,this.documentService=s,this.pageService=r,this.fitService=a,this.annotSelectedService=c,this.contentService=l,this.scrollController=h,this.store$=d,this.viewerService=u,this.subscriptionService=p,this.apiEventBridgeService=g,this.guideLineService=f,this.modalService=b,this.sdContextMenuService=m,this.selectTextService=v,this.renderer=S,this.toastService=y,this.translatePipe=M,this.shortcutService=x,this.pageNoFormControl=new o.h(1),this.isContextMenuOpened=!1,this.clickedPage=null,this.isClickOnGrayArea=!1,this.pdfPages=[],this.preferences=null,this.hidableMenus={},this.scaleEventSrc=new Fe.a,this.renderedSrc=new Fe.a,this.customSrc=new Fe.a}get RuntimeEnvKey(){return b.d}get MergedRuntimeEnvKey(){return b.c}get runtimeEnv(){return b.f}get HidableView(){return f.a}get shouldShowContextMenu(){return this.isContextMenuOpened}get prevButtonDisabled(){return this.currentPageNo<=1}get nextButtonDisabled(){return 4===this.viewMode?g.d.getEbookPageNo(this.pageCount)<=this.currentPageNo:this.pageCount<=this.currentPageNo}get scaleStep(){return Qe.c.scaleChange}get isVisibleFloatingNav(){return b.f.get(b.d.MAIN_TOOLBAR_PAGE_NAVIGATION)||b.f.get(b.d.MAIN_TOOLBAR_PAGINATION)||b.f.get(b.d.MAIN_TOOLBAR_SCALE)||b.f.get(b.c.TEXT_SEARCH_VIEW)&&!this.hidableMenus[f.a.TOOLBAR_SEARCH]}get documentId(){return this.pdfDoc?this.pdfDoc.streamdocsId:null}get contentViewStyle(){return this.dragMode!==d.a.MOVE?null:{cursor:`url(assets/images/grab${this.isMoving()?"bing":y.v.EMPTY_STRING}.cur),default`}}get isSlideshow(){var e;return null===(e=this.stateHolder)||void 0===e?void 0:e.isSlideshow}get contentViewElement(){return this.preScrollable.nativeElement}ngOnChanges(e){this.clearAllCache(),this.contentService.publishDocValidation(null)}ngOnInit(){this.initSubscribers(),this.buildMobileZoomer()}ngAfterViewChecked(){this.renderedSrc.next()}ngOnDestroy(){this.destroyDragScroller(),this.destroyMobileZoomer(),this.finalizeSubscribers(),this.scrollController.stop(),this.clearAllCache(),this.contentService.publishDocValidation(null),y.v.destroy(this)}markForCheck(e=y.v.EMPTY_STRING,t="log"){this.changeDetectorRef.markForCheck()}onRightMouseUp(e){2!==e.button||this.dragMode===d.a.MAGNIFY||this.annotSelectedService.selectedComponents.length||this.isSlideshow||(this.sdContextMenuService.publishContextMenuStatus(!0),this.contextMenuEventInfo=e)}onPdfDocumentReady(e,t){var i,n;this.pdfInfo=t,this.store$.dispatch(g.a.set({key:"pageCount",value:e.length})),this.store$.dispatch(g.a.set({key:"scaleRatio",value:1}));let o=Boolean("R2L"===(null===(i=null==t?void 0:t.ViewerPreferences)||void 0===i?void 0:i.Direction));this.preferences&&y.g.isDefined(this.preferences.viewerDirection)&&(o=0===this.preferences.viewerDirection?o:2===this.preferences.viewerDirection),this.store$.dispatch(g.a.set({key:"isR2L",value:o})),this.stateHolder=new Z.a,this.stateHolder.pdfPages=e,this.stateHolder.degree=this.degree,this.stateHolder.isR2L=this.isR2L,this.subscribeScale(),this.scrollController.start(this.contentView,this.stateHolder,this.contentViewElement),this.subscribePageArrange(),this.subscribePageNo(),this.subscribeRotation(),this.subscribeViewMode(),this.subscribeMainViewResized(),this.subscribeSimpleSearch(),this.fit(null!==(n={fitWidth:0,fitHeight:1,fitPage:3,actualSize:4}[this.overWrittenZoom])&&void 0!==n?n:this.preferences.pageFitMode),""===this.overWrittenZoom||Number.isNaN(Number(this.overWrittenZoom))||this.store$.dispatch(g.a.set({key:"scale",value:Number(this.overWrittenZoom)})),this.contentService.disableContinuousViewMode((y.F.isIE()||y.F.isEdge())&&4*this.stateHolder.getPageContainerSize(1).height*vt.b>1e6),this.contentService.publishPageEndNoLoaded(),y.t.runAsync(()=>this.apiEventBridgeService.documentReadySrc.next())}trackByIndex(e,t){return t.i}renderPriorityOf(e){return this.currentPageNo-e.i-1}onPageMouseDown(e,t){return this.pageService.publishPage(t),this.annotSelectedService.unselectAll(),!0}isEbookMode(){return 4===this.viewMode&&this.documentService.eBookStatus}canTextSearch(){return this.documentService.checkAuthority(l.j.SEARCH_TEXT)}destroyDragScroller(){var e;this.dragScroller=null===(e=this.dragScroller)||void 0===e?void 0:e.destroy()}buildDragScroller(){this.destroyDragScroller(),d.a.MOVE===this.dragMode&&(this.dragScroller=this.contentEventsFactory.createScroller(this,this.contentViewElement))}destroyMobileZoomer(){this.mobileZoomer&&this.mobileZoomer.destroy(),this.mobileZoomer=null}buildMobileZoomer(){this.destroyMobileZoomer(),this.mobileZoomer=this.contentEventsFactory.createZoomer(this,this.contentViewElement)}clearAllCache(){this.annotService.clearActionLogs(),this.acroFormService.clearActionLogs(),this.pageService.clearPageArrangeLogs()}isMoving(){var e;return null===(e=this.dragScroller)||void 0===e?void 0:e.isDragging()}goToPage(e){this.viewerService.goPage("string"!=typeof e?e:Number(e))}previousPage(e){this.viewerService.goPage(Number(e)-g.d.getPageMovement(this.viewMode))}nextPage(e){this.viewerService.goPage(Number(e)+g.d.getPageMovement(this.viewMode))}publishScale(e){this.store$.dispatch(g.a.set({key:"scale",value:e})),this.contentService.publishFitMode(null)}zoom(e){this.setScale(this.scale+e)}setScale(e){"number"==typeof e&&isFinite(e)&&!isNaN(e)&&this.publishScale(e)}get simpleSearchDisabled(){return!this.pdfDoc}toggleSearchTool(){this.documentService.checkAuthority(l.j.SEARCH_TEXT)&&!this.simpleSearchDisabled&&(b.f.get(b.d.QUICK_SEARCH_VIEW)?this.store$.dispatch(g.a.set({key:"searchToolActive",value:!this.searchToolActive})):this.rightSideViewVisible&&this.rightSideViewMode===p.a.TextSearch?this.store$.dispatch(g.a.set({key:"rightSideViewVisible",value:!1})):(this.store$.dispatch(g.a.set({key:"rightSideViewVisible",value:!0})),this.store$.dispatch(g.a.set({key:"rightSideViewMode",value:p.a.TextSearch}))))}subscribeSimpleSearch(){this.subscriptionService.push(this.shortcutService.getShortcutEvent(Y.a.SEARCH).subscribe({next:e=>{e.preventDefault(),e.stopPropagation(),this.documentService.checkAuthority(l.j.SEARCH_TEXT)&&b.f.get(b.c.TEXT_SEARCH_VIEW)&&!this.isEbookMode()&&!this.simpleSearchDisabled&&this.toggleSearchTool()}}))}subscribePageNo(){this.subscriptionService.push(this.contentService.pageNo$.pipe(S.a(e=>!g.d.isContinuousMode(this.viewMode)||0!==e.pageMoveEvent)).subscribe({next:e=>{if(this.pageNoFormControl.setValue(e.pageNo),e.fit&&e.centerPoint)return void Logger.warn("Unsupported page change event");this.scrollController.lastIndex=void 0;const t=e.pageNo,i=g.d.getNextPageNo(t,this.viewMode,this.pageCount);if(this.store$.dispatch(g.a.set({key:"currentPageNo",value:i})),g.d.isContinuousMode(this.viewMode)||this.scrollController.updateReadStatus(),!e.fit&&!e.centerPoint)return void this.scrollController.bufferPages(()=>this.scrollController.jumpToCurrentPage());let n,o,s=!1;if(e.fit){const{mode:i,args:r}=e.fit;switch(i){case"XYZ":r.zoom&&(s=100*r.zoom!==this.scale,this.store$.dispatch(g.a.set({key:"scale",value:100*r.zoom}))),null!==r.left&&(n=r.left),null!==r.top&&(o=this.pageService.pdfPages[t-1].bbox.h-r.top);break;case"Fit":case"FitB":return void this.scrollController.bufferPages(()=>{this.scrollController.jumpToCurrentPage(),y.t.runAsync(()=>this.fit(3))});case"FitH":case"FitBH":this.fit(0),null!==r.top&&(o=this.pageService.pdfPages[t-1].bbox.h-r.top);break;case"FitV":case"FitBV":this.fit(1),null!==r.left&&(n=r.left);break;case"FitR":return void this.scrollController.bufferPages(()=>{this.contentService.fitToRect({pageNo:t,rect:{bottom:this.pageService.pdfPages[t-1].bbox.h-r.bottom,left:r.left,top:this.pageService.pdfPages[t-1].bbox.h-r.top,right:r.right}})});default:return void Logger.warn("Unsupported destination mode: "+i)}}else e.centerPoint&&(n=e.centerPoint.x,o=e.centerPoint.y);this.scrollController.bufferPages(()=>{var i,r,a;const c=null===(i=this.scrollController.currentViewRect)||void 0===i?void 0:i.rect;let l=null!==(r=null!=n?n:c.x)&&void 0!==r?r:0,h=null!==(a=null!=o?o:c.y)&&void 0!==a?a:0;if(l||h){const e=(this.stateHolder.pdfPages[t-1].r+this.degree+360)%360;[l,h]=this.rotatePoint(t,e,l,h)}if(e.centerPoint){const e=y.u.normalizeScale(this.scale);l-=this.contentViewElement.clientWidth/(2*e),h-=this.contentViewElement.clientHeight/(2*e)}s?this.customSrc.next({pageNo:t,x:l,y:h}):this.scrollController.jumpToPage(t,l,h,0)})}}))}subscribeRotation(){this.subscriptionService.push(this.store$.pipe(Object(g.f)("degree")).subscribe({next:e=>{Logger.debug("Changed rotation$",e),this.stateHolder.degree=this.degree,this.scrollController.bufferPages(()=>{this.scrollController.jumpToCurrentPage(),this.apiEventBridgeService.rotateChangeAppliedSrc.next()})}}))}subscribeScale(){this.subscriptionService.push(this.store$.pipe(Object(g.f)("scale"),Pt.a(0)).subscribe({next:e=>{Logger.debug("Changed scale",e),this.scrollController.rescale(e),this.scrollController.bufferPages(),this.changeDetectorRef.destroyed||(this.changeDetectorRef.markForCheck(),this.scaleEventSrc.next()),this.scrollController.jumpToCurrentPage(),this.subscriptionService.push(y.t.runAsync(()=>this.apiEventBridgeService.scaleChangeAppliedSrc.next()))}}))}subscribePageArrange(){this.pageService.pageArrangeEvt$.pipe(S.a(y.g.isDefined)),this.pageService.pageArrangeEvt$.pipe(S.a(y.g.isDefined),S.a(e=>"rotate"!==e.action)),this.subscriptionService.push(this.pageService.pageArrangeEvt$.pipe(S.a(y.g.isDefined)).subscribe({next:e=>{Logger.debug("Changed arrangement$",e),this.store$.dispatch(g.a.set({key:"pageCount",value:this.stateHolder.pdfPages.length})),this.stateHolder.pdfPages=this.pageService.pdfPages,this.pdfPages.splice(0),this.scrollController.bufferPages(()=>{"copy"!==e.action&&"delete"!==e.action||this.scrollController.moveToPage(this.scrollController.findCurrentPageNo(),0)})}}),this.pageService.pageArrangeEvt$.pipe(S.a(y.g.isDefined),S.a(e=>!e.isTemporary),S.a(e=>"rotate"!==e.action)).subscribe({next:e=>this.annotService.processPageArrangeEvt(e)}))}subscribeViewMode(){this.subscriptionService.push(this.store$.pipe(Ve.a(()=>{this.pdfPages.length||this.scrollController.bufferPages()}),Object(g.f)("viewMode")).subscribe({next:()=>{Logger.debug("Changed viewMode"),this.scrollController.changeViewMode(),this.fit(this.preferences.pageFitMode)||y.t.runAsync(()=>this.scrollController.bufferPages(()=>this.scrollController.jumpToCurrentPage())),this.subscriptionService.push(y.t.runAsync(()=>this.apiEventBridgeService.viewModeChangeAppliedSrc.next()))}}))}subscribeMainViewResized(){const e=()=>{4!==this.viewMode&&this.contentView.update(this.stateHolder,this.scale,this.viewMode,this.currentPageNo,this.degree),this.changeDetectorRef.markForCheck()};this.subscriptionService.push(Q.a(y.F.windowResize$,this.store$.pipe(Object(g.f)("sideViewVisible")),this.store$.pipe(Object(g.f)("sideViewSize")),this.store$.pipe(Object(g.f)("rightSideViewVisible")),this.store$.pipe(Object(g.f)("rightSideViewSize")),this.store$.pipe(Object(g.e)([f.a.SIDE_VIEW,f.a.SIDE_VIEW_THUMBNAIL,f.a.SIDE_VIEW_BOOKMARK,f.a.SIDE_VIEW_ANNOTATION,f.a.SIDE_VIEW_REDACTION,f.a.SIDE_VIEW_EMBEDDED_FILE,f.a.SIDE_VIEW_FORM,f.a.SIDE_VIEW_SIGNATURE,f.a.TOOLBAR_SEARCH]))).subscribe({next:()=>{e(),this.subscriptionService.push(y.t.runAsync(()=>e()))}}))}initSubscribers(){this.subscriptionService.push(this.store$.pipe(Object(g.f)("scale")).subscribe({next:e=>this.scale=e}),this.store$.pipe(Object(g.f)("degree")).subscribe({next:e=>this.degree=e}),this.store$.pipe(Object(g.f)("viewMode")).subscribe({next:e=>this.viewMode=e}),this.store$.pipe(Object(g.f)("dragMode")).subscribe({next:e=>{this.dragMode=e,this.buildDragScroller()}}),this.store$.pipe(Object(g.f)("pageCount")).subscribe({next:e=>this.pageCount=e}),this.store$.pipe(Object(g.f)("isR2L")).subscribe({next:e=>this.isR2L=e}),this.store$.pipe(Object(g.f)("currentPageNo")).subscribe({next:e=>{this.currentPageNo=e,this.pageNoFormControl.setValue(this.currentPageNo),this.isSlideshow&&this.fit(6)}}),this.store$.pipe(Object(g.f)("searchToolActive")).subscribe({next:e=>{this.canTextSearch()?(this.searchToolActive=e,this.changeDetectorRef.markForCheck()):this.apiEventBridgeService.searchToolVisibilityChangedSrc.error("Unauthorized")}}),this.store$.pipe(Object(g.f)("rightSideViewMode")).subscribe({next:e=>{this.rightSideViewMode=e,this.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(g.f)("rightSideViewVisible")).subscribe({next:e=>{this.rightSideViewVisible=e,this.changeDetectorRef.markForCheck()}}),this.contentService.fitMode$.pipe(S.a(y.g.isDefined)).subscribe({next:e=>this.fit(e)}),this.store$.pipe(Object(u.e)()).subscribe({next:e=>{var t,i;this.preferences=e;let n=Boolean("R2L"===(null===(i=null===(t=this.pdfInfo)||void 0===t?void 0:t.ViewerPreferences)||void 0===i?void 0:i.Direction));if(this.preferences&&y.g.isDefined(this.preferences.viewerDirection)&&(n=0===this.preferences.viewerDirection?n:2===this.preferences.viewerDirection),this.isR2L!==n){if(this.store$.dispatch(g.a.set({key:"isR2L",value:n})),this.pdfPages.splice(0),!this.scrollController||!this.stateHolder)return;this.stateHolder.isR2L=n,this.scrollController.bufferPages()}this.changeDetectorRef.detectChanges()}}),yt.b([this.pageService.pdfPages$.pipe(S.a(y.g.isDefined)),this.documentService.pdfInfo$]).pipe(S.a(([e,t])=>this.pdfInfo!==t)).subscribe({next:([e,t])=>this.onPdfDocumentReady(e,t)}),this.contentService.bufferedPage$.subscribe({next:e=>this.renderPage(e)}),this.contentService.fitToRect$.subscribe({next:e=>{const{pageNo:t,rect:i}=e,n=i.right-i.left+20,o=i.bottom-i.top+20,s=(i.left+i.right)/2,r=(i.top+i.bottom)/2,a=this.contentViewElement.offsetWidth,c=this.contentViewElement.offsetHeight;this.store$.dispatch(g.a.set({key:"scale",value:Math.floor((c/a>o/n?a/n:c/o)/y.u.normalizeScale(1))})),this.contentService.publishFitMode(null),this.subscriptionService.push(y.t.runAsync(()=>this.contentService.movePage({pageNo:t,pageMoveEvent:1,centerPoint:{x:s,y:r}})))}}),this.contentService.scrollToPoint$.subscribe({next:({pageNo:e,point:t})=>{const{x:i,y:n}=t;this.subscriptionService.push(y.t.runAsync(()=>this.contentService.movePage({pageNo:e,pageMoveEvent:1,centerPoint:{x:i,y:n}})))}}),this.contentService.enableLinkCreationDialog$.subscribe({next:e=>this.modalService.createModal(zt,e)}),this.contentService.rebufferPages$.subscribe({next:()=>{this.stateHolder.pdfPages=this.pageService.pdfPages,this.stateHolder.degree=this.degree,this.stateHolder.isR2L=this.isR2L,this.scrollController.bufferPages()}}),this.sdContextMenuService.contextMenuStatus$.subscribe({next:e=>{this.isContextMenuOpened=e,this.changeDetectorRef.markForCheck()}}),y.F.windowMousedown$.pipe(S.a(e=>{var t;return(null===(t=this.selectedText)||void 0===t?void 0:t.textBox)&&2===e.button})).subscribe({next:e=>{this.selectedText.page.i===this.clickedPage.i&&e.target!==this.scaleWrapper.nativeElement||this.selectTextService.publishSelectedText(null)}}),y.F.windowMousedown$.subscribe({next:e=>this.isClickOnGrayArea=e.target===this.scaleWrapper.nativeElement}),this.pageService.clickedPage$.subscribe({next:e=>this.clickedPage=e}),this.selectTextService.publishSelectedText$.subscribe({next:e=>{e&&(y.F.isMobile()||y.F.isTablet()||y.F.isTouchableDevice())&&this.sdContextMenuService.publishContextMenuStatus(!0),this.selectedText=e}}),this.customSrc.pipe(v.a(e=>Mt.a(ze.a(e),this.scaleEventSrc)),v.a(([e])=>Mt.a(ze.a(e),this.renderedSrc).pipe(Ct.a(1)))).subscribe({next:([e])=>{this.scrollController.bufferPages(),this.scrollController.jumpToPage(e.pageNo,e.x,e.y,0)}}),this.store$.pipe(Object(g.f)("isSlideshow"),S.a(e=>e),v.a(e=>{if(!Boolean(y.g.getFullscreenMethod(this.contentViewElement)))return this.store$.dispatch(g.a.set({key:"isSlideshow",value:!1})),this.toastService.create({toastStyle:St.c.NOTIFICATION,content:this.translatePipe.transform("NOT_SUPPORTED_BROWSER_SLIDESHOW")}),ze.a();this.stateHolder.isSlideshow=e,this.originalViewMode=this.viewMode,this.originalScale=this.scale,this.originalPageNo=this.currentPageNo,this.store$.dispatch(g.a.set({key:"viewMode",value:0}));const t=y.g.getFullscreenMethod(this.contentViewElement);return"requestFullscreen"!==t?ze.a(this.contentViewElement[t]()):this.contentViewElement[t]()})).subscribe({next:()=>{this.viewerService.goPage(0),this.fit(6)}}),xt.a(y.g.getFullscreenEventNames()).pipe(wt.a(e=>Ot.a(y.F.nativeWindow,e)),S.a(e=>e.target===this.contentViewElement),function(e){let t=arguments.length,i=ee.a;Object(_t.a)(arguments[arguments.length-1])&&(i=arguments[arguments.length-1],t--);let n=null;t>=2&&(n=arguments[1]);let o=Number.POSITIVE_INFINITY;return t>=3&&(o=arguments[2]),function(t){return t.lift(new Tt(e,n,o,i))}}(0),S.a(e=>e.length>0)).subscribe({next:()=>{if(y.g.isFullscreenMode())return this.renderer.setStyle(this.contentViewElement,"background-color","black"),this.renderer.setStyle(this.slideshowOverlay.nativeElement,"background-color","transparent"),this.subscribeSlideshowEvent(),void this.fit(6);this.unsubscribeSlideshowEvent(),this.stateHolder.isSlideshow=!1,this.viewerService.goPage(this.originalPageNo-1),this.renderer.setStyle(this.contentViewElement,"background-color",""),this.store$.dispatch(g.a.set({key:"isSlideshow",value:!1})),this.store$.dispatch(g.a.set({key:"viewMode",value:this.originalViewMode})),this.store$.dispatch(g.a.set({key:"scale",value:this.originalScale})),this.fit(null)}}))}subscribeSlideshowEvent(){this.subscriptionService.set("slideshowOrientationChange",je.a(()=>y.F.nativeWindow.screen.orientation?Ot.a(y.F.nativeWindow.screen.orientation,"change"):ze.a(void 0)).subscribe({next:()=>{this.fitService.orientationType=y.F.orientationType,this.fit(6)}})),this.subscriptionService.set("slideshowResizeEvent",Ot.a(y.F.nativeWindow,"resize").pipe(S.a(()=>document[y.g.getFullscreenElement()]&&this.stateHolder.isSlideshow)).subscribe({next:()=>{this.fitService.screenSize={width:y.F.width,height:y.F.height},this.fit(6)}})),this.subscriptionService.set("slideshowKeyboardEvent",Ot.a(y.F.nativeWindow,"keydown").subscribe({next:e=>{e.preventDefault(),e.stopPropagation(),"transparent"===this.slideshowOverlay.nativeElement.style.backgroundColor?"."!==e.key&&"B"!==e.key&&"b"!==e.key?","!==e.key&&"W"!==e.key&&"w"!==e.key?(1===this.currentPageNo||"ArrowLeft"!==e.key&&"ArrowUp"!==e.key&&"PageUp"!==e.key&&"Backspace"!==e.key||this.viewerService.goPage(this.currentPageNo-1),this.currentPageNo===this.pageCount||"ArrowRight"!==e.key&&"ArrowDown"!==e.key&&"PageDown"!==e.key&&" "!==e.key||this.viewerService.goPage(this.currentPageNo+1),1!==this.currentPageNo&&"Home"===e.key&&this.viewerService.goPage(0),this.currentPageNo!==this.pageCount&&"End"===e.key&&this.viewerService.goPage(this.pageCount)):this.renderer.setStyle(this.slideshowOverlay.nativeElement,"background-color","#FFFFFF"):this.renderer.setStyle(this.slideshowOverlay.nativeElement,"background-color","#000000"):this.renderer.setStyle(this.slideshowOverlay.nativeElement,"background-color","transparent")}})),this.subscriptionService.set("slideshowMouseEvent",Ot.a(this.slideshowOverlay.nativeElement,"pointerdown").pipe(S.a(e=>"mouse"===e.pointerType&&0===e.button)).subscribe({next:e=>{e.preventDefault(),e.stopPropagation(),"transparent"===this.slideshowOverlay.nativeElement.style.backgroundColor?this.viewerService.goPage(this.currentPageNo+1):this.renderer.setStyle(this.slideshowOverlay.nativeElement,"background-color","transparent")}})),this.subscriptionService.set("slideshowTouchEvent",Q.a(Ot.a(this.slideshowOverlay.nativeElement,"touchstart"),Ot.a(this.slideshowOverlay.nativeElement,"touchmove"),Ot.a(this.slideshowOverlay.nativeElement,"touchend")).pipe(S.a(e=>e.touches.length>1)).subscribe({next:e=>{e.preventDefault(),e.stopPropagation()}}))}unsubscribeSlideshowEvent(){this.subscriptionService.get("slideshowOrientationChange").unsubscribe(),this.subscriptionService.get("slideshowResizeEvent").unsubscribe(),this.subscriptionService.get("slideshowKeyboardEvent").unsubscribe(),this.subscriptionService.get("slideshowMouseEvent").unsubscribe(),this.subscriptionService.get("slideshowTouchEvent").unsubscribe()}fit(e){const t=this.fitService.fit(this.stateHolder,this.contentViewElement,e);return this.subscriptionService.push(y.t.runAsync(()=>{const e=this.contentViewElement;e.scrollLeft=(e.scrollWidth-e.clientWidth)/2,this.apiEventBridgeService.fitModeAppliedSrc.next()})),t}renderPage(e){this.ensureRenderPages(e.pages),this.markForCheck("renderPage"),e.postRender(),this.subscriptionService.push(y.t.runAsync(()=>{const e=y.u.normalizeScale(this.scale),t=Z.e.getOffset(this.stateHolder,this.contentViewElement,this.scale,this.viewMode,this.currentPageNo),i=Object.assign({},this.stateHolder.getPageFrameOffset(this.viewMode,this.currentPageNo-1));i.offsetX=(i.offsetX+Z.a.MARGIN)*e,i.offsetY=(i.offsetY+Z.a.MARGIN)*e,this.guideLineService.publishContentViewOffset({offsetX:t.offsetX+i.offsetX,offsetY:t.offsetY+i.offsetY,width:this.contentViewElement.offsetWidth,height:this.contentViewElement.offsetHeight}),this.guideLineService.publishScrollOffset({offsetX:this.contentViewElement.scrollLeft,offsetY:this.contentViewElement.scrollTop})}))}ensureRenderPages(e){if(!this.pdfPages.length)return this.pdfPages.push(...e);const t=e[0].i-this.pdfPages[0].i,i=e[e.length-1].i-this.pdfPages[this.pdfPages.length-1].i;if(!t&&!i)return;if(this.pdfPages.splice(Math.max(this.pdfPages.length+i,0)),t>0&&this.pdfPages.splice(0,t),!this.pdfPages.length)return this.pdfPages.push(...e);const n=i>0?e.slice(Math.max(e.length-i,0)):[];e.splice(Math.max(-t,0)),this.pdfPages.splice(0,0,...e),this.pdfPages.push(...n)}finalizeSubscribers(){this.pageService.publishPages(null),this.documentService.closeEBook()}rotatePoint(e,t,i,n){const o=this.stateHolder.pdfPages[e-1].bbox;let s=i,r=n;if((i||n)&&t)switch(t){case 90:s=o.h-n,r=i;break;case 180:s=o.w-i,r=o.h-n;break;case 270:s=n,r=o.w-i}return[s,r]}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(l.a),M.Mb(l.d),M.Mb(M.h),M.Mb(Lt),M.Mb(l.k),M.Mb(ae.b),M.Mb(Ft),M.Mb(l.c),M.Mb(l.f),M.Mb(X.a),M.Mb(O.h),M.Mb(l.w),M.Mb(s.G),M.Mb(nt.a),M.Mb(me.b),M.Mb(Ke.c),M.Mb(be.b),M.Mb(w.a),M.Mb(M.E),M.Mb(St.b),M.Mb(P.d),M.Mb(Y.c))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-content-view"]],viewQuery:function(e,t){var i;1&e&&(M.zc(Vt,!0),M.Lc(Bt,!0),M.zc(Z.b,!0),M.Lc($t,!0)),2&e&&(M.sc(i=M.ac())&&(t.preScrollable=i.first),M.sc(i=M.ac())&&(t.scaleWrapper=i.first),M.sc(i=M.ac())&&(t.contentView=i.first),M.sc(i=M.ac())&&(t.slideshowOverlay=i.first))},inputs:{pdfDoc:"pdfDoc",overWrittenZoom:"overWrittenZoom"},features:[M.yb([Ft,Lt,s.G]),M.xb],decls:8,vars:7,consts:[["sdContentViewLayout","",1,"pre-scrollable",3,"ngStyle","mouseup"],["preScrollable",""],[4,"ngIf"],[3,"documentId",4,"ngIf"],["id","slideshow-overlay",4,"ngIf"],["class","floating-page-nav",4,"ngIf"],[3,"pdfDoc",4,"ngIf"],[3,"contentViewRoot",4,"ngIf"],["id","scale-wrapper","sdScaleWrapperLayout","",4,"ngIf"],[3,"contentViewRoot"],["id","scale-wrapper","sdScaleWrapperLayout",""],["scaleWrapper",""],["id","scroll-expander","sdScrollExpanderLayout",""],["class","page-frame","sdPageFrameLayout","",3,"page",4,"ngFor","ngForOf","ngForTrackBy"],[3,"eventInfo","isClickOnGrayArea",4,"ngIf"],["sdPageFrameLayout","",1,"page-frame",3,"page"],["sdPageContentLayout","",3,"priority","page","documentId","mousedown"],[3,"eventInfo","isClickOnGrayArea"],[3,"documentId"],["id","slideshow-overlay"],["slideshowOverlay",""],[1,"floating-page-nav"],[1,"divider"],[1,"page-input"],["size","tiny","align","left",1,"current-page-index","left-child",3,"autoResize","maxLength","formControl","keydown.enter"],[1,"page-label",3,"ngStyle"],[1,"page-move"],["color","dark",1,"ep-text-button","previous-page","left-child",3,"disabled","title","click"],[1,"papycon","papycon-previous-symbol2"],["color","dark",1,"ep-text-button","next-page",3,"disabled","title","click"],[1,"papycon","papycon-next-symbol2"],[1,"zoom"],["color","dark",1,"ep-text-button","zoom-out","left-child",3,"disabled","title","click"],[1,"papycon","papycon-minus"],["color","dark",1,"ep-text-button","zoom-in",3,"disabled","title","click"],[1,"papycon","papycon-plus"],[1,"search"],["color","dark",1,"ep-text-button","search-button",3,"disabled","title","click"],[1,"papycon","papycon-search"],[3,"pdfDoc"]],template:function(e,t){1&e&&(M.Sb(0,"div",0,1),M.Zb("mouseup",(function(e){return t.onRightMouseUp(e)})),M.Dc(2,qt,3,2,"ng-container",2),M.Dc(3,Zt,1,1,"sd-ebook-view",3),M.Dc(4,Xt,2,0,"div",4),M.Rb(),M.Dc(5,ei,7,4,"div",5),M.Dc(6,ti,1,1,"sd-search-tool",6),M.Dc(7,ii,1,0,"sd-indicator",2)),2&e&&(M.jc("ngStyle",t.contentViewStyle),M.zb(2),M.jc("ngIf",!t.isEbookMode()),M.zb(1),M.jc("ngIf",t.isEbookMode()),M.zb(1),M.jc("ngIf",t.isSlideshow),M.zb(1),M.jc("ngIf",!t.isSlideshow&&t.isVisibleFloatingNav),M.zb(1),M.jc("ngIf",t.canTextSearch()&&t.searchToolActive),M.zb(1),M.jc("ngIf",!t.isSlideshow))},styles:["#scale-wrapper[_ngcontent-%COMP%]{position:absolute;top:0}#scroll-expander[_ngcontent-%COMP%]{display:table;-webkit-transform-origin:0 0;transform-origin:0 0}.pre-scrollable[_ngcontent-%COMP%]{overflow:auto;position:relative;width:100%;height:100%;-webkit-overflow-scrolling:touch}.page-frame[_ngcontent-%COMP%]{position:absolute;display:table-cell}.floating-page-nav[_ngcontent-%COMP%]{-webkit-box-shadow:0 4px 32px 0 hsla(0,0%,42.4%,.12);box-shadow:0 4px 32px 0 hsla(0,0%,42.4%,.12);background-color:#fff;-ms-flex-align:center;position:absolute;bottom:10px;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);border:1px solid #dadada;border-radius:90px;height:42px}.floating-page-nav[_ngcontent-%COMP%], .floating-page-nav[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.divider){display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;align-items:center}.floating-page-nav[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.divider){-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;margin:0 12px}.floating-page-nav[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .left-child[_ngcontent-%COMP%]{margin-right:8px}.floating-page-nav[_ngcontent-%COMP%]   div.page-input[_ngcontent-%COMP%]{margin-left:20px;margin-right:0}.floating-page-nav[_ngcontent-%COMP%]   div.page-input[_ngcontent-%COMP%]   .left-child[_ngcontent-%COMP%]{margin-right:4px}.floating-page-nav[_ngcontent-%COMP%]   pu-input.current-page-index[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Regular,sans-serif;color:#6c6c6c;min-width:29px;border-radius:2px}.floating-page-nav[_ngcontent-%COMP%]   div.page-label[_ngcontent-%COMP%]{font-size:14px;line-height:24px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e;white-space:pre}.floating-page-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:12px;padding:7px 5px}.floating-page-nav[_ngcontent-%COMP%]   div.divider[_ngcontent-%COMP%]{height:24px;width:1px;background-color:#dadada}.floating-page-nav[_ngcontent-%COMP%]   div.search[_ngcontent-%COMP%]{margin-right:16px}.floating-page-nav[_ngcontent-%COMP%]   div.search[_ngcontent-%COMP%]   button.search-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.hide-outline[_ngcontent-%COMP%]{outline:none}#slideshow-overlay[_ngcontent-%COMP%]{width:100%;height:100%;position:fixed;top:0;left:0;cursor:default}"],changeDetection:0}),e})();var oi=i("PqYM"),si=i("zP0r");const ri=["imgEl"];var ai=function(e){return e.WebkitOptimizeContrast="-webkit-optimize-contrast",e.Pixelated="pixelated",e}({});let ci=(()=>{class e{constructor(e,t,i,n,o,s,r,a){this.contentService=e,this.pageService=t,this.changeDetectorRef=i,this.renderer=n,this.subscriptionService=o,this.renderingService=s,this.store$=r,this.muPDFService=a,this.imgStyle={},this.resetted=new M.n,this.rendered=new M.n,this.failed=new M.n,this.currentImageScale=0,this.retryHandler=null}ngOnInit(){this.imgStyle.imageRendering="-webkit-optimize-contrast",this.subscriptionService.push(Q.a(this.store$.pipe(Object(u.e)("renderingOption")),this.store$.pipe(Object(u.e)("hidpiRendering")),this.store$.pipe(Object(g.f)("scale"),Ve.a(e=>this.scale=e),si.a(1),Be.a(200),S.a(e=>e!==this.currentImageScale),Ve.a(e=>this.currentImageScale=e)),this.contentService.reload$.pipe(S.a(e=>l.q.typeAndPage(e,this.pdfPage.i,l.g.Image)),v.a(()=>this.store$),Object(g.f)("renderingMode"),v.a(e=>e!==Le.b.CLIENT?ze.a(void 0):this.muPDFService.document$.pipe(S.a(e=>2===e.status))))).subscribe({next:()=>this.delayFetch()}),this.store$.pipe(Object(g.f)("quality")).subscribe({next:e=>this.quality=e}),this.store$.pipe(Object(g.f)("renderingMode"),S.a(e=>e===Le.b.HYBRID),v.a(()=>this.muPDFService.document$),S.a(e=>2===e.status)).subscribe({next:()=>this.delayFetch()})),this.subscribePageArrangeEvent()}ngOnDestroy(){this.imgData=void 0,this.imgElementRef.nativeElement.parentElement.removeChild(this.imgElementRef.nativeElement),y.v.destroy(this)}ngOnChanges(){this.renderer.setStyle(this.imgElementRef.nativeElement,y.v.SK_Z_INDEX,`${y.p.Image}${y.v.EMPTY_STRING}`),this.delayFetch()}fetch(){if(!this.pdfPage)return;this.imgStyle.imageRendering=ai.WebkitOptimizeContrast;const e=this.renderingService.renderingMode!==Le.b.SERVER;this.subscriptionService.set("dataSub",this.renderingService.fetchImage(this.documentId,this.pdfPage.ref,{zoom:Object(ke.g)(this.scale,e),jpegQuality:this.quality,renderAnnots:!1,increasePrint:!1}).subscribe({next:t=>{const i=e&&y.F.isChromium()&&b.f.get(b.d.CLIENT_RENDERING_PIXELATED);this.imgStyle.imageRendering=i?ai.Pixelated:ai.WebkitOptimizeContrast,this.render(t)},error:e=>this.onFetchFailed(e)}))}preloadFetch(){this.pdfPage&&this.subscriptionService.set("preloadDataSub",this.renderingService.fetchPreload(this.documentId,this.pdfPage.ref).pipe(S.a(()=>!this.imgData&&Math.max(this.pdfPage.bbox.w,this.pdfPage.bbox.h)>1e3)).subscribe({next:e=>{y.g.isDefined(e)&&this.render(e)}}))}delayFetch(){this.subscriptionService.set("delayedFetchSub",oi.a(y.y.IMAGE).subscribe({next:()=>{this.clearRetryHandler(),this.fetchFailCount=0,this.preloadFetch(),this.fetch()}}))}onFetchFailed(e){this.clearRetryHandler(),++this.fetchFailCount>Qe.c.retryCount?this.failed.emit(e):this.retryHandler=setTimeout(()=>this.fetch(),Qe.c.retryInterval)}clearRetryHandler(){null!==this.retryHandler&&(clearTimeout(this.retryHandler),this.retryHandler=null)}render(e){e&&(this.imgData=e),y.u.setVisibility(this.imgElementRef.nativeElement,!0,this.renderer,!0),this.changeDetectorRef.markForCheck(),this.rendered.emit()}reset(){y.u.setVisibility(this.imgElementRef.nativeElement,!1,this.renderer),this.resetted.emit()}subscribePageArrangeEvent(){this.subscriptionService.push(this.pageService.pageArrangeEvt$.pipe(S.a(e=>ae.b.arrangeAffectedChecker(this.pdfPage.originalIndex,e))).subscribe({next:()=>{this.reset(),this.ngOnChanges()}}))}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(l.f),M.Mb(ae.b),M.Mb(M.h),M.Mb(M.E),M.Mb(s.G),M.Mb(ke.e),M.Mb(O.h),M.Mb(l.n))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-image"]],viewQuery:function(e,t){var i;1&e&&M.zc(ri,!0),2&e&&M.sc(i=M.ac())&&(t.imgElementRef=i.first)},inputs:{pdfPage:"pdfPage",documentId:"documentId",imgStyle:"imgStyle"},outputs:{resetted:"resetted",rendered:"rendered",failed:"failed"},features:[M.yb([s.G]),M.xb],decls:2,vars:2,consts:[[1,"image",3,"sdImage","ngStyle"],["imgEl",""]],template:function(e,t){1&e&&M.Nb(0,"img",0,1),2&e&&M.jc("sdImage",t.imgData)("ngStyle",t.imgStyle)},styles:["img.image[_ngcontent-%COMP%]{width:100%;height:100%;visibility:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}"],changeDetection:0}),e})();const li=["magnifySvg"];function hi(e,t){if(1&e&&(M.cc(),M.Nb(0,"rect",3)),2&e){const e=M.dc();M.Ab("height",e.rectRender.h)("width",e.rectRender.w)("x",e.rectRender.x)("y",e.rectRender.y)}}let di=(()=>{class e{constructor(e,t,i,n,o){this.changeDetectorRef=e,this.contentService=t,this.renderer=i,this.subscriptionService=n,this.store$=o,this.created=!1,this.startPoint={x:0,y:0},this.rectRender={x:0,y:0,w:0,h:0},this.onMouseMoveListener=null,this.onMouseUpListener=null}ngOnInit(){this.subscriptionService.push(this.store$.pipe(Object(g.f)("scale")).subscribe({next:e=>this.scale=e}))}ngOnDestroy(){this.destroyMouseListeners()}onDown(e){return this.rectRender.h=0,this.rectRender.w=this.rectRender.h,this.onMouseUpListener=this.renderer.listen(this.magnifySvgElementRef.nativeElement,"mouseup",e=>this.onUp(e)),0!==e.button||(e.preventDefault(),e.stopPropagation(),this.prevEvent=e,this.changeDetectorRef.markForCheck(),this.created=!0,this.rectRender.x=e.offsetX,this.startPoint.x=this.rectRender.x,this.rectRender.y=e.offsetY,this.startPoint.y=this.rectRender.y,this.onMouseMoveListener=this.renderer.listen(this.magnifySvgElementRef.nativeElement,"mousemove",e=>this.onMove(e)),!1)}onMove(e){return!this.created||(e.preventDefault(),e.stopPropagation(),this.prevEvent.offsetX===e.offsetX&&this.prevEvent.offsetY===e.offsetY||(this.rectRender.x=Math.min(this.startPoint.x,e.offsetX),this.rectRender.y=Math.min(this.startPoint.y,e.offsetY),this.rectRender.w=Math.abs(e.offsetX-this.startPoint.x),this.rectRender.h=Math.abs(e.offsetY-this.startPoint.y),this.prevEvent=e,this.changeDetectorRef.markForCheck()),!1)}onUp(e){e.preventDefault(),e.stopPropagation(),this.destroyMouseListeners(),this.created=!1,this.changeDetectorRef.markForCheck();const t={left:this.rectRender.x,top:this.rectRender.y,right:this.rectRender.x+this.rectRender.w,bottom:this.rectRender.y+this.rectRender.h};if(this.store$.dispatch(g.a.set({key:"currentPageNo",value:this.pdfPage.i+1})),this.rectRender.w<10&&this.rectRender.h<10){switch(e.button){case 0:this.setScale(this.scale+10),setTimeout(()=>this.contentService.scrollToPoint({pageNo:this.pdfPage.i+1,point:{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}}));break;case 2:this.setScale(this.scale-10),setTimeout(()=>this.contentService.scrollToPoint({pageNo:this.pdfPage.i+1,point:{x:e.offsetX,y:e.offsetY}}));break;default:return!1}return!1}return this.contentService.fitToRect({pageNo:this.pdfPage.i+1,rect:t}),!1}onMouseleave(){this.destroyMouseListeners(),this.created=!1,this.changeDetectorRef.markForCheck()}setScale(e,t=!1){this.store$.dispatch(g.a.set({key:"scale",value:Number(e.toFixed(0))})),this.contentService.publishFitMode(null)}destroyMouseListeners(){(this.onMouseMoveListener||y.v.EMPTY_FUNCTION)(),this.onMouseMoveListener=null,(this.onMouseUpListener||y.v.EMPTY_FUNCTION)(),this.onMouseUpListener=null}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(M.h),M.Mb(l.f),M.Mb(M.E),M.Mb(s.G),M.Mb(O.h))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-magnify-tool"]],viewQuery:function(e,t){var i;1&e&&M.zc(li,!0),2&e&&M.sc(i=M.ac())&&(t.magnifySvgElementRef=i.first)},inputs:{pdfPage:"pdfPage"},features:[M.yb([s.G])],decls:3,vars:1,consts:[["id","magnify-svg",2,"width","100%","height","100%","background-color","rgba(255, 255, 255, 0)",3,"mousedown","mouseleave"],["magnifySvg",""],["fill","transparent","stroke","#f79f1a","stroke-dasharray","8 8","stroke-width","1",4,"ngIf"],["fill","transparent","stroke","#f79f1a","stroke-dasharray","8 8","stroke-width","1"]],template:function(e,t){1&e&&(M.cc(),M.Sb(0,"svg",0,1),M.Zb("mousedown",(function(e){return t.onDown(e)}))("mouseleave",(function(){return t.onMouseleave()})),M.Dc(2,hi,1,4,"rect",2),M.Rb()),2&e&&(M.zb(2),M.jc("ngIf",t.created))},directives:[n.t],styles:["#magnify-svg[_ngcontent-%COMP%]{z-index:999;position:absolute;right:0;top:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:crosshair}"],changeDetection:0}),e})();var ui=i("2Vo4");const pi=["selectText"];function gi(e,t){if(1&e&&(M.Sb(0,"div",10),M.Nb(1,"div",11),M.Rb()),2&e){const e=M.dc();M.jc("ngStyle",e.getIndicatorStyle(!0))}}function fi(e,t){if(1&e&&(M.Sb(0,"div",12),M.Nb(1,"div",13),M.Sb(2,"span"),M.Fc(3),M.ec(4,"translate"),M.Rb(),M.Rb()),2&e){const e=M.dc();M.jc("ngStyle",e.getIndicatorStyle(!1)),M.zb(3),M.Gc(M.fc(4,2,"FAILED_TO_LOAD_PAGE"))}}function bi(e,t){if(1&e){const e=M.Tb();M.Sb(0,"sd-image",14),M.Zb("resetted",(function(){return M.uc(e),M.dc().imgResetted()}))("rendered",(function(){return M.uc(e),M.dc().imgRenderDone()}))("failed",(function(t){return M.uc(e),M.dc().imgFetchFailed(t)})),M.Rb()}if(2&e){const e=M.dc();M.jc("pdfPage",e.page)("documentId",e.documentId)}}function mi(e,t){1&e&&M.Nb(0,"sd-user-info")}function vi(e,t){if(1&e&&M.Nb(0,"sd-watermark",15),2&e){const e=M.dc();M.jc("ngStyle",e.watermarkStyle)("documentId",e.documentId)("pdfPage",e.page)}}function Si(e,t){if(1&e&&M.Nb(0,"sd-annot",16),2&e){const e=M.dc();M.jc("pdfPage",e.page)("documentId",e.documentId)("selectText",e.selectText)}}function yi(e,t){if(1&e&&M.Nb(0,"sd-api-highlight",17),2&e){const e=M.dc();M.jc("pdfPage",e.page)}}function Mi(e,t){if(1&e&&M.Nb(0,"sd-search-highlight",18),2&e){const e=M.dc();M.jc("pdfPage",e.page)("result",e.searchResult)("redactionMarks",e.redactionMarks)}}function xi(e,t){if(1&e&&M.Nb(0,"sd-select-text",19,20),2&e){const e=M.dc();M.jc("pdfPage",e.page)("documentId",e.documentId)}}function Oi(e,t){if(1&e&&M.Nb(0,"sd-magnify-tool",17),2&e){const e=M.dc();M.jc("pdfPage",e.page)}}function Pi(e,t){if(1&e&&M.Nb(0,"sd-tts-script",21),2&e){const e=M.dc();M.jc("documentId",e.documentId)("pdfPage",e.page)}}function Ci(e,t){if(1&e&&M.Nb(0,"sd-guide-line",17),2&e){const e=M.dc();M.jc("pdfPage",e.page)}}let wi=(()=>{class e{constructor(e,t,i,n,o,s,r,a){this.elementRef=e,this.changeDetectorRef=t,this.contentService=i,this.subscriptionService=n,this.apiEventBridgeService=o,this.apiHighlightService=s,this.documentService=r,this.store$=a,this.isReady=!1,this.isImgLoaded=!1,this.isImgFailed=!1,this.apiHighlighted=!1,this.changesSrc=new ui.a(null)}get displayUserInfo(){return Qe.c.displayUserInfo}get isEnabledAnnotation(){return this.documentService.checkAuthority(l.j.ANNOTATION)||this.documentService.checkAuthority(l.j.FORM)}get watermarkStyle(){const e=y.u.normalizeDegree(360-this.page.r);let{w:t,h:i}=this.page.bbox;e%180!=0&&([t,i]=[i,t]);const n=Math.abs(Math.sin(e*Math.PI/180)),o=n*(i-t)/2;return{marginTop:y.u.pixelOf(n*(t-i)/2),marginLeft:y.u.pixelOf(o),width:y.u.pixelOf(t),height:y.u.pixelOf(i),transform:y.u.rotationNote(e)}}ngOnChanges(e){this.changesSrc.next(e)}ngOnInit(){this.subscriptionService.push(Q.a(this.store$.pipe(Object(g.f)("supportTTS")).pipe(Ve.a(e=>this.supportTTS=e))).subscribe({next:()=>this.changeDetectorRef.markForCheck()}),this.store$.pipe(Object(g.f)("dragMode")).pipe(Ve.a(e=>this.dragMode=e),si.a(1)).subscribe({next:()=>{this.changeDetectorRef.markForCheck(),this.apiEventBridgeService.dragToolChangeAppliedSrc.next()}}),Q.a(this.store$.pipe(Object(g.f)("degree")).pipe(Ve.a(e=>this.degree=e)),this.store$.pipe(Object(g.f)("scale")).pipe(Ve.a(e=>this.scale=e))).subscribe({next:()=>{this.changeDetectorRef.destroyed||this.changeDetectorRef.detectChanges()}}),this.contentService.searchResult$.pipe(Pt.a(0)).subscribe({next:e=>this.bindSearchResult(e)}),this.contentService.searchRedactionMark$.subscribe({next:e=>{this.bindRedactionMarks(e)}}),this.changesSrc.pipe(S.a(y.g.isDefined),S.a(e=>Boolean(e.page)||Boolean(e.documentId)||Boolean(e.priority)),Be.a(200)).subscribe({next:()=>this.render()}),this.store$.pipe(Object(g.f)("rulerActive")).subscribe({next:e=>{this.rulerActive=e,this.changeDetectorRef.markForCheck()}}),Q.a(ze.a(null),this.apiHighlightService.highlightInfoMapChange$).subscribe({next:()=>{this.apiHighlighted=this.apiHighlightService.highlightInfoMap[this.page.i]&&this.apiHighlightService.highlightInfoMap[this.page.i].length>0,this.changeDetectorRef.markForCheck()}}))}ngOnDestroy(){y.v.removeElement(this.elementRef.nativeElement),y.v.destroy(this)}onClick(e){"SD-PAGE"===e.target.nodeName&&e.stopPropagation()}imgResetted(){this.isImgFailed=!1,this.isImgLoaded=this.isImgFailed}imgRenderDone(){this.isImgLoaded=!0,this.contentService.publishSomePageLoaded(!0)}imgFetchFailed(e){this.isImgFailed=!0}isVisibleSelectText(){return this.isReady&&(this.dragMode===d.a.SELECT_TEXT||y.F.isMobile())}isVisibleMagnifyTool(){return this.isReady&&this.dragMode===d.a.MAGNIFY}getIndicatorStyle(e){const t={transform:y.u.rotationNote(-(this.page.r+this.degree))};return e&&(t.transform+=` scale(${100/this.scale})`),t}render(){const e=100*(Math.abs(this.priority)+1)+10*this.priority;this.subscriptionService.set("delayedFetchSub",oi.a(e).subscribe({next:()=>{this.isReady=!0,this.changeDetectorRef.markForCheck()}}))}bindSearchResult(e){this.searchResult=(null==e?void 0:e.pageIdx)===this.page.i?e:null,this.changeDetectorRef.markForCheck()}bindRedactionMarks(e){const t=e&&e[this.page.i];this.redactionMarks=(null==t?void 0:t.length)>0?{words:[...t]}:null,this.changeDetectorRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(M.l),M.Mb(M.h),M.Mb(l.f),M.Mb(s.G),M.Mb(nt.a),M.Mb(ft.b),M.Mb(l.k),M.Mb(O.h))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-page"]],viewQuery:function(e,t){var i;1&e&&M.Lc(pi,!0),2&e&&M.sc(i=M.ac())&&(t.selectText=i.first)},hostBindings:function(e,t){1&e&&M.Zb("click",(function(e){return t.onClick(e)}))},inputs:{priority:"priority",page:"page",documentId:"documentId"},features:[M.yb([s.G]),M.xb],decls:12,vars:12,consts:[["class","indicator loader",3,"ngStyle",4,"ngIf"],["class","indicator fail",3,"ngStyle",4,"ngIf"],[3,"pdfPage","documentId","resetted","rendered","failed",4,"ngIf"],[4,"ngIf"],[3,"ngStyle","documentId","pdfPage",4,"ngIf"],[3,"pdfPage","documentId","selectText",4,"ngIf"],[3,"pdfPage",4,"ngIf"],[3,"pdfPage","result","redactionMarks",4,"ngIf"],[3,"pdfPage","documentId",4,"ngIf"],[3,"documentId","pdfPage",4,"ngIf"],[1,"indicator","loader",3,"ngStyle"],[1,"spin-loader"],[1,"indicator","fail",3,"ngStyle"],[1,"image"],[3,"pdfPage","documentId","resetted","rendered","failed"],[3,"ngStyle","documentId","pdfPage"],[3,"pdfPage","documentId","selectText"],[3,"pdfPage"],[3,"pdfPage","result","redactionMarks"],[3,"pdfPage","documentId"],["selectText",""],[3,"documentId","pdfPage"]],template:function(e,t){1&e&&(M.Dc(0,gi,2,1,"div",0),M.Dc(1,fi,5,4,"div",1),M.Dc(2,bi,1,2,"sd-image",2),M.Dc(3,mi,1,0,"sd-user-info",3),M.Dc(4,vi,1,3,"sd-watermark",4),M.Dc(5,Si,1,3,"sd-annot",5),M.Dc(6,yi,1,1,"sd-api-highlight",6),M.Dc(7,Mi,1,3,"sd-search-highlight",7),M.Dc(8,xi,2,2,"sd-select-text",8),M.Dc(9,Oi,1,1,"sd-magnify-tool",6),M.Dc(10,Pi,1,2,"sd-tts-script",9),M.Dc(11,Ci,1,1,"sd-guide-line",6)),2&e&&(M.jc("ngIf",!t.isImgLoaded&&!t.isImgFailed&&!t.supportTTS),M.zb(1),M.jc("ngIf",!t.isImgLoaded&&t.isImgFailed),M.zb(1),M.jc("ngIf",t.isReady&&!t.supportTTS),M.zb(1),M.jc("ngIf",t.displayUserInfo),M.zb(1),M.jc("ngIf",t.isReady&&!t.supportTTS),M.zb(1),M.jc("ngIf",t.isReady&&!t.supportTTS&&t.isEnabledAnnotation),M.zb(1),M.jc("ngIf",t.apiHighlighted),M.zb(1),M.jc("ngIf",t.isReady&&(t.searchResult||t.redactionMarks)&&!t.supportTTS),M.zb(1),M.jc("ngIf",t.isVisibleSelectText()&&!t.supportTTS),M.zb(1),M.jc("ngIf",t.isVisibleMagnifyTool()&&!t.supportTTS),M.zb(1),M.jc("ngIf",t.isReady&&t.supportTTS),M.zb(1),M.jc("ngIf",t.rulerActive))},styles:["[_nghost-%COMP%]{display:block;background-color:#fff;outline:1px solid #e8e8e8}.indicator[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;z-index:-1}.indicator.fail[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.indicator.fail[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:163px;height:140px;background-image:url(invalid-page.5692d42d07de0716d7a9.svg);background-size:contain;background-repeat:no-repeat}.indicator.fail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;line-height:28px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e;margin-top:32px}.indicator.loader[_ngcontent-%COMP%]{display:none;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.indicator.loader[_ngcontent-%COMP%]   .spin-loader[_ngcontent-%COMP%]{width:56px;height:56px;border-width:3px}sd-watermark[_ngcontent-%COMP%]{position:absolute;top:0;left:0;overflow:hidden}"],changeDetection:0}),e})();var _i=i("RAh+");const Ti=["svg"],Ei=["popup"];function Ii(e,t){if(1&e&&(M.Sb(0,"span",18),M.Fc(1),M.Rb()),2&e){const e=M.dc();M.zb(1),M.Gc(e.title)}}function Ri(e,t){if(1&e){const e=M.Tb();M.Sb(0,"pu-input",19),M.Zb("blur",(function(){return M.uc(e),M.dc().finishEditTitle()}))("keydown.enter",(function(){return M.uc(e),M.dc().finishEditTitle()})),M.ec(1,"translate"),M.Rb()}if(2&e){const e=M.dc();M.kc("placeholder",M.fc(1,3,"ENTER_THE_AUTHOR_NAME")),M.jc("autofocus",!0)("formControl",e.titleFormControl)}}function ki(e,t){if(1&e){const e=M.Tb();M.Sb(0,"div",20),M.Sb(1,"div",21),M.Zb("click",(function(){return M.uc(e),M.dc().onColorPaletteClick()})),M.Rb(),M.Rb()}if(2&e){const e=M.dc();M.Eb("disabled",e.isLockedAnnot())("selected",e.isColorTabClicked),M.zb(1),M.Bc("background",e.textAnnotColor)}}function Ni(e,t){if(1&e){const e=M.Tb();M.Sb(0,"pu-color-palette",22),M.Zb("ngModelChange",(function(t){return M.uc(e),M.dc().textAnnotColor=t})),M.ec(1,"translate"),M.ec(2,"translate"),M.Rb()}if(2&e){const e=M.dc();M.jc("nullable",!1)("customColorLabel",M.fc(1,6,"CUSTOM_COLOR"))("defaultColorLabel",M.fc(2,8,"DEFAULT_COLOR"))("defaultColorPanelExpandedd",!0)("colorRectHeight",18)("ngModel",e.textAnnotColor)}}function Ai(e,t){1&e&&M.Nb(0,"sd-popup-resizer",23),2&e&&M.jc("anchor",t.$implicit)}const Di=e=>({process:(...t)=>(t[e]||y.v.EMPTY_FUNCTION)()});let Li=(()=>{class e{constructor(e,t,i,n,s,r,a,c,l,h){this.annotService=e,this.contentService=t,this.documentService=i,this.renderer=n,this.changeDetectorRef=s,this.scrollController=r,this.elementRef=a,this.subscriptionService=c,this.store$=l,this.translatePipe=h,this.popupSize={width:0,height:0},this.preferences={},this.titleFormControl=new o.h,this.linkStyles={},this._containerStyle={},this.drag_startCursorPos={x:0,y:0},this.drag_startPopupPos={top:0,left:0,right:0,bottom:0},this.boundingTranslate={x:0,y:0},this.memoColor=null,this.popupViewCoords={x:0,y:0},this.onMouseMoveListener=null,this.onMouseUpListener=null,this.onTouchMoveListener=null,this.onTouchEndListener=null,this.txtTotalDelta={x:0,y:0},this.isColorTabClicked=!1}get environment(){return Qe.c}get zoom(){return y.u.normalizeScale(this.scale)}get anchorList(){return e.AnchorList}get data(){return this.popupInfo.src}get isTextAnnot(){return y.b.isText(this.data)}get textAnnotColor(){return y.b.isText(this.data)?this.data.attributes.color:(Logger.warn("textAnnotColor cannot be used except this.data is text annotation"),null)}set textAnnotColor(e){y.b.isText(this.data)?(this.data.attributes.color=e,this.annotService.putModel(this.data,"modify"),this.contentService.fireAnnotEvent({from:"PopupComponent",sdEventType:l.r.UPDATE,pageIdx:this.data.attributes.pageIdx,annot:this.data})):Logger.warn("Some warning message")}get popup(){return this.popupInfo.popup}get pdfPage(){return this.popupInfo.pdfPage}get direction(){return y.u.rotate2Direction(this.pdfPage.r+this.degree)}get points(){return this.svg.firstElementChild.points}get svg(){return this.svgElementRef.nativeElement}get textCoords(){return this.data.attributes.rect}get popupCoords(){return this.popup.attributes.rect}get popupLinkBoxStyles(){return e.linkBoxStyle}get contents(){var e,t;return(null===(t=null===(e=this.data)||void 0===e?void 0:e.attributes)||void 0===t?void 0:t.contents)||y.v.EMPTY_STRING}set contents(e){this.data.attributes.contents=e,this.contentService.publishAnnotContentsChange({annotOid:this.data.oid})}get title(){var e,t;const i=null===(t=null===(e=this.data)||void 0===e?void 0:e.attributes)||void 0===t?void 0:t.T;return y.g.isDefined(i)&&""!==i?i:this.translatePipe.transform("ENTER_THE_AUTHOR_NAME")}get popupStyles(){Object.assign(this.popupViewCoords,this.convertPDFCoord(this.popup.attributes.rect.left,this.popup.attributes.rect.top)),this.drawPopupLink(this.txtTotalDelta);const e=y.c.elementStyleOf(this.popup);e.bottom=null,e.right=e.bottom,e.top=e.right,e.left=e.top,e.transform="translate("+(this.popupViewCoords.x+this.boundingTranslate.x)+"px,"+(this.popupViewCoords.y+this.boundingTranslate.y)+"px)";let t=null;const i=(e=>{if(!e)return e;const t=e.substring(1);return 3!==t.length?t:t[0]+t[0]+t[1]+t[1]+t[2]+t[2]})(this.data.attributes.color);return i&&(this.memoColor={r:parseInt("0x"+i.substring(0,2),16),g:parseInt("0x"+i.substring(2,4),16),b:parseInt("0x"+i.substring(4,6),16)},t={r:230+Math.floor(this.memoColor.r/10),g:230+Math.floor(this.memoColor.g/10),b:230+Math.floor(this.memoColor.b/10)}),e.background=t?`rgb(${t.r}, ${t.g}, ${t.b})`:"#ffeb98",this._popupStyles=Object.assign(Object.assign({},this._popupStyles||{color:null,background:null}),y.v.bindLayoutOrder(e,y.p.Popup+this.popupOrder.indexOf(this.data.Popup)))}get popupLinkStyles(){return this.memoColor?(this.linkStyles.stroke=`rgb(${this.memoColor.r}, ${this.memoColor.g}, ${this.memoColor.b})`,this.linkStyles.fill=`rgba(${this.memoColor.r}, ${this.memoColor.g}, ${this.memoColor.b}, 0.1)`):(this.linkStyles.stroke="transparent",this.linkStyles.fill="transparent"),this.linkStyles}get popupContainerStyles(){const e=this.direction,t=g.d.isVisible(this.pdfPage.i,this.currentPageNo-1,this.viewMode);return this._containerStyle.visibility=t?null:"hidden",this._containerPos&&(this._containerStyle.left=this._containerPos.left[e]*this.zoom+"px",this._containerStyle.top=this._containerPos.top[e]*this.zoom+"px"),this._containerStyle}ngOnChanges(e){e.popupInfo&&(this._containerPos={left:[-this.pdfPage.bbox.x,-this.pdfPage.bbox.y,this.pdfPage.bbox.x,this.pdfPage.bbox.y],top:[this.pdfPage.bbox.y,-this.pdfPage.bbox.x,-this.pdfPage.bbox.y,this.pdfPage.bbox.x]})}ngOnInit(){this.subscriptionService.push(this.store$.pipe(Object(u.e)("popupFontSize")).subscribe({next:e=>{this.preferences.popupFontSize=e,setTimeout(()=>this.changeDetectorRef.markForCheck())}}),this.store$.pipe(Object(u.e)("language")).subscribe({next:e=>{this.preferences.language=e,setTimeout(()=>this.changeDetectorRef.markForCheck())}}),this.annotService.text$.pipe(S.a(e=>this.data.oid===e.model.oid)).subscribe({next:e=>{this.txtTotalDelta=e.totalDelta,this.changeDetectorRef.markForCheck()}}),this.contentService.annotEvent$.pipe(S.a(e=>e&&(e.sdEventType===l.r.SELECTED&&"popups"===e.to&&e.annot.oid!==this.popup.oid||e.sdEventType===l.r.UPDATE&&e.annot.Popup===this.popup.oid))).subscribe({next:()=>this.changeDetectorRef.markForCheck()}),Q.a(this.contentService.pageNo$,this.store$.pipe(Object(g.f)("viewMode")).pipe(Ve.a(e=>this.viewMode=e)),this.store$.pipe(Object(g.f)("scale")).pipe(Ve.a(e=>this.scale=e),Pt.a(0)),this.store$.pipe(Object(g.f)("degree")).pipe(Ve.a(e=>this.degree=e))).subscribe({next:()=>this.changeDetectorRef.markForCheck()}),this.contentService.postAnnotEdit$.pipe(S.a(e=>e.annotOid===this.data.oid)).subscribe({next:()=>this.changeDetectorRef.markForCheck()}),this.store$.pipe(Object(g.f)("currentPageNo")).subscribe({next:e=>this.currentPageNo=e})),this.subscribeMainViewResized();const e=this.svg;e&&e.firstElementChild&&this.fixPoints(e,this.points,3)}ngOnDestroy(){this.destroyMouseListeners()}ngAfterViewInit(){const{width:e,height:t}=y.c.elementStyleOf(this.popup);this.popupSize.width=parseFloat(e),this.popupSize.height=parseFloat(t);const i=this.popupElementRef.nativeElement;this.locate(i),(this.data.attributes.contents||y.v.EMPTY_STRING).length||setTimeout(()=>(i.getElementsByTagName("textarea")[0]||y.m).focus())}isReadonly(){return!this.documentService.checkAuthority(l.j.EDIT_ANNOTATION)||_i.a.get(this.data.attributes.F,7)}isLockedAnnot(){return _i.a.get(this.data.attributes.F,7)}onMouseDown(e){if(e.target!==e.currentTarget)return;e.stopPropagation(),e.preventDefault();const t=this.popupOrder.indexOf(this.data.Popup);t>-1&&(this.popupOrder.splice(t,1),this.popupOrder.push(this.data.Popup)),this.contentService.fireAnnotEvent({sdEventType:l.r.SELECTED,annot:this.popup,to:"popups"}),this.applyTranslateToReal(),this.drag_startCursorPos.x=e.clientX,this.drag_startCursorPos.y=e.clientY,Object.assign(this.drag_startPopupPos,this.popupCoords),this.destroyMouseListeners(),this.onMouseMoveListener=this.renderer.listen("document","mousemove",e=>this.onMouseMove(e)),this.onMouseUpListener=this.renderer.listen("document","mouseup",e=>this.onMouseUp(e)),this.onTouchMoveListener=this.renderer.listen("document","touchmove",e=>this.onMouseMove(this.touchToMouse(e))),this.onTouchEndListener=this.renderer.listen("document","touchend",e=>this.onMouseUp(this.touchToMouse(e)))}touchToMouse(e){return y.g.touchToMouseEvt(e,this.degree,this.scale,this.pdfPage)}startEditTitle(){var e,t,i;this.isLockedAnnot()||(this.titleFormControl.setValue(null!==(i=null===(t=null===(e=this.data)||void 0===e?void 0:e.attributes)||void 0===t?void 0:t.T)&&void 0!==i?i:""),this.isEditingTitle=!0)}finishEditTitle(){this.data.attributes.T=this.titleFormControl.value,this.onPopupValueChanged(),this.isEditingTitle=!1}applyTranslateToReal(){const e=this.direction;if(this.boundingTranslate.x){let t=this.boundingTranslate.x/this.zoom;2!==e&&3!==e||(t*=-1),1===e||3===e?(this.popupCoords.top+=t,this.popupCoords.bottom+=t):(this.popupCoords.left+=t,this.popupCoords.right+=t),this.boundingTranslate.x=0}if(this.boundingTranslate.y){let t=this.boundingTranslate.y/this.zoom;0!==e&&3!==e||(t*=-1),1===e||3===e?(this.popupCoords.left+=t,this.popupCoords.right+=t):(this.popupCoords.top+=t,this.popupCoords.bottom+=t),this.boundingTranslate.y=0}}togglePopup(){this.annotService.togglePopup(this.data)}onMouseClickDelete(){this.contents="";const e={from:"PopupComponent",sdEventType:l.r.DELETE,annot:y.b.isText(this.data)?this.data:this.popup};this.contentService.fireAnnotEvent(e),this.contentService.fireAnnotListEvent(e)}onColorPaletteClick(){this.isColorTabClicked=!this.isColorTabClicked}onPopupValueChanged(){this.annotService.putModel(this.data,"modify"),this.contentService.fireAnnotListEvent({from:"PopupComponent",sdEventType:l.r.UPDATE,annot:this.data})}onMouseMove(e){e.stopPropagation(),e.preventDefault();const t=this.direction,i={x:e.clientX-this.drag_startCursorPos.x,y:this.drag_startCursorPos.y-e.clientY};return 1!==t&&3!==t||([i.x,i.y]=[i.y,i.x]),Di(t).process(null,()=>{i.x*=-1},()=>{i.x*=-1,i.y*=-1},()=>{i.y*=-1}),i.x/=this.zoom,i.y/=this.zoom,this.popupCoords.top=this.drag_startPopupPos.top+i.y,this.popupCoords.left=this.drag_startPopupPos.left+i.x,this.popupCoords.right=this.drag_startPopupPos.right+i.x,this.popupCoords.bottom=this.drag_startPopupPos.bottom+i.y,this.changeDetectorRef.markForCheck(),!1}onMouseUp(e){const t=this.elementRef.nativeElement.parentElement.getBoundingClientRect(),i=this.popupElementRef.nativeElement.getBoundingClientRect(),n=Math.max(t.left-i.left,0)/this.zoom,o=Math.min(i.top-t.top,0)/this.zoom;this.popupCoords.top+=o,this.popupCoords.left+=n,this.popupCoords.bottom+=o,this.popupCoords.right+=n,e.stopPropagation(),e.preventDefault(),this.destroyMouseListeners(),this.annotService.putModel(this.popup,"modify"),this.changeDetectorRef.markForCheck()}destroyMouseListeners(){(this.onMouseMoveListener||y.v.EMPTY_FUNCTION)(),this.onMouseMoveListener=null,(this.onMouseUpListener||y.v.EMPTY_FUNCTION)(),this.onMouseUpListener=null,(this.onTouchMoveListener||y.v.EMPTY_FUNCTION)(),this.onTouchMoveListener=null,(this.onTouchEndListener||y.v.EMPTY_FUNCTION)(),this.onTouchEndListener=null}convertPDFCoord(e,t){const i=this.scrollController.stateHolder.getPageSize(this.pdfPage.i),n=this.scrollController.stateHolder.getPageFrameOffset(this.viewMode,this.pdfPage.i),o={x:0,y:0},s=Z.e.getOffset(this.scrollController.stateHolder,this.contentViewRoot,this.scale,this.viewMode,this.currentPageNo),r=this.direction;let a=e,c=t;return 1!==r&&3!==r||([a,c]=[c,a]),Di(r).process(()=>{o.x=n.offsetX,o.y=n.offsetY+i.height},()=>{o.x=n.offsetX,o.y=n.offsetY,c*=-1},()=>{o.x=n.offsetX+i.width,o.y=n.offsetY,a*=-1,c*=-1},()=>{o.x=n.offsetX+i.width,o.y=n.offsetY+i.height,a*=-1}),{x:(o.x+Z.a.MARGIN+a)*this.zoom+s.offsetX,y:(o.y+Z.a.MARGIN-c)*this.zoom+s.offsetY}}locate(e){if(!e)return;const t=this.contentViewRoot.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<t.top?this.boundingTranslate.y=t.top-i.top:t.bottom<i.bottom&&(this.boundingTranslate.y=t.bottom-i.bottom),i.left<t.left?this.boundingTranslate.x=t.left-i.left:t.right<i.right&&(this.boundingTranslate.x=t.right-i.right)}fixPoints(e,t,i){const n=i-t.numberOfItems;for(let o=0;o<n;o++)t.appendItem(e.createSVGPoint());for(let o=n-1;o>=i;o++)t.removeItem(o);return t}centerPointOfPopup(){return{x:this.popupViewCoords.x+(this.popupCoords.right-this.popupCoords.left)/2+this.boundingTranslate.x,y:this.popupViewCoords.y+(this.popupCoords.top-this.popupCoords.bottom)/2+this.boundingTranslate.y}}drawPopupLink(e={x:0,y:0}){let t=y.c.centerPointOf(this.textCoords);t=this.convertPDFCoord(t.x,t.y);const i=Object.assign({},e),n=this.direction;1!==n&&3!==n||([i.x,i.y]=[i.y,i.x]),Di(n).process(null,()=>{i.x*=-1},()=>{i.x*=-1,i.y*=-1},()=>{i.y*=-1}),t.x+=i.x*this.zoom,t.y+=i.y*this.zoom;const o=this.centerPointOfPopup(),s=[t,{x:o.x-10,y:o.y-10},{x:o.x+10,y:o.y+10}],r=this.points;s.length===r.numberOfItems&&s.forEach((e,t)=>Object.assign(r.getItem(t),e))}subscribeMainViewResized(){this.subscriptionService.push(Q.a(y.F.windowResize$,this.store$.pipe(Object(g.f)("sideViewVisible")),this.store$.pipe(Object(g.f)("sideViewSize")),this.store$.pipe(Object(g.f)("rightSideViewVisible")),this.store$.pipe(Object(g.f)("rightSideViewSize"))).pipe(Be.a(0)).subscribe({next:()=>this.changeDetectorRef.markForCheck()}))}}return e.linkBoxStyle=y.v.bindLayoutOrder({width:"initial",height:"initial","pointer-events":"none"},y.p.PopupLinker),e.AnchorList=["nw","ne","sw","se","n","s","w","e"],e.\u0275fac=function(t){return new(t||e)(M.Mb(l.d),M.Mb(l.f),M.Mb(l.k),M.Mb(M.E),M.Mb(M.h),M.Mb(X.a),M.Mb(M.l),M.Mb(s.G),M.Mb(O.h),M.Mb(P.d))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-popup"]],viewQuery:function(e,t){var i;1&e&&(M.zc(Ti,!0),M.zc(Ei,!0)),2&e&&(M.sc(i=M.ac())&&(t.svgElementRef=i.first),M.sc(i=M.ac())&&(t.popupElementRef=i.first))},inputs:{popupInfo:"popupInfo",popupOrder:"popupOrder",contentViewRoot:"contentViewRoot"},features:[M.yb([s.G]),M.xb],decls:23,vars:26,consts:[[1,"popup-container",3,"ngStyle"],[1,"popup","no-scroller",3,"ngStyle","mousedown","touchstart","pointerdown","pointermove","pointerup"],["popup",""],[1,"nav"],[1,"label",3,"dblclick"],["class","title",4,"ngIf","ngIfElse"],["inputTitleRef",""],[1,"btns"],["class","color-picker-container",3,"disabled","selected",4,"ngIf"],[3,"nullable","customColorLabel","defaultColorLabel","defaultColorPanelExpandedd","colorRectHeight","ngModel","ngModelChange",4,"ngIf"],["color","dark",1,"ep-text-button",3,"title","click"],[1,"papycon","papycon-exit-fullscreen"],["color","dark",1,"ep-text-button",3,"title","disabled","click"],[1,"papycon","papycon-trash-can"],[3,"anchor",4,"ngFor","ngForOf"],[1,"no-scroller",3,"placeholder","ngModel","maxlength","readonly","change","ngModelChange","keyup.esc","touchstart","pointerdown","pointermove","pointerup"],[3,"ngStyle"],["svg",""],[1,"title"],[3,"placeholder","autofocus","formControl","blur","keydown.enter"],[1,"color-picker-container"],[1,"color-rect",3,"click"],[3,"nullable","customColorLabel","defaultColorLabel","defaultColorPanelExpandedd","colorRectHeight","ngModel","ngModelChange"],[3,"anchor"]],template:function(e,t){if(1&e&&(M.Sb(0,"div",0),M.Sb(1,"div",1,2),M.Zb("mousedown",(function(e){return t.onMouseDown(e)}))("touchstart",(function(e){return t.onMouseDown(t.touchToMouse(e))}))("pointerdown",(function(e){return e.stopPropagation()}))("pointermove",(function(e){return e.stopPropagation()}))("pointerup",(function(e){return e.stopPropagation()})),M.Sb(3,"div",3),M.Sb(4,"div",4),M.Zb("dblclick",(function(){return t.startEditTitle()})),M.Dc(5,Ii,2,1,"span",5),M.Dc(6,Ri,2,5,"ng-template",null,6,M.Ec),M.Rb(),M.Sb(8,"div",7),M.Dc(9,ki,2,6,"div",8),M.Dc(10,Ni,3,10,"pu-color-palette",9),M.Sb(11,"button",10),M.Zb("click",(function(){return t.togglePopup()})),M.ec(12,"translate"),M.Nb(13,"i",11),M.Rb(),M.Sb(14,"button",12),M.Zb("click",(function(){return t.onMouseClickDelete()})),M.ec(15,"translate"),M.Nb(16,"i",13),M.Rb(),M.Rb(),M.Rb(),M.Dc(17,Ai,1,1,"sd-popup-resizer",14),M.Sb(18,"textarea",15),M.Zb("change",(function(){return t.onPopupValueChanged()}))("ngModelChange",(function(e){return t.contents=e}))("keyup.esc",(function(){return t.togglePopup()}))("touchstart",(function(e){return e.stopPropagation()}))("pointerdown",(function(e){return e.stopPropagation()}))("pointermove",(function(e){return e.stopPropagation()}))("pointerup",(function(e){return e.stopPropagation()})),M.ec(19,"translate"),M.Rb(),M.Rb(),M.cc(),M.Sb(20,"svg",16,17),M.Nb(22,"polygon",16),M.Rb(),M.Rb()),2&e){const e=M.tc(7);M.jc("ngStyle",t.popupContainerStyles),M.zb(1),M.jc("ngStyle",t.popupStyles),M.zb(4),M.jc("ngIf",!t.isEditingTitle)("ngIfElse",e),M.zb(4),M.jc("ngIf",t.isTextAnnot),M.zb(1),M.jc("ngIf",t.isColorTabClicked),M.zb(1),M.jc("title",M.fc(12,20,"CLOSE")),M.zb(3),M.jc("title",M.fc(15,22,"DELETE"))("disabled",t.isLockedAnnot()),M.zb(3),M.jc("ngForOf",t.anchorList),M.zb(1),M.Bc("font-size",t.preferences.popupFontSize+"px")("background",t.popupStyles.background),M.jc("placeholder",M.fc(19,24,"COMMENTS"))("ngModel",t.contents)("maxlength",null==t.environment||null==t.environment.annotation?null:t.environment.annotation.contentsLengthLimit)("readonly",t.isReadonly()),M.zb(2),M.jc("ngStyle",t.popupLinkBoxStyles),M.zb(2),M.jc("ngStyle",t.popupLinkStyles)}},styles:["[_nghost-%COMP%]{display:block;height:100%}.popup[_ngcontent-%COMP%]{position:absolute;top:0;left:0;-webkit-box-shadow:0 4px 9px rgba(0,0,0,.24);box-shadow:0 4px 9px rgba(0,0,0,.24)}.nav[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:40px;border-bottom:1px solid rgba(15,31,69,.1);-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 16px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;white-space:nowrap}.nav[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;cursor:text;pointer-events:auto}.nav[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Medium,sans-serif;color:#6c6c6c}.nav[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.nav[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .color-picker-container[_ngcontent-%COMP%]{border:1px solid #dadada;border-radius:2px;-webkit-box-sizing:border-box;box-sizing:border-box;padding:3px;width:24px;height:24px;pointer-events:auto;cursor:pointer}.nav[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .color-picker-container.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nav[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .color-picker-container.selected[_ngcontent-%COMP%]{background-color:rgba(247,159,26,.08);border:1px solid #f79f1a;-webkit-box-shadow:0 0 6px 0 #f79f1a;box-shadow:0 0 6px 0 #f79f1a}.nav[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .color-picker-container[_ngcontent-%COMP%]   .color-rect[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:2px;background-size:cover}.nav[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   pu-color-palette[_ngcontent-%COMP%]{background:#fff;border:1.2px solid #dadada;border-radius:2px;-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;margin-top:33.2px;pointer-events:auto;padding:10px;width:216px;overflow:hidden;z-index:10000}.nav[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:24px;height:24px;margin-left:8px;opacity:.8;pointer-events:auto}.nav[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.popup-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0}textarea[_ngcontent-%COMP%]{font-size:14px;line-height:24px;font-family:NotoSans-Regular,sans-serif;color:#1e1e1e;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;max-width:100%;height:calc(100% - 40px);max-height:calc(100% - 20px);padding:16px;background-color:inherit;border:none;overflow:auto;resize:none}textarea[_ngcontent-%COMP%]:focus{outline:none}svg[_ngcontent-%COMP%]{position:absolute;left:0;cursor:auto;overflow:visible}polygon[_ngcontent-%COMP%]{stroke-width:1}"],changeDetection:0}),e})(),Fi=(()=>{class e{constructor(e,t,i,n){this.annotService=e,this.renderer=t,this.changeDetectorRef=i,this.popup=n,this.MIN_WIDTH=95,this.MIN_HEIGHT=50,this._resizerStyles={},this.onMouseMoveListener=null,this.onMouseUpListener=null,this.onTouchMoveListener=null,this.onTouchEndListener=null,this.drag_startCursorPos={x:0,y:0},this.drag_startPopupPos={top:0,left:0,right:0,bottom:0},this.popup_prevSize={width:0,height:0}}ngAfterViewInit(){Object.assign(this._resizerStyles,this.positionCalc(this.anchor,4)),Object.assign(this._resizerStyles,this.sizeCalc(this.anchor,10)),this._resizerStyles.cursor=this.anchor+"-resize",this._resizerStyles.position="absolute",this.detectChange()}ngOnDestroy(){this.destroyMouseListeners()}onMouseDown(e){e.target===e.currentTarget&&(e.stopPropagation(),e.preventDefault(),this.popup.applyTranslateToReal(),this.popup_prevSize.width=this.popup.popupSize.width,this.popup_prevSize.height=this.popup.popupSize.height,this.drag_startCursorPos.x=e.clientX,this.drag_startCursorPos.y=e.clientY,Object.assign(this.drag_startPopupPos,this.popup.popupCoords),this.onMouseMoveListener=this.renderer.listen("document","mousemove",e=>this.onMouseMove(e)),this.onMouseUpListener=this.renderer.listen("document","mouseup",e=>this.onMouseUp(e)),this.onTouchMoveListener=this.renderer.listen("document","touchmove",e=>this.onMouseMove(this.touchToMouse(e))),this.onTouchEndListener=this.renderer.listen("document","touchend",e=>this.onMouseUp(this.touchToMouse(e))))}onMouseMove(e){const t=this.popup.direction,i={left:0,top:0,right:0,bottom:0};return e.stopPropagation(),e.preventDefault(),this.anchor.includes("n")&&(i.top=this.drag_startCursorPos.y-e.clientY,this.popup_prevSize.height+i.top<this.MIN_HEIGHT&&(i.top=this.MIN_HEIGHT-Math.floor(this.popup_prevSize.height)),this.popup.popupSize.height=this.popup_prevSize.height+i.top,1!==t&&2!==t||(i.top*=-1),1===t||3===t?this.popup.popupCoords.left=this.drag_startPopupPos.left+i.top/this.popup.zoom:this.popup.popupCoords.top=this.drag_startPopupPos.top+i.top/this.popup.zoom),this.anchor.includes("w")&&(i.left=e.clientX-this.drag_startCursorPos.x,this.popup_prevSize.width-i.left<this.MIN_WIDTH&&(i.left=Math.floor(this.popup_prevSize.width)-this.MIN_WIDTH),this.popup.popupSize.width=this.popup_prevSize.width-i.left,2!==t&&3!==t||(i.left*=-1),1===t||3===t?this.popup.popupCoords.top=this.drag_startPopupPos.top+i.left/this.popup.zoom:this.popup.popupCoords.left=this.drag_startPopupPos.left+i.left/this.popup.zoom),this.anchor.includes("e")&&(i.right=e.clientX-this.drag_startCursorPos.x,this.popup_prevSize.width+i.right<this.MIN_WIDTH&&(i.right=this.MIN_WIDTH-Math.floor(this.popup_prevSize.width)),this.popup.popupSize.width=this.popup_prevSize.width+i.right,this.popup.popupCoords.right=this.drag_startPopupPos.right+i.right/this.popup.zoom),this.anchor.includes("s")&&(i.bottom=this.drag_startCursorPos.y-e.clientY,this.popup_prevSize.height-i.bottom<this.MIN_HEIGHT&&(i.bottom=Math.floor(this.popup_prevSize.height)-this.MIN_HEIGHT),this.popup.popupSize.height=this.popup_prevSize.height-i.bottom,this.popup.popupCoords.bottom=this.drag_startPopupPos.bottom+i.bottom/this.popup.zoom),this.popup.popupCoords.right=this.popup.popupCoords.left+this.popup.popupSize.width,this.popup.popupCoords.bottom=this.popup.popupCoords.top-this.popup.popupSize.height,this.detectChange(),!1}onMouseUp(e){e.stopPropagation(),e.preventDefault(),this.destroyMouseListeners(),this.annotService.putModel(this.popup.popup,"modify"),this.detectChange()}destroyMouseListeners(){(this.onMouseMoveListener||y.v.EMPTY_FUNCTION)(),this.onMouseMoveListener=null,(this.onMouseUpListener||y.v.EMPTY_FUNCTION)(),this.onMouseUpListener=null,(this.onTouchMoveListener||y.v.EMPTY_FUNCTION)(),this.onTouchMoveListener=null,(this.onTouchEndListener||y.v.EMPTY_FUNCTION)(),this.onTouchEndListener=null}get resizerStyles(){return this._resizerStyles}positionCalc(e,t){const i={};switch(e.includes("n")&&(i.top=-t+"px"),e.includes("w")&&(i.left=-t+"px"),e.includes("e")&&(i.right=-t+"px"),e.includes("s")&&(i.bottom=-t+"px"),e){case"n":case"s":i.left=t+"px";break;case"w":case"e":i.top=t+"px"}return i}sizeCalc(e,t){const i={};if(2===e.length)return i.height=t+"px",i.width=i.height,i;switch(e){case"n":case"s":i.width=`calc(100% - ${t}px)`,i.height=t+"px";break;case"w":case"e":i.height=`calc(100% - ${t}px)`,i.width=t+"px"}return i}touchToMouse(e){return this.popup.touchToMouse(e)}detectChange(){this.changeDetectorRef.destroyed||(this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges())}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(l.d),M.Mb(M.E),M.Mb(M.h),M.Mb(Li,1))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-popup-resizer"]],inputs:{anchor:"anchor"},features:[M.yb([s.G])],decls:1,vars:1,consts:[[1,"no-scroller",3,"ngStyle","mousedown","pointerdown","pointermove","pointerup","touchstart"]],template:function(e,t){1&e&&(M.Sb(0,"div",0),M.Zb("mousedown",(function(e){return t.onMouseDown(e)}))("pointerdown",(function(e){return e.stopPropagation()}))("pointermove",(function(e){return e.stopPropagation()}))("pointerup",(function(e){return e.stopPropagation()}))("touchstart",(function(e){return t.onMouseDown(t.touchToMouse(e))})),M.Rb()),2&e&&M.jc("ngStyle",t.resizerStyles)},directives:[n.w],styles:[""],changeDetection:0}),e})();function ji(e,t){if(1&e&&M.Nb(0,"sd-popup",1),2&e){const e=t.$implicit,i=M.dc();M.jc("contentViewRoot",i.contentViewRoot)("popupInfo",e)("popupOrder",i.popupOrder)}}let zi=(()=>{class e{constructor(e,t,i,n){this.contentService=e,this.changeDetectorRef=t,this.subscriptionService=i,this.store$=n,this.popups=[],this.popupOrder=[]}ngOnInit(){this.subscriptionService.push(this.store$.pipe(Object(a.c)()).subscribe({next:e=>this.annotTool=e}),this.contentService.popupHolder$.subscribe({next:e=>this.toggle(e)}),this.contentService.reload$.pipe(S.a(e=>l.q.type(e,l.g.Annot))).subscribe({next:()=>{this.clearPopups(),this.changeDetectorRef.markForCheck()}}))}ngOnDestroy(){this.clearPopups()}clearPopups(){this.popups.splice(0),this.popupOrder.splice(0)}toggle({src:e,popup:t,pdfPage:i,open:n}){let o=this.popups.findIndex(e=>t.oid===e.popup.oid);if(o>=0&&(void 0===n||!n))return this.popups.splice(o,1),o=this.popupOrder.indexOf(t.oid),o>-1&&this.popupOrder.splice(o,1),void this.changeDetectorRef.markForCheck();this.annotTool!==c.a.ERASER&&(void 0===n||n)&&(this.popupOrder.push(t.oid),this.popups.push({src:e,popup:t,pdfPage:i}),this.changeDetectorRef.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(l.f),M.Mb(M.h),M.Mb(s.G),M.Mb(O.h))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-popups"]],inputs:{contentViewRoot:"contentViewRoot"},features:[M.yb([s.G])],decls:1,vars:1,consts:[[3,"contentViewRoot","popupInfo","popupOrder",4,"ngFor","ngForOf"],[3,"contentViewRoot","popupInfo","popupOrder"]],template:function(e,t){1&e&&M.Dc(0,ji,1,3,"sd-popup",0),2&e&&M.jc("ngForOf",t.popups)},styles:[""],changeDetection:0}),e})();var Vi=i("nofJ");const Bi=["normal"],$i=["blackmark"];let Wi=(()=>{class e{constructor(e,t){this.contentService=e,this.subscriptionService=t,this.normalColor=Vi.a,this.blackmarkColor=Vi.b,this.isViewInit=!1}ngOnInit(){this.normalPainter=new Ui(this.normalElementRef,this.pdfPage.bbox),this.blackmarkPainter=new Ui(this.blackmarkElementRef,this.pdfPage.bbox),this.subscriptionService.push(this.contentService.reload$.pipe(S.a(e=>l.q.typeAndPage(e,this.pdfPage.i,l.g.TextSearch))).subscribe({next:()=>this.clearRect()}))}ngOnChanges(e){this.mark(this.isViewInit)}ngAfterViewInit(){this.mark(this.isViewInit=!0)}ngOnDestroy(){this.normalElementRef=null,this.blackmarkElementRef=null,this.normalPainter=null,this.blackmarkPainter=null,y.v.destroy(this)}clearRect(){this.normalPainter.clear(),this.blackmarkPainter.clear()}mark(e){e&&(this.clearRect(),this.result&&this.normalPainter.render(this.result.words.map(e=>e.rects)),this.redactionMarks&&this.blackmarkPainter.render(this.redactionMarks.words.map(e=>e.rects)))}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(l.f),M.Mb(s.G))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-search-highlight"]],viewQuery:function(e,t){var i;1&e&&(M.zc(Bi,!0),M.zc($i,!0)),2&e&&(M.sc(i=M.ac())&&(t.normalElementRef=i.first),M.sc(i=M.ac())&&(t.blackmarkElementRef=i.first))},inputs:{pdfPage:"pdfPage",result:"result",redactionMarks:"redactionMarks"},features:[M.yb([s.G]),M.xb],decls:5,vars:4,consts:[["normal",""],["blackmark",""]],template:function(e,t){1&e&&(M.cc(),M.Sb(0,"svg"),M.Nb(1,"path",null,0),M.Nb(3,"path",null,1),M.Rb()),2&e&&(M.Ab("width",t.pdfPage.bbox.w+t.pdfPage.bbox.x)("height",t.pdfPage.bbox.h+t.pdfPage.bbox.y),M.zb(1),M.Ab("fill",t.normalColor),M.zb(2),M.Ab("fill",t.blackmarkColor))},styles:["svg[_ngcontent-%COMP%]{position:absolute;right:0;top:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"],changeDetection:0}),e})();class Ui{constructor(e,t){this.elementRef=e,this.bbox=t,this.d=[]}clear(){this.d.splice(0),this.bindPath()}render(e){for(const t of e){let e,i=t[0];t.forEach((n,o)=>{e=n,i.top!==e.top&&(this.d[this.d.length]=this.mergeRects(i,t[o-1]),i=e)}),this.d[this.d.length]=this.mergeRects(i,e)}this.bindPath()}bindPath(){this.elementRef.nativeElement.setAttribute("d",this.generatePath())}generatePath(){return this.d.reduce((e,t)=>`${e}M ${t.x} ${t.y} L ${t.x+t.w} ${t.y} L ${t.x+t.w} ${t.y+t.h} L ${t.x} ${t.y+t.h} Z `,y.v.EMPTY_STRING)}mergeRects(e,t){return{x:e.left,y:this.bbox.h+this.bbox.y-e.top,w:t.right-e.left,h:e.top-e.bottom}}}var Gi=i("SsqP"),Hi=i("cUpR"),qi=i("xEdf");let Zi=(()=>{class e{constructor(e,t,i,n){this.sanitizer=e,this.dataService=t,this.contentService=i,this.changeDetectorRef=n}get innerHTML(){return this.sanitizer.sanitize(M.I.HTML,this._innerHTML)}get pageHeight(){return this.pdfPage.bbox.h+"px"}ngOnInit(){this.contentService.publishSomePageLoaded(!0),this.dataService.getPdfPageScript(this.documentId,this.pdfPage.i).subscribe({next:e=>{this._innerHTML=e.scriptText,this.changeDetectorRef.markForCheck()}})}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(Hi.b),M.Mb(qi.b),M.Mb(l.f),M.Mb(M.h))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-tts-script"]],hostVars:3,hostBindings:function(e,t){2&e&&(M.Vb("innerHTML",t.innerHTML,M.vc),M.Bc("height",t.pageHeight))},inputs:{documentId:"documentId",pdfPage:"pdfPage"},features:[M.yb([s.G])],decls:0,vars:0,template:function(e,t){},styles:["[_nghost-%COMP%]{padding-top:30px;margin-left:50px;display:block;overflow:auto;font-size:8px}"],changeDetection:0}),e})();var Xi=i("dHvJ"),Yi=i("ttxD"),Ki=i("jgPd"),Qi=i("YhbR"),Ji=i("34bx"),en=i("DKVU"),tn=i("1G5W"),nn=i("oMJ0");function on(e,t){if(1&e){const e=M.Tb();M.Sb(0,"div",1),M.Zb("mousedown",(function(){M.uc(e);const i=t.$implicit;return M.dc().onMousedown(i)})),M.Rb()}if(2&e){const e=t.$implicit,i=M.dc();M.jc("ngStyle",i.getLineStyles(e))}}let sn=(()=>{class e{constructor(e,t,i,n,o){this.elementRef=e,this.changeDetectorRef=t,this.subscriptionService=i,this.store$=n,this.shortcutService=o,this.guideLines=[],this.selectedLine=null,this.trackByGuideLine=(e,t)=>t.id}get guideLineArray(){return Object.keys(this.guideLines).map(e=>this.guideLines[e]).filter(e=>null!=e)}ngOnInit(){this.subscriptionService.push(this.store$.pipe(Object(nn.d)(this.pdfPage.i)).subscribe({next:e=>{this.guideLines=e,this.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(nn.e)(this.pdfPage.i)).subscribe({next:e=>{var t;this.selectedLine=e,(null===(t=this.selectedLine)||void 0===t?void 0:t.offset)<0&&this.listenGuideLineMove(this.selectedLine)}}),this.store$.pipe(Object(g.f)("scale")).subscribe({next:e=>this.scale=e}),this.store$.pipe(Object(g.f)("degree")).subscribe({next:e=>{this.degree=e,this.changeDetectorRef.markForCheck()}}),this.shortcutService.getShortcutEvent(Y.a.DELETE_GUIDELINE).pipe(He.a(this.store$.pipe(Object(g.f)("currentPageNo"))),S.a(([e,t])=>this.pdfPage.i===t-1),S.a(()=>null!==this.selectedLine)).subscribe({next:()=>{this.store$.dispatch(nn.b.remove({payload:{pageIndex:this.pdfPage.i,guideLine:this.selectedLine}}))}}))}onMousedown(e){this.listenGuideLineMove(e)}getLineStyles(t){var i;const n=y.u.normalizeDegree(this.degree+this.pdfPage.r+(t.isVertical?90:0)),o=Math.max(e.LINE_WIDTH/(this.scale/100),1)+"px";return Object.assign({position:"absolute",display:t.offset<0?"none":"block",top:t.isVertical?"0px":t.offset+"px",left:t.isVertical?t.offset+"px":"0px",width:t.isVertical?o:this.pdfPage.bbox.w+"px",height:t.isVertical?this.pdfPage.bbox.h+"px":o,backgroundColor:"#036FFC",backgroundClip:"padding-box",cursor:0===n||180===n?"row-resize":"col-resize",zIndex:String(y.p.GuideLine)},t.id===(null===(i=this.selectedLine)||void 0===i?void 0:i.id)?{backgroundColor:"#FF6100"}:{})}listenGuideLineMove(e){const t=this.elementRef.nativeElement.parentElement,i=y.u.normalizeDegree(this.degree+this.pdfPage.r+(e.isVertical?90:0)),n=0===i||180===i?"row-resizing":"col-resizing";document.body.classList.add(n),this.selectedLine=e,this.subscriptionService.push(Ot.a(t,"mousemove",{capture:!0}).pipe(tn.a(Q.a(Ot.a(window,"mouseup",{capture:!0}),Ot.a(t,"mouseleave")))).subscribe({next:e=>{const t=this.getPageOffset(e.target,{offsetX:e.offsetX,offsetY:e.offsetY});this.selectedLine=Object.assign({},this.selectedLine),this.selectedLine.offset=this.selectedLine.isVertical?t.offsetX:t.offsetY,this.guideLines=Object.assign(Object.assign({},this.guideLines),{[this.selectedLine.id]:this.selectedLine}),this.changeDetectorRef.markForCheck()},complete:()=>{this.store$.dispatch(this.selectedLine.offset<0?nn.b.remove({payload:{pageIndex:this.pdfPage.i,guideLine:this.selectedLine}}):nn.b.update({payload:{pageIndex:this.pdfPage.i,guideLine:this.selectedLine}})),document.body.classList.remove(n)}}))}getPageOffset(e,t){return e.matches("sd-page")?t:this.getPageOffset(e.parentNode,e.offsetParent&&0!==e.offsetWidth&&0!==e.offsetHeight?{offsetX:t.offsetX+e.offsetLeft,offsetY:t.offsetY+e.offsetTop}:t)}}return e.LINE_WIDTH=1,e.\u0275fac=function(t){return new(t||e)(M.Mb(M.l),M.Mb(M.h),M.Mb(s.G),M.Mb(O.h),M.Mb(Y.c))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-guide-line"]],inputs:{pdfPage:"pdfPage"},features:[M.yb([s.G])],decls:1,vars:2,consts:[[3,"ngStyle","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngStyle","mousedown"]],template:function(e,t){1&e&&M.Dc(0,on,1,1,"div",0),2&e&&M.jc("ngForOf",t.guideLineArray)("ngForTrackBy",t.trackByGuideLine)},directives:[n.s,n.w],styles:[""]}),e})();var rn=i("0WlJ"),an=i("3UWI"),cn=i("KmMa"),ln=i("wuT5"),hn=i("oT1b");function dn(e,t){1&e&&M.Ob(0)}function un(e,t){1&e&&M.Ob(0)}function pn(e,t){if(1&e&&(M.cc(),M.Sb(0,"text"),M.Fc(1),M.Rb()),2&e){const e=t.$implicit,i=M.dc(2);M.Ab("font-size",i.markerFontSize)("x",e.x)("y",e.y),M.zb(1),M.Gc(e.content)}}function gn(e,t){if(1&e){const e=M.Tb();M.Sb(0,"div",3),M.Zb("click",(function(i){M.uc(e);const n=t.isVertical;return M.dc().onRulerClick(n,i)}))("mousedown",(function(i){M.uc(e);const n=t.isVertical;return M.dc().onRulerMousedown(n,i)})),M.cc(),M.Sb(1,"svg"),M.Nb(2,"path"),M.Nb(3,"path"),M.Dc(4,pn,2,4,"text",4),M.Rb(),M.Rb()}if(2&e){const e=t.isVertical,i=t.className,n=M.dc();M.Bb(i),M.jc("ngStyle",n.getRulerStyles(e)),M.zb(1),M.Bc("transform",e?"translate(0, "+n.rulerOffset.offsetY+"px)":"translate("+n.rulerOffset.offsetX+"px, 0)"),M.zb(1),M.Ab("d",n.rendered[i].d),M.zb(1),M.Ab("d",n.mousePath[i]),M.zb(1),M.jc("ngForOf",n.rendered[i].texts)}}const fn=function(){return{isVertical:!1,className:"horizontal"}},bn=function(){return{isVertical:!0,className:"vertical"}};let mn=(()=>{class e{constructor(e,t,i,n,o,s,r){this.elementRef=e,this.changeDetectorRef=t,this.subscriptionService=i,this.store$=n,this.pageService=o,this.guideLineService=s,this.unitPipe=r,this.markerFontSize=12,this.mousePath={horizontal:"",vertical:""},this.rulerOffset={offsetX:0,offsetY:0},this.rendered={horizontal:{d:"",texts:[]},vertical:{d:"",texts:[]}},this.cornerStyles={width:cn.a+"px",height:cn.a+"px"}}get rulerUnit(){return this.unitPipe.transform(this.scale>=250?rn.a.MILLIMETER:rn.a.CENTIMETER)}ngOnInit(){this.initSubscriptions()}getRulerStyles(e){const t={top:"0px",left:"0px"};return t[e?"top":"left"]=cn.a+"px",t[e?"width":"height"]=cn.a+"px",t[e?"height":"width"]=`calc(100% - ${cn.a}px)`,t}render(e){this.rulerOffset=e;const t=y.u.normalizeScale(this.scale),i=e=>rn.b.convert(rn.a.POINT,this.rulerUnit,e/t),n=i(e.offsetX),o=i(e.offsetY),s=i(e.width),r=i(e.height),a={horizontal:this.fixRange({min:-n,max:s-n}),vertical:this.fixRange({min:-o,max:r-o})};this.rendered.horizontal=this.renderRuler(this.rulerUnit,a.horizontal,t,!1),this.rendered.vertical=this.renderRuler(this.rulerUnit,a.vertical,t,!0),this.changeDetectorRef.markForCheck()}onRulerClick(e,t){const i=(e?t.offsetY:t.offsetX)/y.u.normalizeScale(this.scale),n=y.u.normalizeDegree(this.pdfPage.r+this.degree+(e?0:90)),o={isVertical:90===n||270===n,offset:i};i<0||(o.isVertical?this.pdfPage.bbox.w:this.pdfPage.bbox.h)<i||(180===n?o.offset=this.pdfPage.bbox.h-o.offset:270===n&&(o.offset=this.pdfPage.bbox.w-o.offset),this.store$.dispatch(nn.b.create({payload:{pageIndex:this.pdfPage.i,guideLine:o}})))}onRulerMousedown(e,t){const i=y.u.normalizeDegree(this.pdfPage.r+this.degree+(e?90:0)),n={offset:-1,isVertical:90===i||270===i};this.subscriptionService.push(Ot.a(t.currentTarget,"mouseleave").pipe(tn.a(Ot.a(window,"mouseup",{capture:!0})),Ct.a(1)).subscribe({next:()=>{this.store$.dispatch(nn.b.create({payload:{pageIndex:this.pdfPage.i,guideLine:n}}))}}))}initSubscriptions(){this.subscriptionService.push(Ot.a(window,"mousemove",{capture:!0}).subscribe({next:e=>{const t=this.elementRef.nativeElement.getBoundingClientRect(),i=(e.clientX-t.left-cn.a-this.rulerOffset.offsetX).toFixed(3),n=(e.clientY-t.top-cn.a-this.rulerOffset.offsetY).toFixed(3);this.mousePath={horizontal:`M ${i} 0 L ${i} ${cn.a}`,vertical:`M 0 ${n} L ${cn.a} ${n}`},this.changeDetectorRef.markForCheck()}}),yt.b([this.store$.pipe(Object(g.f)("currentPageNo")),this.pageService.pdfPages$.pipe(S.a(e=>null!=e))]).pipe(Ve.a({next:([e,t])=>this.pdfPage=t[e-1]}),v.a(()=>yt.b([this.guideLineService.scaleWrapperOffset$,this.guideLineService.scrollOffset$])),an.a(1),m.a(([e,t])=>({offsetX:e.offsetX-t.offsetX,offsetY:e.offsetY-t.offsetY,width:e.width,height:e.height}))).subscribe({next:e=>this.render(e)}),this.store$.pipe(Object(g.f)("scale")).subscribe({next:e=>this.scale=e}),this.store$.pipe(Object(g.f)("degree")).subscribe({next:e=>this.degree=e}))}renderRuler(e,t,i,n){const o={d:"",texts:[]};for(let s=t.min;s<=t.max;++s){const t=s%10==0?cn.a:s%5==0?cn.a/2:cn.a/4,r=Number(rn.b.convert(e,rn.a.POINT,s*i).toFixed(3));let a=r,c=0,l=r,h=t;if(n&&([a,c]=[c,a],[l,h]=[h,l]),o.d+=`M ${a} ${c} L ${l} ${h}`,s%10==0){let e=r,i=t;n&&([e,i]=[i,e]),e+=3,i-=3,o.texts.push({x:e,y:i,content:s})}}return o}fixRange(e){return{min:Math[e.min>0?"ceil":"floor"](e.min),max:Math[e.min>0?"floor":"ceil"](e.max)}}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(M.l),M.Mb(M.h),M.Mb(s.G),M.Mb(O.h),M.Mb(ae.b),M.Mb(ln.a),M.Mb(hn.a))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-ruler"]],features:[M.yb([s.G])],decls:5,vars:7,consts:[[1,"corner",3,"ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["svgTemplateRef",""],[1,"ruler-container",3,"ngStyle","click","mousedown"],[4,"ngFor","ngForOf"]],template:function(e,t){if(1&e&&(M.Nb(0,"div",0),M.Dc(1,dn,1,0,"ng-container",1),M.Dc(2,un,1,0,"ng-container",1),M.Dc(3,gn,5,8,"ng-template",null,2,M.Ec)),2&e){const e=M.tc(4);M.jc("ngStyle",t.cornerStyles),M.zb(1),M.jc("ngTemplateOutlet",e)("ngTemplateOutletContext",M.mc(5,fn)),M.zb(1),M.jc("ngTemplateOutlet",e)("ngTemplateOutletContext",M.mc(6,bn))}},directives:[n.w,n.A,n.s],styles:["div.corner[_ngcontent-%COMP%]{top:0;left:0;z-index:2;border-right:1px solid #dadada;border-bottom:1px solid #dadada}.ruler-container[_ngcontent-%COMP%], div.corner[_ngcontent-%COMP%]{position:absolute;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:#fff}.ruler-container.horizontal[_ngcontent-%COMP%]{z-index:1;border-bottom:1px solid #dadada}.ruler-container.vertical[_ngcontent-%COMP%]{border-right:1px solid #dadada}svg[_ngcontent-%COMP%]{width:100%;height:100%;overflow:visible}svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:#1e1e1e;stroke-width:1;fill:transparent}"],changeDetection:0}),e})();var vn=i("eXiQ");let Sn=(()=>{class e{}return e.\u0275mod=M.Kb({type:e}),e.\u0275inj=M.Jb({factory:function(t){return new(t||e)},providers:[X.a],imports:[[a.b,pt.a,Ye,be.a,gt.b,me.a,ut.a,P.b,ke.d,n.c,o.n,o.B,s.j,s.t,s.h,s.C]]}),e})();M.xc(ni,[Xi.a,Yi.a,Ki.a,ye,Qi.a,Ji.a,en.a,sn,mn,vn.a,Xe.a,n.q,n.r,n.s,n.t,n.A,n.w,n.x,n.y,n.z,n.u,n.v,o.H,o.w,o.G,o.d,o.x,o.A,o.b,o.D,o.E,o.z,o.r,o.s,o.C,o.p,o.o,o.y,o.c,o.e,o.u,o.v,o.t,o.i,o.l,o.j,o.m,o.f,s.i,s.s,s.g,s.B,ni,ci,Wi,wi,fe,di,Zi,Gi.a,zt,Z.b,Z.e,Z.f,Z.d,Z.c,zi,Li,Fi,mt,dt],[T.a,n.b,n.G,n.p,n.k,n.E,n.g,n.C,n.F,n.d,n.f,n.i,n.j,n.l]),M.xc(ci,[Xi.a,Yi.a,Ki.a,ye,Qi.a,Ji.a,en.a,sn,mn,vn.a,Xe.a,n.q,n.r,n.s,n.t,n.A,n.w,n.x,n.y,n.z,n.u,n.v,o.H,o.w,o.G,o.d,o.x,o.A,o.b,o.D,o.E,o.z,o.r,o.s,o.C,o.p,o.o,o.y,o.c,o.e,o.u,o.v,o.t,o.i,o.l,o.j,o.m,o.f,s.i,s.s,s.g,s.B,ni,ci,Wi,wi,fe,di,Zi,Gi.a,zt,Z.b,Z.e,Z.f,Z.d,Z.c,zi,Li,Fi,mt,dt],[T.a,n.b,n.G,n.p,n.k,n.E,n.g,n.C,n.F,n.d,n.f,n.i,n.j,n.l]),M.xc(wi,[Xi.a,Yi.a,Ki.a,ye,Qi.a,Ji.a,en.a,sn,mn,vn.a,Xe.a,n.q,n.r,n.s,n.t,n.A,n.w,n.x,n.y,n.z,n.u,n.v,o.H,o.w,o.G,o.d,o.x,o.A,o.b,o.D,o.E,o.z,o.r,o.s,o.C,o.p,o.o,o.y,o.c,o.e,o.u,o.v,o.t,o.i,o.l,o.j,o.m,o.f,s.i,s.s,s.g,s.B,ni,ci,Wi,wi,fe,di,Zi,Gi.a,zt,Z.b,Z.e,Z.f,Z.d,Z.c,zi,Li,Fi,mt,dt],[T.a,n.b,n.G,n.p,n.k,n.E,n.g,n.C,n.F,n.d,n.f,n.i,n.j,n.l]),M.xc(fe,[Xi.a,Yi.a,Ki.a,ye,Qi.a,Ji.a,en.a,sn,mn,vn.a,Xe.a,n.q,n.r,n.s,n.t,n.A,n.w,n.x,n.y,n.z,n.u,n.v,o.H,o.w,o.G,o.d,o.x,o.A,o.b,o.D,o.E,o.z,o.r,o.s,o.C,o.p,o.o,o.y,o.c,o.e,o.u,o.v,o.t,o.i,o.l,o.j,o.m,o.f,s.i,s.s,s.g,s.B,ni,ci,Wi,wi,fe,di,Zi,Gi.a,zt,Z.b,Z.e,Z.f,Z.d,Z.c,zi,Li,Fi,mt,dt],[T.a,n.b,n.G,n.p,n.k,n.E,n.g,n.C,n.F,n.d,n.f,n.i,n.j,n.l]),M.xc(zi,[Xi.a,Yi.a,Ki.a,ye,Qi.a,Ji.a,en.a,sn,mn,vn.a,Xe.a,n.q,n.r,n.s,n.t,n.A,n.w,n.x,n.y,n.z,n.u,n.v,o.H,o.w,o.G,o.d,o.x,o.A,o.b,o.D,o.E,o.z,o.r,o.s,o.C,o.p,o.o,o.y,o.c,o.e,o.u,o.v,o.t,o.i,o.l,o.j,o.m,o.f,s.i,s.s,s.g,s.B,ni,ci,Wi,wi,fe,di,Zi,Gi.a,zt,Z.b,Z.e,Z.f,Z.d,Z.c,zi,Li,Fi,mt,dt],[T.a,n.b,n.G,n.p,n.k,n.E,n.g,n.C,n.F,n.d,n.f,n.i,n.j,n.l]),M.xc(Li,[Xi.a,Yi.a,Ki.a,ye,Qi.a,Ji.a,en.a,sn,mn,vn.a,Xe.a,n.q,n.r,n.s,n.t,n.A,n.w,n.x,n.y,n.z,n.u,n.v,o.H,o.w,o.G,o.d,o.x,o.A,o.b,o.D,o.E,o.z,o.r,o.s,o.C,o.p,o.o,o.y,o.c,o.e,o.u,o.v,o.t,o.i,o.l,o.j,o.m,o.f,s.i,s.s,s.g,s.B,ni,ci,Wi,wi,fe,di,Zi,Gi.a,zt,Z.b,Z.e,Z.f,Z.d,Z.c,zi,Li,Fi,mt,dt],[T.a,n.b,n.G,n.p,n.k,n.E,n.g,n.C,n.F,n.d,n.f,n.i,n.j,n.l]);var yn=i("Vs1n"),Mn=i("Xk1l"),xn=i("cYj5");let On=(()=>{class e{constructor(e,t,i,n,o,s,r,a,c,l,h,d){this.documentService=e,this.translatePipe=t,this.productService=i,this.store$=n,this.customUIService=o,this.annotSelectedService=s,this.actionHistoryService=r,this.modalService=a,this.dialogService=c,this.changeService=l,this.downloadService=h,this.viewerService=d,this.hidableMenus={},this.leftSectionFirstCustomUI=[],this.leftSectionLastCustomUI=[],this.MENU_RESPONSIVE_SIZE=811,this.store$.pipe(Object(g.e)([f.a.TOOLBAR_EBOOK,f.a.TOOLBAR_PREFERENCES,f.a.TOOLBAR_DOCUMENT_INFO,f.a.TOOLBAR_SD_INFO,f.a.TOOLBAR_SAVE,f.a.TOOLBAR_PRINT,f.a.TOOLBAR_DOWNLOAD,f.a.TOOLBAR_SLIDESHOW])).subscribe({next:({hiddenViews:e})=>{this.hidableMenus=Object.assign(Object.assign({},this.hidableMenus),e)}}),this.customUIService.customButtonUI$.subscribe({next:e=>{this.leftSectionFirstCustomUI=e.filter(e=>"TOOLBAR.LEFT_SECTION.FIRST"===e.position),this.leftSectionLastCustomUI=e.filter(e=>"TOOLBAR.LEFT_SECTION.LAST"===e.position)}})}buildMainMenu(e){const t=[];let i={items:[]};if(b.f.get(b.c.MAIN_MENU)){const n=this.buildFirstCustomMenu();n.items.length>0&&t.push(n),i={items:[]},y.F.width<=this.MENU_RESPONSIVE_SIZE&&i.items.push(...this.buildActionMenu(e)),i.items.push(...this.buildFileMenu()),i.items.push(...this.buildViewMenu(e)),i.items.push(...this.buildSettingMenu()),i.items.push(...this.buildInfoMenu()),i.items.length>0&&t.push(i);const o=this.buildLastCustomMenu();o.items.length>0&&t.push(o)}return t}buildActionMenu(e){const t=[];return e.runtimeEnv.get(b.c.UNDO)?(t.push({label:this.translatePipe.transform("UNDO"),command:()=>{this.annotSelectedService.unselectAll(),this.actionHistoryService.undo()},disabled:!e.canUndo}),t.push({label:this.translatePipe.transform("REDO"),command:()=>{this.annotSelectedService.unselectAll(),this.actionHistoryService.redo()},disabled:!e.canRedo}),t):t}buildFileMenu(){const e=[];if(this.documentService.checkAuthority(l.j.SAVE_DOCUMENT)&&b.f.get(b.d.FILE_MENUS_UI)&&b.f.get(b.d.MAIN_TOOLBAR_SAVE)&&!this.hidableMenus[f.a.TOOLBAR_SAVE]&&e.push({label:this.translatePipe.transform("SAVE"),command:()=>this.changeService.saveDocument()}),this.documentService.checkAuthority(l.j.DOWNLOAD_DOCUMENT)&&b.f.get(b.d.FILE_MENUS_UI)&&b.f.get(b.d.MAIN_MENU_DOWNLOAD)&&!this.hidableMenus[f.a.TOOLBAR_DOWNLOAD])switch(this.productService.getProductType()){case"StreamDocs":e.push({label:this.translatePipe.transform("DOWNLOAD_DOC"),command:()=>this.downloadService.downloadDocument()});break;case"StreamDocs Vu!":this.documentService.hasOriginalFile&&e.push({label:this.translatePipe.transform("ORIGINAL_DOWNLOAD"),command:()=>this.downloadService.downloadOriginalDocument()}),e.push({label:this.translatePipe.transform("PDF_DOWNLOAD"),command:()=>this.downloadService.downloadDocument()})}return b.f.get(b.c.DOCUMENT_INFO)&&!this.hidableMenus[f.a.TOOLBAR_DOCUMENT_INFO]&&e.push({label:this.translatePipe.transform("DOC_PROPERTY_MENU"),command:()=>this.dialogService.toggleDialogVisibility(h.c.DOCUMENT_INFO,!0)}),this.documentService.checkAuthority(l.j.PRINT_DOCUMENT)&&b.f.get(b.d.FILE_MENUS_UI)&&b.f.get(b.c.PRINT)&&!this.hidableMenus[f.a.TOOLBAR_PRINT]&&e.push({label:this.translatePipe.transform("PRINT_MENU"),command:()=>this.dialogService.toggleDialogVisibility(h.c.PRINT)}),this.addMenuDivisionLine(e),e}buildViewMenu(e){const t=[];return b.f.get(b.d.MAIN_MENU_SLIDESHOW)&&!this.hidableMenus[f.a.TOOLBAR_SLIDESHOW]&&t.push({label:()=>this.translatePipe.transform("SLIDESHOW"),command:()=>this.viewerService.setSlideshow()}),b.f.get(b.d.MAIN_MENU_EBOOK)&&!this.hidableMenus[f.a.TOOLBAR_EBOOK]&&t.push({label:()=>e.isEbookMode()?this.translatePipe.transform("CHANGE_TO_THE_READING_MODE"):this.translatePipe.transform("CHANGE_TO_EBOOK_MODE"),command:()=>this.viewerService.toggleEbookMode()}),this.addMenuDivisionLine(t),t}buildSettingMenu(){const e=[];return b.f.get(b.c.PREFERENCES)&&!this.hidableMenus[f.a.TOOLBAR_PREFERENCES]&&e.push({label:this.translatePipe.transform("PREFERENCE_MENU"),command:()=>this.dialogService.toggleDialogVisibility(h.c.PREFERENCES,!0)}),this.addMenuDivisionLine(e),e}buildInfoMenu(){const e=[];return b.f.get(b.d.MAIN_TOOLBAR_SD_INFO)&&!this.hidableMenus[f.a.TOOLBAR_SD_INFO]&&e.push({label:this.translatePipe.transform("SD_INFO"),command:()=>this.showProductInfo()}),e}showProductInfo(){Mt.a(this.productService.getProductLicenseInfo(),this.productService.getPackageVersion()).subscribe({next:([e,t])=>{this.modalService.createCommonModal({type:Ke.a.PRODUCT,logo:this.productService.getLogo(),subTitle:"Release Version "+t,content:e,footerContent:this.productService.getCopyRight(),confirmButton:!0,confirmLabel:this.translatePipe.transform("CLOSE")})},error:()=>{this.modalService.createCommonModal({type:Ke.a.PRODUCT,logo:this.productService.getLogo(),content:this.translatePipe.transform("NO_PRODUCT_INFO"),footerContent:this.productService.getCopyRight(),confirmButton:!0,confirmLabel:this.translatePipe.transform("CLOSE")})}})}addMenuDivisionLine(e){e.length>0&&e.push({type:s.a.LINE,label:"DIVISION_LINE"})}buildFirstCustomMenu(){const e={items:[]};return y.F.width>this.MENU_RESPONSIVE_SIZE||this.leftSectionFirstCustomUI.forEach(t=>{e.items.push({label:t.label,command:e=>t.onclick(Mn.a.simplifyMouseEvent(e))})}),e}buildLastCustomMenu(){const e={items:[]};return y.F.width>this.MENU_RESPONSIVE_SIZE||this.leftSectionLastCustomUI.forEach(t=>{e.items.push({label:t.label,command:e=>t.onclick(Mn.a.simplifyMouseEvent(e))})}),e}}return e.\u0275fac=function(t){return new(t||e)(M.Wb(l.k),M.Wb(P.d),M.Wb(xn.b),M.Wb(O.h),M.Wb(l.i),M.Wb(l.c),M.Wb(l.b),M.Wb(Ke.c),M.Wb(h.b),M.Wb(l.e),M.Wb(l.l),M.Wb(l.w))},e.\u0275prov=M.Ib({token:e,factory:e.\u0275fac}),e})();var Pn=i("YWXW"),Cn=i("4pye"),wn=i("l5mm"),_n=i("iInd"),Tn=i("L7cj"),En=i("Yoju");const In=["sdToastOutlet"],Rn=["sdModalOutlet"],kn=["mainToolbarRef"];function Nn(e,t){if(1&e&&M.Nb(0,"sd-annot-toolbar",18),2&e){const e=M.dc(2);M.Bc("display",!e.annotationUse&&!e.isFormToolActive&&!e.isSignatureToolActive||e.isEbookMode()?"none":void 0)("height",e.ToolbarHeightInPixel,"px"),M.jc("formToolActive",e.isFormToolActive)("annotToolActive",e.annotationUse)("signatureToolActive",e.isSignatureToolActive)}}function An(e,t){if(1&e&&(M.Sb(0,"aside",19),M.Nb(1,"sd-side-view",17),M.Rb()),2&e){const e=M.dc(2);M.jc("@sideViewAnimation",e.isSmallWidthScreen),M.zb(1),M.jc("pdfDoc",e.doc)}}function Dn(e,t){if(1&e&&(M.Sb(0,"aside",20),M.Nb(1,"sd-right-side-view",17),M.Rb()),2&e){const e=M.dc(2);M.jc("@sideViewAnimation",e.isSmallWidthScreen),M.zb(1),M.jc("pdfDoc",e.doc)}}function Ln(e,t){if(1&e&&M.Nb(0,"sd-content-view",21),2&e){const e=M.dc(2);M.jc("pdfDoc",e.doc)("overWrittenZoom",e.zoomParam)("ngStyle",e.contentViewStyle)}}function Fn(e,t){1&e&&M.Nb(0,"sd-ruler")}function jn(e,t){if(1&e){const e=M.Tb();M.Sb(0,"span",22),M.Zb("contextmenu",(function(t){return M.uc(e),M.dc(2).onContextMenu(t)})),M.Fc(1),M.Rb()}if(2&e){const e=M.dc(2);M.zb(1),M.Ic("",e.currentPageNo,"/",e.pageCount,"")}}function zn(e,t){if(1&e&&(M.Sb(0,"div",29),M.Fc(1),M.Rb()),2&e){const e=M.dc(4);M.zb(1),M.Gc(e.passwordErrorMessage)}}const Vn=function(e){return{error:e}};function Bn(e,t){if(1&e){const e=M.Tb();M.Sb(0,"div",26),M.Fc(1),M.ec(2,"translate"),M.Rb(),M.Sb(3,"pu-input",27),M.Zb("ngModelChange",(function(t){return M.uc(e),M.dc(3).password=t}))("keydown.enter",(function(){M.uc(e);const t=M.dc(3);return t.password&&!t.passwordChecking?t.checkPassword():null})),M.ec(4,"translate"),M.Rb(),M.Dc(5,zn,2,1,"div",28)}if(2&e){const e=M.dc(3);M.zb(1),M.Gc(M.fc(2,6,"THIS_DOCUMENT_WAS_ENCRYPTED")),M.zb(2),M.jc("ngClass",M.nc(10,Vn,e.passwordErrorMessage))("placeholder",M.fc(4,8,"PASSWORD"))("readonly",e.passwordChecking)("ngModel",e.password),M.zb(2),M.jc("ngIf",e.passwordErrorMessage)}}function $n(e,t){if(1&e){const e=M.Tb();M.Sb(0,"button",30),M.Zb("click",(function(){return M.uc(e),M.dc(3).checkPassword()})),M.Fc(1),M.ec(2,"translate"),M.Rb()}if(2&e){const e=M.dc(3);M.jc("disabled",!e.password||e.passwordChecking),M.zb(1),M.Gc(M.fc(2,2,"OK"))}}function Wn(e,t){if(1&e&&(M.Sb(0,"pu-dialog",23),M.ec(1,"translate"),M.Dc(2,Bn,6,12,"ng-template",null,24,M.Ec),M.Dc(4,$n,3,4,"ng-template",null,25,M.Ec),M.Rb()),2&e){const e=M.tc(3),t=M.tc(5);M.jc("bodyTemplate",e)("footerTemplate",t)("header",M.fc(1,4,"ENCRYPTED_DOCUMENT"))("headerIcon","papycon papycon-questionmark")}}function Un(e,t){if(1&e){const e=M.Tb();M.Sb(0,"sd-print-view",31),M.Zb("finish",(function(){return M.uc(e),M.dc(2).onFinishPrint()})),M.Rb()}if(2&e){const e=M.dc(2);M.jc("doc",e.doc)("immediatePrintConfig",e.immediatePrintConfig)}}function Gn(e,t){if(1&e){const e=M.Tb();M.Qb(0),M.Sb(1,"sd-toolbar",1,2),M.Zb("contextmenu",(function(t){return M.uc(e),M.dc().onContextMenu(t)})),M.Rb(),M.Dc(3,Nn,1,7,"sd-annot-toolbar",3),M.Sb(4,"div",4),M.Zb("contextmenu",(function(t){return M.uc(e),M.dc().onContextMenu(t)})),M.Dc(5,An,2,2,"aside",5),M.Dc(6,Dn,2,2,"aside",6),M.Sb(7,"section",7),M.Dc(8,Ln,1,3,"sd-content-view",8),M.Dc(9,Fn,1,0,"sd-ruler",0),M.Dc(10,jn,2,2,"span",9),M.Sb(11,"div",10),M.Ob(12,null,11),M.Rb(),M.Sb(14,"div",12),M.Ob(15,null,13),M.Rb(),M.Rb(),M.Rb(),M.Sb(17,"section",14),M.Dc(18,Wn,6,6,"pu-dialog",15),M.Rb(),M.Dc(19,Un,1,2,"sd-print-view",16),M.Nb(20,"sd-dialog",17),M.Pb()}if(2&e){const e=M.dc();M.zb(1),M.Bc("display",e.runtimeEnv.get(e.MergedRuntimeEnvKey.MAIN_TOOLBAR)?void 0:"none")("height",e.ToolbarHeightInPixel,"px"),M.jc("doc",e.doc),M.zb(2),M.jc("ngIf",!e.supportTTS&&(e.isFormToolActive||e.annotationUse||e.isSignatureToolActive)),M.zb(1),M.Bc("height",e.mainWindowHeight),M.zb(1),M.jc("ngIf",e.sideViewVisible),M.zb(1),M.jc("ngIf",e.runtimeEnv.get(e.MergedRuntimeEnvKey.SIDE_VIEW_RIGHT)&&e.rightSideViewVisible),M.zb(1),M.jc("ngClass",e.DragMode[e.dragMode]),M.zb(1),M.jc("ngIf",e.doc),M.zb(1),M.jc("ngIf",e.rulerActive),M.zb(1),M.jc("ngIf",e.pageCount),M.zb(8),M.jc("ngIf",e.suspendedDocId),M.zb(1),M.jc("ngIf",e.printDialogView||e.immediatePrintConfig),M.zb(1),M.jc("pdfDoc",e.doc)}}let Hn=(()=>{class e{constructor(e,t,i,n,o,s,r,a,c,l,h,d,u,p,g,f,m,v,S,M,x,O,P,C,w,_,T){this.acroFormService=e,this.contentService=t,this.annotService=i,this.activatedRoute=n,this.modalService=o,this.changeDetectorRef=s,this.textSearchService=r,this.dataService=a,this.toastService=c,this.annotSelectedService=l,this.documentService=h,this.viewerService=d,this.shortcutService=u,this.changeService=p,this.subscriptionService=g,this.sdContextMenuService=f,this.store$=m,this.externalApiService=v,this.dialogService=S,this.printService=M,this.apiEventBridgeService=x,this.translatePipe=O,this.localStorageService=P,this.settingsService=C,this.preferencesService=w,this.router=_,this.muPDFService=T,this.printDialogView=!1,this.suspendedDocId=y.v.EMPTY_STRING,this.password=y.v.EMPTY_STRING,this.passwordChecking=!1,this.passwordErrorMessage=y.v.EMPTY_STRING,this.sideViewVisible=!1,this.searchToolActive=!1,this.rightSideViewVisible=!1,this.isSmallWidthScreen=y.F.isSmallWidth(),this.loading=b.f.get(b.d.DELAY_LOADING),this._doc=null,this.docInfo=null,this._annotationUse=!1,this.formToolsActive=!1,this.signatureToolsActive=!1,this.isFullScreen=y.g.isFullscreenMode(),this.isContextMenuOpened=!1,this.hidableMenus={}}get RuntimeEnvKey(){return b.d}get MergedRuntimeEnvKey(){return b.c}get runtimeEnv(){return b.f}get SideViewMode(){return yn.a}get DragMode(){return d.a}get WindowUtil(){return y.F}get contentViewStyle(){if(!this.rulerActive)return{};const e=me.c+"px",t=`calc(100% - ${me.c}px)`;return{top:e,left:e,width:t,height:t}}get disableStyle(){return this.viewerService.disableStyle}get ToolbarHeightInPixel(){return 42}get mainWindowHeight(){var e,t;return`calc(100%${[(null===(e=this.mainToolbarRef)||void 0===e?void 0:e.nativeElement.getBoundingClientRect().height)||0,(y.F.isSmallWidth()?0:null===(t=this.annotToolbarRef)||void 0===t?void 0:t.nativeElement.getBoundingClientRect().height)||0].map(e=>` - ${e}px`).join("")})`}get doc(){return this._doc}get isEnabledAnnotation(){return this.documentService.checkAuthority(l.j.ANNOTATION)}get isEnabledForm(){return this.documentService.checkAuthority(l.j.FORM)}get annotationUse(){return this._annotationUse}set annotationUse(e){this._annotationUse=e,e&&(this.navtoolbarUse=!1,this.isFormToolActive=!1,this.isSignatureToolActive=!1),this.updateMainWindowHeight()}get isFormToolActive(){return this.formToolsActive}set isFormToolActive(e){this.formToolsActive=e,e&&(this.annotationUse=!1,this.isSignatureToolActive=!1),this.updateMainWindowHeight()}get isSignatureToolActive(){return this.signatureToolsActive}set isSignatureToolActive(e){this.signatureToolsActive=e,e&&(this.annotationUse=!1,this.isFormToolActive=!1),this.updateMainWindowHeight()}set navtoolbarUse(e){e&&(this.annotationUse=!1),y.F.width<=640&&(e?this.toggleRightSideView(!1):this.store$.dispatch(g.a.set({key:"sideViewVisible",value:!1})))}get HidableView(){return f.a}get hidableSideView(){return!(this.hidableMenus[f.a.SIDE_VIEW]||this.hidableMenus[f.a.SIDE_VIEW_THUMBNAIL]&&this.hidableMenus[f.a.SIDE_VIEW_BOOKMARK]&&this.hidableMenus[f.a.SIDE_VIEW_ANNOTATION]&&this.hidableMenus[f.a.SIDE_VIEW_REDACTION]&&this.hidableMenus[f.a.SIDE_VIEW_EMBEDDED_FILE]&&this.hidableMenus[f.a.SIDE_VIEW_FORM]&&this.hidableMenus[f.a.SIDE_VIEW_SIGNATURE])}ngOnInit(){this.contentService.togglePageLoader(!1),this.initializeSetting(),this.subscribe(),this.bindParams(),this.initSearchResult(),this.annotSelectedService.unselectAll(),this.subscriptionService.push(this.shortcutService.getShortcutEvent(Y.a.FULLSCREEN).subscribe({next:e=>{e.preventDefault(),e.stopPropagation(),this.isFullScreen?y.F.exitFullScreen():y.F.enterFullScreen()}}),y.F.windowResize$.pipe(Ve.a(()=>this.isSmallWidthScreen=y.F.isSmallWidth()),S.a(()=>this.isFullScreen!==y.g.isFullscreenMode()),v.a(()=>wn.a(100).pipe(S.a(()=>!y.g.isFullscreenMode()),Ct.a(1)))).subscribe({next:()=>{y.F.exitFullScreen()}}),this.documentService.openedDocument$.subscribe({next:e=>{e?(this._doc=e,this.annotationUse=!1,y.g.isDefined(this.currentPageNoParam)||this.checkLastViewedPage(),this.acroFormService.resetAcroFieldByPage(),this.changeDetectorRef.markForCheck()):this.closeDocument()}}),this.localStorageService.localStorage$.subscribe({next:()=>{this.toastService.create({toastStyle:St.c.FAILURE,content:this.translatePipe.transform("FAILED_TO_ACCESS_LOCAL_STORAGE")})}})),this.localStorageService.isEnabledLocalStorage||this.toastService.create({toastStyle:St.c.FAILURE,content:this.translatePipe.transform("FAILED_TO_ACCESS_LOCAL_STORAGE")})}ngOnDestroy(){this.viewerService.closeDocument()}ngAfterViewInit(){this.toastService.registerOutlet(this.sdToastOutlet),this.modalService.registerOutlet(this.sdModalOutlet),this.subscriptionService.push(yt.b([this.store$.pipe(Object(g.f)("renderingMode"),S.a(e=>e!==Le.b.SERVER)),this.documentService.openedDocument$.pipe(S.a(y.g.isDefined)),this.contentService.reload$.pipe(S.a(e=>e.hasOwnProperty("pageInfo")),Ve.a(()=>this.muPDFService.closeDocument()),Je.a(void 0))]).subscribe({next:([e,t])=>this.muPDFService.prepareDocument(t.streamdocsId,e===Le.b.CLIENT)}))}isEbookMode(){return 4===this.viewMode}isDAP(){var e;return"DAP"===(null===(e=this.docInfo)||void 0===e?void 0:e.DocumentType)}checkPassword(e){this.passwordChecking=!0,this.passwordErrorMessage=y.v.EMPTY_STRING,this.viewerService.openDocument(e||this.suspendedDocId,!Qe.c.skipPasswordCheck,this.password).pipe(it.a(()=>this.passwordChecking=!1)).subscribe({next:()=>{this.suspendedDocId=null},error:t=>{if(this.annotationUse=!1,t.fail){const e=["view/error-pages/"+t.log.status,Qe.c.skipPasswordCheck&&401===t.log.status?"errorCode="+t.errorCode:""].join(";");this.router.navigateByUrl(e)}else this.suspendedDocId=e||this.suspendedDocId,e||(this.passwordErrorMessage=this.translatePipe.transform("WRONG_PASSWORD"));this.changeDetectorRef.markForCheck()}})}toggleRightSideView(e){this.store$.dispatch(g.a.set((null!=e?e:!this.rightSideViewVisible)?{key:"rightSideViewVisible",value:!0}:{key:"rightSideViewVisible",value:!1}))}onSideViewToggleButtonClick(e){this.doc&&this.store$.dispatch(g.a.toggleSideView())}openSideView(e){this.sideViewMode===e?this.store$.dispatch(g.a.set({key:"sideViewVisible",value:!this.sideViewVisible})):(this.store$.dispatch(g.a.set({key:"sideViewMode",value:e})),this.store$.dispatch(g.a.set({key:"sideViewVisible",value:!0})))}onContextMenu(e){e.preventDefault(),e.stopPropagation()}isActiveIcon(e){return this.sideViewMode===e&&this.sideViewVisible?"primary":"dark"}onFinishPrint(){this.immediatePrintConfig&&(this.immediatePrintConfig=null)}initSearchResult(){this.textSearchService.clear(),this.contentService.searchRedactionMark([])}bindParams(){const{streamdocsId:e,currentPage:t,viewmode:i,zoom:n,supportTTS:o,option:s}=this.activatedRoute.snapshot.params,r=Number.parseInt(s,16),a={singlePage:0,singlePageScroll:1,doublePage:2,doublePageScroll:3,eBook:4};""===t||Number.isNaN(Number(t))||(this.currentPageNoParam=Number(t),this.store$.dispatch(g.a.set({key:"currentPageNo",value:Number(t)}))),a.hasOwnProperty(i)&&this.store$.dispatch(g.a.set({key:"viewMode",value:a[i]})),this.zoomParam=n,this.store$.dispatch(g.a.set({key:"supportTTS",value:"true"===o})),this.store$.dispatch(Cn.a.set({value:Number.isNaN(r)?0:r})),e&&this.checkPassword(e)}checkLastViewedPage(){var e;if(!this.localStorageService.isEnabledLocalStorage||!Qe.c.continueFromLastView)return;const t=JSON.parse(this.localStorageService.get("SD_History"))||{},i=null===(e=t[this._doc.streamdocsId])||void 0===e?void 0:e.lastViewedPage;t[this._doc.streamdocsId]?this.store$.dispatch(g.a.set({key:"currentPageNo",value:i>0?i:1})):Logger.debug("Cannot found history in LocalStorage")}updateLastViewedPage(e){if(!this.localStorageService.isEnabledLocalStorage||!Qe.c.continueFromLastView)return;const t=JSON.parse(this.localStorageService.get("SD_History"))||{};t[this._doc.streamdocsId]?t[this._doc.streamdocsId].lastViewedPage=e>0?e:1:t[this._doc.streamdocsId]={lastViewedPage:e>0?e:1},this.localStorageService.set("SD_History",JSON.stringify(t))}subscribe(){this.subscriptionService.push(Ot.a(window,"mousedown").pipe(S.a(()=>this.isContextMenuOpened)).subscribe({next:()=>{this.sdContextMenuService.publishContextMenuStatus(!1)}}),this.store$.pipe(Object(g.f)("viewMode")).subscribe({next:e=>this.viewMode=e}),this.store$.pipe(Object(g.f)("pageCount")).subscribe({next:e=>this.pageCount=e}),this.store$.pipe(Object(g.f)("currentPageNo")).subscribe({next:e=>this.currentPageNo=e}),this.store$.pipe(Object(g.f)("supportTTS")).subscribe({next:e=>this.supportTTS=e}),this.store$.pipe(Object(g.f)("dragMode")).subscribe({next:e=>this.dragMode=e}),this.store$.pipe(Object(g.f)("sideViewVisible")).subscribe({next:e=>{this.sideViewVisible=e,this.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(g.f)("rightSideViewVisible")).subscribe({next:e=>{this.rightSideViewVisible=e,this.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(g.f)("sideViewSize")).subscribe({next:e=>{this.sideViewSize=e,this.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(g.f)("rightSideViewSize")).subscribe({next:e=>{this.rightSideViewSize=e,this.changeDetectorRef.markForCheck()}}),this.printService.print$.pipe(S.a(e=>null!==e)).subscribe({next:e=>{this.immediatePrintConfig=e,this.changeDetectorRef.markForCheck()}}),this.dialogService.dialogVisibilityChange$.subscribe({next:()=>{if(this.dialogService.dialogVisibility[h.c.PRINT]){if(!this.documentService.checkAuthority(l.j.PRINT_DOCUMENT))return void this.apiEventBridgeService.dialogVisibilityChangedSrc.error("Unauthorized");if(!this.doc)return void this.toastService.create({toastStyle:St.c.NOTIFICATION,header:this.translatePipe.transform("PRINT"),content:this.translatePipe.transform("SELECT_FILE")})}this.printDialogView=Boolean(this.dialogService.dialogVisibility[h.c.PRINT]),this.changeDetectorRef.markForCheck(),setTimeout(()=>this.apiEventBridgeService.dialogVisibilityChangedSrc.next())}}),y.F.windowResize$.subscribe({next:()=>{this.changeDetectorRef.markForCheck(),y.w.canSideViewBeDisplayed(this.sideViewVisible,this.rightSideViewVisible,this.sideViewSize,this.rightSideViewSize)||(this.sideViewVisible||this.rightSideViewVisible)&&(this.sideViewVisible&&this.store$.dispatch(g.a.set({key:"sideViewVisible",value:!1})),this.rightSideViewVisible&&this.store$.dispatch(g.a.set({key:"rightSideViewVisible",value:!1})))}}),Q.a(y.F.windowResize$,this.store$.pipe(Object(g.f)("sideViewVisible")),this.store$.pipe(Object(g.f)("sideViewSize")),this.store$.pipe(Object(g.f)("rightSideViewVisible")),this.store$.pipe(Object(g.f)("rightSideViewSize"))).subscribe({next:()=>{this.changeDetectorRef.detectChanges()}}),this.documentService.pdfInfo$.subscribe({next:e=>{e&&("DAP"===e.DocumentType&&b.f.get(b.d.DAP_VIEW)?y.F.width>2*Qe.c.rightSideView.initialSize&&(this.store$.dispatch(g.a.set({key:"rightSideViewMode",value:p.a.DAP})),this.store$.dispatch(g.a.set({key:"rightSideViewVisible",value:!0}))):(this.store$.dispatch(g.a.set({key:"rightSideViewMode",value:p.a.TextSearch})),this.store$.dispatch(g.a.set({key:"rightSideViewVisible",value:!1})))),this.docInfo=e}}),this.contentService.pageNo$.subscribe({next:e=>this.updateLastViewedPage(e.pageNo)}),y.F.fullScreenState$.subscribe({next:e=>this.isFullScreen=e}),this.acroFormService.acroFieldsChange$.pipe(Be.a(300)).subscribe({next:()=>{this.acroFormService.updateAcroFieldByPage(this.doc.streamdocsId).subscribe()}}),this.store$.pipe(Object(g.f)("sideViewMode")).subscribe({next:e=>this.sideViewMode=e}),this.store$.pipe(Object(g.f)("rulerActive")).subscribe({next:e=>{this.rulerActive=e,this.changeDetectorRef.markForCheck()}}),this.contentService.reload$.pipe(S.a(e=>l.q.type(e,l.g.AcroForm))).subscribe({next:()=>{this.acroFormService.resetAcroFieldByPage(),this.dataService.getPdfAcroFields(this.doc.streamdocsId).subscribe({next:({fields:e,props:t})=>{this.acroFormService.publishAcroFields(e,t),this.acroFormService.updateAcroFieldByPage(this.doc.streamdocsId).subscribe()}})}}),Ot.a(window,"beforeunload").pipe(S.a(()=>b.f.get(b.d.LEAVE_PAGE)&&Boolean(this.annotService.getActionLog().length))).subscribe({next:e=>{e.preventDefault(),e.returnValue=this.translatePipe.transform("BEFOREUNLOAD_MESSAGE")}}),this.sdContextMenuService.contextMenuStatus$.subscribe({next:e=>this.isContextMenuOpened=e})),b.f.get(b.d.FORM_TOOLBAR_RULER)&&this.subscriptionService.push(this.shortcutService.getShortcutEvent(Y.a.RULER_VISIBILITY).subscribe({next:()=>this.store$.dispatch(g.a.set({key:"rulerActive",value:!this.rulerActive}))})),b.f.get(b.d.DELAY_LOADING)&&this.subscriptionService.push(this.contentService.pageLoader$.pipe(S.a(e=>!e)).subscribe({next:e=>{this.loading=e,this.changeDetectorRef.markForCheck()}})),this.subscriptionService.push(this.store$.pipe(Object(g.e)([f.a.SIDE_VIEW,f.a.SIDE_VIEW_THUMBNAIL,f.a.SIDE_VIEW_BOOKMARK,f.a.SIDE_VIEW_ANNOTATION,f.a.SIDE_VIEW_REDACTION,f.a.SIDE_VIEW_EMBEDDED_FILE,f.a.SIDE_VIEW_FORM,f.a.SIDE_VIEW_SIGNATURE])).subscribe({next:({latestHiddenView:e,hiddenViews:t})=>{const[i,n]=e.split(".");Object.assign(this.hidableMenus,t),this.sideViewVisible&&!this.hidableMenus[f.a.SIDE_VIEW]&&this.sideViewMode===n&&(this.hidableMenus[e]&&this.sideViewMode===n&&this.store$.dispatch(g.a.set({key:"sideViewVisible",value:!1})),this.changeDetectorRef.markForCheck())}}))}closeDocument(){this._doc=null,this.store$.dispatch(g.a.set({key:"sideViewVisible",value:!1})),this.store$.dispatch(g.a.set({key:"rightSideViewVisible",value:!1})),this.dialogService.closeAll(),this.contentService.publishFitMode(null),this.changeService.isDocumentChanged=!1,this.changeDetectorRef.detectChanges()}updateMainWindowHeight(){setTimeout(()=>this.changeDetectorRef.markForCheck())}initializeSetting(){const e=this.settingsService.radioConfig;[Pn.a.DEFAULT_VIEW_MODE,Pn.a.DEFAULT_DRAG_MODE].forEach(t=>{e[t].items.forEach(e=>{if(!b.f.get(e.key))return;const[t,i,n]=e.key.split(".");this.store$.dispatch(g.a.set({key:n,value:e.value}))})});const t=this.preferencesService.savedPreferences;let i=Le.b.SERVER;b.f.get(b.d.CLIENT_RENDERING)&&(this.muPDFService.initWorker(),y.g.isDefined(null==t?void 0:t.hybridMode)?i=t.hybridMode?Le.b.HYBRID:Le.b.CLIENT:(i=b.f.get(b.d.CLIENT_RENDERING_HYBRID)?Le.b.HYBRID:Le.b.CLIENT,this.store$.dispatch(u.a.update({payload:{keys:["hybridMode"],value:i===Le.b.HYBRID}})))),this.store$.dispatch(g.a.set({key:"renderingMode",value:i})),[Pn.a.DEFAULT_ZOOM,Pn.a.RENDERING_OPTION].forEach(i=>{e[i].items.forEach(e=>{const[i,n,o]=e.key.split(".");b.f.get(e.key)&&!(null==t?void 0:t.hasOwnProperty(o))&&this.store$.dispatch(u.a.update({payload:{keys:[o],value:e.value}}))})})}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(l.a),M.Mb(l.f),M.Mb(l.d),M.Mb(_n.a),M.Mb(Ke.c),M.Mb(M.h),M.Mb(l.t),M.Mb(qi.b),M.Mb(St.b),M.Mb(l.c),M.Mb(l.k),M.Mb(l.w),M.Mb(Y.c),M.Mb(l.e),M.Mb(s.G),M.Mb(be.b),M.Mb(O.h),M.Mb(Tn.a),M.Mb(h.b),M.Mb(l.p),M.Mb(nt.a),M.Mb(P.d),M.Mb(En.b),M.Mb(Pn.e),M.Mb(u.c),M.Mb(_n.c),M.Mb(l.n))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-main"]],viewQuery:function(e,t){var i;1&e&&(M.Lc(In,!0,M.Q),M.Lc(Rn,!0,M.Q),M.Lc(kn,!0,M.l),M.Lc(H,!0,M.l)),2&e&&(M.sc(i=M.ac())&&(t.sdToastOutlet=i.first),M.sc(i=M.ac())&&(t.sdModalOutlet=i.first),M.sc(i=M.ac())&&(t.mainToolbarRef=i.first),M.sc(i=M.ac())&&(t.annotToolbarRef=i.first))},features:[M.yb([s.G])],decls:1,vars:1,consts:[[4,"ngIf"],[3,"doc","contextmenu"],["mainToolbarRef",""],[3,"formToolActive","annotToolActive","signatureToolActive","display","height",4,"ngIf"],[1,"main-window",3,"contextmenu"],["class","side-view",4,"ngIf"],["class","right-side-view",4,"ngIf"],[1,"main-view",3,"ngClass"],[3,"pdfDoc","overWrittenZoom","ngStyle",4,"ngIf"],["class","page",3,"contextmenu",4,"ngIf"],[1,"sd-toast-container"],["sdToastOutlet",""],[1,"sd-modal-container"],["sdModalOutlet",""],[1,"dialogs"],["width","360","height","300",3,"bodyTemplate","footerTemplate","header","headerIcon",4,"ngIf"],[3,"doc","immediatePrintConfig","finish",4,"ngIf"],[3,"pdfDoc"],[3,"formToolActive","annotToolActive","signatureToolActive"],[1,"side-view"],[1,"right-side-view"],[3,"pdfDoc","overWrittenZoom","ngStyle"],[1,"page",3,"contextmenu"],["width","360","height","300",3,"bodyTemplate","footerTemplate","header","headerIcon"],["dialogBody",""],["dialogFooter",""],[1,"password-dialog-label"],["autofocus","true","size","tiny","type","password",3,"ngClass","placeholder","readonly","ngModel","ngModelChange","keydown.enter"],["class","password-dialog-error",4,"ngIf"],[1,"password-dialog-error"],["color","primary","size","small",1,"ep-button",3,"disabled","click"],[3,"doc","immediatePrintConfig","finish"]],template:function(e,t){1&e&&M.Dc(0,Gn,21,17,"ng-container",0),2&e&&M.jc("ngIf",!t.loading)},styles:["@media print{[_nghost-%COMP%]   *[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   sd-print-view[_ngcontent-%COMP%]{display:block}}[_nghost-%COMP%]{display:block;width:100%;height:100%}sd-tiny-toolbar[_ngcontent-%COMP%], sd-toolbar[_ngcontent-%COMP%]{z-index:3}.pre-wrap[_ngcontent-%COMP%]{white-space:pre-wrap}.main-window[_ngcontent-%COMP%]{width:100%;-ms-flex-negative:1;flex-shrink:1}.main-view[_ngcontent-%COMP%], .main-window[_ngcontent-%COMP%]{height:100%;overflow:hidden}.main-view[_ngcontent-%COMP%]{display:block;position:relative}sd-content-view[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%;display:block}nav[_ngcontent-%COMP%]{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;float:left;-webkit-box-sizing:border-box;box-sizing:border-box;width:56px;height:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding-top:8px;border:1px #d7d7d7;background:#fff;-webkit-box-shadow:1px 0 2px 0 hsla(0,0%,42.4%,.12);box-shadow:1px 0 2px 0 hsla(0,0%,42.4%,.12);z-index:1}nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30px;height:30px;margin:13px}nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-bookmark[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-list[_ngcontent-%COMP%]{font-size:20px}nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-annotation-list[_ngcontent-%COMP%]{font-size:18px}nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-redaction2[_ngcontent-%COMP%]{font-size:20px}nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-clip[_ngcontent-%COMP%]{font-size:19px}nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-formfield[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .papycon-sign-list[_ngcontent-%COMP%]{font-size:20px}.side-view[_ngcontent-%COMP%]{display:block;height:100%;position:relative;float:left}aside.side-view-toggle-button[_ngcontent-%COMP%]{color:#363636;display:-webkit-box;display:-ms-flexbox;display:flex;float:left;-webkit-box-sizing:border-box;box-sizing:border-box;width:20px;height:100%;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background-color:#f4f4f4;border:1px solid #dadada;border-left:none;border-top-right-radius:2px;border-bottom-right-radius:2px;font-size:12px;cursor:pointer}aside.side-view-toggle-button.right[_ngcontent-%COMP%]{float:right;border:1px solid #dadada;border-right:none;border-top-left-radius:2px;border-bottom-left-radius:2px}sd-side-view[_ngcontent-%COMP%]{height:100%;position:relative}.side-btn[_ngcontent-%COMP%]{z-index:1;left:0}.dap-btn[_ngcontent-%COMP%], .side-btn[_ngcontent-%COMP%]{position:absolute;bottom:50%;cursor:pointer}.dap-btn[_ngcontent-%COMP%]{z-index:1000;right:0}.right-side-view[_ngcontent-%COMP%]{display:block;height:100%;position:relative;float:right}pu-toast[_ngcontent-%COMP%]{position:absolute;top:0;z-index:5}pu-toast.small-screen[_ngcontent-%COMP%]{top:68px;right:16px;display:none}.sd-toast-container[_ngcontent-%COMP%]{position:absolute;top:40px;right:50px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;pointer-events:none}sd-toast[_ngcontent-%COMP%]{position:fixed;top:102px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}span.page[_ngcontent-%COMP%]{position:absolute;bottom:20px;right:40px;font-size:12px;color:#82959e}p#modal-title[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0}p#modal-title[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{font-size:20px;margin-right:5px}p#modal-title[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:14px;font-weight:700}[_nghost-%COMP%]     .ui-progressbar .ui-progressbar-value-animate{-webkit-transition:initial;transition:initial}button.modal-button[_ngcontent-%COMP%]{height:30px;margin-bottom:0;font-size:12px}.dialog-body[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Regular,sans-serif;color:#6c6c6c;margin-bottom:32px}.dialog-body[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{display:inherit;font-family:inherit;margin:0}pu-progress-bar[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:32px}.password-dialog-label[_ngcontent-%COMP%]{color:#6c6c6c;margin-top:10px}.password-dialog-error[_ngcontent-%COMP%], .password-dialog-label[_ngcontent-%COMP%]{font-size:12px;line-height:20px;font-family:NotoSans-Medium,sans-serif}.password-dialog-error[_ngcontent-%COMP%]{color:#e4002b}pu-input[_ngcontent-%COMP%]{width:100%;margin-top:2px}pu-input.error[_ngcontent-%COMP%]  input{border-color:#e4002b}sd-dialog[_ngcontent-%COMP%]{z-index:4}@media screen and (max-width:548px){aside.side-view-toggle-button[_ngcontent-%COMP%], nav[_ngcontent-%COMP%]{display:none}.right-side-view[_ngcontent-%COMP%], .side-view[_ngcontent-%COMP%]{position:absolute;width:100%;z-index:1}.sd-toast-container[_ngcontent-%COMP%]{top:32px;right:16px}}"],data:{animation:[Object(r.m)("sideViewAnimation",[Object(r.l)("void => true",[Object(r.k)({transform:"translateY(calc(100% - 100px))"}),Object(r.e)("400ms cubic-bezier(0.86, 0, 0.07, 1)",Object(r.k)({transform:"translateY(0)"}))]),Object(r.l)("true => void",[Object(r.k)({zIndex:1,position:"absolute"}),Object(r.e)("400ms cubic-bezier(0.86, 0, 0.07, 1)",Object(r.k)({transform:"translateY(calc(100% - 53px))"}))])])]},changeDetection:0}),e})();const qn=["mainMenu"],Zn=["sideViewMenuRef"],Xn=["iconMenuRef"],Yn=["dragToolMenuRef"],Kn=["toolbarMenuRef"],Qn=["rightSectionMenu"];function Jn(e,t){if(1&e&&M.Nb(0,"pu-menu",11,12),2&e){const e=M.dc(3);M.jc("menus",e.mainMenus)("ngStyle",e.mainMenuStyle)}}function eo(e,t){if(1&e){const e=M.Tb();M.Sb(0,"button",13),M.Zb("click",(function(){return M.uc(e),M.dc(3).onMenuImageClick()}))("mousedown",(function(t){return M.uc(e),M.dc(3).stopPropagation(t)}))("touchstart",(function(t){return M.uc(e),M.dc(3).stopPropagation(t)})),M.ec(1,"translate"),M.Nb(2,"i",14),M.Rb()}2&e&&M.jc("title",M.fc(1,1,"MENU"))}function to(e,t){if(1&e&&M.Nb(0,"pu-menu",19,20),2&e){const e=M.dc(4);M.jc("menus",e.sideViewMenus)}}function io(e,t){if(1&e){const e=M.Tb();M.Sb(0,"div",15),M.Sb(1,"button",16),M.Zb("click",(function(){return M.uc(e),M.dc(3).onSideViewMenuClick()}))("mousedown",(function(t){return M.uc(e),M.dc(3).stopPropagation(t)}))("touchstart",(function(t){return M.uc(e),M.dc(3).stopPropagation(t)})),M.Nb(2,"i",17),M.Rb(),M.Dc(3,to,2,1,"pu-menu",18),M.Rb()}if(2&e){const e=M.dc(3);M.zb(1),M.Ab("color",e.sideViewVisible?"primary":"dark"),M.zb(2),M.jc("ngIf",e.sideViewMenus.length>0)}}function no(e,t){1&e&&M.Nb(0,"div",7)}function oo(e,t){if(1&e){const e=M.Tb();M.Sb(0,"button",24),M.Zb("click",(function(i){M.uc(e);const n=t.$implicit;return M.dc(4).onClickCustomUI(n,i)})),M.Nb(1,"i",25),M.Rb()}if(2&e){const e=t.$implicit;M.jc("title",e.label),M.zb(1),M.jc("ngClass",e.icon)}}function so(e,t){if(1&e){const e=M.Tb();M.Sb(0,"button",30),M.Zb("click",(function(){return M.uc(e),M.dc(5).saveDoc()})),M.ec(1,"translate"),M.Nb(2,"i",31),M.Rb()}if(2&e){const e=M.dc(5);M.jc("disabled",!e.doc)("title",M.fc(1,2,"SAVE"))}}function ro(e,t){if(1&e){const e=M.Tb();M.Sb(0,"button",32),M.Zb("click",(function(){return M.uc(e),M.dc(5).printDoc()})),M.ec(1,"translate"),M.Nb(2,"i",33),M.Rb()}if(2&e){const e=M.dc(5);M.jc("disabled",!e.doc)("title",M.fc(1,2,"PRINT"))}}function ao(e,t){if(1&e){const e=M.Tb();M.Sb(0,"button",34),M.Zb("click",(function(){return M.uc(e),M.dc(5).downloadDoc()})),M.ec(1,"translate"),M.Nb(2,"i",35),M.Rb()}if(2&e){const e=M.dc(5);M.jc("disabled",!e.doc)("title",M.fc(1,2,"DOWNLOAD"))}}function co(e,t){if(1&e&&(M.Sb(0,"div",26),M.Dc(1,so,3,4,"button",27),M.Dc(2,ro,3,4,"button",28),M.Dc(3,ao,3,4,"button",29),M.Rb()),2&e){const e=M.dc(4);M.zb(1),M.jc("ngIf",e.runtimeEnv.get(e.RuntimeEnvKey.MAIN_TOOLBAR_SAVE)&&e.hasSavePermission&&!e.isEbookMode()&&!e.hidableMenus[e.HidableView.TOOLBAR_SAVE]),M.zb(1),M.jc("ngIf",(e.runtimeEnv.get(e.RuntimeEnvKey.PRINT_BROWSER)||e.runtimeEnv.get(e.RuntimeEnvKey.PRINT_PLUGIN))&&e.hasPrintPermission&&!e.hidableMenus[e.HidableView.TOOLBAR_PRINT]),M.zb(1),M.jc("ngIf",e.runtimeEnv.get(e.RuntimeEnvKey.MAIN_MENU_DOWNLOAD)&&e.hasDownloadPermission&&!e.isVu&&!e.hidableMenus[e.HidableView.TOOLBAR_DOWNLOAD])}}function lo(e,t){if(1&e){const e=M.Tb();M.Sb(0,"button",24),M.Zb("click",(function(i){M.uc(e);const n=t.$implicit;return M.dc(4).onClickCustomUI(n,i)})),M.Nb(1,"i",25),M.Rb()}if(2&e){const e=t.$implicit;M.jc("title",e.label),M.zb(1),M.jc("ngClass",e.icon)}}function ho(e,t){if(1&e&&(M.Sb(0,"section",21),M.Dc(1,oo,2,2,"button",22),M.Dc(2,co,4,3,"div",23),M.Dc(3,lo,2,2,"button",22),M.Rb()),2&e){const e=M.dc(3);M.zb(1),M.jc("ngForOf",e.leftSectionFirstCustomUI),M.zb(1),M.jc("ngIf",!e.runtimeEnv.get(e.RuntimeEnvKey.FILE_MENUS_UI)),M.zb(1),M.jc("ngForOf",e.leftSectionLastCustomUI)}}function uo(e,t){if(1&e&&(M.Sb(0,"section",4),M.Dc(1,Jn,2,2,"pu-menu",5),M.Dc(2,eo,3,3,"button",6),M.Nb(3,"div",7),M.Dc(4,io,4,2,"div",8),M.Dc(5,no,1,0,"div",9),M.Dc(6,ho,4,3,"section",10),M.Rb()),2&e){const e=M.dc(2);M.zb(1),M.jc("ngIf",e.mainMenus.length>0),M.zb(1),M.jc("ngIf",e.mainMenus.length>0&&e.hidableLeftMenus),M.zb(2),M.jc("ngIf",e.isVisibleSideViewButton()),M.zb(1),M.jc("ngIf",!e.runtimeEnv.get(e.RuntimeEnvKey.FILE_MENUS_UI)),M.zb(1),M.jc("ngIf",!e.runtimeEnv.get(e.RuntimeEnvKey.FILE_MENUS_UI)&&!e.leftSectionFirstCustomUI.length)}}function po(e,t){if(1&e&&(M.Qb(0),M.Nb(1,"pu-dropdown",42),M.Pb()),2&e){const e=M.dc(3);M.zb(1),M.jc("disabled",!e.doc)("options",e.scaleDropdownOptions)("executableOptions",e.scaleDropdownExecutableOptions)("boxWidth",120)("optionHeight",36)("formControl",e.scaleDropdownFormControl)}}function go(e,t){if(1&e){const e=M.Tb();M.Sb(0,"button",44),M.Zb("click",(function(){M.uc(e);const t=M.dc(4);return t.activeFitMode?t.fitToWidth():t.fitToHeight()})),M.ec(1,"translate"),M.Nb(2,"i",45),M.Rb()}if(2&e){const e=M.dc(4);M.jc("ngClass",e.activeFitMode?"fit-width2":"fit-height2")("disabled",!e.doc)("title",M.fc(1,4,e.activeFitMode?"FIT_TO_WIDTH_2":"FIT_TO_HEIGHT_2")),M.zb(2),M.jc("ngClass",e.activeFitMode?"papycon-fit-width2":"papycon-fit-height2")}}function fo(e,t){if(1&e&&(M.Qb(0),M.Dc(1,go,3,6,"button",43),M.Pb()),2&e){const e=M.dc(3);M.zb(1),M.jc("ngIf",e.fitMenuVisible)}}function bo(e,t){if(1&e){const e=M.Tb();M.Sb(0,"button",46),M.Zb("click",(function(){return M.uc(e),M.dc(3).onMoreMenuButtonClick()}))("mousedown",(function(t){return M.uc(e),M.dc(3).stopPropagation(t)}))("touchstart",(function(t){return M.uc(e),M.dc(3).stopPropagation(t)})),M.Nb(1,"i",25),M.Nb(2,"i",47),M.Rb()}if(2&e){const e=M.dc(3);M.jc("title",null==e.activeMoreMenu?null:e.activeMoreMenu.label),M.zb(1),M.jc("ngClass",null==e.activeMoreMenu?null:e.activeMoreMenu.icon)}}function mo(e,t){if(1&e){const e=M.Tb();M.Sb(0,"button",51),M.Zb("click",(function(){return M.uc(e),M.dc(4).onDragToolMenuExpandClick()}))("mousedown",(function(t){return M.uc(e),M.dc(4).stopPropagation(t)}))("touchstart",(function(t){return M.uc(e),M.dc(4).stopPropagation(t)})),M.Nb(1,"i",45),M.Nb(2,"i",47),M.Rb()}if(2&e){const e=M.dc(4);M.zb(1),M.jc("ngClass","papycon-"+e.getSelectedDragMode().icon)}}function vo(e,t){if(1&e&&M.Nb(0,"pu-icon-menu",52,53),2&e){const e=M.dc(4);M.jc("iconMenus",e.dragToolMenus)}}function So(e,t){if(1&e&&(M.Sb(0,"div",48),M.Dc(1,mo,3,1,"button",49),M.Dc(2,vo,2,1,"pu-icon-menu",50),M.Rb()),2&e){const e=M.dc(3);M.zb(1),M.jc("ngIf",e.dragToolMenus.length>0),M.zb(1),M.jc("ngIf",e.dragToolMenus.length>0)}}function yo(e,t){if(1&e&&(M.Sb(0,"section",36),M.Dc(1,po,2,6,"ng-container",0),M.Dc(2,fo,2,1,"ng-container",0),M.Sb(3,"div",37),M.Dc(4,bo,3,2,"button",38),M.Nb(5,"pu-icon-menu",39,40),M.Rb(),M.Dc(7,So,3,2,"div",41),M.Rb()),2&e){const e=M.dc(2);M.zb(1),M.jc("ngIf",e.runtimeEnv.get(e.RuntimeEnvKey.MAIN_TOOLBAR_SCALE)),M.zb(1),M.jc("ngIf",e.runtimeEnv.get(e.RuntimeEnvKey.MAIN_TOOLBAR_FIT)),M.zb(2),M.jc("ngIf",e.runtimeEnv.get(e.MergedRuntimeEnvKey.MORE_MENU)&&0<e.iconMenus.length&&!e.isEbookMode()),M.zb(1),M.jc("iconMenus",e.iconMenus),M.zb(2),M.jc("ngIf",!e.isEbookMode()&&e.runtimeEnv.get(e.MergedRuntimeEnvKey.DRAG_MODE)&&e.hidableDragMode&&e.getSelectedDragMode())}}function Mo(e,t){if(1&e){const e=M.Tb();M.Sb(0,"button",61),M.Zb("click",(function(){return M.uc(e),M.dc(4).onToolbarMenuClick()}))("mousedown",(function(t){return M.uc(e),M.dc(4).stopPropagation(t)}))("touchstart",(function(t){return M.uc(e),M.dc(4).stopPropagation(t)})),M.ec(1,"translate"),M.Nb(2,"i",45),M.Rb()}if(2&e){const e=M.dc(4);M.Eb("active",e.isToolbarActive()),M.jc("title",M.fc(1,4,e.activeToolbarMenu.name)),M.zb(2),M.jc("ngClass",e.activeToolbarMenu.icon)}}function xo(e,t){if(1&e){const e=M.Tb();M.Sb(0,"button",62),M.Zb("click",(function(){return M.uc(e),M.dc(4).onToolbarExpandClick()}))("mousedown",(function(t){return M.uc(e),M.dc(4).stopPropagation(t)}))("touchstart",(function(t){return M.uc(e),M.dc(4).stopPropagation(t)})),M.Nb(1,"i",63),M.Rb()}}function Oo(e,t){if(1&e&&M.Nb(0,"pu-menu",64,65),2&e){const e=M.dc(4);M.jc("menus",e.toolbarMenus)}}function Po(e,t){if(1&e&&(M.Sb(0,"div",57),M.Dc(1,Mo,3,6,"button",58),M.Dc(2,xo,2,0,"button",59),M.Dc(3,Oo,2,1,"pu-menu",60),M.Rb()),2&e){const e=M.dc(3);M.zb(1),M.jc("ngIf",e.activeToolbarMenu),M.zb(1),M.jc("ngIf",e.canToolbarExpand),M.zb(1),M.jc("ngIf",e.toolbarMenus.length>0)}}function Co(e,t){if(1&e){const e=M.Tb();M.Sb(0,"button",66),M.Zb("click",(function(t){M.uc(e);const i=M.dc(3);return i.dapMenuItem.command(t,i.dapMenuItem)}))("mousedown",(function(t){return M.uc(e),M.dc(3).stopPropagation(t)}))("touchstart",(function(t){return M.uc(e),M.dc(3).stopPropagation(t)})),M.Nb(1,"i",67),M.Rb()}if(2&e){const e=M.dc(3);M.Ab("color",e.rightSideViewVisible&&e.rightSideViewMode===e.RightSideViewMode.DAP?"primary":"dark")}}function wo(e,t){if(1&e&&(M.Sb(0,"section",54),M.Dc(1,Po,4,3,"div",55),M.Dc(2,Co,2,1,"button",56),M.Rb()),2&e){const e=M.dc(2);M.zb(1),M.jc("ngIf",e.canShowAnnotToolbar||e.canShowFormToolbar||e.canShowSignatureToolbar),M.zb(1),M.jc("ngIf",e.isDAP()&&e.runtimeEnv.get(e.RuntimeEnvKey.DAP_VIEW)&&e.windowResponsiveBasis.width<=e.windowWidth)}}function _o(e,t){if(1&e&&(M.Qb(0),M.Dc(1,uo,7,5,"section",1),M.Dc(2,yo,8,5,"section",2),M.Dc(3,wo,3,2,"section",3),M.Pb()),2&e){const e=M.dc();M.zb(1),M.jc("ngIf",!e.hidableMenus[e.HidableView.TOOLBAR_LEFT]),M.zb(1),M.jc("ngIf",!e.hidableMenus[e.HidableView.TOOLBAR_CENTER]),M.zb(1),M.jc("ngIf",!e.hidableMenus[e.HidableView.TOOLBAR_RIGHT])}}function To(e,t){if(1&e&&(M.Qb(0),M.Sb(1,"button",74),M.Zb("click",(function(){return t.$implicit.command()})),M.Nb(2,"i"),M.Rb(),M.Pb()),2&e){const e=t.$implicit,i=M.dc(3);M.zb(1),M.jc("title",e.label)("disabled",!i.doc),M.Ab("color",i.isActiveSideView(e.data)?"primary":"dark"),M.zb(1),M.Bb(e.icon)}}function Eo(e,t){if(1&e&&(M.Qb(0),M.Dc(1,To,3,5,"ng-container",73),M.Pb()),2&e){const e=t.$implicit;M.zb(1),M.jc("ngForOf",e.items)}}function Io(e,t){if(1&e){const e=M.Tb();M.Qb(0),M.Sb(1,"section",68),M.Sb(2,"section",69),M.Sb(3,"button",70),M.Zb("click",(function(){return M.uc(e),M.dc().closeSideViewToolbar()})),M.ec(4,"translate"),M.Nb(5,"i",71),M.Rb(),M.Nb(6,"div",7),M.Rb(),M.Sb(7,"section",72),M.Dc(8,Eo,2,1,"ng-container",73),M.Rb(),M.Rb(),M.Pb()}if(2&e){const e=M.dc();M.zb(3),M.jc("title",M.fc(4,2,"CLOSE")),M.zb(5),M.jc("ngForOf",e.sideViewMenus)}}let Ro=(()=>{class e{constructor(e,t,i,n,r,a,c,l,h,d,u,g,f,b,m,v,S,M,x,O,P,C,w){this.contentService=t,this.annotService=i,this.dialogService=n,this.changeDetectorRef=r,this.menuService=a,this.documentService=c,this.downloadService=l,this.toastService=h,this.shortcutService=d,this.viewerService=u,this.subscriptionService=g,this.actionHistoryService=f,this.annotSelectedService=b,this.store$=m,this.translatePipe=v,this.acroFormService=S,this.productService=M,this.changeService=x,this.customUIService=O,this.selectTextService=P,this.scrollController=C,this.toolbarService=w,this.RESPONSIVE_SIZE=811,this.canUndo=!1,this.canRedo=!1,this.activeItem=[],this.sideViewVisible=!1,this.moreMenuIconArrayMap=[{label:this.translatePipe.transform("SINGLE_PAGE_VIEW"),icon:"papycon papycon-"+s.p.LIST2},{label:this.translatePipe.transform("SINGLE_PAGE_CONTINUOUS"),icon:"papycon papycon-"+s.p.ONE_PAGE_CONTINUOUS3},{label:this.translatePipe.transform("TWO_PAGE_VIEW"),icon:"papycon papycon-"+s.p.TWO_PAGE3},{label:this.translatePipe.transform("TWO_PAGE_CONTINUOUS"),icon:"papycon papycon-"+s.p.TWO_PAGE_CONTINUOUS3}],this.mainMenus=[],this.sideViewMenus=[],this.iconMenus=[],this.dragToolMenus=[],this.toolbarMenus=[],this.isOpenedSideView=!1,this.hasSignedSignature=!1,this.pageNoFormControl=new o.h(1),this.scaleDropdownFormControl=new o.h,this.mainMenuStyle={left:"0",top:"100%"},this.rightSectionMenus=[{items:[]}],this.isFullScreen=y.g.isFullscreenMode(),this.annotToolMenuItem={label:this.translatePipe.transform("TOOLBAR_ANNOT"),command:(e,t)=>{this.lastClickedRightSectionMenuItem=t,this.selectedMenuItem=t,this.toggleAnnotToolbar(),this.activeRightSectionMenu(this.parent.annotationUse,t),this.changeDetectorRef.markForCheck()},icon:"papycon papycon-edit"},this.formToolMenuItem={label:this.translatePipe.transform("TOOLBAR_FORM"),command:(e,t)=>{this.lastClickedRightSectionMenuItem=t,this.selectedMenuItem=t,this.toggleFormToolbar(),this.activeRightSectionMenu(this.parent.isFormToolActive,t),this.changeDetectorRef.markForCheck()},icon:"papycon papycon-formtools"},this.searchMenuItem={label:this.translatePipe.transform("SEARCH"),command:(e,t)=>{this.lastClickedRightSectionMenuItem=t,this.selectedMenuItem=t,this.toggleSearchTool(),this.activeRightSectionMenu(this.searchToolActive,t),this.changeDetectorRef.markForCheck()},icon:"papycon papycon-search"},this.fullscreenMenuItem={label:this.translatePipe.transform("SLIDESHOW"),command:(e,t)=>{this.toggleFullScreen(),this.changeDetectorRef.markForCheck()}},this.dapMenuItem={label:this.translatePipe.transform("DAP_DOCUMENT"),command:(e,t)=>{this.lastClickedRightSectionMenuItem=t,this.selectedMenuItem=t,this.toggleDapView(),this.activeRightSectionMenu(this.rightSideViewVisible&&this.rightSideViewMode===p.a.DAP,t),this.changeDetectorRef.markForCheck()},icon:"papycon papycon-composite-document"},this.hidableMenus={},this.leftSectionFirstCustomUI=[],this.leftSectionLastCustomUI=[],this.parent=e}get RuntimeEnvKey(){return b.d}get MergedRuntimeEnvKey(){return b.c}get runtimeEnv(){return b.f}get scaleDropdownOptions(){return vt.c}get scaleDropdownExecutableOptions(){return[{label:this.translatePipe.transform("FIT_TO_HEIGHT_2"),icon:"papycon papycon-fit-height2",command:()=>this.fitToHeight()},{label:this.translatePipe.transform("FIT_TO_WIDTH_2"),icon:"papycon papycon-fit-width2",command:()=>this.fitToWidth()}]}get isVu(){return"StreamDocs Vu!"===this.productService.getProductType()}get simpleSearchDisabled(){return!this.doc}get isFormAvailable(){return b.f.get(b.c.FORM)&&this.documentService.checkAuthority(l.j.FORM)}get isAnnotAvailable(){return b.f.get(b.c.ANNOTATION)&&this.documentService.checkAuthority(l.j.ANNOTATION)}get isFormHighlightAvailable(){return b.f.get(b.d.MAIN_TOOLBAR_ACRO_FORM_HIGHLIGHT)&&this.documentService.checkAuthority(l.j.FORM)}get isEnabledForm(){return this.documentService.checkAuthority(l.j.FORM)}get isEnabledAnnotation(){return this.documentService.checkAuthority(l.j.ANNOTATION)}get isDividerVisible(){return this.RESPONSIVE_SIZE<this.windowWidth?b.f.get(b.c.ANNOT_TOOLBAR)&&(this.isFormHighlightAvailable||this.isAnnotAvailable):this.isFormHighlightAvailable&&!this.hidableMenus[f.a.TOOLBAR_FORM]}get RightSideViewMode(){return p.a}get fitMenuVisible(){return b.f.get(b.d.MAIN_TOOLBAR_FIT)&&!this.isEbookMode()}get scaleStep(){return 10*this.scaleRatio}get rightSectionMenuItems(){return this.rightSectionMenus&&this.rightSectionMenus[0]&&this.rightSectionMenus[0].items||[]}get scale(){return this._scale}set scale(e){this._scale=e,this.scaleDropdownFormControl.setValue({label:Math.round(this._scale)+"%",value:this._scale},{emitEvent:!1})}get hasSavePermission(){return this.documentService.checkAuthority(l.j.SAVE_DOCUMENT)}get hasDownloadPermission(){return this.documentService.checkAuthority(l.j.DOWNLOAD_DOCUMENT)}get hasPrintPermission(){return this.documentService.checkAuthority(l.j.PRINT_DOCUMENT)}get windowWidth(){return y.F.width}get windowResponsiveBasis(){return y.F.responsiveBasis}get hidableDragMode(){return!this.hidableMenus[f.a.TOOLBAR_DRAG_MODE_SELECT_ANNOTATION]||!this.hidableMenus[f.a.TOOLBAR_DRAG_MODE_SELECT_TEXT]||!this.hidableMenus[f.a.TOOLBAR_DRAG_MODE_MOVE]}get hidableTools(){return!this.hidableMenus[f.a.TOOLBAR_ANNOTATION]||!this.hidableMenus[f.a.TOOLBAR_FORM]}get hidableLeftMenus(){return!this.hidableMenus[f.a.TOOLBAR_EBOOK]||!this.hidableMenus[f.a.TOOLBAR_PREFERENCES]||!this.hidableMenus[f.a.TOOLBAR_DOCUMENT_INFO]}get HidableView(){return f.a}get disableStyle(){return this.viewerService.disableStyle}ngOnInit(){this.subscriptionService.push(this.store$.pipe(Object(g.f)("pageCount")).subscribe({next:e=>{this.pageCount=e,this.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(g.f)("currentPageNo")).subscribe({next:e=>{this.currentPageNo=e,this.pageNoFormControl.setValue(this.currentPageNo)}}),this.store$.pipe(Object(g.f)("rightSideViewMode")).subscribe({next:e=>{this.rightSideViewMode=e,this.activeRightSectionMenu(this.isActiveTotalSearch(),this.searchMenuItem),this.activeRightSectionMenu(this.isActiveDapPanel(),this.dapMenuItem),this.changeDetectorRef.detectChanges()}}),this.store$.pipe(Object(g.f)("rightSideViewVisible")).subscribe({next:e=>{this.rightSideViewVisible=e,this.activeRightSectionMenu(this.searchToolActive||this.isActiveTotalSearch(),this.searchMenuItem),this.activeRightSectionMenu(this.isActiveDapPanel(),this.dapMenuItem),this.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(g.f)("scaleRatio")).subscribe({next:e=>this.scaleRatio=e}),this.store$.pipe(Object(g.f)("degree")).subscribe({next:e=>{this.degree=e,b.f.get(b.d.MORE_MENU_VIEW_MODE)||(this.activeMoreMenu={label:this.translatePipe.transform("ROTATE_CW"),icon:"papycon papycon-rotate"})}}),this.store$.pipe(Object(g.f)("scale")).subscribe({next:e=>{this.scale=e,this.changeDetectorRef.detectChanges()}}),this.store$.pipe(Object(g.f)("dragMode")).subscribe({next:e=>{e!==d.a.SELECT_ANNOT&&(this.dragMode=e,this.changeDetectorRef.markForCheck())}}),this.store$.pipe(Object(g.f)("viewMode")).subscribe({next:e=>{this.viewMode=e,b.f.get(b.d.MORE_MENU_VIEW_MODE)&&(this.activeMoreMenu=this.moreMenuIconArrayMap[e]),this.initRightSectionMenu(),this.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(g.f)("searchToolActive")).subscribe({next:e=>{this.searchToolActive=e,this.activeRightSectionMenu(this.searchToolActive,this.searchMenuItem),this.changeDetectorRef.markForCheck()}}),y.F.windowResize$.subscribe({next:()=>this.resize()}),this.contentService.disableContinuousViewMode$.pipe(Be.a(1),S.a(e=>e)).subscribe({next:e=>{this.changeViewMode(0),this.buildMenu(),this.changeDetectorRef.markForCheck(),this.toastService.create({toastStyle:St.c.NOTIFICATION,header:this.translatePipe.transform("INFO"),content:this.translatePipe.transform("MS_BROWSER_CANNOT_USE_CONTINUOUS_VIEW")})}}),this.documentService.authorityUpdate$.subscribe({next:()=>{this.initRightSectionMenu(),this.initActiveToolBarName(),this.render(!0)}}),this.documentService.pdfInfo$.subscribe({next:e=>this.docInfo=e}),this.store$.pipe(Object(g.f)("rightSideViewVisible")).pipe(S.a(y.g.isDefined)).subscribe({next:()=>this.changeDetectorRef.markForCheck()}),this.store$.pipe(Object(g.f)("sideViewVisible")).subscribe({next:e=>{this.sideViewVisible=e,y.t.runAsync(()=>this.changeDetectorRef.markForCheck())}}),this.store$.pipe(Object(g.f)("sideViewMode")).subscribe({next:e=>{this.sideViewMode=e}}),y.F.fullScreenState$.subscribe({next:e=>{this.isFullScreen=e,this.changeDetectorRef.markForCheck()}}),this.scaleDropdownFormControl.valueChanges.pipe(Pt.a(0)).subscribe({next:e=>{const t=e.value,i="string"==typeof t?Number.parseFloat(t):t;this.setZoom(Number.isNaN(i)?this.scale:i)}}),this.acroFormService.hasSignedSignature.subscribe({next:e=>{this.hasSignedSignature=e,this.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(g.e)([f.a.TOOLBAR,f.a.TOOLBAR_LEFT,f.a.TOOLBAR_CENTER,f.a.TOOLBAR_RIGHT])).subscribe({next:({hiddenViews:e})=>{Object.assign(this.hidableMenus,e),this.parent.annotationUse=!1,this.parent.isFormToolActive=!1,this.parent.isSignatureToolActive=!1,this.activeItem=[],this.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(g.e)([f.a.TOOLBAR_EBOOK,f.a.TOOLBAR_PREFERENCES,f.a.TOOLBAR_DOCUMENT_INFO,f.a.TOOLBAR_SAVE,f.a.TOOLBAR_PRINT,f.a.TOOLBAR_DOWNLOAD,f.a.TOOLBAR_SLIDESHOW,f.a.TOOLBAR_VIEW_MODE,f.a.TOOLBAR_ROTATE,f.a.TOOLBAR_ZOOM,f.a.TOOLBAR_DRAG_MODE_SELECT_TEXT,f.a.TOOLBAR_DRAG_MODE_MOVE,f.a.TOOLBAR_ANNOTATION,f.a.TOOLBAR_FORM,f.a.TOOLBAR_RIGHT_MENU,f.a.TOOLBAR_SEARCH,f.a.TOOLBAR_FULL_SCREEN])).subscribe({next:({hiddenViews:e})=>{var t;Object.assign(this.hidableMenus,e),this.buildMenu(),this.hidableMenus[f.a.TOOLBAR_VIEW_MODE]&&this.hidableMenus[f.a.TOOLBAR_ROTATE]&&this.hidableMenus[f.a.TOOLBAR_ZOOM]&&(null===(t=this.iconMenuRef)||void 0===t||t.closeMenu()),this.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(g.e)([f.a.TOOLBAR_ANNOTATION,f.a.TOOLBAR_FORM,f.a.TOOLBAR_RIGHT_MENU,f.a.TOOLBAR_SEARCH,f.a.TOOLBAR_FULL_SCREEN])).subscribe({next:({hiddenViews:e})=>{Object.assign(this.hidableMenus,e),this.initRightSectionMenu(),this.hidableMenus[f.a.TOOLBAR_ANNOTATION]&&this.parent.annotationUse&&(this.parent.annotationUse=!1,this.activeItem=[]),this.hidableMenus[f.a.TOOLBAR_FORM]&&this.parent.isFormToolActive&&(this.parent.isFormToolActive=!1,this.activeItem=[]),this.changeDetectorRef.markForCheck()}}),this.store$.pipe(Object(g.e)([f.a.SIDE_VIEW,f.a.SIDE_VIEW_THUMBNAIL,f.a.SIDE_VIEW_BOOKMARK,f.a.SIDE_VIEW_ANNOTATION,f.a.SIDE_VIEW_REDACTION,f.a.SIDE_VIEW_EMBEDDED_FILE,f.a.SIDE_VIEW_FORM,f.a.SIDE_VIEW_SIGNATURE])).subscribe({next:({latestHiddenView:e,hiddenViews:t})=>{const[i,n]=e.split(".");Object.assign(this.hidableMenus,t),this.sideViewVisible&&!this.hidableMenus[f.a.SIDE_VIEW]&&this.sideViewMode===n&&(this.hidableMenus[e]&&this.sideViewMode===n&&this.store$.dispatch(g.a.set({key:"sideViewVisible",value:!1})),this.changeDetectorRef.markForCheck())}}),this.documentService.openedDocument$.subscribe({next:e=>{e?this.enableFormControl():(this.parent.isFormToolActive=!1,this.activeItem=[],this.disableFormControl())}}),this.toolbarService.toggleAnnotToolbar$.subscribe({next:()=>{this.parent.annotationUse=!1,this.changeDetectorRef.markForCheck()}}),this.toolbarService.toggleFormToolbar$.subscribe({next:()=>{this.parent.isFormToolActive=!1,this.changeDetectorRef.markForCheck()}}),this.customUIService.customButtonUI$.subscribe({next:e=>{this.leftSectionFirstCustomUI=e.filter(e=>"TOOLBAR.LEFT_SECTION.FIRST"===e.position),this.leftSectionLastCustomUI=e.filter(e=>"TOOLBAR.LEFT_SECTION.LAST"===e.position),this.render(!0)}})),this.render(!1),this.subscribeZoomScroll(),this.subscribeZoomHotkey(),this.subscribePageNo(),this.subscribeAnnotTool(),this.subscribeUndoRedo(),this.subscribePrint(),this.pageNoFormControl.reset(this.currentPageNo)}ngOnChanges(){this.initRightSectionMenu(),this.render(!0),this.initActiveMenu()}stopPropagation(e){e.stopImmediatePropagation(),e.stopPropagation()}isEbookMode(){return 4===this.viewMode}isDAP(){var e;return"DAP"===(null===(e=this.docInfo)||void 0===e?void 0:e.DocumentType)}get canDrawAnnot(){return this.documentService.checkAuthority(l.j.DRAW_ANNOTATION)&&this.documentService.checkAuthority(l.j.ANNOTATION)}get canDrawForm(){return this.documentService.checkAuthority(l.j.DRAW_ANNOTATION)&&this.documentService.checkAuthority(l.j.FORM)&&!this.documentService.isDAPType()}get canToolbarExpand(){var e;return 0!==this.toolbarMenus.length&&(null===(e=this.toolbarMenus[0].items)||void 0===e?void 0:e.length)>1}get canShowAnnotToolbar(){return this.canDrawAnnot&&b.f.get(b.c.ANNOTATION)&&!this.isEbookMode()&&!this.hidableMenus[f.a.TOOLBAR_ANNOTATION]}get canShowFormToolbar(){return this.canDrawForm&&!this.hasSignedSignature&&b.f.get(b.c.FORM)&&!this.isEbookMode()&&!this.hidableMenus[f.a.TOOLBAR_FORM]}get canShowSignatureToolbar(){return this.canDrawAnnot&&b.f.get(b.c.SIGNATURE)&&!this.isEbookMode()}onMenuImageClick(){var e;null===(e=this.mainMenu)||void 0===e||e.toggleMenu()}onSideViewMenuClick(){var e,t;null===(e=this.mainMenu)||void 0===e||e.closeMenu(),this.windowWidth<this.windowResponsiveBasis.width?this.openSideViewToolbar():null===(t=this.sideViewMenuRef)||void 0===t||t.toggleMenu()}onMoreMenuButtonClick(){this.iconMenuRef&&this.iconMenuRef.toggleMenu()}onDragToolMenuExpandClick(){var e;null===(e=this.dragToolMenuRef)||void 0===e||e.toggleMenu()}onToolbarMenuClick(){var e,t,i,n,o;switch(null===(e=this.mainMenu)||void 0===e||e.closeMenu(),null===(t=this.iconMenuRef)||void 0===t||t.closeMenu(),null===(i=this.dragToolMenuRef)||void 0===i||i.closeMenu(),null===(n=this.sideViewMenuRef)||void 0===n||n.closeMenu(),null===(o=this.toolbarMenuRef)||void 0===o||o.closeMenu(),this.activeToolbarMenu.name){case"TOOLBAR_ANNOT":this.toggleAnnotToolbar();break;case"TOOLBAR_FORM":this.toggleFormToolbar();break;case"TOOLBAR_SIGNATURE":this.toggleSignatureToolbar()}}onToolbarExpandClick(){var e;null===(e=this.toolbarMenuRef)||void 0===e||e.toggleMenu()}onSideViewMenuSelect(e){this.sideViewMode===e?this.store$.dispatch(g.a.set({key:"sideViewVisible",value:!this.sideViewVisible})):(this.store$.dispatch(g.a.set({key:"sideViewMode",value:e})),this.store$.dispatch(g.a.set({key:"sideViewVisible",value:!0})))}toggleAnnotToolbar(){this.parent.annotationUse=!this.parent.annotationUse,this.activeToolbarMenu.name="TOOLBAR_ANNOT",this.activeToolbarMenu.icon="papycon-edit"}toggleFormToolbar(){this.parent.isFormToolActive=!this.parent.isFormToolActive,this.activeToolbarMenu.name="TOOLBAR_FORM",this.activeToolbarMenu.icon="papycon-formtools"}toggleSignatureToolbar(){this.parent.isSignatureToolActive=!this.parent.isSignatureToolActive,this.activeToolbarMenu.name="TOOLBAR_SIGNATURE",this.activeToolbarMenu.icon="papycon-sign"}zoom(e){this.setZoom(this.scale+e)}setZoom(e){"number"==typeof e&&isFinite(e)&&!isNaN(e)&&this.publishScale(e)}fitToWidth(){this.contentService.publishFitMode(0),this.activeFitMode=0,this.changeDetectorRef.markForCheck()}fitToHeight(){this.contentService.publishFitMode(1),this.activeFitMode=1,this.changeDetectorRef.markForCheck()}toggleFullScreen(){this.isFullScreen?y.F.exitFullScreen():y.F.enterFullScreen()}isFullscreenSupport(){return Boolean(y.g.getFullscreenMethod(Element.prototype))}toggleSearchTool(){this.documentService.checkAuthority(l.j.SEARCH_TEXT)&&!this.simpleSearchDisabled&&this.store$.dispatch(g.a.set(this.rightSideViewVisible&&this.rightSideViewMode===p.a.TextSearch?{key:"rightSideViewVisible",value:!1}:{key:"searchToolActive",value:!this.searchToolActive}))}rotate(e){this.store$.dispatch(g.a.set({key:"degree",value:y.u.normalizeDegree(this.degree+e)}))}saveDoc(e,t){this.changeService.saveDocument(void 0,e,t)}downloadDoc(){this.downloadService.downloadDocument()}downloadOriginalDoc(){this.downloadService.downloadOriginalDocument()}printDoc(){this.dialogService.toggleDialogVisibility(h.c.PRINT,!0)}changeViewMode(e){if(4===e)return this.doc?void setTimeout(()=>window.open("view/sd/ebook/"+this.doc.streamdocsId)):void alert(this.translatePipe.transform("SELECT_FILE"));this.viewMode!==e&&this.store$.dispatch(g.a.set({key:"viewMode",value:e}))}toggleEbookMode(){this.viewerService.toggleEbookMode()}dragModeClicked(e){e&&(this.store$.dispatch(g.a.set({key:"dragMode",value:e})),this.store$.dispatch(a.a.unselectTool()),this.selectTextService.publishSelectedText(null),this.annotService.closeEditor())}getSelectedDragMode(){if(this.dragToolMenus.length>0&&this.dragToolMenus[0].menus.length>0)return this.dragToolMenus[0].menus.find(e=>e.mode===this.dragMode)||(this.dragModeClicked(this.dragToolMenus[0].menus[0].mode),this.dragToolMenus[0].menus[0])}isToolbarActive(){return!!(this.parent.annotationUse||this.parent.isFormToolActive||this.parent.isSignatureToolActive)}styleOfDragToolMenuItem(e){return this.dragMode===e&&null===this.annotTool?"white":"dark"}toggleDapView(){this.rightSideViewMode===p.a.DAP?this.store$.dispatch(g.a.set(this.rightSideViewVisible?{key:"rightSideViewVisible",value:!1}:{key:"rightSideViewVisible",value:!0})):(this.store$.dispatch(g.a.set({key:"rightSideViewVisible",value:!0})),this.store$.dispatch(g.a.set({key:"rightSideViewMode",value:p.a.DAP})))}searchBtnClass(){return this.searchToolActive||this.rightSideViewVisible&&this.rightSideViewMode===p.a.TextSearch?"primary":"dark"}dapBtnClass(){return this.rightSideViewVisible&&this.rightSideViewMode===p.a.DAP?"primary":"dark"}isActiveTotalSearch(){return this.rightSideViewVisible&&this.rightSideViewMode===p.a.TextSearch}isActiveDapPanel(){return this.rightSideViewVisible&&this.rightSideViewMode===p.a.DAP}isRightSectionMenuVisible(e){switch(e){case this.dapMenuItem:return this.isDAP()&&b.f.get(b.d.DAP_VIEW);case this.searchMenuItem:return this.documentService.checkAuthority(l.j.SEARCH_TEXT)&&b.f.get(b.c.TEXT_SEARCH_VIEW)&&!this.isEbookMode();case this.fullscreenMenuItem:return this.isFullscreenSupport()&&b.f.get(b.d.MAIN_TOOLBAR_FULLSCREEN)&&!y.F.isMobile();default:return!0}}getRightSectionMenuColor(e){switch(e){case this.annotToolMenuItem:return this.parent.annotationUse?"primary":"dark";case this.formToolMenuItem:return this.parent.isFormToolActive?"primary":"dark";case this.dapMenuItem:return this.dapBtnClass();case this.searchMenuItem:return this.searchBtnClass();default:return"dark"}}getMenuIcon(e){return"function"==typeof e.icon?e.icon():e.icon}onRightSectionMenuExpanderClick(){void 0!==this.rightSectionMenu&&this.rightSectionMenu.toggleMenu()}disableRightSectionMenu(e){return!this.doc&&this.fullscreenMenuItem.label!==e.label}activeRightSectionMenu(e,t){this.parent.annotationUse?this.activeItem=this.activeItem.filter(e=>e.label!==this.translatePipe.transform("TOOLBAR_FORM")):this.parent.isFormToolActive&&(this.activeItem=this.activeItem.filter(e=>e.label!==this.translatePipe.transform("TOOLBAR_ANNOT"))),e?this.activeItem.push(t):this.activeItem=this.activeItem.filter(e=>e.label!==t.label)}onClickCustomUI(e,t){e.onclick(Mn.a.simplifyMouseEvent(t))}subscribeAnnotTool(){this.subscriptionService.push(this.store$.pipe(Object(a.c)()).subscribe({next:e=>{this.annotTool=e,this.changeDetectorRef.markForCheck()}}))}resize(){void 0!==this.mainMenu&&this.mainMenu.closeMenu(),this.initRightSectionMenu(),this.render()}render(e=!0){this.buildMenu(),e&&this.changeDetectorRef.markForCheck()}buildMenu(){this.mainMenus=this.menuService.buildMainMenu(this),this.sideViewMenus=this.buildSideViewMenu(),this.iconMenus=this.buildIconMenu(),this.dragToolMenus=this.buildDragToolMenu(),this.toolbarMenus=this.buildToolbarMenu(),this.disableMenuWhenNoDoc(),this.changeDetectorRef.markForCheck()}disableMenuWhenNoDoc(){this.doc||[...this.mainMenus].forEach(e=>{e.items.forEach(e=>{["PREFERENCE","SLIDESHOW"].map(e=>this.translatePipe.transform(e)).includes(e.label)||(e.disabled=!0)})})}buildSideViewMenu(){const e={items:[]};return b.f.get(b.c.SIDE_VIEW_LEFT)&&(b.f.get(b.c.THUMBNAIL_VIEW)&&!this.hidableMenus[f.a.SIDE_VIEW_THUMBNAIL]&&e.items.push({label:this.translatePipe.transform("THUMBNAIL"),icon:"papycon papycon-list",command:()=>this.onSideViewMenuSelect(yn.a.Thumbnail),data:yn.a.Thumbnail}),!b.f.get(b.c.OUTLINE_VIEW)||this.isDAP()||this.hidableMenus[f.a.SIDE_VIEW_BOOKMARK]||e.items.push({label:this.translatePipe.transform("OUTLINE"),icon:"papycon papycon-bookmark",command:()=>this.onSideViewMenuSelect(yn.a.Outline),data:yn.a.Outline}),this.doc&&(!b.f.get(b.d.ANNOTATION_VIEW)||this.isDAP()||this.isEbookMode()||!this.isEnabledAnnotation||this.hidableMenus[f.a.SIDE_VIEW_ANNOTATION])||e.items.push({label:this.translatePipe.transform("ANNOTATION_LIST"),icon:"papycon papycon-annotation-list",command:()=>this.onSideViewMenuSelect(yn.a.Annotation),data:yn.a.Annotation}),this.doc&&(!b.f.get(b.d.REDACTION_VIEW)||this.isDAP()||this.isEbookMode()||!this.isEnabledAnnotation||this.hidableMenus[f.a.SIDE_VIEW_REDACTION])||e.items.push({label:this.translatePipe.transform("REDACT"),icon:"papycon papycon-redaction2",command:()=>this.onSideViewMenuSelect(yn.a.Redaction),data:yn.a.Redaction}),!b.f.get(b.c.EMBEDDED_FILE_VIEW)||this.isDAP()||this.hidableMenus[f.a.SIDE_VIEW_EMBEDDED_FILE]||e.items.push({label:this.translatePipe.transform("EMBEDDED_FILE"),icon:"papycon papycon-clip",command:()=>this.onSideViewMenuSelect(yn.a.EmbeddedFile),data:yn.a.EmbeddedFile}),this.doc&&(!b.f.get(b.d.ACRO_FORM_VIEW)||this.isDAP()||this.isEbookMode()||!this.isEnabledForm||this.hidableMenus[f.a.SIDE_VIEW_FORM])||e.items.push({label:this.translatePipe.transform("FORM_TOOL"),icon:"papycon papycon-formfield",command:()=>this.onSideViewMenuSelect(yn.a.Form),data:yn.a.Form}),!b.f.get(b.d.SIGNATURE_VIEW)||this.isDAP()||this.isEbookMode()||this.hidableMenus[f.a.SIDE_VIEW_SIGNATURE]||e.items.push({label:this.translatePipe.transform("SIGNATURE_LIST"),icon:"papycon papycon-sign-list",command:()=>this.onSideViewMenuSelect(yn.a.Signature),data:yn.a.Signature})),[e]}buildDragToolMenu(){const e=[];return b.f.get(b.d.DRAG_MODE_MOVE)&&!this.hidableMenus[f.a.TOOLBAR_DRAG_MODE_MOVE]&&e.push({mode:d.a.MOVE,icon:s.p.HAND,action:()=>this.dragModeClicked(d.a.MOVE),isActive:()=>this.dragMode===d.a.MOVE,tooltip:this.translatePipe.transform("SCROLL_MODE")}),b.f.get(b.d.DRAG_MODE_SELECT_TEXT)&&!this.hidableMenus[f.a.TOOLBAR_DRAG_MODE_SELECT_TEXT]&&e.push({mode:d.a.SELECT_TEXT,icon:s.p.SELECTION_ANNOTATION_TEXT,action:()=>this.dragModeClicked(d.a.SELECT_TEXT),isActive:()=>this.dragMode===d.a.SELECT_TEXT,tooltip:this.translatePipe.transform("SELECT_TEXT")}),!b.f.get(b.d.MORE_MENU_MAGNIFY)||this.hidableMenus[f.a.TOOLBAR_ZOOM]||y.F.isTouchableDevice()||e.push({mode:d.a.MAGNIFY,icon:s.p.AREA_ZOOM2,action:()=>this.dragModeClicked(d.a.MAGNIFY),isActive:()=>this.dragMode===d.a.MAGNIFY,tooltip:this.translatePipe.transform("MAGNIFY_TOOL")}),[{menus:e,align:"center"}]}buildIconMenu(){const e=[];return b.f.get(b.d.MORE_MENU_VIEW_MODE)&&!this.hidableMenus[f.a.TOOLBAR_VIEW_MODE]&&e.push({label:this.translatePipe.transform("PAGE_DISPLAY"),align:y.F.isSmallWidth()?"justify":"left",wrap:y.F.isSmallWidth()?"wrap":"nowrap",menus:[{icon:s.p.LIST2,size:18,action:()=>(this.changeViewMode(0),this.iconMenuRef.closeMenu(),!0),isActive:()=>0===this.viewMode,tooltip:this.translatePipe.transform("SINGLE_PAGE_VIEW"),disabled:!1},{icon:s.p.ONE_PAGE_CONTINUOUS3,size:16,action:()=>(this.changeViewMode(1),this.iconMenuRef.closeMenu(),!0),isActive:()=>1===this.viewMode,tooltip:this.translatePipe.transform("SINGLE_PAGE_CONTINUOUS"),disabled:!1},{icon:s.p.TWO_PAGE3,size:18,action:()=>(this.changeViewMode(2),this.iconMenuRef.closeMenu(),!0),isActive:()=>2===this.viewMode,tooltip:this.translatePipe.transform("TWO_PAGE_VIEW"),disabled:!1},{icon:s.p.TWO_PAGE_CONTINUOUS3,size:16,action:()=>(this.changeViewMode(3),this.iconMenuRef.closeMenu(),!0),isActive:()=>3===this.viewMode,tooltip:this.translatePipe.transform("TWO_PAGE_CONTINUOUS"),disabled:!1}]}),b.f.get(b.d.MORE_MENU_ROTATION)&&!this.hidableMenus[f.a.TOOLBAR_ROTATE]&&e.push({label:this.translatePipe.transform("ROTATE"),align:y.F.isSmallWidth()?"justify":"left",menus:[{icon:s.p.REVERSE,size:16,action:()=>(this.rotate(-90),!0),tooltip:this.translatePipe.transform("ROTATE_CCW"),disabled:!1},{icon:s.p.ROTATE,size:16,action:()=>(this.rotate(90),!0),tooltip:this.translatePipe.transform("ROTATE_CW"),disabled:!1}]}),this.doc||e.forEach(e=>{["PAGE_DISPLAY"].map(e=>this.translatePipe.transform(e)).includes(e.label)||e.menus.forEach(e=>e.disabled=!0)}),e}buildToolbarMenu(){const e={items:[]};return this.canShowAnnotToolbar&&e.items.push({label:this.translatePipe.transform("TOOLBAR_ANNOT"),icon:"papycon papycon-edit",command:()=>this.toggleAnnotToolbar()}),this.canShowFormToolbar&&e.items.push({label:this.translatePipe.transform("TOOLBAR_FORM"),icon:"papycon papycon-formtools",command:()=>this.toggleFormToolbar()}),this.canShowSignatureToolbar&&e.items.push({label:this.translatePipe.transform("TOOLBAR_SIGNATURE"),icon:"papycon papycon-sign",command:()=>this.toggleSignatureToolbar()}),this.isDAP()&&b.f.get(b.d.DAP_VIEW)&&y.F.isSmallWidth()&&e.items.push(this.dapMenuItem),[e]}publishScale(e){this.store$.dispatch(g.a.set({key:"scale",value:e})),this.contentService.publishFitMode(null)}subscribeZoomScroll(){y.F.windowScrollEvent$.pipe(S.a(()=>!this.scrollController.stateHolder.isSlideshow),S.a(e=>void 0!==e.srcEvent&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey||e.srcEvent.altKey))).subscribe({next:e=>{e.srcEvent.preventDefault(),this.zoom(this.scaleStep*(e.delta>0?1:-1))}})}subscribeZoomHotkey(){this.subscriptionService.push(Q.a(this.shortcutService.getShortcutEvent(Y.a.INCREASE_ZOOM),this.shortcutService.getShortcutEvent(Y.a.INCREASE_ZOOM_NUMPAD)).subscribe({next:e=>{e.preventDefault(),e.stopPropagation(),this.zoom(this.scaleStep)}}),Q.a(this.shortcutService.getShortcutEvent(Y.a.DECREASE_ZOOM),this.shortcutService.getShortcutEvent(Y.a.DECREASE_ZOOM_NUMPAD)).subscribe({next:e=>{e.preventDefault(),e.stopPropagation(),this.zoom(-this.scaleStep)}}),Q.a(this.shortcutService.getShortcutEvent(Y.a.RESTORE_ZOOM),this.shortcutService.getShortcutEvent(Y.a.RESTORE_ZOOM_NUMPAD)).subscribe({next:e=>{e.preventDefault(),e.stopPropagation(),this.zoom(100-this.scale)}}))}subscribeUndoRedo(){this.subscriptionService.push(this.actionHistoryService.availableUndoCount$.subscribe({next:e=>{this.canUndo=e>0,this.mainMenus.length&&y.F.width<640&&(this.mainMenus[0].items.find(e=>e.label===this.translatePipe.transform("UNDO")).disabled=!this.canUndo)}}),this.actionHistoryService.availableRedoCount$.subscribe({next:e=>{this.canRedo=e>0,this.mainMenus.length&&y.F.width<640&&(this.mainMenus[0].items.find(e=>e.label===this.translatePipe.transform("REDO")).disabled=!this.canRedo)}}),this.shortcutService.getShortcutEvent(Y.a.UNDO_ACTION).pipe(S.a(()=>b.f.get(b.d.SHORTCUT_UNDO_REDO))).subscribe({next:e=>{this.annotSelectedService.unselectAll(),this.actionHistoryService.undo(),e.preventDefault()}}),Q.a(this.shortcutService.getShortcutEvent(Y.a.REDO_ACTION),this.shortcutService.getShortcutEvent(Y.a.REDO_ACTION2)).pipe(S.a(()=>b.f.get(b.d.SHORTCUT_UNDO_REDO))).subscribe({next:e=>{this.annotSelectedService.unselectAll(),this.actionHistoryService.redo(),e.preventDefault()}}))}subscribePrint(){this.subscriptionService.push(this.shortcutService.getShortcutEvent(Y.a.PRINT).subscribe({next:e=>{e.preventDefault(),!b.f.get(b.d.PRINT_BROWSER)&&!b.f.get(b.d.PRINT_PLUGIN)||!this.hasPrintPermission||this.hidableMenus[f.a.TOOLBAR_PRINT]?this.toastService.create({toastStyle:St.c.FAILURE,header:this.translatePipe.transform("INFO"),content:this.translatePipe.transform("NO_PRINT_PERMISSION")}):this.dialogService.toggleDialogVisibility(h.c.PRINT,!0)}}))}subscribePageNo(){this.subscriptionService.push(this.contentService.pageEndNoLoaded$.subscribe({next:()=>this.changeDetectorRef.markForCheck()}),this.contentService.pageNo$.subscribe({next:e=>this.pageNoFormControl.setValue(e.pageNo)}))}isVisibleSideViewButton(){return!!(b.f.get(b.c.THUMBNAIL_VIEW)||b.f.get(b.c.OUTLINE_VIEW)||b.f.get(b.c.EMBEDDED_FILE_VIEW)||b.f.get(b.d.ANNOTATION_VIEW)||b.f.get(b.d.SIGNATURE_VIEW)||b.f.get(b.d.ACRO_FORM_VIEW)||b.f.get(b.d.REDACTION_VIEW))}initActiveToolBarName(){this.canShowAnnotToolbar?this.activeToolbarMenu={name:"TOOLBAR_ANNOT",icon:"papycon papycon-edit"}:this.canShowFormToolbar?this.activeToolbarMenu={name:"TOOLBAR_FORM",icon:"papycon papycon-formtools"}:this.canShowSignatureToolbar&&(this.activeToolbarMenu={name:"TOOLBAR_SIGNATURE",icon:"papycon papycon-sign"})}initRightSectionMenu(){this.rightSectionMenus=[{items:[]}],this.isDAP()&&b.f.get(b.d.DAP_VIEW)&&(this.dapMenuItem.disabled=!1,this.rightSectionMenus[0].items.splice(-1,0,this.dapMenuItem)),this.lastClickedRightSectionMenuItem=this.rightSectionMenus[0].items.includes(this.selectedMenuItem)?this.selectedMenuItem:this.rightSectionMenus[0].items[0]}initActiveMenu(){this.isAnnotAvailable?this.activeRightSectionMenu(!0,this.annotToolMenuItem):this.isFormAvailable&&this.activeRightSectionMenu(!0,this.formToolMenuItem)}enableFormControl(){this.pageNoFormControl.enable(),this.scaleDropdownFormControl.enable()}disableFormControl(){this.pageNoFormControl.disable(),this.scaleDropdownFormControl.disable()}openSideViewToolbar(){this.isOpenedSideView=!0}closeSideViewToolbar(){this.isOpenedSideView=!1}isActiveSideView(e){return!!this.isSideViewMode(e)&&this.sideViewVisible&&this.sideViewMode===e}isSideViewMode(e){return e}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(Hn,1),M.Mb(l.f),M.Mb(l.d),M.Mb(h.b),M.Mb(M.h),M.Mb(On),M.Mb(l.k),M.Mb(l.l),M.Mb(St.b),M.Mb(Y.c),M.Mb(l.w),M.Mb(s.G),M.Mb(l.b),M.Mb(l.c),M.Mb(O.h),M.Mb(P.d),M.Mb(l.a),M.Mb(xn.b),M.Mb(l.e),M.Mb(l.i),M.Mb(w.a),M.Mb(X.a),M.Mb(_.a))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-toolbar"]],viewQuery:function(e,t){var i;1&e&&(M.Lc(qn,!0),M.Lc(Zn,!0),M.Lc(Xn,!0),M.Lc(Yn,!0),M.Lc(Kn,!0),M.Lc(Qn,!0)),2&e&&(M.sc(i=M.ac())&&(t.mainMenu=i.first),M.sc(i=M.ac())&&(t.sideViewMenuRef=i.first),M.sc(i=M.ac())&&(t.iconMenuRef=i.first),M.sc(i=M.ac())&&(t.dragToolMenuRef=i.first),M.sc(i=M.ac())&&(t.toolbarMenuRef=i.first),M.sc(i=M.ac())&&(t.rightSectionMenu=i.first))},inputs:{doc:"doc"},features:[M.yb([On,s.G]),M.xb],decls:2,vars:2,consts:[[4,"ngIf"],["class","left",4,"ngIf"],["class","center",4,"ngIf"],["class","right",4,"ngIf"],[1,"left"],["class","main-menu","size","small",3,"menus","ngStyle",4,"ngIf"],["class","ep-text-button main-menu-button","color","dark",3,"title","click","mousedown","touchstart",4,"ngIf"],[1,"full","divider"],["class","side-view-menu-container",4,"ngIf"],["class","full divider",4,"ngIf"],["class","menu-toolbar",4,"ngIf"],["size","small",1,"main-menu",3,"menus","ngStyle"],["mainMenu",""],["color","dark",1,"ep-text-button","main-menu-button",3,"title","click","mousedown","touchstart"],[1,"papycon","papycon-hamburger-menu"],[1,"side-view-menu-container"],[1,"ep-text-button","side-view-menu",3,"click","mousedown","touchstart"],[1,"papycon","papycon-show-panel2"],["class","side-view-menu","size","small",3,"menus",4,"ngIf"],["size","small",1,"side-view-menu",3,"menus"],["sideViewMenuRef",""],[1,"menu-toolbar"],["class","ep-text-button custom-ui","color","dark",3,"title","click",4,"ngFor","ngForOf"],["class","file-menus",4,"ngIf"],["color","dark",1,"ep-text-button","custom-ui",3,"title","click"],[3,"ngClass"],[1,"file-menus"],["class","ep-text-button save","color","dark",3,"disabled","title","click",4,"ngIf"],["class","ep-text-button print","color","dark",3,"disabled","title","click",4,"ngIf"],["class","ep-text-button download","color","dark",3,"disabled","title","click",4,"ngIf"],["color","dark",1,"ep-text-button","save",3,"disabled","title","click"],[1,"papycon","papycon-save"],["color","dark",1,"ep-text-button","print",3,"disabled","title","click"],[1,"papycon","papycon-print"],["color","dark",1,"ep-text-button","download",3,"disabled","title","click"],[1,"papycon","papycon-download"],[1,"center"],[1,"more-menu-container"],["class","ep-text-button more-button","color","dark",3,"title","click","mousedown","touchstart",4,"ngIf"],[1,"more-menu",3,"iconMenus"],["iconMenuRef",""],["class","integrated-drag-container",4,"ngIf"],["editable","true","height","28","textAlign","left","size","small",1,"scale",3,"disabled","options","executableOptions","boxWidth","optionHeight","formControl"],["class","fit ep-text-button","color","dark",3,"ngClass","disabled","title","click",4,"ngIf"],["color","dark",1,"fit","ep-text-button",3,"ngClass","disabled","title","click"],[1,"papycon",3,"ngClass"],["color","dark",1,"ep-text-button","more-button",3,"title","click","mousedown","touchstart"],[1,"papycon","papycon-chevron3-down","expand-icon"],[1,"integrated-drag-container"],["class","ep-text-button more-button","color","dark",3,"click","mousedown","touchstart",4,"ngIf"],["class","drag-tool-menu",3,"iconMenus",4,"ngIf"],["color","dark",1,"ep-text-button","more-button",3,"click","mousedown","touchstart"],[1,"drag-tool-menu",3,"iconMenus"],["dragToolMenuRef",""],[1,"right"],["class","toolbar-menu-container",4,"ngIf"],["class","ep-text-button dap-button","color","dark",3,"click","mousedown","touchstart",4,"ngIf"],[1,"toolbar-menu-container"],["class","ep-text-button toolbar-menu-button","color","dark",3,"active","title","click","mousedown","touchstart",4,"ngIf"],["class","ep-text-button expand-button","color","dark",3,"click","mousedown","touchstart",4,"ngIf"],["class","toolbar-menu","size","small",3,"menus",4,"ngIf"],["color","dark",1,"ep-text-button","toolbar-menu-button",3,"title","click","mousedown","touchstart"],["color","dark",1,"ep-text-button","expand-button",3,"click","mousedown","touchstart"],[1,"papycon","papycon-chevron3-down"],["size","small",1,"toolbar-menu",3,"menus"],["toolbarMenuRef",""],["color","dark",1,"ep-text-button","dap-button",3,"click","mousedown","touchstart"],[1,"papycon","papycon-composite-document"],[1,"side-view"],[1,"close"],["color","dark",1,"ep-text-button","close-button",3,"title","click"],[1,"papycon","papycon-cross"],[1,"side-view-container"],[4,"ngFor","ngForOf"],[1,"ep-text-button",3,"title","disabled","click"]],template:function(e,t){1&e&&(M.Dc(0,_o,4,3,"ng-container",0),M.Dc(1,Io,9,4,"ng-container",0)),2&e&&(M.jc("ngIf",!t.hidableMenus[t.HidableView.TOOLBAR]),M.zb(1),M.jc("ngIf",t.windowWidth<t.windowResponsiveBasis.width&&t.isOpenedSideView))},directives:[n.t,s.w,n.w,n.s,n.q,s.q,s.k,o.r,o.i],pipes:[T.a],styles:['i[_ngcontent-%COMP%]{line-height:22px}i.papycon-next-symbol2[_ngcontent-%COMP%], i.papycon-previous-symbol2[_ngcontent-%COMP%]{font-size:11px}i.papycon-regular-expression[_ngcontent-%COMP%]{font-size:13px}i.papycon-cross[_ngcontent-%COMP%], i.papycon-hamburger-menu[_ngcontent-%COMP%], i.papycon-minus[_ngcontent-%COMP%], i.papycon-plus2[_ngcontent-%COMP%]{font-size:14px}i.papycon-clip[_ngcontent-%COMP%], i.papycon-edit[_ngcontent-%COMP%], i.papycon-extend[_ngcontent-%COMP%], i.papycon-formtools[_ngcontent-%COMP%], i.papycon-one-page-continuous3[_ngcontent-%COMP%], i.papycon-two-page-continuous3[_ngcontent-%COMP%]{font-size:16px}i.papycon-annotation-list[_ngcontent-%COMP%], i.papycon-area-hide[_ngcontent-%COMP%], i.papycon-area-show[_ngcontent-%COMP%], i.papycon-bookmark[_ngcontent-%COMP%], i.papycon-case-sensitive[_ngcontent-%COMP%], i.papycon-check-mark4[_ngcontent-%COMP%], i.papycon-circle[_ngcontent-%COMP%], i.papycon-dropdown[_ngcontent-%COMP%], i.papycon-fit-height2[_ngcontent-%COMP%], i.papycon-fit-width2[_ngcontent-%COMP%], i.papycon-formfield[_ngcontent-%COMP%], i.papycon-hamburger-menu[_ngcontent-%COMP%], i.papycon-line[_ngcontent-%COMP%], i.papycon-line-measure2[_ngcontent-%COMP%], i.papycon-link[_ngcontent-%COMP%], i.papycon-list[_ngcontent-%COMP%], i.papycon-list-box[_ngcontent-%COMP%], i.papycon-memo3[_ngcontent-%COMP%], i.papycon-pencil[_ngcontent-%COMP%], i.papycon-polygon[_ngcontent-%COMP%], i.papycon-polygon-measure2[_ngcontent-%COMP%], i.papycon-polyline[_ngcontent-%COMP%], i.papycon-polyline-measure2[_ngcontent-%COMP%], i.papycon-radio2-checked[_ngcontent-%COMP%], i.papycon-redaction2[_ngcontent-%COMP%], i.papycon-redo[_ngcontent-%COMP%], i.papycon-revisioncloud[_ngcontent-%COMP%], i.papycon-ruler-hide[_ngcontent-%COMP%], i.papycon-ruler-show[_ngcontent-%COMP%], i.papycon-search[_ngcontent-%COMP%], i.papycon-show-panel[_ngcontent-%COMP%], i.papycon-show-panel2[_ngcontent-%COMP%], i.papycon-sign-list[_ngcontent-%COMP%], i.papycon-square[_ngcontent-%COMP%], i.papycon-text-field[_ngcontent-%COMP%], i.papycon-text-highlight[_ngcontent-%COMP%], i.papycon-text-strikeout[_ngcontent-%COMP%], i.papycon-text-underline[_ngcontent-%COMP%], i.papycon-textbox[_ngcontent-%COMP%], i.papycon-undo[_ngcontent-%COMP%]{font-size:17px}i.papycon-hand[_ngcontent-%COMP%], i.papycon-list2[_ngcontent-%COMP%], i.papycon-two-page3[_ngcontent-%COMP%]{font-size:18px}i.papycon-eraser[_ngcontent-%COMP%], i.papycon-pointer[_ngcontent-%COMP%], i.papycon-selection-annotation-text[_ngcontent-%COMP%], i.papycon-signature[_ngcontent-%COMP%]{font-size:19px}i.papycon-composite-document[_ngcontent-%COMP%], i.papycon-ok[_ngcontent-%COMP%], i.papycon-stamp2[_ngcontent-%COMP%]{font-size:20px}i.papycon-chevron3-down[_ngcontent-%COMP%]{font-size:10px;-webkit-transform:scale(.7);transform:scale(.7);-webkit-transform-origin:50% 50%;transform-origin:50% 50%}i.papycon-chevron3-down.expanded[_ngcontent-%COMP%]{-webkit-transform:scale(.7) rotate(-180deg);transform:scale(.7) rotate(-180deg)}@media screen and (max-width:811px){i.papycon-link[_ngcontent-%COMP%], i.papycon-memo3[_ngcontent-%COMP%]{font-size:14px}i.papycon-eraser[_ngcontent-%COMP%], i.papycon-pointer[_ngcontent-%COMP%], i.papycon-signature[_ngcontent-%COMP%], i.papycon-stamp2[_ngcontent-%COMP%]{font-size:16px}i.papycon-list2[_ngcontent-%COMP%], i.papycon-ok[_ngcontent-%COMP%], i.papycon-one-page-continuous3[_ngcontent-%COMP%]{font-size:17px}i.papycon-callout2[_ngcontent-%COMP%], i.papycon-more-symbol4[_ngcontent-%COMP%]{font-size:19px}}[_nghost-%COMP%]{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;height:42px;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:#fff;border-bottom:1px solid #dadada}.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-4px;width:calc(48px / 2);height:4px;background-color:#f79f1a;border-radius:2px}section[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;-webkit-box-align:center;-ms-flex-align:center;align-items:center}section[_ngcontent-%COMP%] > .divider[_ngcontent-%COMP%]{height:32px;width:1px;background-color:#dadada}section[_ngcontent-%COMP%] > .divider.full[_ngcontent-%COMP%]{height:100%}section.left[_ngcontent-%COMP%]{position:absolute;left:0;top:0}section.left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:calc(48px / 2);height:calc(48px / 2);-webkit-box-sizing:border-box;box-sizing:border-box;margin:calc((42px - (48px / 2)) / 2) calc((48px - (48px / 2)) / 2)}section.left[_ngcontent-%COMP%]   pu-menu.main-menu[_ngcontent-%COMP%]{width:148px}section.left[_ngcontent-%COMP%]   button.custom-ui[_ngcontent-%COMP%]{font-size:17px}section.left[_ngcontent-%COMP%]   section.menu-toolbar[_ngcontent-%COMP%]{margin-left:16px}section.left[_ngcontent-%COMP%]   section.menu-toolbar[_ngcontent-%COMP%]   .file-menus[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}section.left[_ngcontent-%COMP%]   section.menu-toolbar[_ngcontent-%COMP%]   .file-menus[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}section.left[_ngcontent-%COMP%]   section.menu-toolbar[_ngcontent-%COMP%]   .file-menus[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:20px}section.left[_ngcontent-%COMP%]   div.side-view-menu-container[_ngcontent-%COMP%]{position:relative;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}section.left[_ngcontent-%COMP%]   div.side-view-menu-container[_ngcontent-%COMP%]   pu-menu.side-view-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;width:148px}section.center[_ngcontent-%COMP%]{margin-left:20px}section.center[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}section.center[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i.papycon-chevron3-down[_ngcontent-%COMP%]{margin-left:5px}section.center[_ngcontent-%COMP%]   pu-dropdown[_ngcontent-%COMP%]{width:78px}section.center[_ngcontent-%COMP%]   pu-dropdown[_ngcontent-%COMP%]   .select-box[_ngcontent-%COMP%]{height:30px}section.center[_ngcontent-%COMP%]   button.fit[_ngcontent-%COMP%]{height:calc(48px / 2);width:calc(48px / 2);margin-left:10px}section.center[_ngcontent-%COMP%]   div.integrated-drag-container[_ngcontent-%COMP%], section.center[_ngcontent-%COMP%]   div.more-menu-container[_ngcontent-%COMP%]{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%}section.center[_ngcontent-%COMP%]   div.integrated-drag-container[_ngcontent-%COMP%]   button.more-button[_ngcontent-%COMP%], section.center[_ngcontent-%COMP%]   div.more-menu-container[_ngcontent-%COMP%]   button.more-button[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;height:34px;width:41px}section.center[_ngcontent-%COMP%]   div.more-menu-container[_ngcontent-%COMP%]   pu-icon-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;height:105px}section.center[_ngcontent-%COMP%]   div.integrated-drag-container[_ngcontent-%COMP%]   pu-icon-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;height:54px}section.center[_ngcontent-%COMP%]   .more-menu-container[_ngcontent-%COMP%], section.center[_ngcontent-%COMP%]   pu-dropdown[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:20px}section.center[_ngcontent-%COMP%]   .integrated-drag-container[_ngcontent-%COMP%]{margin-left:12px}section.right[_ngcontent-%COMP%]{position:absolute;right:0;top:0;margin-right:12px}section.right[_ngcontent-%COMP%]   div.toolbar-menu-container[_ngcontent-%COMP%]{height:100%}section.right[_ngcontent-%COMP%]   div.toolbar-menu-container[_ngcontent-%COMP%], section.right[_ngcontent-%COMP%]   div.toolbar-menu-container[_ngcontent-%COMP%]   button.toolbar-menu-button[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}section.right[_ngcontent-%COMP%]   div.toolbar-menu-container[_ngcontent-%COMP%]   button.toolbar-menu-button[_ngcontent-%COMP%]{position:relative;width:calc(48px / 2);height:calc(48px / 2);margin:0}section.right[_ngcontent-%COMP%]   div.toolbar-menu-container[_ngcontent-%COMP%]   button.expand-button[_ngcontent-%COMP%]{height:12px;width:12px;margin-left:5px}section.right[_ngcontent-%COMP%]   div.toolbar-menu-container[_ngcontent-%COMP%]   button.expand-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{line-height:inherit}section.right[_ngcontent-%COMP%]   div.toolbar-menu-container[_ngcontent-%COMP%]   pu-menu.toolbar-menu[_ngcontent-%COMP%]{position:absolute;top:100%;right:-12px;min-width:120px}section.right[_ngcontent-%COMP%]   button.dap-button[_ngcontent-%COMP%]{height:28px;width:28px}section.right[_ngcontent-%COMP%]   div.toolbar-menu-container[_ngcontent-%COMP%] + button.dap-button[_ngcontent-%COMP%]{margin-left:20px}.popupmenu-item[_ngcontent-%COMP%]{padding:3px;line-height:16px;display:block;height:auto}@media screen and (max-width:811px){[_nghost-%COMP%]{-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start}section.left[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;position:static}section.center[_ngcontent-%COMP%]   button.fit[_ngcontent-%COMP%]{display:none}section.center[_ngcontent-%COMP%]   .integrated-drag-container[_ngcontent-%COMP%]{margin-left:20px}section.side-view[_ngcontent-%COMP%]{background:#fff;position:absolute;width:100%}.close-button[_ngcontent-%COMP%]{margin:calc((42px - (48px / 2)) / 2) calc((48px - (48px / 2)) / 2)}.close-button.ep-text-button[_ngcontent-%COMP%]{width:24px;height:24px}.close-button.expandable[_ngcontent-%COMP%]{margin-right:0}section.side-view-container[_ngcontent-%COMP%]{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;overflow-x:scroll;overflow-y:hidden;-ms-overflow-style:none;scrollbar-width:none}section.side-view-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}section.side-view-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:calc((42px - (48px / 2)) / 2) calc((48px - (48px / 2)) / 2)}section.side-view-container[_ngcontent-%COMP%]   button.ep-text-button[_ngcontent-%COMP%]{width:24px;height:24px}section.side-view-container[_ngcontent-%COMP%]   button.expandable[_ngcontent-%COMP%]{margin-right:0}}@media screen and (max-width:548px){section.center[_ngcontent-%COMP%]   div.integrated-drag-container[_ngcontent-%COMP%]   pu-icon-menu.more-menu[_ngcontent-%COMP%], section.center[_ngcontent-%COMP%]   div.more-menu-container[_ngcontent-%COMP%]   pu-icon-menu.more-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;height:160px;width:114px;-webkit-box-sizing:border-box;box-sizing:border-box}section.center[_ngcontent-%COMP%]   div.integrated-drag-container[_ngcontent-%COMP%]   pu-icon-menu.drag-tool-menu[_ngcontent-%COMP%], section.center[_ngcontent-%COMP%]   div.more-menu-container[_ngcontent-%COMP%]   pu-icon-menu.drag-tool-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;height:58px;-webkit-box-sizing:border-box;box-sizing:border-box}section.side-view[_ngcontent-%COMP%]{top:0;left:0}}'],changeDetection:0}),e})(),ko=(()=>{class e{}return e.\u0275mod=M.Kb({type:e}),e.\u0275inj=M.Jb({factory:function(t){return new(t||e)},providers:[_.a],imports:[[yn.b,P.b,n.c,o.n,o.B,s.l,s.t,s.x]]}),e})();var No=i("hReJ"),Ao=i("nUhZ");let Do=(()=>{class e{constructor(e,t,i,n,o){this.modalParam=e,this.modalService=t,this.agentService=i,this.portalRef=n,this.subscriptionService=o}get status(){return this.modalParam.status}ngOnInit(){this.subscriptionService.push(Ot.a(window,"keydown",{capture:!0}).pipe(S.a(e=>"Escape"===e.key),S.a(()=>this.modalService.lastModal===this.portalRef)).subscribe({next:()=>this.onButtonClick(!1)}))}onButtonClick(e){e&&this.agentService.downloadSDAgent(),this.portalRef.dispose()}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(jt.a),M.Mb(Ke.c),M.Mb(Ao.a),M.Mb(jt.b),M.Mb(s.G))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-module-download"]],features:[M.yb([s.G])],decls:14,vars:12,consts:[["color","grey","size","tiny",1,"ep-button",3,"click"],["color","primary","size","small",1,"ep-button",3,"click"]],template:function(e,t){1&e&&(M.Sb(0,"h3"),M.Fc(1),M.ec(2,"translate"),M.Rb(),M.Sb(3,"main"),M.Sb(4,"div"),M.Fc(5),M.ec(6,"translate"),M.Rb(),M.Sb(7,"button",0),M.Zb("click",(function(){return t.onButtonClick(!0)})),M.Fc(8),M.ec(9,"translate"),M.Rb(),M.Rb(),M.Sb(10,"footer"),M.Sb(11,"button",1),M.Zb("click",(function(){return t.onButtonClick(!1)})),M.Fc(12),M.ec(13,"translate"),M.Rb(),M.Rb()),2&e&&(M.zb(1),M.Gc(M.fc(2,4,"notInstall"===t.status?"INSTALL_PLUGIN":"UPDATE_PLUGIN")),M.zb(4),M.Gc(M.fc(6,6,"notInstall"===t.status?"NO_PRINT_PLUGIN":"NEW_VERSION_AVAILABLE")),M.zb(3),M.Gc(M.fc(9,8,"DOWNLOAD")),M.zb(4),M.Gc(M.fc(13,10,"OK")))},pipes:[T.a],styles:["h3[_ngcontent-%COMP%]{font-size:20px;line-height:28px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e;margin:8px 0}main[_ngcontent-%COMP%]{font-size:13px;line-height:22px;color:#6c6c6c;white-space:pre-wrap}main[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px}footer[_ngcontent-%COMP%]{text-align:right;margin-top:32px}"],changeDetection:0}),e})();var Lo=i("Cojq"),Fo=i("GyhO"),jo=i("EY2u"),zo=i("HDdC"),Vo=i("cp0P"),Bo=i("HUPp"),$o=i("yqQy");function Wo(e,t){if(1&e){const e=M.Tb();M.Qb(0),M.Nb(1,"div",15),M.Sb(2,"span",16),M.Fc(3),M.ec(4,"translate"),M.Rb(),M.Sb(5,"span",17),M.Fc(6),M.ec(7,"translate"),M.Rb(),M.Sb(8,"nav"),M.Sb(9,"button",18),M.Zb("click",(function(){return M.uc(e),M.dc(4).onConfirm(!1)})),M.Fc(10),M.ec(11,"translate"),M.Rb(),M.Rb(),M.Pb()}2&e&&(M.zb(3),M.Gc(M.fc(4,3,"PLUGIN")),M.zb(3),M.Gc(M.fc(7,5,"DESC_PRINT_PLUGIN")),M.zb(4),M.Gc(M.fc(11,7,"PRINT_USING_PLUGIN")))}function Uo(e,t){if(1&e){const e=M.Tb();M.Sb(0,"section",9),M.Sb(1,"pu-radio-button",10),M.Zb("ngModelChange",(function(t){return M.uc(e),M.dc(3).pageOption=t})),M.ec(2,"translate"),M.Rb(),M.Sb(3,"pu-radio-button",11),M.Zb("ngModelChange",(function(t){return M.uc(e),M.dc(3).pageOption=t})),M.ec(4,"translate"),M.Rb(),M.Sb(5,"span",12),M.Fc(6),M.ec(7,"translate"),M.Rb(),M.Sb(8,"pu-input",13),M.Zb("ngModelChange",(function(t){return M.uc(e),M.dc(3).pageRange=t})),M.Rb(),M.Dc(9,Wo,12,9,"ng-container",14),M.Rb()}if(2&e){const e=M.dc(3);M.zb(1),M.jc("label",M.fc(2,11,"ALL"))("ngModel",e.pageOption),M.zb(2),M.jc("label",M.fc(4,13,"SPECIFY_PRINT_RANGE"))("ngModel",e.pageOption),M.zb(2),M.Eb("disabled","partial"!==e.pageOption),M.zb(1),M.Gc(M.fc(7,15,"RANGE")),M.zb(2),M.jc("disabled","partial"!==e.pageOption)("placeholder",e.pageRangePlaceholder)("ngModel",e.pageRange),M.zb(1),M.jc("ngIf",e.runtimeEnv.get(e.RuntimeEnvKey.PRINT_PLUGIN)||e.openedDialogByApi)}}function Go(e,t){if(1&e&&(M.Dc(0,Uo,10,17,"section",8),M.ec(1,"async")),2&e){const e=M.dc(2);M.jc("ngIf",!M.fc(1,1,e.donePrint))}}function Ho(e,t){1&e&&(M.Sb(0,"section",9),M.Sb(1,"span",19),M.Fc(2),M.ec(3,"translate"),M.Rb(),M.Rb()),2&e&&(M.zb(2),M.Gc(M.fc(3,1,"DONE_PRINT_MODAL")))}function qo(e,t){if(1&e){const e=M.Tb();M.Sb(0,"button",20),M.Zb("click",(function(){return M.uc(e),M.dc(2).onClose()})),M.Fc(1),M.ec(2,"translate"),M.Rb(),M.Sb(3,"button",21),M.Zb("click",(function(){return M.uc(e),M.dc(2).onConfirm(!0)})),M.Fc(4),M.ec(5,"translate"),M.Rb()}2&e&&(M.zb(1),M.Gc(M.fc(2,2,"CANCEL")),M.zb(3),M.Gc(M.fc(5,4,"PRINT")))}function Zo(e,t){if(1&e){const e=M.Tb();M.Sb(0,"button",20),M.Zb("click",(function(){return M.uc(e),M.dc(2).onClose(!0)})),M.Fc(1),M.ec(2,"translate"),M.Rb()}2&e&&(M.zb(1),M.Gc(M.fc(2,1,"CLOSE")))}function Xo(e,t){if(1&e){const e=M.Tb();M.Sb(0,"pu-dialog",3),M.Zb("close",(function(){return M.uc(e),M.dc().onClose()})),M.ec(1,"async"),M.ec(2,"async"),M.ec(3,"translate"),M.Dc(4,Go,2,3,"ng-template",null,4,M.Ec),M.Dc(6,Ho,4,3,"ng-template",null,5,M.Ec),M.Dc(8,qo,6,6,"ng-template",null,6,M.Ec),M.Dc(10,Zo,3,3,"ng-template",null,7,M.Ec),M.Rb()}if(2&e){const e=M.tc(5),t=M.tc(7),i=M.tc(9),n=M.tc(11),o=M.dc();M.jc("bodyTemplate",M.fc(1,3,o.donePrint)?t:e)("footerTemplate",M.fc(2,5,o.donePrint)?n:i)("header",M.fc(3,7,"PRINT"))}}function Yo(e,t){if(1&e){const e=M.Tb();M.Sb(0,"div"),M.Sb(1,"img",22),M.Zb("load",(function(){return M.uc(e),M.dc().onLoad()}))("error",(function(t){return M.uc(e),M.dc().onError(t)})),M.Rb(),M.Rb()}if(2&e){const e=t.$implicit,i=t.index,n=M.dc();M.Bc("transform","rotate("+(n.pdfPages[i].r>=180?180:0)+"deg)"),M.zb(1),M.Ab("src",e,M.wc)}}let Ko=(()=>{class e{constructor(e,t,i,n,o,s,r,a,c,l,h,d,u,p,g,f,b,m){this.contentService=e,this.changeDetectorRef=t,this.dataService=i,this.modalService=n,this.toastService=o,this.agentService=s,this.pageService=r,this.changeService=a,this.documentService=c,this.subscriptionService=l,this.dapService=h,this.store$=d,this.translatePipe=u,this.dialogService=p,this.downloadService=g,this.apiEventBridgeService=f,this.authService=b,this.printService=m,this.finish=new M.n,this.pageOption="all",this.pageRange=y.v.EMPTY_STRING,this.printImagesDataUrls=[],this._dialogVisible=!0,this.nLoadedImage=0}get RuntimeEnvKey(){return b.d}get runtimeEnv(){return b.f}get lastCommonModal(){var e;return(null===(e=this.modalService.lastModal)||void 0===e?void 0:e.instance).nestedRef.instance}get dialogVisible(){return this._dialogVisible}get pdfPages(){return this.enablePdfPages||this.pageService.originalPdfPages}get isDAP(){var e;return"DAP"===(null===(e=this.pdfInfo)||void 0===e?void 0:e.DocumentType)}get pageRangePlaceholder(){return this.translatePipe.transform("EX")+" 1-5, 8, 11-13"}get openedDialogByApi(){return this.dialogService.openedDialogByApi}get donePrint(){return this.printService.doneEvent$}ngOnInit(){if(this.subscriptionService.push(this.contentService.docValidation$.subscribe({next:e=>{this.docValidity=e}}),this.store$.pipe(Object(g.f)("currentPageNo")).subscribe({next:e=>this.currentPageNo=e}),this.documentService.pdfInfo$.pipe(S.a(y.g.isDefined)).subscribe({next:e=>{this.pdfInfo=e,"DAP"===this.pdfInfo.DocumentType&&this.initDapInfoSubscription()}})),this.immediatePrintConfig)return this._dialogVisible=!1,void this.immediatePrint();b.f.get(b.d.PRINT_BROWSER)||!b.f.get(b.d.PRINT_PLUGIN)||this.openedDialogByApi||(this._dialogVisible=!1,this.onConfirm(!1))}ngOnDestroy(){this.printImagesDataUrls.splice(0)}onConfirm(e){var t;if(!window.print||y.F.isKakaoInAppBrowser())return this.onClose(),e&&this.authService.deleteCookie("accessToken"),null===(t=this.modalService.lastModal)||void 0===t||t.dispose(),void this.modalService.createCommonModal({type:Ke.a.ERROR,content:this.translatePipe.transform("NOT_SUPPORTED_BROWSER_PRINT"),confirmButton:!0}).addOnDisposeListener(()=>this.finishPrint());this.modalService.createCommonModal({type:Ke.a.BASIC,title:this.translatePipe.transform("PRINT"),content:this.translatePipe.transform("PREPARING_TO_PRINT")}),this.subscriptionService.set("mainSub",Fo.a(this.isDAP?this.validateDAPInfo():jo.a,e?this.validatePageRange():this.checkLatestModuleInstallation(),this.saveChanges(),e?this.getDejavuToken():jo.a,e?this.printUsingBrowser():this.printUsingModule()).subscribe(e=>{var t;null===(t=this.modalService.lastModal)||void 0===t||t.dispose(),this.modalService.createCommonModal({type:Ke.a.INFO,content:e,confirmButton:!0}).addOnDisposeListener(()=>this.finishPrint())},e=>{var t,i;this.apiEventBridgeService.immediatePrintStartSrc.error("Failed to print."),null===(t=this.modalService.lastModal)||void 0===t||t.dispose(),this.modalService.createCommonModal({type:Ke.a.ERROR,content:null!==(i=null==e?void 0:e.message)&&void 0!==i?i:this.translatePipe.transform("FAILED_TO_PRINT"),confirmButton:!0}).addOnDisposeListener(()=>this.finishPrint())},()=>{var t;if(e)return this.dataService.getPostPrint(this.tempDocId,this.dejavuToken,this.tempDocId!==this.doc.streamdocsId?this.doc.streamdocsId:void 0).subscribe(),void this.authService.deleteCookie("accessToken");null===(t=this.modalService.lastModal)||void 0===t||t.dispose(),this.toastService.create({toastStyle:St.c.SUCCESS,content:this.translatePipe.transform("PRINT_COMPLETED")}).addOnDisposeListener(()=>this.finishPrint()),this.onClose()}))}onClose(e){if(this.dialogService.openedDialogByApi=!1,!Boolean(e)&&(y.F.isTablet()||y.F.isMobile()||y.F.isSamsungBrowser()))return this.dialogService.toggleDialogVisibility(h.c.PRINT,!0),void this.printService.finishPrint();this.dialogService.toggleDialogVisibility(h.c.PRINT,!1),this.nLoadedImage=0,this.finish.emit()}onLoad(){var e,t;++this.nLoadedImage,null===(e=this.lastCommonModal)||void 0===e||e.setProgressValue(Math.floor(this.nLoadedImage/this.pages.length*100)),this.nLoadedImage===this.pages.length&&(window.print(),this.apiEventBridgeService.immediatePrintStartSrc.next(),null===(t=this.modalService.lastModal)||void 0===t||t.dispose(),this.onClose())}onError(e){var t;Logger.error("Could not load image",e),this.changeDetectorRef.markForCheck(),null===(t=this.modalService.lastModal)||void 0===t||t.dispose(),this.modalService.createCommonModal({type:Ke.a.ERROR,content:this.translatePipe.transform("FAILED_TO_LOAD_DOC_TO_PRINT"),confirmButton:!0}).addOnDisposeListener(()=>this.finishPrint())}trackByImage(e){return e}immediatePrint(){"BROWSER"===this.immediatePrintConfig.type?(this.immediatePrintConfig.pageRange&&"all"!==this.immediatePrintConfig.pageRange&&(this.pageRange=this.immediatePrintConfig.pageRange,this.pageOption="partial"),this.onConfirm(!0)):this.onConfirm(!1)}initDapInfoSubscription(){this.subscriptionService.push(this.documentService.pageDescriptions$.pipe(S.a(e=>y.g.isDefined(e))).subscribe({next:e=>{this.pageDescriptions=e,this.calcEnablePages()}}))}calcEnablePages(){const e=[];this.pageService.originalPdfPages.forEach((t,i)=>{this.dapService.isDisabled(this.dapService.getPageRefId(t))&&e.push(i)}),this.enablePdfPages=y.g.deepClone(this.pageService.originalPdfPages),e.sort((e,t)=>t-e),e.forEach(e=>this.enablePdfPages.splice(e,1))}finishPrint(){var e;null===(e=this.subscriptionService.get("mainSub"))||void 0===e||e.unsubscribe(),this.dialogVisible||this.onClose()}validateDAPInfo(){return new zo.a(e=>{var t,i;return this.pageDescriptions?this.pageDescriptions.reduce((e,t)=>e.includes(t.refId)?e:e.concat(t.refId),[]).every(e=>this.dapService.isDisabled(e))?(null===(i=this.modalService.lastModal)||void 0===i||i.dispose(),void this.modalService.createCommonModal({type:Ke.a.WARN,content:this.translatePipe.transform("ALL_DAP_DISABLED"),confirmButton:!0}).addOnDisposeListener(()=>this.finishPrint())):void e.complete():(null===(t=this.modalService.lastModal)||void 0===t||t.dispose(),void this.modalService.createCommonModal({type:Ke.a.WARN,content:this.translatePipe.transform("FAILED_TO_PRINT_TEMPORARILY"),confirmButton:!0}).addOnDisposeListener(()=>this.finishPrint()))})}validatePageRange(){return new zo.a(e=>{var t,i,n;if(null===(t=this.modalService.lastModal)||void 0===t||t.dispose(),this.modalService.createCommonModal({type:Ke.a.BASIC,title:this.translatePipe.transform("PRINT"),content:this.translatePipe.transform("CHECKING_PAGE_RANGE")}),"all"!==this.pageOption?(this.pages=_i.b.parse(this.pageRange,{min:1,max:this.pdfPages.length}),this.immediatePrintConfig&&(this.pages=this.pages.map(e=>e+1))):this.pages=Array.from({length:this.pdfPages.length}).map((e,t)=>t+1),!this.pages||0===this.pages.length||this.pages.filter(e=>!e||e>this.pdfPages.length).length>0)return null===(i=this.modalService.lastModal)||void 0===i||i.dispose(),void this.modalService.createCommonModal({type:Ke.a.WARN,content:this.translatePipe.transform("INVALID_PAGE_RANGE"),confirmButton:!0}).addOnDisposeListener(()=>this.finishPrint());this.pages.length>Qe.c.printCriticalPageLength?(null===(n=this.modalService.lastModal)||void 0===n||n.dispose(),y.F.isIE()?this.modalService.createCommonModal({type:Ke.a.ERROR,content:this.translatePipe.transform("RECOMMEND_PRINT_PLUGIN"),cancelButton:!0}).addOnDisposeListener(()=>this.finishPrint()):this.modalService.createCommonModal({type:Ke.a.WARN,content:this.translatePipe.transform("RECOMMEND_PRINT_PLUGIN"),confirmButton:!0,confirmLabel:this.translatePipe.transform("CONTINUE"),cancelButton:!0}).addOnDisposeListener(t=>{t?e.complete():this.finishPrint()})):e.complete()})}checkLatestModuleInstallation(){return new zo.a(e=>{var t;null===(t=this.modalService.lastModal)||void 0===t||t.dispose(),this.modalService.createCommonModal({type:Ke.a.BASIC,title:this.translatePipe.transform("PRINT"),content:this.translatePipe.transform("CHECKING_PRINT_PLUGIN")}),this.agentService.checkVersion().subscribe(t=>{var i;this.agentService.isLatestVersion(t.body)?e.complete():(null===(i=this.modalService.lastModal)||void 0===i||i.dispose(),this.modalService.createModal(Do,{status:"needUpdate"}).addOnDisposeListener(()=>this.finishPrint()))},()=>{var e;null===(e=this.modalService.lastModal)||void 0===e||e.dispose(),this.modalService.createModal(Do,{status:"notInstall"}).addOnDisposeListener(()=>this.finishPrint())})})}applyChangesForDap(){return this.store$.pipe(Object(gt.d)("ALL",!0),Ct.a(1),v.a(e=>y.D.hasChanges(e)?this.exportChanges({streamdocsId:this.tempDocId},!0):jo.a))}saveChanges(){return new zo.a(e=>{Fo.a(this.exportChanges(this.doc),this.prepareDocument(),this.doc.isDap?this.applyChangesForDap():jo.a,je.a(()=>this.docValidity?this.validateDocument():jo.a)).subscribe(t=>e.next(t),t=>e.error(t),()=>e.complete())})}validateDocument(){const e=[];return Array.isArray(this.docValidity)?this.pdfPages.forEach(t=>{const i=this.pageDescriptions[t.ref].refId,n=this.docValidity.find(e=>e.refId===i);e.push(n?n.validity:"-")}):e.push(this.docValidity),this.changeService.exportExtraCommand({streamdocsId:this.tempDocId},[{command:"changeTsaAppearance",argument:[e]}],{incremental:!1,toTemp:!0}).pipe(Ve.a(e=>this.tempDocId=e.streamdocsId),v.a(()=>jo.a))}prepareDocument(){return new zo.a(e=>{var t;if(!this.isDAP)return void e.complete();if(null===(t=this.modalService.lastModal)||void 0===t||t.dispose(),this.pageDescriptions.reduce((e,t)=>e.includes(t.refId)?e:e.concat(t.refId),[]).every(e=>this.dapService.isDisabled(e)))return void e.next(this.translatePipe.transform("PRINT_CANCELLED"));this.modalService.createCommonModal({type:Ke.a.PROGRESS,title:this.translatePipe.transform("PRINT"),content:this.translatePipe.transform("PREPARING_TO_PRINT")});const i=this.downloadService.makeDownloadId(this.tempDocId,this.pdfInfo);i.pipe(S.a(e=>"progress"===e.status)).subscribe({next:e=>{var t,i;"split"===e.action?null===(t=this.lastCommonModal)||void 0===t||t.setProgressValue(Math.round(50*e.progress)):"merge"===e.action&&(null===(i=this.lastCommonModal)||void 0===i||i.setProgressValue(50+Math.round(50*e.progress)))},error:()=>{var e;null===(e=this.modalService.lastModal)||void 0===e||e.dispose(),this.modalService.createCommonModal({type:Ke.a.ERROR,content:this.translatePipe.transform("FAILED_TO_SPLIT_MERGE_TO_PRINT"),confirmButton:!0})}}),i.pipe(S.a(e=>"complete"===e.status)).subscribe({next:t=>{this.tempDocId=t.id,e.complete()}})})}exportChanges(e,t=!1){return new zo.a(i=>{var n;null===(n=this.modalService.lastModal)||void 0===n||n.dispose(),this.modalService.createCommonModal({type:Ke.a.BASIC,title:this.translatePipe.transform("PRINT"),content:this.translatePipe.transform("SAVING_CHANGE_TO_PRINT_DOC")});const o=this.changeService.exportChange(e,{reload:!1,incremental:!1,toTemp:!0,print:!0,afterMergingDap:t});o?o.subscribe({next:e=>{this.tempDocId=e.streamdocsId,i.complete()},error:()=>i.error(this.translatePipe.transform("FAILED_TO_SAVE_TO_PRINT"))}):(this.tempDocId=e.streamdocsId,i.complete())})}getDejavuToken(){return new zo.a(e=>{this.dataService.getDejavuToken(this.tempDocId).subscribe({next:t=>{t&&t.token?(this.dejavuToken=t.token,e.complete()):e.error(this.translatePipe.transform("FAILED_TO_PRINT"))},error:()=>e.error(this.translatePipe.transform("FAILED_TO_PRINT"))})})}printUsingBrowser(){return new zo.a(e=>{var t,i;null===(t=this.modalService.lastModal)||void 0===t||t.dispose(),this.modalService.createCommonModal({type:Ke.a.PROGRESS,title:this.translatePipe.transform("PRINT"),content:this.translatePipe.transform("PRINTING")}),this.authService.setCookie("accessToken",null===(i=y.o.token)||void 0===i?void 0:i.accessToken),this.subscriptionService.set("fetchImage",Vo.a(this.pages.map(e=>Object(Lo.e)(this.dataService.getPagePrintImageURI(this.tempDocId,e-1,Qe.c.printImageQuality.jpegQuality,!0,this.dejavuToken),"image/png"))).subscribe({next:t=>{this.printImagesDataUrls=t.map(e=>e.url),this.changeDetectorRef.markForCheck(),e.complete()},error:t=>e.error(t)}))})}printUsingModule(){return new zo.a(e=>{var t;null===(t=this.modalService.lastModal)||void 0===t||t.dispose(),this.modalService.createCommonModal({type:Ke.a.BASIC,title:this.translatePipe.transform("PRINT"),content:this.translatePipe.transform("PRINTING")});const i=y.F.nativeWindow;this.agentService.print(i.location.hostname,this.dataService.getDownloadUrl({docId:this.tempDocId,originalId:this.tempDocId!==this.doc.streamdocsId?this.doc.streamdocsId:void 0}),i.location.port,i.location.protocol,this.docValidity,""+(this.currentPageNo-1)).subscribe(t=>{const i=/([a-zA-Z]+#)?(\-?[0-9]+)/;let n;if(i.test(t.body)&&(n=i.exec(t.body)[2]),!n||Number(n)<0)switch(n||(n="Unknown"),n){case"-3":case"23":this.apiEventBridgeService.immediatePrintStartSrc.next({status:"CANCELLED"}),e.next(this.translatePipe.transform("PRINT_CANCELLED"));break;case"-20":e.error(this.translatePipe.transform("FAILED_TO_LOAD_DOC_TO_PRINT"));break;default:e.error(`${this.translatePipe.transform("FAILED_TO_PRINT")}\n(${this.translatePipe.transform("ERROR_CODE")}: ${n})`)}else this.apiEventBridgeService.immediatePrintStartSrc.next({status:"PRINTED"}),e.complete()},()=>e.error(this.translatePipe.transform("FAILED_TO_PRINT")))})}}return e.\u0275fac=function(t){return new(t||e)(M.Mb(l.f),M.Mb(M.h),M.Mb(qi.b),M.Mb(Ke.c),M.Mb(St.b),M.Mb(Ao.a),M.Mb(ae.b),M.Mb(l.e),M.Mb(l.k),M.Mb(s.G),M.Mb(Bo.b),M.Mb(O.h),M.Mb(P.d),M.Mb(h.b),M.Mb(l.l),M.Mb(nt.a),M.Mb($o.c),M.Mb(l.p))},e.\u0275cmp=M.Gb({type:e,selectors:[["sd-print-view"]],inputs:{doc:"doc",immediatePrintConfig:"immediatePrintConfig"},outputs:{finish:"finish"},features:[M.yb([s.G])],decls:3,vars:3,consts:[["width","360",3,"bodyTemplate","footerTemplate","header","close",4,"ngIf"],["id","print-container"],[3,"transform",4,"ngFor","ngForOf","ngForTrackBy"],["width","360",3,"bodyTemplate","footerTemplate","header","close"],["dialogBody",""],["finishDialogBody",""],["dialogFooter",""],["finishDialogFooter",""],["class","dialog-body",4,"ngIf"],[1,"dialog-body"],["value","all",3,"label","ngModel","ngModelChange"],["value","partial",3,"label","ngModel","ngModelChange"],[1,"range-label"],["size","tiny",3,"disabled","placeholder","ngModel","ngModelChange"],[4,"ngIf"],[1,"horizontal-division-line"],[1,"plugin-label"],[1,"plugin-description"],["color","grey","size","tiny",1,"ep-button",3,"click"],[1,"complete-description"],["color","white","size","small",1,"ep-button",3,"click"],["color","primary","size","small",1,"ep-button",3,"click"],[3,"load","error"]],template:function(e,t){1&e&&(M.Dc(0,Xo,12,9,"pu-dialog",0),M.Sb(1,"div",1),M.Dc(2,Yo,2,3,"div",2),M.Rb()),2&e&&(M.jc("ngIf",t.dialogVisible),M.zb(2),M.jc("ngForOf",t.printImagesDataUrls)("ngForTrackBy",t.trackByImage))},directives:[n.t,n.s,s.i,s.B,o.r,o.u,s.s],pipes:[n.b,T.a],styles:[".dialog-body[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin-top:24px}.dialog-body[_ngcontent-%COMP%]   pu-radio-button[_ngcontent-%COMP%]{margin-top:16px}.dialog-body[_ngcontent-%COMP%]   pu-radio-button[_ngcontent-%COMP%]:first-child{margin-top:0}.dialog-body[_ngcontent-%COMP%]   .range-label[_ngcontent-%COMP%]{font-size:12px;line-height:20px;font-family:NotoSans-Medium,sans-serif;color:#6c6c6c;margin-top:18px}.dialog-body[_ngcontent-%COMP%]   .range-label.disabled[_ngcontent-%COMP%]{opacity:.5}.dialog-body[_ngcontent-%COMP%]   pu-input[_ngcontent-%COMP%]{width:160px}.dialog-body[_ngcontent-%COMP%]   .horizontal-division-line[_ngcontent-%COMP%]{width:100%;height:1px;margin:16px 0;background-color:#dadada}.dialog-body[_ngcontent-%COMP%]   .plugin-label[_ngcontent-%COMP%]{font-size:14px;line-height:24px;font-family:NotoSans-Medium,sans-serif;color:#1e1e1e;display:block}.dialog-body[_ngcontent-%COMP%]   .plugin-description[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Regular,sans-serif;color:#6c6c6c;margin-top:6px}.dialog-body[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:32px}.dialog-body[_ngcontent-%COMP%]   .complete-description[_ngcontent-%COMP%]{font-size:13px;line-height:22px;font-family:NotoSans-Regular,sans-serif;color:#6c6c6c}button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:8px}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),e})(),Qo=(()=>{class e{}return e.\u0275mod=M.Kb({type:e}),e.\u0275inj=M.Jb({factory:function(t){return new(t||e)},imports:[[_n.g.forChild([{path:"",component:Hn},{path:"documents/:streamdocsId",component:Hn},{path:"ebook/:streamdocsId",component:fe}])],_n.g]}),e})();var Jo=i("jbvT"),es=i("JqVi"),ts=i("2tvt");let is=(()=>{class e{}return e.\u0275mod=M.Kb({type:e}),e.\u0275inj=M.Jb({factory:function(t){return new(t||e)},providers:[No.a,Tn.a],imports:[[yn.b,Sn,q,ko,p.b,Qo,o.B,h.a,me.a,P.b,n.c,o.n,s.j,s.t,s.A,s.C]]}),e})();M.xc(Hn,[Jo.a,ni,dt,H,Ro,es.a,_n.h,_n.d,_n.f,_n.e,_n.i,o.H,o.w,o.G,o.d,o.x,o.A,o.b,o.D,o.E,o.z,o.r,o.s,o.C,o.p,o.o,o.y,o.c,o.e,o.i,o.l,o.j,o.m,o.f,ts.a,sn,mn,n.q,n.r,n.s,n.t,n.A,n.w,n.x,n.y,n.z,n.u,n.v,o.u,o.v,o.t,s.i,s.s,s.z,s.B,Hn,Ko,Do],[T.a,n.b,n.G,n.p,n.k,n.E,n.g,n.C,n.F,n.d,n.f,n.i,n.j,n.l])}}]);